(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f856486"],{"13c5":function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"app-main components-container"},[a("div",{staticClass:"panelInfo app-container",attrs:{id:"panel"}},[a("split-pane",{ref:"getWidth",attrs:{split:"vertical","min-percent":0,"default-percent":74,"max-percent":100,id:"split-pane"},on:{resize:t.resize}},[a("template",{slot:"paneL"},[a("div",{staticClass:"left-container"},[a("Map")],1)]),t._v(" "),a("template",{slot:"paneR"},[a("split-pane",{attrs:{split:"horizontal","default-percent":100}},[a("template",{slot:"paneL"},[a("RobotStatus"),t._v(" "),a("RobotInfo")],1)],2)],1)],2)],1)])},o=[],s=a("72ed"),r=a("8142"),l=a("1ffa"),c=a("19ab"),d=a.n(c),u={name:"AppMain",components:{Map:s["a"],RobotStatus:r["a"],RobotInfo:l["a"],splitPane:d.a},data:function(){return{screenWidth:window.innerWidth}},methods:{resize:function(){var t=this;n&&clearTimeout(n),n=setTimeout((function(){var e=(t.screenWidth*t.$refs.getWidth.percent/100).toFixed(1);t.$store.commit("MAP_WIDTH",e),n=void 0}),1e3)}}},h=u,f=(a("a6fd"),a("2877")),p=Object(f["a"])(h,i,o,!1,null,"b1ec6214",null);e["default"]=p.exports},1937:function(t,e,a){"use strict";var n=a("27ba"),i=a.n(n);i.a},"1ffa":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{staticClass:"tabs",staticStyle:{height:"calc(100% - 220px)",padding:"0 5px 40px"},on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"设备信息",name:"info"}},[a("div",{staticClass:"panelBottom"},[a("div",{staticClass:"bottom",attrs:{id:"bottomTable"}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.onLineRobot,"row-class-name":"tablePanel",height:t.screenHeight-305,"highlight-current-row":!0,"header-cell-style":{background:"#fff",color:"#242835",fontWeight:"normal",borderColor:"rgba(255,255,255,0.2)"}},on:{"row-click":t.currentRobotInfo}},[a("el-table-column",{attrs:{prop:"code",label:"机器人",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(2===e.row.enabledState?"停用":e.row.status))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"电量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[e.row.ele<30?a("span",{staticClass:"low-ele"},[t._v(t._s(e.row.ele)+"%")]):100==e.row.ele?a("span",{staticClass:"full-ele"},[t._v(t._s(e.row.ele)+"%")]):a("span",[t._v(t._s(e.row.ele)+"%")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"告警",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.warnId>0?"low-ele":""},[t._v(t._s(t._f("errorStatus")(e.row.warnId)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"详情",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.cookiesVal?a("div",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"vehicle/list",expression:"'vehicle/list'"}],staticClass:"detail",on:{click:function(a){return t.detail(e.$index,e.row)}}},[t._v("详情")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.cookiesVal?a("div",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"dashboard/confirmation",expression:"'dashboard/confirmation'"},{name:"show",rawName:"v-show",value:"用户确认中"===e.row.status,expression:"scope.row.status === '用户确认中'"}],staticClass:"detail",on:{click:function(a){return t.actionBtn(e.$index,e.row)}}},[t._v("确认")]):t._e()]}}])})],1)],1)])]),t._v(" "),a("el-tab-pane",{ref:"orderLine",attrs:{label:"任务链",name:"orderLine"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-form",{ref:"tableform",staticClass:"order-temp-table-form",attrs:{size:"small",inline:!0,model:t.formData}}),t._v(" "),a("div",{staticClass:"order-temp-table-oper"},[a("div",{staticClass:"mr"},[a("el-select",{staticClass:"select",attrs:{placeholder:"任务链组",clearable:"",multiple:"","collapse-tags":""},on:{change:t.handleGroup},model:{value:t.tankLinesGroup,callback:function(e){t.tankLinesGroup=e},expression:"tankLinesGroup"}},t._l(t.filterGroupList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("div",{staticClass:"mr"},[a("el-input",{attrs:{placeholder:"请输入模板名称",clearable:""},on:{change:t.searchList},model:{value:t.fuzzyName,callback:function(e){t.fuzzyName=e},expression:"fuzzyName"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.searchList}},[t._v("搜索")])],1),t._v(" "),a("elx-editable",{ref:"elxEditable",staticClass:"order-temp-table",staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"updateTime",order:"descending"},data:t.tableData,"edit-config":{trigger:"manual",mode:"row",clearActiveMethod:t.clearActiveMethod,disabledValidTip:t.disabledValidTip,showIcon:t.showIcon},"row-class-name":"tableRow","header-cell-class-name":"headerRow","edit-rules":t.validRules,"highlight-current-row":!1,height:t.screenHeight-370},on:{"update:data":function(e){t.tableData=e},"expand-change":t.editBtn}},[a("elx-editable-column",{attrs:{prop:"orderChainTemplateId",label:"ID",width:"80",align:"center"}}),t._v(" "),a("elx-editable-column",{attrs:{prop:"orderChainTemplateName",label:"模板名称","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.submitRowEvent(e.row)}}},[t._v(t._s(e.row.orderChainTemplateName))])]}}])}),t._v(" "),a("elx-editable-column",{attrs:{label:"操作",width:"100",align:"center",prop:"orders","label-class-name":"red-mark"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{ref:"viewOrder",attrs:{underline:!1},on:{click:function(a){return t.editBtn(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),e.row.orderChainTemplateName&&e.row.orderChainTemplateId?a("el-link",{staticClass:"submitBtn",attrs:{size:"mini",type:"success",underline:!0},on:{click:function(a){return t.submitRowEvent(e.row)}}},[t._v("提交")]):t._e()]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"任务链",visible:t.editDialog,center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.editDialog=e},close:t.closeDialog}},[a("elx-editable",{ref:"elxDialogEditable",staticClass:"order-temp-table-detail",staticStyle:{width:"100%"},attrs:{data:t.orders,height:"466","row-key":"id","default-sort":{prop:"indexNum",order:t.descending},"header-cell-class-name":"headerRow","edit-rules":t.validRules,"row-class-name":t.tableRowClassName},on:{"update:data":function(e){t.orders=e}}},[a("elx-editable-column",{attrs:{type:"index",width:"55",label:"序号",align:"center",prop:"indexNum"}}),t._v(" "),a("elx-editable-column",{attrs:{label:"工位点",align:"center",prop:"pointVal","label-class-name":"red-mark",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.editIndex===e.$index||e.row.pointVal?e.row.pointVal&&t.editIndex!==e.$index?a("div",[a("span",[t._v(t._s(t._f("mapPoints")(e.row.pointVal[1])))])]):t.editIndex===e.$index?a("div",[e.row.pointVal?a("span",[a("el-cascader",{staticClass:"self-placeholder",attrs:{options:t.editWorkSpaceList,"show-all-levels":!1,filterable:"",clearable:"",size:"small",props:t.areaProp,placeholder:t._f("mapPoints")(e.row.pointVal[1])},on:{"expand-change":t.handleExpandChange},model:{value:e.row.pointVal,callback:function(a){t.$set(e.row,"pointVal",a)},expression:"scope.row.pointVal"}})],1):a("span",[a("el-cascader",{staticClass:"self-placeholder",attrs:{options:t.editWorkSpaceList,"show-all-levels":!1,filterable:"",clearable:"",size:"small",props:t.areaProp},on:{"expand-change":t.handleExpandChange},model:{value:e.row.pointVal,callback:function(a){t.$set(e.row,"pointVal",a)},expression:"scope.row.pointVal"}})],1)]):t._e():a("div",[t._v(t._s(t._f("mapPoints")(e.row.endPointId)))])]}}])}),t._v(" "),a("elx-editable-column",{attrs:{prop:"action",label:"任务",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("actionType")(e.row.action)))]}}])}),t._v(" "),a("elx-editable-column",{attrs:{prop:"orient",label:"对接方向",align:"center"}}),t._v(" "),a("elx-editable-column",{attrs:{prop:"offset",label:"对接距离",align:"center",width:"140"}}),t._v(" "),a("elx-editable-column",{attrs:{prop:"layingoff",label:"上下料属性",align:"center"}}),t._v(" "),a("elx-editable-column",{attrs:{label:"自定义参数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.info&&"[]"!==e.row.info&&"null"!=e.row.info?a("div",[a("el-tooltip",{attrs:{placement:"left"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("ul",{staticClass:"action-list"},t._l(JSON.parse(e.row.info),(function(e,n){return a("li",{key:n},[a("label",[t._v("键："+t._s(Object.keys(e).join(""))+",")]),t._v(" "),a("label",[t._v("值："+t._s(Object.values(e).join("")))])])})),0)]),t._v(" "),a("el-link",{attrs:{underline:!1},on:{click:function(a){return t.addInfo(e.$index,e.row,!0)}}},[t._v("查看")])],1)],1):t._e()]}}])})],1),t._v(" "),a("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"order/templateList/update",expression:"'order/templateList/update'"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editDialogCancel}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"自定义参数",visible:t.dialogVisible,width:"500px",center:"",modal:!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:t.dynamicValidateForm,"label-width":"60px"}},t._l(t.dynamicValidateForm.domains,(function(e,n){return a("el-form-item",{key:e.key,attrs:{prop:"domains."+n+".value",label:String(n+1),rules:[{required:!0,message:"请输入键和值",trigger:"blur"}]}},[a("label",[t._v("键 ")]),t._v("\n            : \n            "),a("el-input",{staticStyle:{width:"100px"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"domain.name"}}),t._v(" \n            "),a("label",[t._v("值 ")]),t._v("\n            : \n            "),a("el-input",{staticStyle:{width:"100px"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"domain.value"}})],1)})),1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)])],1)},i=[],o=(a("456d"),a("7f7f"),a("ac6a"),a("7514"),a("db72")),s=a("2f62"),r=a("a78e"),l=a.n(r),c=a("7661"),d=a("aa98"),u=(a("c695"),a("8a23")),h=a("5c96"),f=a("b199"),p=a("333d"),g=a("4360"),m={components:{Pagination:p["a"]},computed:Object(o["a"])({},Object(s["b"])(["active_vehicle","onLineRobot","token","vMapId","currentRobotId","screenHeight","orderTemplateData","editModel","deviceGroupList","domainTypeList","actionTypeList","mapPoints","domainMapList","domainId"])),watch:{onLineRobot:{handler:function(t,e){var a=this;0!==t.length&&this.$refs.singleTable.setCurrentRow(t.find((function(t){return t.id==a.currentRobotId}))),t.length!==e.length&&(clearInterval(this.httpTimer),this.currentId=0,this.$store.commit("TRAFFIC_POINTS",[]))}},currentId:{handler:function(t,e){}},vMapId:{handler:function(t,e){t!==e&&(this.currentId=0)}},domainId:function(){this.tabClick()}},data:function(){return{websock:null,vehicleId:"",warnData:"",robotList:0,cookiesVal:"",currentRow:null,value:!0,currentId:0,httpTimer:null,isClick:!1,activeName:"info",total:0,pageNum:1,pageSize:10,dialogVisible:!1,dynamicValidateForm:{domains:[{name:"",value:""}]},descending:"",pointsList:[],orientOptions:[{label:"左",value:0},{label:"右",value:1},{label:"前",value:2},{label:"后",value:3},{label:"左调整",value:4},{label:"右调整",value:5},{label:"后调整",value:6}],layingoffOptions:[{label:"上料",value:0},{label:"下料",value:1}],endPointCodeList:[],visible:!1,disabledValidTip:!1,loading:!1,sexList:[],regionList:[],pointsVal:"",list:[],canDispatchVehicles:[],pageVO:{currentPage:1,pageSize:10,totalResult:0},isClearActiveFlag:!0,tableData:[],tankLinesGroup:[],rowDetails:[],editDialog:!1,fuzzyName:"",formData:{},showIcon:!1,priorityOption:[{label:"高",value:1},{label:"普通",value:0},{label:"低",value:-1},{label:"紧急",value:2}],domainListOption:{name:"ElSelect"},groupList:[],actionList:[],pointList:[],orders:[],saveDomainList:{},idnexId:0,editWorkSpaceList:[],editVal:[],editIndex:-1,addStatus:!1,hasUnEditOrder:!1,sortOrderTemplateNun:0,infoIndex:-1,submitStatus:!0,validRules:{orderChainTemplateName:[{required:!0,message:"请输入模板名称",trigger:"change"},{min:3,max:50,message:"名称长度 4-20 个字符",trigger:"change"}],domainId:[{required:!0,message:"请选择区域",trigger:"change"}],groupId:[{required:!0,message:"请选择组",trigger:"change"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}],pointVal:[{required:!0,message:"请选择工位点",trigger:"change"}],action:[{required:!0,message:"请选择任务",trigger:"change"}],domianGroup:[{required:!0,message:"请添加组",trigger:"change"}]},filterGroupList:[]}},beforeDestroy:function(){this.currentId=0,clearInterval(this.httpTimer)},created:function(){this.cookiesVal=l.a.get("JSESSIONID")},methods:{tabClick:function(){var t=this;if("orderLine"===this.activeName){var e=[];this.domainTypeList.forEach((function(a){var n={},i=[];t.deviceGroupList.forEach((function(t){a.id===t.domainId&&(n={value:a.id,label:a.name},i.push({value:t.id,label:t.name}),n.children=i)})),0!==Object.keys(n).length&&e.push(n)}));var a=[];this.filterGroupList=this.deviceGroupList.filter((function(e){return e.domainId==t.domainId&&a.push(e.id),e.domainId==t.domainId})),this.tankLinesGroup=a,this.groupList=e,this.saveDomainList=this.domainListOption,this.actionList=this.actionTypeList.map((function(t,e){return{label:t.name,value:t.actionType}})),this.setPageInfo(),this.filterGroupList.length>0?this.getList():this.tableData=[]}},actionBtn:function(t,e){console.log(e),this.$confirm('确认 <label class="link">'.concat(e.code,"</label> 机器人?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then((function(){Object(d["k"])(e.id)}))},currentRobotInfo:function(t,e,a){if(this.currentId===t.id)this.$store.commit("CURRENT_ROBOT_ID",0),this.$store.commit("TRAFFIC_POINTS",[]),clearInterval(this.httpTimer),this.currentId=0;else{this.currentId=t.id;var n=t.id;this.$store.dispatch("RESET_ROBOT_ID"),this.$store.dispatch("SAVE_ROBOT_ID",n),this.$store.commit("TRAFFIC_POINTS",[])}},detail:function(t,e){this.$store.commit("DEVICEINFO",t),this.$router.push({path:"/vehicle/details/".concat(e.id)})},addInfo:function(t,e,a){if(a){var n=JSON.parse(e.info),i=[];n.forEach((function(t,e){var a={};for(var n in t)a.name=n,a.value=t[n];i.push(a)})),this.dynamicValidateForm.domains=i}else this.dynamicValidateForm.domains=[{name:"",value:""}];this.infoIndex=t,this.dialogVisible=!0},searchList:function(){this.getList(this.fuzzyName)},submitRowEvent:function(t){var e=this,a=t.priority,n=t.domainId,i=t.workerId,o=t.groupId,s=t.orders,r=t.orderChainTemplateName,c=t.cycle;if(!s||0===s.length)return Object(h["Message"])({type:"warning",message:"请添加任务链"}),!1;var d={po:{priority:a,domainId:n,workerId:i,groupId:o,cycle:c,fromDetail:"".concat(l.a.get("userName"),":").concat(l.a.get("userRoles")),name:r},orders:s};if(s.forEach((function(t){t.pointVal=null,t.endPointId||(e.submitStatus=!1),t.action||(e.submitStatus=!1)})),!this.submitStatus)return Object(h["Message"])({type:"warning",message:"任务链编辑错误"}),!1;this.$confirm('确认提交&nbsp;<label class="link">'.concat(t.orderChainTemplateName,"</label>&nbsp;任务?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){Object(f["x"])(d)}))},rowDrop:function(){var t=this;this.$nextTick((function(){setTimeout((function(){var e=document.querySelector(".order-temp-table-detail .el-table__body-wrapper tbody");e&&u["a"].create(e,{handle:".drag-btn",onEnd:function(e){var a=e.newIndex,n=e.oldIndex,i=t.orders.splice(n,1)[0];t.orders.splice(a,0,i)}})}),100)}))},closeDialog:function(){this.editIndex=-1,this.showIcon=!1,this.disabledValidTip=!1,this.orders=[],this.submitStatus=!0,this.descending="ascending"},handleExpandChange:function(t){},editDialogCancel:function(){this.editIndex=-1,this.editDialog=!1},clearActiveMethod:function(t){var e=t.type,a=t.row;return this.isClearActiveFlag&&"out"===e?this.checkOutSave(a):this.isClearActiveFlag},tableRowClassName:function(t){var e=t.row,a=t.rowIndex;e.index=a},checkOutSave:function(t){var e=this;this.showIcon=!1;t.domainId,t.cycle,t.groupId;var a=t.orderChainTemplateId,n=t.orderChainTemplateName,i=t.domianGroup,o=t.priority;if(this.editDialog)this.isClearActiveFlag=!1;else if(a||t.layingoff||this.showIcon){if(this.$refs.elxEditable.hasRowChange(t))return this.isClearActiveFlag=!1,h["MessageBox"].confirm("编辑数据未保存，请确认操作","提示",{distinguishCancelAndClose:!0,confirmButtonText:"保存数据",cancelButtonText:"取消修改",type:"warning"}).then((function(){e.$refs.elxEditable.clearActive(),e.saveRowEvent(t)})).catch((function(a){"cancel"===a&&(e.$refs.elxEditable.revert(t),e.$refs.elxEditable.clearActive())})).then((function(){e.isClearActiveFlag=!0})),!1}else n&&i&&null!==o&&(this.isClearActiveFlag=!1,h["MessageBox"].confirm("新增数据未保存，请确认操作","提示",{distinguishCancelAndClose:!0,confirmButtonText:"保存数据",cancelButtonText:"移除数据",type:"warning"}).then((function(a){e.$refs.elxEditable.clearActive(),e.saveRowEvent(t)})).catch((function(a){"cancel"===a&&e.$refs.elxEditable.remove(t)})).then((function(){e.isClearActiveFlag=!0})));return this.isClearActiveFlag},saveRowEvent:function(t){var e=this;this.$refs.elxEditable.validateRow(t,(function(a){a&&(e.loading=!0,e.showIcon=!1,e.$refs.elxEditable.clearActive(),t.domainId=t.domianGroup[0],t.groupId=t.domianGroup[1],t.domianGroup=null,t.orders=t.orders?t.orders:[],t.orderChainTemplateId?Object(f["h"])(t).then((function(){e.getList(),e.loading=!1})).catch((function(t){e.loading=!1})):(delete t.orderChainTemplateId,Object(f["v"])(t).then((function(){e.getList(),e.loading=!1})).catch((function(t){e.getList(),e.loading=!1}))))}))},editBtn:function(t,e){var a=this,n=e;this.editVal=n;var i=this,o={orderTemplateData:n,editModel:!0};this.$store.dispatch("ORDER_MODULE_SET",o),n.orders instanceof Array&&n.orders.length>0&&(this.orders=n.orders,this.orders.forEach((function(t){t.pointVal=[t.mapId,t.endPointId]})),this.rowDrop());var s=n.domainId?n.domainId:n.domianGroup[0];Object(c["f"])(s).then((function(t){t.forEach((function(t){t.label=t.alias?t.alias:t.code})),a.endPointCodeList=t,g["a"].dispatch("GET_MAP_POINTS",t).then((function(){a.areaProp={lazy:!0,lazyLoad:function(t,e){setTimeout((function(){var a=[];1===t.level&&(i.endPointCodeList.forEach((function(e,n){e.mapId===t.value&&a.push({label:e.label,value:e.id,leaf:1==t.level})})),e(a))}),100)}},a.editDialog=!0}))}));var r=this.domainMapList.find((function(t){return t.value===s}));r&&(this.editWorkSpaceList=r.children)},handleGroup:function(t){this.setPageInfo(),this.getList(t,this.fuzzyName)},setPageInfo:function(){this.$store.commit("PAGE_NUM",1),this.$store.commit("CURRENT_PAGE",1)},getList:function(){var t=this;if(0===this.tankLinesGroup.length)return this.tableData=[],void(this.loading=!1);var e=this.tankLinesGroup.join(","),a={groupIds:e,fuzzyName:this.fuzzyName,domainId:this.domainId};Object(f["s"])(a).then((function(e){e.total>0?(e.data.forEach((function(t){t.domianGroup=[t.domainId,t.groupId]})),t.tableData=e.data):t.tableData=[],t.total=e.total,t.loading=!1})).catch((function(e){t.loading=!1}))}}},v=m,b=(a("7087"),a("2877")),x=Object(b["a"])(v,n,i,!1,null,"3e3e5cca",null);e["a"]=x.exports},"21b3":function(t,e,a){},"27ba":function(t,e,a){},"28a5":function(t,e,a){"use strict";var n=a("aae3"),i=a("cb7c"),o=a("ebd6"),s=a("0390"),r=a("9def"),l=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,h=[].push,f="split",p="length",g="lastIndex",m=4294967295,v=!d((function(){RegExp(m,"y")}));a("214f")("split",2,(function(t,e,a,d){var b;return b="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[p]||2!="ab"[f](/(?:ab)*/)[p]||4!="."[f](/(.?)(.?)/)[p]||"."[f](/()()/)[p]>1||""[f](/.?/)[p]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!n(t))return a.call(i,t,e);var o,s,r,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,f=void 0===e?m:e>>>0,v=new RegExp(t.source,d+"g");while(o=c.call(v,i)){if(s=v[g],s>u&&(l.push(i.slice(u,o.index)),o[p]>1&&o.index<i[p]&&h.apply(l,o.slice(1)),r=o[0][p],u=s,l[p]>=f))break;v[g]===o.index&&v[g]++}return u===i[p]?!r&&v.test("")||l.push(""):l.push(i.slice(u)),l[p]>f?l.slice(0,f):l}:"0"[f](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,n){var i=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,i,n):b.call(String(i),a,n)},function(t,e){var n=d(b,t,this,e,b!==a);if(n.done)return n.value;var c=i(t),h=String(this),f=o(c,RegExp),p=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"y":"g"),x=new f(v?c:"^(?:"+c.source+")",g),y=void 0===e?m:e>>>0;if(0===y)return[];if(0===h.length)return null===l(x,h)?[h]:[];var w=0,_=0,k=[];while(_<h.length){x.lastIndex=v?_:0;var I,C=l(x,v?h:h.slice(_));if(null===C||(I=u(r(x.lastIndex+(v?0:_)),h.length))===w)_=s(h,_,p);else{if(k.push(h.slice(w,_)),k.length===y)return k;for(var S=1;S<=C.length-1;S++)if(k.push(C[S]),k.length===y)return k;_=w=I}}return k.push(h.slice(w)),k}]}))},2941:function(t,e,a){"use strict";var n=a("76a0"),i=a.n(n);i.a},"333d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[a("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},i=[],o=(a("c5f6"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,15,20,25]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.currentPage=1,this.$emit("pagination",{page:1,limit:t})},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}}),s=o,r=(a("becd"),a("2877")),l=Object(r["a"])(s,n,i,!1,null,"f4488856",null);e["a"]=l.exports},"36bd":function(t,e,a){"use strict";var n=a("4bf8"),i=a("77f1"),o=a("9def");t.exports=function(t){var e=n(this),a=o(e.length),s=arguments.length,r=i(s>1?arguments[1]:void 0,a),l=s>2?arguments[2]:void 0,c=void 0===l?a:i(l,a);while(c>r)e[r++]=t;return e}},"3f0f":function(t,e,a){},"48bb":function(t,e,a){},"5df3":function(t,e,a){"use strict";var n=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=n(e,a),this._i+=t.length,{value:t,done:!1})}))},"67ab":function(t,e,a){var n=a("ca5a")("meta"),i=a("d3f4"),o=a("69a8"),s=a("86cc").f,r=0,l=Object.isExtensible||function(){return!0},c=!a("79e5")((function(){return l(Object.preventExtensions({}))})),d=function(t){s(t,n,{value:{i:"O"+ ++r,w:{}}})},u=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!l(t))return"F";if(!e)return"E";d(t)}return t[n].i},h=function(t,e){if(!o(t,n)){if(!l(t))return!0;if(!e)return!1;d(t)}return t[n].w},f=function(t){return c&&p.NEED&&l(t)&&!o(t,n)&&d(t),t},p=t.exports={KEY:n,NEED:!1,fastKey:u,getWeak:h,onFreeze:f}},"68a5":function(t,e,a){"use strict";var n=a("70bc"),i=a.n(n);i.a},"6c7b":function(t,e,a){var n=a("5ca1");n(n.P,"Array",{fill:a("36bd")}),a("9c6c")("fill")},"6cf6":function(t,e,a){"use strict";var n=a("48bb"),i=a.n(n);i.a},7087:function(t,e,a){"use strict";var n=a("b90d"),i=a.n(n);i.a},"70bc":function(t,e,a){},"72ed":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map__view"},[a("div",{staticClass:"map-select"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectWorkMap},model:{value:t.workMap,callback:function(e){t.workMap=e},expression:"workMap"}},t._l(t.workSpaceList,(function(e,n){return a("el-option-group",{key:e.name},[a("span",{staticClass:"workSpaceNumber"},[t._v(t._s(n+1))]),t._v(" "),a("span",{staticClass:"workSpaceSelect"},[a("span",[t._v(t._s(e.name))])]),t._v(" "),0!==e.mapNames.length?t._l(e.mapNames,(function(n,i){return a("el-option",{key:n,staticClass:"mapNames",attrs:{label:n,value:e.mapIds[i]}},[a("span",{staticClass:"workMapSelect"},[t._v(t._s(n))])])})):[a("el-option",{attrs:{disabled:"",value:"none"}},[a("span",{staticClass:"workMapSelect"},[t._v("无地图")])])]],2)})),1)],1),t._v(" "),a("div",{staticClass:"map-view",staticStyle:{width:"100%",height:"100%",overflow:"hidden","border-radius":"5px"},attrs:{id:"map__View"}}),t._v(" "),a("div",{staticClass:"bottom-btn"},[a("div",{staticClass:"robot_name",on:{click:t.showRobot}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.initConf.nameEnabled?"关闭机器人名称":"显示机器人名称",placement:"left"}},[a("i",{staticClass:"icon iconfont icon-xianshixinjian",style:{color:t.initConf.nameEnabled?"":"gray"}})])],1),t._v(" "),a("div",{staticClass:"fullBtn"},[a("div",{attrs:{id:"fullBtn"},on:{click:t.screenfullBtn}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.fullStatus?"退出全屏":"全屏",placement:"left"}},[a("i",{staticClass:"icon iconfont",class:t.fullStatus?"icon-suoxiao":"icon-quanping1"})])],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:"","close-on-click-modal":!1,modal:!1},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticClass:"del-dialog-cnt"},[a("i",{staticClass:"el-icon-error"}),t._v(" "),a("div",{staticClass:"text"},[t._v("地图数据请求超时，请检查网络")])]),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.reRequest}},[t._v("重试")])],1)]),t._v(" "),t._m(0)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span"),t._v(" "),a("span")])}],o=(a("ac6a"),a("7514"),a("db72")),s=a("93bf"),r=a.n(s),l=a("2f62"),c=a("caf0"),d=a("b199"),u=a("7661"),h=a("a78e"),f=a.n(h),p=(a("6c7b"),a("75fc")),g=(a("20d6"),a("768b")),m=(a("a481"),a("28a5"),a("c5f6"),a("5df3"),a("f400"),a("d225")),v=a("b0b4"),b="./static/img/",x=function(t){var e=b+"running.png";if(t.warnId>0)e=b+"warn.png";else if(2===t.enabledState)e=b+"stop.png";else{var a=t.status;switch(a){case"充电中":e=b+"charge.png";break;case"空闲":e=b+"running.png";break;case"移动中":e=b+"running.png";break;case"任务等待中":e=b+"busy.png";break;case"充电重试中":e=b+"busy.png";break;case"用户确认中":e=b+"busy.png";break;case"交管请求中":e=b+"busy.png";break;case"任务改派中":e=b+"busy.png";break;case"异常告警中":e=b+"warn.png";break;default:e=b+"running.png";break}}return e},y=new Image;y.src=b+"point-normal.png";var w=new Image;w.src=b+"point-charge.png";var _=new Image;_.src=b+"point-rest.png";var k=new Image;k.src=b+"point-dock.png";var I=new Image;I.src=b+"point-roller.png";var C=function(t){var e=new Image;switch(t){case 1:e.src=b+"point-station-reserve.png";break;case 2:e.src=b+"point-station-using.png";break;default:e.src=b+"point-station-normal.png";break}return e},S={0:y,2:w,3:_,4:k,5:I,6:C},E=new Image;E.src=b+"arrow.png";var T=["rgb(255,102,51)","rgb(204,255,51)","rgb(108, 207, 169)","rgb(64, 174, 247)","rgb(157, 223, 125)","rgb(240, 198, 74)","rgb(221, 158, 97)","rgb(141, 163, 112)","rgb(115, 136, 220)","rgb(133, 88, 219)","rgb(203, 135, 226)","rgb(227, 137, 163)","rgb(204,102,0)"],M=a("2ef0"),L=a.n(M),R=function(t,e,a,n,i,o){e.innerHTML+='<polyline class="agv-path" id="agv-path-'.concat(n.id,'" \n                                        stroke-dasharray="5 10" stroke-dasharray="20" \n                                        stroke="').concat(T[i%T.length],'"\n                                        stroke-width="3"\n                                        stroke-opacity="0.8"\n                                        fill="transparent"\n                                        points=""\n                            ></polyline>'),a.innerHTML+='<g class="agv-layer" id="agv-occupy-'.concat(n.id,'"></g>'),t.innerHTML+='<g class="agv-layer" id="agv-'.concat(n.id,'" transform="translate(').concat(o[0][0]-10,",").concat(o[0][1]-10,") rotate(").concat(n.angle,',10,10)">\n                            <image class="agv-icon" x="0" y="0" data-agv="').concat(n.id,'" width="20" height="20" xlink:href="').concat(x(n),'"/>\n                            <g transform="rotate(').concat(-n.angle,',10,10)">\n                               <text x="25" y="15" opacity="0.8" fill=').concat(n.isLoad?"#F56C6C":"#1afa29",' style="font-size:14px;font-weight:600">').concat(n.code,'</text>\n                                <g style="display: ').concat(n["clickChecked"]?"block":"none",'" class="agv-layer-text">\n                                    <rect class="agv-layer-text-rect" x="10" y="-130" rx="10" ry="10" width="180" height="140"></rect>\n                                    <text x="20" y="-120" fill="#00ffff" class="agv-layer-code">').concat(n.code,'</text>\n                                    <line x1="20" y1="-110" x2="150" y2="-110" style="stroke:#ffffff;stroke-width:0.5"></line>\n                                    <text x="20" y="-90" fill="#00ffff">电量:   ').concat(n.ele,'%</text>\n                                    <text x="20" y="-70" fill="#00ffff">温度:   ').concat(n.temperature,'</text>\n                                    <text x="20" y="-50" fill="#00ffff">目的地:   ').concat(n.destination,'</text>\n                                    <text x="20" y="-30" fill="#00ffff">信息:   ').concat(n.info,"</text>\n                                </g>\n                            </g></g>")},P=R,N=(a("7f7f"),a("a091")),V=N.Warning,O=new Map;V.forEach((function(t){O.set(t.id,t.name)}));var A=function(t,e,a){var n="无";n=O.get(e.warnId)||n,t.innerHTML='<image x="0" y="0"  class="agv-icon" data-agv="'.concat(e.id,'" width="20" height="20" xlink:href="').concat(x(e),'"/>                           \n                        <g>\n                           <text x="25" y="15" opacity="0.8" fill=').concat(e.isLoad?"#F56C6C":"#1afa29",'  style="font-size:14px;font-weight:600">').concat(a?e.code:"",'</text>\n                            <g style="display: ').concat(e["clickChecked"]?"block":"none",'" class="agv-layer-text">\n                                <rect class="agv-layer-text-rect" x="10" y="-150" rx="10" ry="10" width="180" height="140"></rect>\n                                <text x="20" y="-120" fill="#00ffff" class="agv-layer-code">').concat(e.code,'</text>\n                                <line x1="20" y1="-110" x2="150" y2="-110" style="stroke:#ffffff;stroke-width:0.5"></line>\n                                <text x="20" y="-90" fill="#00ffff">电量:   ').concat(e.ele,'%</text>\n                                <text x="20" y="-70" fill="#00ffff">温度:   ').concat(e.temperature,'</text>\n                                <text x="20" y="-50" fill="#00ffff">目的地:   ').concat(e.destination,'</text>\n                                <text x="20" y="-30" fill="#00ffff">信息:   ').concat(e.status," - ").concat(n,"</text>\n                            </g></g>")},$=A,D=3.14159265;function z(t){var e,a=0,n=t.endX-t.startX,i=t.endY-t.startY;return 0===n?a=i>0?0:180:n>0?0===i?a=90:i>0?(e=Math.abs(n/i),a=180*Math.atan(e)/D):i<0&&(e=Math.abs(n/i),a=180*Math.atan(e)/D,a=180-a):0===i?a=270:i>=0?(e=Math.abs(n/i),a=180*Math.atan(e)/D,a=360-a):(e=Math.abs(n/i),a=180*Math.atan(e)/D,a=180+a),L.a.round(a*D/180,3)}var B=z,X=a("d032"),j=["点位ID","代码","别名","功能类型","X坐标值","Y坐标值","角度值","对接方向","对接距离","属性1","属性2"],Y=["是","否"],G=["路径标点","工位点","充电点","休息点","对接点","滚筒点"],F=["左","右","前","后","左调整","右调整","后调整"],W=["路径ID","起点ID","终点ID","最大速度","安全距离","到点模式","是否避障","导航模式","转弯方式","空车权重","满车权重"],H=["精确","一般","精确（无头模式）","一般（无头模式）"],q=["前进模式","后退模式","无头模式"],U=["圆弧转弯","直角转弯"],J=function(t,e){var a="";return t.forEach((function(t,n){a+='<div class="item">\n       <div>'.concat(t,"</div>\n      <div>").concat(e[n],"</div>\n  </div>")})),a},K=function(){function t(){Object(m["a"])(this,t),this.addAGV=P,this.updateAGV=$,this.innerSpots=[],this.selectedRoute=null,this.selectedSpot=null,this.AGVNameVisible=!0,this.parentEle=null,this.ele=null,this.ctx=null,this.cacheCanvas=null,this.scale=1,this.x=0,this.y=0,this.draggable=!1,this.rotatable=!1,this.angle=0,this.offScreenCanvasContainer=[],this.lines=[],this.spots=[],this.spotsMapper=new Map,this.routesMapper=new Map,this.occupiedMapper=new Map,this.mapRange=null,this.mapSize=null,this.AGVs=[],this.flag=!1}return Object(v["a"])(t,[{key:"createOffScreenCanvas",value:function(){var t=document.createElement("CANVAS");return t.width=this.ele.width,t.height=this.ele.height,t.getContext("2d")}},{key:"setTransform",value:function(){this.ctx.setTransform(this.scale,0,0,this.scale,this.x,this.y),this.ctx.rotate(this.angle)}},{key:"abPosX",value:function(t){return L.a.round(this.x+(t-this.mapRange.minpos.x-this.mapSize.width/2)*this.scale,1)}},{key:"abPosY",value:function(t){return L.a.round(this.y+(this.mapRange.maxpos.y-t-this.mapSize.height/2)*this.scale,1)}},{key:"rePosX",value:function(t){return t=t||0,L.a.round(t-this.mapRange.minpos.x-this.mapSize.width/2,1)}},{key:"rePosY",value:function(t){return t=t||0,L.a.round(this.mapRange.maxpos.y-t-this.mapSize.height/2,1)}},{key:"getAngle",value:function(t){var e=180*Number((""+t).slice(0,10))/Math.PI;return L.a.round(540-(e<0?360+e:e)+180*this.angle/Math.PI,0)}},{key:"tweenAnimate",value:function(t,e,a){var n=this;if(t){var i=null,o=t&&t.getAttribute("transform"),s=(""+o).replace(/translate|rotate|\(|\)/g,"","").replace(/,/g," ").split(" "),r=Object(g["a"])(s,5),l=r[0],c=r[1],d=r[2],u=r[3],h=r[4],f=function o(s){i||(i=s);var r=s-i;if(r<a){if(n.flag)return;var f=L.a.round(l-0+(e.x-l)*r/a,2),p=L.a.round(c-0+(e.y-c)*r/a,2),g=L.a.round(d-0+(e.angle-d)*r/a,2)||0;t&&t.setAttribute("transform","translate(".concat(f,",").concat(p,") rotate(").concat(g,",").concat(u,",").concat(h,")"));var m=t.childNodes[t.childNodes.length-1];m&&m.setAttribute("transform","rotate(".concat(-g,",").concat(u,",").concat(h,")")),window.requestAnimationFrame(o)}};window.requestAnimationFrame(f)}}},{key:"drawIcon",value:function(t){var e=this;this.draggable&&(t=this.AGVs);var a=document.getElementById("agv_".concat(this.parentEle.id));if(t.length<1)a&&a.remove(),this.AGVs=[];else if(a)t.forEach((function(t,a){var n=[],i=t,o=e.AGVs.find((function(e){return e.id===t.id}));if(o&&(i=o),i.path.forEach((function(t){if(t){var a=e.abPosX(20*t[0]),i=e.abPosY(20*t[1]),o=e.transformPoint({x:a,y:i},e.angle,{x:e.x,y:e.y});n.push([o.x,o.y])}})),o){var s=document.getElementById("agv-".concat(o.id));if(s){if(Math.abs(t.angle-o.angle)>180){t.angle-i.angle>180?i.angle=360+i.angle:t.angle-i.angle<-180&&(i.angle=i.angle-360);var r=s&&s.getAttribute("transform"),l=(""+r).replace(/translate|rotate|\(|\)/g,"","").replace(/,/g," ").split(" "),c=Object(g["a"])(l,4),d=c[0],u=c[1];s&&s.setAttribute("transform","translate(".concat(d,",").concat(u,") rotate(").concat(i.angle,",10,10)"))}if(e.updateAGV(s,t,e.AGVNameVisible),e.flag){s.setAttribute("transform","translate(".concat(n[0][0]-10,",").concat(n[0][1]-10,") rotate(").concat(t.angle,",10,10)"));var h=s.childNodes[s.childNodes.length-1];h&&h.setAttribute("transform","rotate(".concat(-t.angle,",10,10)"))}else e.tweenAnimate(s,{x:n[0][0]-10,y:n[0][1]-10,angle:t.angle},1e3)}var f=document.getElementById("agv-path-".concat(o.id)),p=document.getElementById("agv-occupy-".concat(o.id));if(o["clickChecked"]){f&&f.setAttribute("points","".concat(n.flat(2).join(" ")));var m="";o.occupiedSpots.forEach((function(t){var a=e.abPosX(20*t[0]),n=e.abPosY(20*t[1]),i=e.transformPoint({x:a,y:n},e.angle,{x:e.x,y:e.y});m+="<circle cx=".concat(i.x," cy=").concat(i.y,' r="8" stroke="yellow" stroke-width="3" fill="red"></circle>')})),p&&(p.innerHTML=m)}else f&&f.setAttribute("points",""),p&&(p.innerHTML="")}else{var v=document.getElementById("agv-path-group"),b=document.getElementById("agv-occupy-group"),x=document.getElementById("agv-group"),y=document.getElementById("agv-"+i.id);!y&&e.addAGV(x,v,b,t,a,n)}})),this.AGVs.forEach((function(e){if(!t.find((function(t){return t.id===e.id}))){var a=document.getElementById("agv-path-".concat(e.id));a&&a.remove();var n=document.getElementById("agv-occupy-".concat(e.id));n&&n.remove();var i=document.getElementById("agv-".concat(e.id));i&&i.remove()}})),this.AGVs=t;else{var n=document.createElement("DIV");n.id="agv_"+this.parentEle.id,n.style="float:left;width:100%;height:100%;position:absolute;top:0;left:0",n.innerHTML='<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">\n                                    <g id="agv-box">\n                                        <g id="agv-occupy-group"></g>\n                                        <g id="agv-path-group"></g>\n                                        <g id="agv-group"></g>\n                                    </g></svg>',this.parentEle.appendChild(n)}}},{key:"transformPoint",value:function(t,e,a){var n={};return n.x=Math.ceil((t.x-a.x)*Math.cos(e)-(t.y-a.y)*Math.sin(e)+a.x),n.y=Math.ceil((t.x-a.x)*Math.sin(e)+(t.y-a.y)*Math.cos(e)+a.y),n}},{key:"reRender",value:function(t){this.AGVNameVisible=t.nameEnabled,this.ele.width=this.parentEle.offsetWidth,this.ele.height=this.parentEle.offsetHeight,this.ctx=this.ele.getContext("2d"),this.render()}},{key:"render",value:function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx&&this.ctx.clearRect(0,0,this.ele.width,this.ele.height),this.setTransform(),this.ctx.drawImage(this.cacheCanvas,-this.cacheCanvas.width/2,-this.cacheCanvas.height/2,this.cacheCanvas.width,this.cacheCanvas.height),this.mapLine(),this.mapSpot(),this.drawIcon(this.AGVs)}},{key:"mouseWheelHandler",value:function(t){var e=this;t.preventDefault();var a=t.pageX,n=t.pageY,i=this.ele.getBoundingClientRect().left,o=this.ele.getBoundingClientRect().top;a-=i,n-=o;var s=t.wheelDelta?t.wheelDelta/1200:-t.detail/30,r=this.scale;r+=s,r=r<.1?.1:r>20?20:r;var l=this.x,c=this.y;l-=(a-l)*(r-this.scale)/this.scale,c-=(n-c)*(r-this.scale)/this.scale,this.scale=r,this.x=l,this.y=c,this.flag=!0,this.render();var d=setTimeout((function(){e.flag=!1,clearTimeout(d)}),1e3)}},{key:"initMapView",value:function(t){var e=this;this.parentEle=t,this.parentEle.innerHTML="",this.parentEle.style.position="relative";var a=document.createElement("CANVAS");a.id="canvas__"+t.id,a.width=this.parentEle.offsetWidth,a.height=this.parentEle.offsetHeight,t.appendChild(a),document.addEventListener&&this.parentEle.addEventListener("DOMMouseScroll",this.mouseWheelHandler.bind(this),!1),this.parentEle.onmousewheel=this.mouseWheelHandler.bind(this),new AlloyFinger(this.parentEle,{touchStart:function(){},touchMove:function(){},touchEnd:function(){this.flag=!1},touchCancel:function(){this.flag=!1},multipointStart:function(t){},multipointEnd:function(){},tap:function(){},doubleTap:function(){},longTap:function(){},singleTap:function(){},rotate:function(t){},pinch:function(t){var e=this,n=a.width/2,i=a.height/2,o=this.scale,s=(t.zoom-1)*this.scale/10;o+=s,o=o<.1?.1:o>20?20:o;var r=this.x,l=this.y;r-=(n-r)*(o-this.scale)/this.scale,l-=(i-l)*(o-this.scale)/this.scale,this.scale=o,this.x=r,this.y=l,this.render(),t.preventDefault(),this.flag=!0,this.render();var c=setTimeout((function(){clearTimeout(c),e.flag=!1}),1e3)},pressMove:function(t){this.flag=!0,this.x+=t.deltaX,this.y+=t.deltaY,this.render(),t.preventDefault()},swipe:function(t){}});var n=0,i=0;return this.parentEle.onmousemove=function(o){if(t.oncontextmenu=function(){return!1},e.draggable){var s=o.pageX-n,r=o.pageY-i;n=o.pageX,i=o.pageY,e.x+=s,e.y+=r,e.flag=!0,e.render()}else{e.rotatable}e.parentEle.onmousedown=function(t){n=t.pageX,i=t.pageY,t.pageX,0===t.button?e.draggable=!0:e.rotatable=!0;var a=document.getElementById("spot-code");a&&a.remove();var o=document.getElementById("route-code");o&&o.remove()},e.parentEle.onmouseup=function(t){e.flag=!1,e.draggable=!1,e.rotatable=!1},e.parentEle.onmouseout=function(t){t.target.tagName===a&&(e.draggable=!1,e.rotatable=!1)},e.parentEle.onmouseenter=function(t){t.target.tagName===a&&(e.draggable=!1,e.rotatable=!1)},e.parentEle.onmouseleave=function(t){t.target.tagName!==a&&(e.draggable=!1,e.rotatable=!1)}},this.ele=a,this.parentEle.addEventListener("click",(function(t){var a=Number(t.target.getAttribute("data-agv"));if(a)e.checkedAGVIcon(a);else{var n=[],i=e.ele.getBoundingClientRect(),o=i.top,s=i.left;e.innerSpots.forEach((function(t){n.push([e.abPosX(20*t.x),e.abPosY(20*t.y),t])}));var r=n.find((function(e){return Math.abs(e[0]+s-t.pageX)<12&&Math.abs(e[1]+o-t.pageY)<12}));if(r&&e.ctx.measureText(r[2]["code"]).width<5*r[2]["radius"]*e.scale){e.selectedSpot=r[2];var l=document.getElementById("spot-code");l&&l.remove();var c=document.createElement("span");c.setAttribute("id","spot-code"),c.style.left=r[0]-45+"px",c.style.bottom=e.ele.height-(r[1]-20)+"px";var d=Object(X["a"])(r[2]),u=[d.id,d.code,""!==d.alias?d.alias:"-",G[d.type],d.x,d.y,d.dir,F[d.orient],d.offset,""!=d.property1?d.property1:"-",""!=d.property2?d.property2:"-"];c.innerHTML=J(j,u),e.parentEle.appendChild(c)}else{var h=document.getElementById("spot-code");h&&h.remove(),e.lines.forEach((function(a){var n=e.abPosX(20*a.startX),i=e.abPosY(20*a.startY),r=e.abPosX(20*a.endX),l=e.abPosY(20*a.endY),c=e.transformPoint({x:n,y:i},e.angle,{x:e.x,y:e.y}),d=e.transformPoint({x:r,y:l},e.angle,{x:e.x,y:e.y});if(e.inVisibleWindow(c.x,c.y)||e.inVisibleWindow(d.x,d.y)){var u=e.rePosX(20*a.startX+16/e.scale*Math.sin(a["angle"])),h=e.rePosY(20*a.startY+16/e.scale*Math.cos(a["angle"])),f=e.rePosX(20*a.endX-16/e.scale*Math.sin(a["angle"])),p=e.rePosY(20*a.endY-16/e.scale*Math.cos(a["angle"]));if(e.ctx.beginPath(),e.ctx.lineCap="butt",e.ctx.lineWidth=L.a.round(6/e.scale,2),e.ctx.moveTo(u,h),e.ctx.lineTo(f,p),e.ctx.isPointInStroke(t.pageX-s,t.pageY-o)&&(!e.selectedRoute||e.selectedRoute&&e.selectedRoute.id!==a.id)){var g=e.innerSpots.find((function(t){return a.startSpotId===t.id||a.endSpotId===t.id}));if(g&&e.ctx.measureText(g.code).width<5*g["radius"]*e.scale){e.selectedRoute=a;var m=document.getElementById("route-code");m&&m.remove();var v=document.createElement("span");v.setAttribute("id","route-code");var b=e.abPosX(20*a.startX),x=e.abPosY(20*a.startY),y=e.abPosX(20*a.endX),w=e.abPosY(20*a.endY);v.style.left=(b+y)/2-100+"px",v.style.bottom=e.ele.height-((x+w)/2-20)+"px";var _=Object(X["a"])(a),k=[_.id,_.startSpotId,_.endSpotId,_.maxSpeed+"m/s",1e3*_.securityDist+"mm",H[_.pointMode],Y[_.avoidanceFlag],q[_.property2],U[_.property3],_.weight,_.fullLoadWeight];v.innerHTML=J(W,k),e.parentEle.appendChild(v)}}}}))}e.render()}})),this}},{key:"checkedAGVIcon",value:function(t){}},{key:"mapView",value:function(t){var e=this;this.AGVNameVisible=t.nameEnabled,this.AGVs=[];var a=document.getElementById("agv_"+this.parentEle.id);a&&a.remove(),this.ctx=this.ele.getContext("2d"),this.mapRange=t.data.mapRange,this.mapSize=t.data.mapSize,this.lines=t.data.lines.data,this.spots=t.data.spots.data;var n=new Map;this.spots.forEach((function(t){t["arrow"]=[],n.set(t.id,t)})),this.spots.forEach((function(t){var a=L.a.round(t["x"],2),n=L.a.round(t["y"],2),i=10;e.spots.forEach((function(e){if(e.id!==t.id){var o=L.a.round(e["x"],2),s=L.a.round(e["y"],2),r=Math.pow(a-o,2)+Math.pow(n-s,2);r<i&&(i=r<10?10:r)}})),t["radius"]=L.a.round(Math.sqrt(i),2)})),this.lines.forEach((function(t){var e=Math.atan((t["endY"]-t["startY"])/(t["endX"]===t["startX"]?.01:t["endX"]-t["startX"]));t["angle"]=B(t),t["endX"]<t["startX"]&&(e=Math.PI+e);var a=n.get(t["startSpotId"]);a["arrow"]?a["arrow"].push({x:(t["endX"]+t["startX"])/2,y:(t["endY"]+t["startY"])/2,angle:e}):a["arrow"]=[{x:20*(t["endX"]+t["startX"])/2,y:20*(t["endY"]+t["startY"])/2,angle:e}]})),this.spots.forEach((function(t){e.spotsMapper.set(t.code,[t.x,t.y])}));var i=new Image;i.src=t.data.bg;var o=this.ele.width/this.mapSize.width,s=this.ele.height/this.mapSize.height,r=0,l=0,c=1;this.mapSize.width/this.mapSize.height>this.ele.width/this.ele.height?(l=(this.ele.height-this.mapSize.height*o)/2,c=o):(r=(this.ele.width-this.mapSize.width*s)/2,c=s),this.x=r+this.mapSize.width*c/2,this.y=l+this.mapSize.height*c/2,this.scale=c,i.onload=function(t){e.cacheCanvas=i,e.render()},i.onerror=function(){var t=document.createElement("CANVAS");t.id="offScreenCanvasNoBg",t.width=e.ele.width,t.height=e.ele.height;var a=t.getContext("2d");a.fillStyle="#ffffff33",a.font="21px STheiti, SimHei",a.fillText("地图资源加载失败",e.ele.width/2-80,e.ele.height/2-10,160),e.ctx.drawImage(t,0,0,t.width,t.height),e.cacheCanvas=t,e.render()}}},{key:"formatterSocketData",value:function(t){var e=this;return t.map((function(t){var a=[],n=e.routesMapper.get(t.id);if(n){var i=n.findIndex((function(e){return e.code===t["nextPoint"]}));a=n.slice(i>-1?i:0)}var o=a.slice(-1)[0]?a.slice(-1)[0]["code"]:"";return{id:t.id,status:t.status,enabledState:t.enabledState,warnId:t.warnId,code:t.code,angle:e.getAngle(t.dir),path:[[t.x,t.y]].concat(Object(p["a"])(a.map((function(t){return e.spotsMapper.get(t.code)})))).filter((function(t){return t})),occupiedSpots:(e.occupiedMapper.get(t.id)||[]).map((function(t){return e.spotsMapper.get(t.code)})).filter((function(t){return t})),ele:t.ele,destination:o,temperature:void 0!==t.temperature?t.temperature.toFixed(1)+"ºC":"",isLoad:t.isLoad}}))}},{key:"mapLine",value:function(){var t=this;if(this.lines&&(this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.strokeStyle="#ffffff20",this.ctx.lineWidth=L.a.round(6/this.scale,2),this.ctx.beginPath(),this.lines.forEach((function(e){var a=t.abPosX(20*e.startX),n=t.abPosY(20*e.startY),i=t.abPosX(20*e.endX),o=t.abPosY(20*e.endY),s=t.transformPoint({x:a,y:n},t.angle,{x:t.x,y:t.y}),r=t.transformPoint({x:i,y:o},t.angle,{x:t.x,y:t.y});if(t.inVisibleWindow(s.x,s.y)||t.inVisibleWindow(r.x,r.y)){var l=t.rePosX(20*e.startX),c=t.rePosY(20*e.startY),d=t.rePosX(20*e.endX),u=t.rePosY(20*e.endY);t.ctx.moveTo(l,c),t.ctx.lineTo(d,u)}})),this.ctx.stroke(),this.ctx.closePath(),this.selectedRoute)){var e=this.rePosX(20*this.selectedRoute.startX),a=this.rePosY(20*this.selectedRoute.startY),n=this.rePosX(20*this.selectedRoute.endX),i=this.rePosY(20*this.selectedRoute.endY);this.ctx.beginPath(),this.ctx.shadowColor="rgb(255,255,255)",this.ctx.shadowBlur=5,this.ctx.strokeStyle="rgba(0,255,255,0.6)",this.ctx.moveTo(e,a),this.ctx.lineTo(n,i),this.ctx.stroke(),this.ctx.shadowBlur=0,this.selectedRoute=null}}},{key:"inVisibleWindow",value:function(t,e){return t<this.ele.width+20&&t>-20&&e<this.ele.height+20&&e>-20}},{key:"mapSpot",value:function(){var t=this;if(this.spots){var e=14,a=40;this.innerSpots=[],this.spots.forEach((function(e){var a=t.abPosX(20*e.x),n=t.abPosY(20*e.y),i=t.transformPoint({x:a,y:n},t.angle,{x:t.x,y:t.y});t.inVisibleWindow(i.x,i.y)&&(t.ctx.measureText(e.code).width<5*e["radius"]*t.scale||e["radius"]>19)&&t.innerSpots.push(e)})),this.innerSpots.forEach((function(n){var i=t.rePosX(20*n.x),o=t.rePosY(20*n.y);t.ctx.beginPath(),t.ctx.translate(i,o),t.ctx.rotate(-t.angle),t.selectedSpot&&t.selectedSpot.id==n.id&&(t.ctx.closePath(),t.ctx.beginPath(),t.ctx.fillStyle="rgba(0,255,255,1)",t.ctx.arc(0,0,9/t.scale,0,2*Math.PI),t.ctx.fill(),t.ctx.closePath(),t.ctx.beginPath(),t.selectedSpot=null),n["arrow"].forEach((function(e){t.ctx.rotate(-e.angle),t.ctx.drawImage(E,0,0,32,32,0,0,24/t.scale,24/t.scale),t.ctx.rotate(e.angle)}));var s=L.a.round(20/t.scale,2),r=S[n["type"]]?"6"===n["type"]?S["6"](n.useState):S[n["type"]]:S["0"];t.ctx.drawImage(r,0,0,32,32,-s/2,-s/2,s,s),t.ctx.fill(),t.ctx.stroke(),t.ctx.font="bold ".concat(L.a.round(e/t.scale,1),"px serif");var l=n.alias?n.alias:n.code,c=t.ctx.measureText(l);t.ctx.fillStyle="#ffffff55",t.ctx.fillText(l,-c.width/2,a/t.scale),t.ctx.stroke(),t.ctx.rotate(t.angle),t.ctx.translate(-i,-o)}))}else console.info("spots 数据为空")}}]),t}(),Q=K,Z={name:"MapView",computed:Object(o["a"])({},Object(l["b"])(["sidebar","token","sokitInfo","showRobotName","drawRobot","pathInfo","sokitCallBack","currentRobotId","onLineRobot","trafficPoints","mapWidth","initMapWidth"])),data:function(){return{delVisible:!1,value:"",workMap:f.a.get("workMap")?parseInt(f.a.get("workMap")):null,fullStatus:!1,stage:null,workSpaceList:"",timer:null,mapId:"",domainId:0,initConf:{id:0,nameEnabled:!0,rotateEnabled:!0,dragEnabled:!0,routeVisible:!0,data:{bg:"",mapSize:{width:0,height:0},mapRange:{minpos:{x:0,y:0},maxpos:{x:0,y:0}},lines:{data:[],showLineEnabled:!1},spots:{data:[],showSpotEnabled:!1}},agvRequestUrl:window.g.wsURL+"/ws/vehicle"},socket:null,socketTimer:null,flag:!1,visualMap:null,userId:"admin"===f.a.get("userName")?null:parseInt(f.a.get("userName"))}},watch:{flag:{handler:function(){var t=this,e=this.flag&&setTimeout((function(){t.resize(),t.flag=!1,clearTimeout(e)}),1e3)}},sidebar:{deep:!0,handler:function(t,e){this.resize()}}},beforeDestroy:function(){this.socketTimer&&clearInterval(this.socketTimer),this.socket&&this.socket.close(),this.$store.dispatch("RESET_ID"),this.$store.dispatch("SAVE_ID",[]),this.$store.commit("CURRENT_ROBOT_ID",0),this.$store.commit("PATH_INFO",[]),this.$store.commit("TRAFFIC_POINTS",[]),this.$store.commit("SOKIT_CALL_BACK",!1)},created:function(){},mounted:function(){var t=this;Object(d["n"])().then((function(e){t.workSpaceList=e;var a=e.find((function(t){return t["mapIds"][0]}));t.workMap||(t.workMap=a["mapIds"][0]);var n=setTimeout((function(){clearTimeout(n),t.initMonitorMap(t.workMap)}),500)})),window.onresize=function(){t.flag=!0}},activated:function(){},methods:{resize:function(){this.visualMap.reRender(this.initConf)},initMonitorMap:function(t){var e=this;this.$store.commit("CURRENT_ROBOT_ID",0);var a=document.getElementById("map__View");if(!this.visualMap){var n=new Q;this.visualMap=n.initMapView(a)}Object(c["b"])(t).then((function(a){Object(u["d"])(t).then((function(n){e.$store.commit("DOMAIN_ID",n.domianInfo.id),e.initConf.id=t;var i=n.mapInfo.lines,o=n.mapInfo.spots;i.forEach((function(t){var e=a.find((function(e){return e.id===t.id}));Object.assign(t,e)})),Object(u["e"])(t).then((function(t){o.forEach((function(e,a){for(var n=0;n<t.length;n++){var i=t[n];if(i.spotCode===e.code){i.x==e.x&&i.y===e.y&&(i.spotCode=i.code,i.code=e.code,i.alias=e.alias),i.type="6",o.push(i),t.splice(n,1);break}}})),e.initConf.data={bg:"/api/"+n.mapInfo.backimgUrl,mapSize:{width:Math.ceil(20*n.mapInfo.weight),height:Math.ceil(20*n.mapInfo.height)},mapRange:{minpos:{x:Math.ceil(20*n.mapInfo.originX),y:Math.ceil(20*n.mapInfo.originY)},maxpos:{x:Math.ceil(20*(n.mapInfo.weight+n.mapInfo.originX)),y:Math.ceil(20*(n.mapInfo.height+n.mapInfo.originY))}},lines:{data:i,showLineEnabled:!1},spots:{data:o,showSpotEnabled:!1}},e.visualMap.mapView(e.initConf),e.socket||(e.socket=new WebSocket(e.initConf.agvRequestUrl),e.socket.onopen=function(){e.delVisible=!1,e.socketTimer&&clearInterval(e.socketTimer),e.socketTimer=setInterval((function(){e.visualMap.draggable||e.socket.send(JSON.stringify({mapId:e.initConf.id,userId:e.userId}))}),1e3)},e.socket.onmessage=function(t){var a=JSON.parse(t.data)||[];if(e.$store.dispatch("SAVE_ID",a),Array.isArray(a)){e.initConf.routeVisible&&e.currentRobotId&&(Object(u["h"])([e.currentRobotId],e.initConf.id).then((function(t){var a=t.map((function(t){return{data:t.data.filter((function(t){return e.initConf.id===t.mapId})),vehicleId:t.vehicleId}}));a.forEach((function(t){e.visualMap.routesMapper.set(t["vehicleId"],t.data)}))})),Object(u["g"])(e.currentRobotId).then((function(t){t=t.filter((function(t){return e.initConf.id===t.mapId})),e.visualMap.occupiedMapper.set(e.currentRobotId,t)})));var n=e.visualMap.formatterSocketData(a);n.forEach((function(t){t.id===e.currentRobotId&&(t["clickChecked"]=!0)})),e.visualMap.drawIcon(n)}},e.socket.onerror=function(){console.error("WebSocket is error"),e.socketTimer&&clearInterval(e.socketTimer),e.delVisible=!0},e.socket.onclose=function(){console.log("WebSocket is close"),e.socketTimer&&clearInterval(e.socketTimer),e.delVisible=!0}),e.visualMap.checkedAGVIcon=function(t){e.currentRobotId===t&&t?(e.$store.commit("CURRENT_ROBOT_ID",0),e.visualMap.occupiedMapper.clear(),e.visualMap.routesMapper.clear()):e.$store.commit("CURRENT_ROBOT_ID",t)}}))}))}))},reRequest:function(){this.socketTimer&&clearInterval(this.socketTimer),this.socket&&this.socket.close(),this.socket=null,this.socketTimer=null,this.initMonitorMap(this.workMap)},clearControlPoints:function(){},connectSokitMessage:function(){var t=this;t.timer.onmessage=function(e){t.$store.commit("SOKIT_CALL_BACK",!0),t.delVisible=!1,t.drawMapBasicInfo()}},showRobot:function(){this.initConf.nameEnabled=!this.initConf.nameEnabled,this.visualMap.reRender(this.initConf)},selectWorkMap:function(t){this.mapId=t,this.$store.commit("CURRENT_ROBOT_ID",0),this.$store.commit("TRAFFIC_POINTS",[]),this.$store.commit("VMAP_ID",this.mapId),this.clearSokitTimer2=!0,this.$store.commit("VMAP_ID",this.mapId);var e=[];e.push(this.domainId),this.$store.commit("WORK_LIST",e),f.a.set("workMap",this.workMap),this.initMonitorMap(t)},screenfullBtn:function(){var t=this;if(!r.a.enabled)return this.$message({message:"浏览器不支持全屏",type:"warning"}),!1;r.a.toggle(),r.a.enabled&&r.a.on("change",(function(){t.fullStatus=r.a.isFullscreen}))}}},tt=Z,et=(a("1937"),a("68a5"),a("acf4"),a("2877")),at=Object(et["a"])(tt,n,i,!1,null,"3d1fee74",null);e["a"]=at.exports},"76a0":function(t,e,a){},7710:function(t,e,a){"use strict";a.r(e);var n=a("f66c");a.d(e,"Navbar",(function(){return n["default"]}));var i=a("d3ba");a.d(e,"Sidebar",(function(){return i["default"]}));var o=a("13c5");a.d(e,"AppMain",(function(){return o["default"]}))},8142:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"panelBottom",staticStyle:{height:"160px"}},[a("div",{staticClass:"top panelBg"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("div",{attrs:{id:"main"}}),t._v(" "),a("div",{staticClass:"grid-content bg-purple"},[a("div",{staticClass:"panel-title"},[a("i",{staticClass:"icon iconfont icon-yuandianzhong"}),t._v("\n                "+t._s(t.$t("tableTitle.DeviceStatus"))+"\n              ")]),t._v(" "),a("div",{staticClass:"panel-list"},[a("div",{staticClass:"panel-info panel-info2"},[a("div",{staticClass:"num c1"},[a("el-progress",{attrs:{type:"circle",percentage:t._f("percent")(t.alarmNum,t.onLineRobot),width:60}})],1),t._v(" "),a("div",{staticClass:"name"},[a("div",{staticClass:"title"},[t._v("\n                      "+t._s(t.$t("chart.AlarmDevice"))+"\n                    ")]),t._v(" "),a("h1",[t._v(t._s(t.alarmNum))])])]),t._v(" "),a("div",{staticClass:"panel-info panel-info2"},[a("div",{staticClass:"num c2"},[a("el-progress",{attrs:{type:"circle",percentage:t._f("percent")(t.workNum,t.onLineRobot),width:60}})],1),t._v(" "),a("div",{staticClass:"name"},[a("div",{staticClass:"title"},[t._v("\n                      "+t._s(t.$t("chart.AtWork"))+"\n                    ")]),t._v(" "),a("h1",[t._v(t._s(t.workNum))])])]),t._v(" "),a("div",{staticClass:"panel-info panel-info2"},[a("div",{staticClass:"num c3"},[a("el-progress",{attrs:{type:"circle",percentage:t._f("percent")(t.onLineRobot.length-t.workNum,t.onLineRobot),width:60}})],1),t._v(" "),a("div",{staticClass:"name"},[a("div",{staticClass:"title"},[t._v("\n                      "+t._s(t.$t("chart.Idle"))+"\n                    ")]),t._v(" "),a("h1",[t._v(t._s(t.onLineRobot.length-t.workNum))])])])])])])],1)],1)])])},i=[],o=a("db72"),s=a("2f62"),r=a("aa98"),l={computed:Object(o["a"])({},Object(s["b"])(["onLineRobot","alarmNum","workNum","workList"])),data:function(){return{allNum:0,alarmPercent:0,onLine:0}},watch:{workList:{handler:function(t,e){var a=this;setTimeout((function(){Object(r["x"])({domianIds:t}).then((function(t){a.allNum=t.all,a.onLine=t.onLine}))}),500)}}}},c=l,d=(a("2941"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,"2d51dbac",null);e["a"]=u.exports},a495:function(t,e,a){},a6fd:function(t,e,a){"use strict";var n=a("cc0f"),i=a.n(n);i.a},acf4:function(t,e,a){"use strict";var n=a("db3f"),i=a.n(n);i.a},b39a:function(t,e,a){var n=a("d3f4");t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},b90d:function(t,e,a){},becd:function(t,e,a){"use strict";var n=a("a495"),i=a.n(n);i.a},c26b:function(t,e,a){"use strict";var n=a("86cc").f,i=a("2aeb"),o=a("dcbc"),s=a("9b43"),r=a("f605"),l=a("4a59"),c=a("01f9"),d=a("d53b"),u=a("7a56"),h=a("9e1e"),f=a("67ab").fastKey,p=a("b39a"),g=h?"_s":"size",m=function(t,e){var a,n=f(e);if("F"!==n)return t._i[n];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,c){var d=t((function(t,n){r(t,d,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=n&&l(n,a,t[c],t)}));return o(d.prototype,{clear:function(){for(var t=p(this,e),a=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete a[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var a=p(this,e),n=m(a,t);if(n){var i=n.n,o=n.p;delete a._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),a._f==n&&(a._f=i),a._l==n&&(a._l=o),a[g]--}return!!n},forEach:function(t){p(this,e);var a,n=s(t,arguments.length>1?arguments[1]:void 0,3);while(a=a?a.n:this._f){n(a.v,a.k,this);while(a&&a.r)a=a.p}},has:function(t){return!!m(p(this,e),t)}}),h&&n(d.prototype,"size",{get:function(){return p(this,e)[g]}}),d},def:function(t,e,a){var n,i,o=m(t,e);return o?o.v=a:(t._l=o={i:i=f(e,!0),k:e,v:a,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[g]++,"F"!==i&&(t._i[i]=o)),t},getEntry:m,setStrong:function(t,e,a){c(t,e,(function(t,a){this._t=p(t,e),this._k=a,this._l=void 0}),(function(){var t=this,e=t._k,a=t._l;while(a&&a.r)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?d(0,"keys"==e?a.k:"values"==e?a.v:[a.k,a.v]):(t._t=void 0,d(1))}),a?"entries":"values",!a,!0),u(e)}}},c60f:function(t,e,a){"use strict";var n=a("3f0f"),i=a.n(n);i.a},cc0f:function(t,e,a){},d032:function(t,e,a){"use strict";function n(t){return JSON.parse(JSON.stringify(t))}a.d(e,"a",(function(){return n}))},d225:function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return n}))},d3ba:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelMenu")},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-menu"},[a("div",{staticClass:"left-logo"},[a("img",{staticClass:"logo",attrs:{src:t.miniLogo,alt:"蓝芯科技"}})]),t._v(" "),a("div",{staticClass:"right-bar"},[a("ul",{staticClass:"list"},[a("li",[a("div",{staticClass:"title"},[t._v(t._s(t.$t("pageText.AllTaskNumber")))]),a("countTo",{attrs:{startVal:t.startVal,prefix:"00",endVal:t.taskAll,duration:3e3,separator:""}})],1),t._v(" "),a("li",[a("div",{staticClass:"title"},[t._v(t._s(t.$t("pageText.CompleteTaskNumber")))]),a("countTo",{attrs:{startVal:t.startVal,prefix:"00",endVal:t.taskDone,duration:3e3,separator:""}})],1)]),t._v(" "),t.cookiesVal?a("div",{staticClass:"loginBar"},[a("div",{staticClass:"outBtn"},[a("i",{staticClass:"icon iconfont icon-kaiguan",attrs:{title:"退出登录"},on:{click:t.logout}},[t._v(t._s(t.$t("navbar.LogOut")))])])]):a("div",{staticClass:"loginBar"},[a("div",{on:{click:t.goLogin}},[t._m(0),t._v(" "),a("div",{staticClass:"txt"},[t._v(t._s(t.$t("navbar.Login")))])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginBtn"},[a("i",{staticClass:"icon iconfont icon-icon-user"})])}],r=a("db72"),l=a("2f62"),c=a("ec1b"),d=a.n(c),u=a("1131"),h=a("a78e"),f=a.n(h),p={components:{countTo:d.a,LangSelect:u["a"]},computed:Object(r["a"])({},Object(l["b"])(["taskDone","taskAll","token"])),data:function(){return{miniLogo:"./static/img/logo.png",startVal:0,doneNum:0,allNum:0,timer:null,cookiesVal:""}},beforeDestroy:function(){clearInterval(this.timer),this.timer=null},created:function(){var t=this;this.cookiesVal=f.a.get("JSESSIONID"),this.$store.dispatch("TaskDone"),this.timer=setInterval((function(){t.$store.dispatch("TaskDone")}),6e4)},methods:{logout:function(){var t=this;this.$store.dispatch("LogOut").then((function(){t.$router.push({path:"/login"})}))},goLogin:function(){this.$router.push({path:"/login"})}},mounted:function(){}},g=p,m=(a("f08b"),a("2877")),v=Object(m["a"])(g,o,s,!1,null,"5ad62d50",null),b=v.exports,x={components:{PanelMenu:b}},y=x,w=Object(m["a"])(y,n,i,!1,null,null,null);e["default"]=w.exports},db3f:function(t,e,a){},e0b8:function(t,e,a){"use strict";var n=a("7726"),i=a("5ca1"),o=a("2aba"),s=a("dcbc"),r=a("67ab"),l=a("4a59"),c=a("f605"),d=a("d3f4"),u=a("79e5"),h=a("5cc5"),f=a("7f20"),p=a("5dbc");t.exports=function(t,e,a,g,m,v){var b=n[t],x=b,y=m?"set":"add",w=x&&x.prototype,_={},k=function(t){var e=w[t];o(w,t,"delete"==t||"has"==t?function(t){return!(v&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!d(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,a){return e.call(this,0===t?0:t,a),this})};if("function"==typeof x&&(v||w.forEach&&!u((function(){(new x).entries().next()})))){var I=new x,C=I[y](v?{}:-0,1)!=I,S=u((function(){I.has(1)})),E=h((function(t){new x(t)})),T=!v&&u((function(){var t=new x,e=5;while(e--)t[y](e,e);return!t.has(-0)}));E||(x=e((function(e,a){c(e,x,t);var n=p(new b,e,x);return void 0!=a&&l(a,m,n[y],n),n})),x.prototype=w,w.constructor=x),(S||T)&&(k("delete"),k("has"),m&&k("get")),(T||C)&&k(y),v&&w.clear&&delete w.clear}else x=g.getConstructor(e,t,m,y),s(x.prototype,a),r.NEED=!0;return f(x,t),_[t]=x,i(i.G+i.W+i.F*(x!=b),_),v||g.setStrong(x,t,m),x}},f03d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-wrapper"},[a("sidebar",{staticClass:"panel-container"}),t._v(" "),a("div",{staticClass:"panel-main-container"},[a("app-main")],1)],1)},i=[],o=a("7710"),s={name:"Layout",components:{Navbar:o["Navbar"],Sidebar:o["Sidebar"],AppMain:o["AppMain"]},computed:{},methods:{}},r=s,l=(a("c60f"),a("2877")),c=Object(l["a"])(r,n,i,!1,null,"f0e5b768",null);e["default"]=c.exports},f08b:function(t,e,a){"use strict";var n=a("21b3"),i=a.n(n);i.a},f66c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar"},[a("div",{staticClass:"avatar-wrapper"},[0===t.roles.length?a("span"):a("span",[t._v("欢迎您："+t._s(t.roles))]),t._v(" "),a("i",{staticClass:"icon iconfont icon-kaiguan",attrs:{title:"退出登录"},on:{click:t.logout}})])])},i=[],o=a("db72"),s=a("2f62"),r=a("6350"),l=a("4f1e"),c={components:{Breadcrumb:r["a"],Hamburger:l["a"]},computed:Object(o["a"])({},Object(s["b"])(["sidebar","avatar","roles"])),methods:{toggleSideBar:function(){this.$store.dispatch("ToggleSideBar")},logout:function(){var t=this;this.$store.dispatch("LogOut").then((function(){t.$router.push({path:"/login"})}))}}},d=c,u=(a("6cf6"),a("2877")),h=Object(u["a"])(d,n,i,!1,null,"965ad8c0",null);e["default"]=h.exports}}]);