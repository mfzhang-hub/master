{"version":3,"sources":["webpack:///./src/api/config/external.js","webpack:///./src/api/config/chargePile.js","webpack:///./src/utils/graham.js","webpack:///./src/utils/notification.js","webpack:///./src/views/monitor/components/agvLayer.vue?71d1","webpack:///src/views/monitor/components/agvLayer.vue","webpack:///./src/views/monitor/components/agvLayer.vue?1f4d","webpack:///./src/views/monitor/components/agvLayer.vue","webpack:///./src/api/traffic.js","webpack:///./src/views/monitor/components/mainMonitor.vue?e0a5","webpack:///./src/api/map.js","webpack:///./src/api/monitor.js","webpack:///./src/views/monitor/largeScreen.vue?0549","webpack:///./node_modules/_screenfull@5.2.0@screenfull/dist/screenfull.js","webpack:///./src/views/monitor/components/mainMonitor.vue?d450","webpack:///src/views/monitor/components/mainMonitor.vue","webpack:///./src/views/monitor/components/mainMonitor.vue?5b91","webpack:///./src/views/monitor/components/mainMonitor.vue","webpack:///./src/utils/time.js","webpack:///./src/views/monitor/largeScreen.vue?29dc","webpack:///src/views/monitor/largeScreen.vue","webpack:///./src/views/monitor/largeScreen.vue?1b69","webpack:///./src/views/monitor/largeScreen.vue","webpack:///./src/api/vehicle.js"],"names":["getExternalTypeList","request","get","getExternalList","data","post","addExternal","updateExternal","deleteExternal","id","getChargePileModelList","getChargePileList","addChargePile","changeChargePileEnabld","enable","changeChargePileModel","modelId","deleteChargePile","getMapVertexes","mapId","getChargePileDetails","setGraham","pointSet","xUnequal","filter","item","length","sort","a","b","yUnequal","ch","n","i","j","k","top","tmp","Object","use","direct","multiply","dis","distance_no_sqrt","push","pop","p0","p1","p2","setNotification","this","dangerNotificationList","amrList","dangerList","forEach","amr","ex","join","includes","key","amrStateList","dangerNotification","newValue","value","notification","close","oldItem","setTimeout","Notification","title","message","duration","position","customClass","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","isLog","expression","staticClass","on","mouseoverAgvLayer","mouseLeaveAgvLayer","staticStyle","$event","tableVisible","_v","_m","_l","index","stateFilter","class","warnId","changeActiveInfoId","attrs","_s","stopPropagation","$router","path","query","backPage","$route","fullPath","ref","border","staticRenderFns","props","isSortAmr","mounted","$refs","agvList","onmouseover","watch","isPc","beforeDestroy","methods","amrId","$emit","component","updateTraffic","getTraffic","getMapList","updateMap","deleteMap","getMapDetails","getOnlineAmr","getOnlineAmrById","getAreaMonitor","getAmrTaskInfo","pauseAmr","resumeAmr","getSchedulerMapZip","getOldOnlineAmr","document","window","isCommonjs","module","exports","fn","val","fnMap","l","ret","eventNameMap","change","fullscreenchange","error","fullscreenerror","screenfull","element","options","Promise","resolve","reject","onFullScreenEntered","off","bind","documentElement","returnPromise","requestFullscreen","then","catch","exit","isFullscreen","onFullScreenExit","exitFullscreen","toggle","onchange","callback","onerror","event","eventName","addEventListener","removeEventListener","raw","defineProperties","Boolean","fullscreenElement","enumerable","isEnabled","fullscreenEnabled","clickChangeMap","openInterval","clearInterval","console","moment","require","formatTime","time","Date","locale","format","starWeektDate","add","endWeekDate","startDay","startOf","endDay","endOf","yesterdayStart","yesterdayEnd","nowTime","nowTimeTotal","pickerOptions","shortcuts","text","onClick","picker","end","start","setTime","setHours","getTime","batteryPickerOptions","setArrLength","mark","scale","startHour","Number","slice","endHour","Math","ceil","diff","getLength","setTimeRange","getDataIndex","originStart","dataStart","setBatteryLength","getIntervalDays","dateSpan","iDays","parse","abs","floor","checkIntervalDays","dateFilter","exportDays","Message","warning","getIntervalTime","days","hours","minutes","seconds","carouseTime","autoplay","changeCarousel","mapList","changeMap","model","$$v","group","unLoginLargeScreen","_e","layersVisible","label","activeArr","setLayer","locateVisible","getLocate","getDefaultLocate","saveLocate","prop","topVisible","info","toAgvWeb","vehicleId","releaseLockedPoints","infoState","style","height","min","backgroundColor","borderColor","cursor","coordinate","location","velocity","undefined","vx","toFixed","amrTaskInfo","slot","taskChainId","targetPoint","priority","taskStateList","status","process","intervalTime","remainTime","active","taskList","isCarousel","carouselIndex","handleVehicleOp","isFullScreen","monitorMapper","headDocument","components","AgvLayer","MainMonitor","timer","timerTime","taskTimer","taskTime","nodesMapper","routesMapper","opt","activeInfoId","searchVal","areaLists","nowTimeTimer","externalTypeEnum","actionList","animateTime","params","loadingMessage","timeout","initTimer","doingStatusList","shouldConcatOldAmr","specialAreaId","readyDrawTime","readyDrawTimer","isClearDraw","clearDrawNum","changeCarouselTimer","notificationMap","clearTimeout","mapMonitor","store","areaId","script","getTaskActionList","res","onResize","resetMapSize","v","mapMapper","getMapData","type","ele","Cookies","Edge","Vertex","area","backgroundImgUrl","width","weight","originX","originY","routes","startCode","endCode","startPos","endPos","property3","minX","minY","nodes","baseMapName","externalMapper","mapIds","externalListRes","vertexCodes","nodeIdMapper","node","alias","x","y","externalType","blocks","blockRes","ids","chargePiles","chargeRes","layer","routesVisible","nodesVisible","laserVisible","objLabelVisible","pathVisible","oldAmrList","oldAmrData","isVehiclesChange","occupiedNodes","isLoad","code","z","angle","state","batteryPercentile","times","mapView","children","row","MessageBox","confirmButtonText","cancelButtonText","taskChain","tasks","endPointCode","_","ip","op","isAuto","offset","camera","control","localStorage","isClickVehicle","setInterval","clickVehicle","carousel","setActiveItem","now","pre","map","preDrawMonitor","clearOldMonitor","preIndex","monitor","dom","getElementById","preId","innerText","mainMonitor","setMapId","getVehicleList","getVehicleTypeList","addVehicle","updateVehicle","toggleVehicleEnable","deleteVehicle","getVehicleDetail","updateVehicleArea","updateVehicleGroup","updateVehicleModel","updateVehicleCharge","getChargeForceBind","getVehicleRest","addVehicleRest","updateVehicleRest","deleteVehicleRest","unRegister","getLockedPoints"],"mappings":"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","file":"js/chunk-33568ea9.1649302258356.js","sourcesContent":["import request from '@/utils/request'\n\n// 获取外部设备类型\nexport function getExternalTypeList() {\n  return request.get('/equipment/type')\n}\n\n// 获取外部设备列表\nexport function getExternalList(data) {\n  return request.post('/equipment/list', data)\n}\n\n// 新增外部设备\nexport function addExternal(data) {\n  return request.post('/equipment/add', data)\n}\n\n// 修改外部设备\nexport function updateExternal(data) {\n  return request.post('equipment/update', data)\n}\n\n// 删除外部设备\nexport function deleteExternal(id) {\n  return request.get('/equipment/delete?id=' + id)\n}","import request from '@/utils/request'\n\n// 获取充电桩类型☑️\nexport function getChargePileModelList() {\n  return request.get('/chargePile/model/findAll')\n}\n\n// 获取充电桩列表☑️\nexport function getChargePileList(data) {\n  return request.post('/chargePile/page', data)\n}\n\n// 新增充电桩☑️\nexport function addChargePile(data) {\n  return request.post('/chargePile/add',data)\n}\n\n// 启用/禁用充电桩☑️\nexport function changeChargePileEnabld({ id, enable }) {\n  return request.get('/chargePile/enable?id=' + id + '&state=' + enable,)\n}\n\n// 修改充电桩☑️\nexport function changeChargePileModel({ id, modelId }) {\n  return request.get('chargePile/bindModel?id=' + id + '&modelId=' + modelId)\n}\n\n// 删除充电桩☑️\nexport function deleteChargePile(id) {\n  return request.get('/chargePile/delete?id=' + id)\n}\n\n// 获取地图点位列表，用来下拉选择\nexport function getMapVertexes(mapId) {\n  return request.get('/map/getMapVertexes/' + mapId)\n}\n\n// 获取充电桩占用历史记录\nexport function getChargePileDetails(data) {\n  return request.post('chargePile/history/detail', data)\n}","/*\n~~~~  求凸集/凸包  ~~~~~\n*/\n\n\nexport const setGraham = (pointSet) => {\n    // 如果水平一条直线，返回左右两个端点\n    let xUnequal = pointSet.filter((item) => {\n        return item[0] === pointSet[0][0]\n    })\n    if (xUnequal.length === pointSet.length) {\n        pointSet = pointSet.sort((a, b) => {\n            return a[1] - b[1]\n        })\n        return [pointSet[0], pointSet[pointSet.length - 1]]\n    }\n    // 如果垂直一条直线，返回上下两个端点\n    let yUnequal = pointSet.filter((item) => {\n        return item[1] === pointSet[0][1]\n    })\n    if (yUnequal.length === pointSet.length) {\n        pointSet = pointSet.sort((a, b) => {\n            return a[0] - b[0]\n        })\n        return [pointSet[0], pointSet[pointSet.length - 1]]\n    }\n    pointSet = pointSet.sort((a, b) => {\n        return a[0] - b[0] || a[1] - b[1]\n    })\n    let ch = []\n    let n = pointSet.length\n    if (n < 3) return pointSet;\n    // 这里会修改pointSet\n    var i, j, k = 0, top = 2;\n    var tmp = new Object();\n    // 找到一个基点，基本就是保证最下面最左面的点\n    for (i = 1; i < n; i++) {\n        if ((pointSet[i][1] < pointSet[k][1]) ||\n            ((pointSet[i][1] == pointSet[k][1]) && (pointSet[i][0] < pointSet[k][0]))\n        ) {\n            k = i;\n        }\n    }\n    tmp = pointSet[0];\n    pointSet[0] = pointSet[k];\n    pointSet[k] = tmp;\n    let use = n;\n    for (i = 1; i < use - 1; i++) {\n        k = i;\n        for (j = i + 1; j < use; j++) {\n            var direct = multiply(pointSet[0], pointSet[k], pointSet[j]);\n            if (direct > 0) {\n                k = j;\n            } else if (direct == 0) {\n                // k j 同方向\n                var dis = distance_no_sqrt(pointSet[0], pointSet[j]) - distance_no_sqrt(pointSet[0], pointSet[k]);\n                use--; // 也就是不要了\n                if (dis > 0) {\n                    // 保留j 把 k 就不要了\n                    pointSet[k] = pointSet[j];\n                    pointSet[j] = pointSet[use];\n                    j--;\n                } else {\n                    tmp = pointSet[use];\n                    pointSet[use] = pointSet[j];\n                    pointSet[j] = tmp;\n                }\n            }\n        }\n        tmp = pointSet[i];\n        pointSet[i] = pointSet[k];\n        pointSet[k] = tmp;\n    }\n    ch.push(pointSet[0]);\n    ch.push(pointSet[1]);\n    ch.push(pointSet[2]);\n    for (i = 3; i < use; i++) {\n        while (pointSet[i] && ch[top - 1] && ch[top] && !(multiply(pointSet[i], ch[top - 1], ch[top]) < 0)) {\n            top--;\n            ch.pop();\n        }\n        top++;\n        ch.push(pointSet[i]);\n    }\n    ch.push(pointSet[0]);   //将凸集形成闭环\n    return ch\n}\n\nconst multiply = (p0, p1, p2) => {\n    return ((p1[0] - p0[0]) * (p2[1] - p0[1]) - (p2[0] - p0[0]) * (p1[1] - p0[1]));\n}\n\nconst distance_no_sqrt = (p1, p2) => {\n    return ((p1[0] - p2[0]) * (p1[0] - p2[0]) + (p1[1] - p2[1]) * (p1[1] - p2[1]));\n}","import { Notification } from \"element-ui\";\nimport { amrStateList } from \"../../public/static/Enumeration\";\n\nexport default class setNotification {\n    constructor() {\n        this.dangerNotificationList = {}    // 通知列表\n    }\n    // 获取故障列表\n    getDangerList(amrList) {\n        let dangerList = {};\n        amrList.forEach((amr) => {\n            let ex = amr[\"amrException\"][\"exception\"].join(\"-\");\n            // 获取需要通知的故障小车列表\n            if ([7, 8, 9].includes(amr[\"warnId\"])) {\n                if (amr[\"stateId\"] === 9) ex = \"等待用户确认\";\n                let key = amr[\"name\"] + \" (\" + amr[\"id\"] + \")\";\n                dangerList[key] = ex || amrStateList[amr[\"stateId\"]];\n            }\n        })\n        this.dangerNotification(dangerList)\n    }\n    // 告警通知\n    dangerNotification(dangerList) {\n        // 移除旧的通知，已不存在或者通知信息变化\n        for (let key in this.dangerNotificationList) {\n            let item = this.dangerNotificationList[key];\n            let newValue = dangerList[key];\n            if (item.value !== newValue) {\n                item.notification && item.notification.close();\n                delete this.dangerNotificationList[key];\n            }\n        }\n        // 添加新的通知，新增或者通知信息变化\n        for (let key in dangerList) {\n            let value = dangerList[key];\n            let oldItem = this.dangerNotificationList[key];\n            if (!oldItem || oldItem.value !== value) {\n                setTimeout(() => {\n                    let notification = Notification({\n                        title: key, // 标题\n                        message: value, //内容\n                        duration: 0,    // 展示时长\n                        position: \"bottom-right\",   // 位置\n                        customClass: \"danger-notification\",     // 自定义class\n                    });\n                    this.dangerNotificationList[key] = { notification, value }\n                }, 0);\n            }\n        }\n    }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLog),expression:\"!isLog\"}],staticClass:\"ui-layer agv-layer\",on:{\"mouseenter\":_vm.mouseoverAgvLayer,\"mouseleave\":_vm.mouseLeaveAgvLayer}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tableVisible),expression:\"tableVisible\"}]},[_c('div',{staticStyle:{\"color\":\"#999\",\"text-indent\":\"20px\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.tableVisible = false}}},[_vm._v(\" 设备状态 \")]),_c('table',{staticClass:\"agv-layer-table\"},[_vm._m(0),_c('tbody',_vm._l((_vm.amrList),function(amr,index){return _c('tr',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n            !_vm.stateFilter ||\n            (_vm.stateFilter !== 88 && _vm.stateFilter === amr['stateId']) ||\n            (_vm.stateFilter === 88 && amr['isParkingBarrier'])\n          ),expression:\"\\n            !stateFilter ||\\n            (stateFilter !== 88 && stateFilter === amr['stateId']) ||\\n            (stateFilter === 88 && amr['isParkingBarrier'])\\n          \"}],key:index,class:{\n            'danger-row': [7, 8].includes(amr.warnId),\n            'warning-row': [4, 9, 6].includes(amr.warnId),\n            'offline-row': [10].includes(amr.warnId),\n          },on:{\"click\":function($event){return _vm.changeActiveInfoId(amr['id'])}}},[_c('td',[_c('el-tooltip',{attrs:{\"content\":amr['name'],\"placement\":\"top\"}},[_c('div',[_vm._v(_vm._s(amr[\"name\"]))])])],1),_c('td',[_vm._v(_vm._s(amr[\"state\"]))]),_c('td',[_vm._v(_vm._s(amr[\"batteryPercentile\"])+\"%\")]),_c('td',[_c('el-tooltip',{attrs:{\"content\":amr['amrException']['exception'].join('-'),\"placement\":\"top\"}},[_c('div',[_vm._v(\" \"+_vm._s(amr[\"amrException\"][\"exception\"].join(\"-\"))+\" \")])])],1),_c('td',[_c('el-link',{staticClass:\"router-link\",attrs:{\"type\":\"info\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$router.push({\n                  path: (\"/deviceDetails/\" + (amr.id)),\n                  query: { backPage: _vm.$route.fullPath },\n                })}}},[_vm._v(\" 详情 \")])],1)])}),0)]),_c('div',{staticClass:\"border-top\"}),_c('div',{staticClass:\"border-bottom\"})]),_c('div',{ref:\"agvList\",staticClass:\"agv-list\"},[_c('router-link',{staticClass:\"router-link\",attrs:{\"to\":{\n        path: \"/device/amr\",\n        query: { backPage: _vm.$route.fullPath },\n      }}},[_c('div',[_vm._v(\"   总数 \"),_c('h2',{staticStyle:{\"display\":\"inline-block\"}},[_vm._v(_vm._s(_vm.amrList.length))])])]),_c('p',{class:{ border: _vm.stateFilter === 0 },on:{\"click\":function($event){_vm.stateFilter = 0}}},[_c('span',{staticClass:\"status-icon status_2\"},[_vm._v(_vm._s(_vm.amrList.length))]),_c('span',{staticStyle:{\"color\":\"#67c23a\"}},[_vm._v(\"全部\")])]),_c('p',{class:{ border: _vm.stateFilter === 2 },on:{\"click\":function($event){_vm.stateFilter = _vm.stateFilter === 2 ? 0 : 2}}},[_c('span',{staticClass:\"status-icon status_2\"},[_vm._v(_vm._s(_vm.amrList.filter(function (a) { return a[\"stateId\"] === 2; }).length))]),_c('span',{staticStyle:{\"color\":\"#fff\"}},[_vm._v(\"作业\")])]),_c('p',{class:{ border: _vm.stateFilter === 3 },on:{\"click\":function($event){_vm.stateFilter = _vm.stateFilter === 3 ? 0 : 3}}},[_c('span',{staticClass:\"status-icon status_3\"},[_vm._v(_vm._s(_vm.amrList.filter(function (a) { return a[\"stateId\"] === 3; }).length))]),_c('span',{staticStyle:{\"color\":\"#fff\"}},[_vm._v(\"充电\")])]),_c('p',{class:{ border: _vm.stateFilter === 4 },on:{\"click\":function($event){_vm.stateFilter = _vm.stateFilter === 4 ? 0 : 4}}},[_c('span',{staticClass:\"status-icon status_4\"},[_vm._v(_vm._s(_vm.amrList.filter(function (a) { return a[\"stateId\"] === 4; }).length))]),_c('span',{staticStyle:{\"color\":\"#fff\"}},[_vm._v(\"等待\")])]),_c('p',{class:{ border: _vm.stateFilter === 9 },on:{\"click\":function($event){_vm.stateFilter = _vm.stateFilter === 9 ? 0 : 9}}},[_c('span',{staticClass:\"status-icon status_4\"},[_vm._v(_vm._s(_vm.amrList.filter(function (a) { return a[\"stateId\"] === 9; }).length))]),_c('span',{staticStyle:{\"color\":\"#fff\"}},[_vm._v(\"确认\")])]),_c('p',{class:{ border: _vm.stateFilter === 6 },on:{\"click\":function($event){_vm.stateFilter = _vm.stateFilter === 6 ? 0 : 6}}},[_c('span',{staticClass:\"status-icon status_4\"},[_vm._v(_vm._s(_vm.amrList.filter(function (a) { return a[\"stateId\"] === 6; }).length))]),_c('span',{staticStyle:{\"color\":\"#fff\"}},[_vm._v(\"暂停\")])]),_c('p',{class:{ border: _vm.stateFilter === 1 },on:{\"click\":function($event){_vm.stateFilter = _vm.stateFilter === 1 ? 0 : 1}}},[_c('span',{staticClass:\"status-icon status_1\"},[_vm._v(_vm._s(_vm.amrList.filter(function (a) { return a[\"stateId\"] === 1; }).length))]),_c('span',{staticStyle:{\"color\":\"#888\"}},[_vm._v(\"空闲\")])]),_c('p',{class:{ border: _vm.stateFilter === 88 },on:{\"click\":function($event){_vm.stateFilter = _vm.stateFilter === 88 ? 0 : 88}}},[_c('span',{staticClass:\"status-icon status_5\"},[_vm._v(_vm._s(_vm.amrList.filter(function (a) { return a[\"isParkingBarrier\"]; }).length))]),_c('span',{staticStyle:{\"color\":\"#fff\",\"background\":\"radial-gradient(#902851, rgba(144, 40, 81, 0.5))\"}},[_vm._v(\"停障\")])]),_c('p',{class:{ border: _vm.stateFilter === 8 },on:{\"click\":function($event){_vm.stateFilter = _vm.stateFilter === 8 ? 0 : 8}}},[_c('span',{staticClass:\"status-icon status_5\"},[_vm._v(_vm._s(_vm.amrList.filter(function (a) { return a[\"warnId\"] === 8; }).length))]),_c('span',{staticStyle:{\"color\":\"#fff\",\"background\":\"radial-gradient(#902851, rgba(144, 40, 81, 0.5))\"}},[_vm._v(\"异常\")])])],1),_c('i',{staticClass:\"table-btn\",class:{\n      'el-icon-d-arrow-left': !_vm.tableVisible,\n      'el-icon-d-arrow-right': _vm.tableVisible,\n    },on:{\"click\":function($event){_vm.tableVisible = !_vm.tableVisible}}})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',{staticStyle:{\"background\":\"-webkit-linear-gradient(\"}},[_c('th',[_vm._v(\"机器人\")]),_c('th',[_vm._v(\"状态\")]),_c('th',[_vm._v(\"电量\")]),_c('th',[_vm._v(\"告警\")]),_c('th',[_vm._v(\"详情\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"ui-layer agv-layer\"\n    v-show=\"!isLog\"\n    @mouseenter=\"mouseoverAgvLayer\"\n    @mouseleave=\"mouseLeaveAgvLayer\"\n  >\n    <div v-show=\"tableVisible\">\n      <div\n        style=\"color: #999; text-indent: 20px; cursor: pointer\"\n        @click=\"tableVisible = false\"\n      >\n        设备状态\n      </div>\n      <table class=\"agv-layer-table\">\n        <thead>\n          <tr\n            style=\"\n              background: -webkit-linear-gradient(\n                left,\n                #0047af,\n                rgba(0, 71, 175, 0.1)\n              );\n            \"\n          >\n            <th>机器人</th>\n            <th>状态</th>\n            <th>电量</th>\n            <th>告警</th>\n            <th>详情</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            :key=\"index\"\n            @click=\"changeActiveInfoId(amr['id'])\"\n            v-for=\"(amr, index) in amrList\"\n            v-show=\"\n              !stateFilter ||\n              (stateFilter !== 88 && stateFilter === amr['stateId']) ||\n              (stateFilter === 88 && amr['isParkingBarrier'])\n            \"\n            :class=\"{\n              'danger-row': [7, 8].includes(amr.warnId),\n              'warning-row': [4, 9, 6].includes(amr.warnId),\n              'offline-row': [10].includes(amr.warnId),\n            }\"\n          >\n            <td>\n              <el-tooltip :content=\"amr['name']\" placement=\"top\">\n                <div>{{ amr[\"name\"] }}</div>\n              </el-tooltip>\n            </td>\n            <td>{{ amr[\"state\"] }}</td>\n            <td>{{ amr[\"batteryPercentile\"] }}%</td>\n            <td>\n              <el-tooltip\n                :content=\"amr['amrException']['exception'].join('-')\"\n                placement=\"top\"\n              >\n                <div>\n                  {{ amr[\"amrException\"][\"exception\"].join(\"-\") }}\n                </div>\n              </el-tooltip>\n            </td>\n            <td>\n              <el-link\n                class=\"router-link\"\n                @click.stop=\"\n                  $router.push({\n                    path: `/deviceDetails/${amr.id}`,\n                    query: { backPage: $route.fullPath },\n                  })\n                \"\n                type=\"info\"\n              >\n                详情\n              </el-link>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div class=\"border-top\"></div>\n      <div class=\"border-bottom\"></div>\n    </div>\n    <div class=\"agv-list\" ref=\"agvList\">\n      <router-link\n        class=\"router-link\"\n        :to=\"{\n          path: `/device/amr`,\n          query: { backPage: $route.fullPath },\n        }\"\n      >\n        <div>\n          &nbsp;&nbsp;总数\n          <h2 style=\"display: inline-block\">{{ amrList.length }}</h2>\n        </div></router-link\n      >\n      <p :class=\"{ border: stateFilter === 0 }\" @click=\"stateFilter = 0\">\n        <span class=\"status-icon status_2\">{{ amrList.length }}</span>\n        <span style=\"color: #67c23a\">全部</span>\n      </p>\n      <p\n        :class=\"{ border: stateFilter === 2 }\"\n        @click=\"stateFilter = stateFilter === 2 ? 0 : 2\"\n      >\n        <span class=\"status-icon status_2\">{{\n          amrList.filter((a) => a[\"stateId\"] === 2).length\n        }}</span>\n        <span style=\"color: #fff\">作业</span>\n      </p>\n      <p\n        :class=\"{ border: stateFilter === 3 }\"\n        @click=\"stateFilter = stateFilter === 3 ? 0 : 3\"\n      >\n        <span class=\"status-icon status_3\">{{\n          amrList.filter((a) => a[\"stateId\"] === 3).length\n        }}</span>\n        <span style=\"color: #fff\">充电</span>\n      </p>\n      <p\n        :class=\"{ border: stateFilter === 4 }\"\n        @click=\"stateFilter = stateFilter === 4 ? 0 : 4\"\n      >\n        <span class=\"status-icon status_4\">{{\n          amrList.filter((a) => a[\"stateId\"] === 4).length\n        }}</span>\n        <span style=\"color: #fff\">等待</span>\n      </p>\n      <p\n        :class=\"{ border: stateFilter === 9 }\"\n        @click=\"stateFilter = stateFilter === 9 ? 0 : 9\"\n      >\n        <span class=\"status-icon status_4\">{{\n          amrList.filter((a) => a[\"stateId\"] === 9).length\n        }}</span\n        ><span style=\"color: #fff\">确认</span>\n      </p>\n      <p\n        :class=\"{ border: stateFilter === 6 }\"\n        @click=\"stateFilter = stateFilter === 6 ? 0 : 6\"\n      >\n        <span class=\"status-icon status_4\">{{\n          amrList.filter((a) => a[\"stateId\"] === 6).length\n        }}</span>\n        <span style=\"color: #fff\">暂停</span>\n      </p>\n      <p\n        :class=\"{ border: stateFilter === 1 }\"\n        @click=\"stateFilter = stateFilter === 1 ? 0 : 1\"\n      >\n        <span class=\"status-icon status_1\">{{\n          amrList.filter((a) => a[\"stateId\"] === 1).length\n        }}</span>\n        <span style=\"color: #888\">空闲</span>\n      </p>\n      <p\n        :class=\"{ border: stateFilter === 88 }\"\n        @click=\"stateFilter = stateFilter === 88 ? 0 : 88\"\n      >\n        <span class=\"status-icon status_5\">{{\n          amrList.filter((a) => a[\"isParkingBarrier\"]).length\n        }}</span\n        ><span\n          style=\"\n            color: #fff;\n            background: radial-gradient(#902851, rgba(144, 40, 81, 0.5));\n          \"\n          >停障</span\n        >\n      </p>\n      <p\n        :class=\"{ border: stateFilter === 8 }\"\n        @click=\"stateFilter = stateFilter === 8 ? 0 : 8\"\n      >\n        <span class=\"status-icon status_5\">{{\n          amrList.filter((a) => a[\"warnId\"] === 8).length\n        }}</span>\n        <span\n          style=\"\n            color: #fff;\n            background: radial-gradient(#902851, rgba(144, 40, 81, 0.5));\n          \"\n          >异常</span\n        >\n      </p>\n    </div>\n    <i\n      :class=\"{\n        'el-icon-d-arrow-left': !tableVisible,\n        'el-icon-d-arrow-right': tableVisible,\n      }\"\n      @click=\"tableVisible = !tableVisible\"\n      class=\"table-btn\"\n    />\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\"isLog\", \"amrList\", \"isPc\"],\n  data() {\n    return {\n      tableVisible: false, // 是否打开右侧小车列表框\n      stateFilter: 0, //小车状态筛选\n      isSortAmr: true, // 是否对小车进行排序\n    };\n  },\n  mounted() {\n    // 鼠标移入右侧小车列表框中时，自动打开\n    this.$refs.agvList.onmouseover = () => {\n      this.tableVisible = true;\n    };\n  },\n  watch: {\n    // 移动端，当打开设备列表时，顺序不变\n    tableVisible() {\n      if (!this.isPc) this.isSortAmr = !this.tableVisible;\n    },\n  },\n  beforeDestroy() {\n    this.$refs.agvList.onmouseover = null;\n  },\n  methods: {\n    // 切换选中的小车\n    changeActiveInfoId(amrId) {\n      this.$emit(\"changeActiveInfoId\", amrId);\n    },\n    // 鼠标移入后，保持当前顺序不变\n    mouseoverAgvLayer() {\n      if (this.isPc) this.isSortAmr = false;\n    },\n    // 鼠标离开\n    mouseLeaveAgvLayer() {\n      if (this.isPc) this.isSortAmr = true;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./agvLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./agvLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./agvLayer.vue?vue&type=template&id=514aed6e&scoped=true&\"\nimport script from \"./agvLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./agvLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"514aed6e\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\n// 更新交管列表\nexport function updateTraffic(data) {\n    return request.post('/traffic/block/update', data)\n}\n\n// ?areaId=2\nexport function getTraffic(data) {\n    return request.get('/traffic/block/find', data)\n}\n","export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./mainMonitor.vue?vue&type=style&index=0&id=70d3c383&lang=scss&scoped=true&\"","import request from '@/utils/request'\n\n// 获取地图列表\nexport function getMapList(data) {\n  return request.get('/map/mapList', data)\n}\n\n// 修改地图\nexport function updateMap(data) {\n  return request.post('/map/updateMap', data)\n}\n\n// 删除地图\nexport function deleteMap(id) {\n  return request.post('/map/delete/' + id)\n}\n\n// 获取地图详情\nexport function getMapDetails(data) {\n  return request.get('/map/getMapDetailById', data)\n}\n\n// 获取某工作区域下的点位列表\nexport function getAreaVertexes(areaId) {\n  return request.get('map/getAreaAllVertexes/' + areaId)\n}","import request from '@/utils/request'\n\n// 获取在线小车列表\nexport function getOnlineAmr(data) {\n  return request.get('/amr/onlineAmr', data)\n}\n\n// 获取单个在线小车详情\nexport function getOnlineAmrById(data) {\n  return request.get('/amr/getOnlineAmrById', data)\n}\n\n// 获取 区域-地图 列表\nexport function getAreaMonitor() {\n  return request.post('/area/monitor')\n}\n\n// 获取小车任务详情\nexport function getAmrTaskInfo(data) {\n  return request.get('/amr/getAmrTaskById', data)\n}\n\n// 暂停小车\nexport function pauseAmr(data) {\n  return request.post('/amr/taskCommand/pause/' + data.id)\n}\n\n// 恢复小车\nexport function resumeAmr(data) {\n  return request.post('/amr/taskCommand/resume/' + data.id)\n}\n\n// 根据小车id和地图name获取地图包\nexport function getSchedulerMapZip(data) {\n  return request.get('map/loadMapFileByAmr', data, \"blob\");\n}\n\n// 获取1.0的在线小车列表\nexport function getOldOnlineAmr() {\n  return request.get('dispatch/vehicle/getActiveVehicles')\n}","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./largeScreen.vue?vue&type=style&index=0&id=f88af942&lang=scss&scoped=true&\"","/*!\n* screenfull\n* v5.2.0 - 2021-11-03\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-monitor\"},[_vm._m(0),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"left\"}),_c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"map-main\"},_vm._l((_vm.mapList),function(item,i){return _c('div',{key:i,staticClass:\"map-item\",on:{\"click\":function($event){return _vm.clickChangeMap(i)}}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),0)]),_c('div',{staticClass:\"right\"})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('div',[_vm._v(\"蓝芯智能工厂AMR调度监控\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main-monitor\">\n    <div class=\"title\"><div>蓝芯智能工厂AMR调度监控</div></div>\n    <div class=\"main\">\n      <div class=\"left\"></div>\n      <div class=\"center\">\n        <div class=\"map-main\">\n          <div\n            class=\"map-item\"\n            v-for=\"(item, i) in mapList\"\n            :key=\"i\"\n            @click=\"clickChangeMap(i)\"\n          >\n            {{ item.name }}\n          </div>\n        </div>\n      </div>\n      <div class=\"right\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\"mapList\"],\n  data() {\n    return {};\n  },\n  mounted() {\n    this.openInterval();\n  },\n  beforeDestroy() {\n    this.clearInterval();\n  },\n  methods: {\n    // 打开定时器，获取信息\n    openInterval() {\n      console.log(\"实时获取主监控页数据\");\n    },\n    // 关闭定时器，减少资源损耗\n    clearInterval() {\n      console.log(\"清除中央数据的定时器\");\n    },\n    // 切换地图\n    clickChangeMap(i) {\n      this.$emit(\"clickChangeMap\", i);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.main-monitor {\n  padding: 15px;\n  box-sizing: border-box;\n  .title {\n    display: flex;\n    justify-content: center;\n    div {\n      padding: 2px 0;\n      font-weight: 900;\n      font-size: 33px;\n      color: #fff;\n      border-top: solid 2px #3e0fb3;\n      border-bottom: solid 2px #50a2e4;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      word-break: break-all;\n    }\n  }\n  .main {\n    display: flex;\n    width: 100%;\n    .left {\n      width: calc(25% - 10px);\n    }\n    .center {\n      width: calc(45% - 20px);\n      margin: 0 20px;\n      .map-main{\n        .map-item{\n          \n        }\n      }\n    }\n    .right {\n      width: calc(30% - 10px);\n    }\n  }\n}\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./mainMonitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./mainMonitor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mainMonitor.vue?vue&type=template&id=70d3c383&scoped=true&\"\nimport script from \"./mainMonitor.vue?vue&type=script&lang=js&\"\nexport * from \"./mainMonitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mainMonitor.vue?vue&type=style&index=0&id=70d3c383&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70d3c383\",\n  null\n  \n)\n\nexport default component.exports","import { exportDays } from \"../../public/static/Enumeration\"\nimport { Message } from \"element-ui\";\n\nvar moment = require('moment');\n// 修改时间格式\nexport const formatTime = (time) => {\n    if (!time) {\n        return \"\"\n    } else {\n        return moment(new Date(time)).locale('zh-cn').format('YYYY-MM-DD HH:mm:ss')\n    }\n}\n\n// 最近一周\nexport const starWeektDate = () => {\n    return moment().add(-7, 'days').format('YYYY-MM-DD HH:mm:ss')\n}\nexport const endWeekDate = () => {\n    return moment().format('YYYY-MM-DD HH:mm:ss')\n}\n\n//当天\nexport const startDay = () => {\n    return moment().startOf('day').format('YYYY-MM-DD HH:mm:ss')\n}\nexport const endDay = () => {\n    return moment().endOf('day').format('YYYY-MM-DD HH:mm:ss')\n}\n\n// 昨天\nexport const yesterdayStart = () => {\n    return moment(moment().startOf('day')).add(-1, 'days').format('YYYY-MM-DD HH:mm:ss')\n}\nexport const yesterdayEnd = () => {\n    return moment(moment().endOf('day')).add(-1, 'days').format('YYYY-MM-DD HH:mm:ss')\n}\n\n//本月\nexport const starMonth = () => {\n    return moment().month(moment().month() - 0).startOf('month').format('YYYY-MM-DD HH:mm:ss')\n}\nexport const endMonth = () => {\n    return moment().month(moment().month() - 0).endOf('month').format('YYYY-MM-DD HH:mm:ss')\n}\n\n// 当前时间\nexport const nowTime = () => {\n    return moment().locale('zh-cn').format('YYYYMMDDHHmmss');\n}\n// 当前时间，完整格式\nexport const nowTimeTotal = () => {\n    return moment().format('YYYY-MM-DD HH:mm:ss');\n}\n\n// 日期快捷键\nexport const pickerOptions = {\n    shortcuts: [\n        {\n            text: \"今天\",\n            onClick(picker) {\n                const end = new Date();\n                const start = new Date();\n                start.setTime(new Date().setHours(0, 0, 0, 0));\n                picker.$emit(\"pick\", [start, end]);\n            },\n        },\n        {\n            text: \"昨天\",\n            onClick(picker) {\n                picker.$emit(\"pick\", [yesterdayStart(), yesterdayEnd()]);\n            },\n        },\n        {\n            text: \"最近一周\",\n            onClick(picker) {\n                picker.$emit(\"pick\", [starWeektDate(), endWeekDate()]);\n            },\n        },\n        {\n            text: \"最近一个月\",\n            onClick(picker) {\n                const end = new Date();\n                const start = new Date();\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n                picker.$emit(\"pick\", [start, end]);\n            },\n        },\n        {\n            text: \"最近三个月\",\n            onClick(picker) {\n                const end = new Date();\n                const start = new Date();\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n                picker.$emit(\"pick\", [start, end]);\n            },\n        },\n    ],\n}\n\n// 电池日期快捷键\nexport const batteryPickerOptions = {\n    shortcuts: [\n        {\n            text: \"今天\",\n            onClick(picker) {\n                const end = new Date();\n                const start = new Date();\n                start.setTime(new Date().setHours(0, 0, 0, 0));\n                picker.$emit(\"pick\", [start, end]);\n            },\n        },\n        {\n            text: \"昨天\",\n            onClick(picker) {\n                picker.$emit(\"pick\", [yesterdayStart(), yesterdayEnd()]);\n            },\n        },\n        {\n            text: \"最近一周\",\n            onClick(picker) {\n                picker.$emit(\"pick\", [starWeektDate(), endWeekDate()]);\n            },\n        },\n        {\n            text: \"最近半个月\",\n            onClick(picker) {\n                const end = new Date();\n                const start = new Date();\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 15);\n                picker.$emit(\"pick\", [start, end]);\n            },\n        },\n    ],\n}\n\n\n\n\n// 计算需要多大长度的数组来容纳稼动率\nexport const setArrLength = (start, end, mark, scale) => {\n    // 处理起始点和终结点\n    let startHour = Number(start.slice(11, 13))\n    if (startHour % 2 === 1) {\n        startHour += 1\n    } else if (Number(start.slice(14, 16)) > 0) {\n        startHour += 2\n    }\n    if (startHour < 10) startHour = \"0\" + startHour\n    start = start.slice(0, 11) + startHour + ':00:00'\n    let endHour = Number(end.slice(11, 13))\n    if (endHour % 2 === 1) {\n        if (Number(end.slice(14, 16)) === 59 && Number(end.slice(17, 19)) === 59) {\n            endHour += 1\n        } else {\n            endHour -= 1\n        }\n    }\n    // 为了保持时间格式，当小于10时，加个0\n    if (endHour < 10) endHour = \"0\" + endHour\n    end = end.slice(0, 11) + endHour + ':00:00'\n    let length = Math.ceil(moment(end).diff(moment(start), mark, true) / scale);\n    return [length, start, end]\n}\n\n// 获取两个时间段之间间隔的2个小时数\nexport const getLength = (start, end) => {\n    let length = moment(end).diff(moment(start), \"hours\") / 2;\n    return length\n}\n// 计算数组的当前下标对应的时间范围\nexport const setTimeRange = (start, index, mark, scale) => {\n    return [moment(start).add(index * scale, mark).format('YYYY-MM-DD HH:mm:ss'), moment(start).add((index + 1) * scale, mark).format('YYYY-MM-DD HH:mm:ss')]\n}\n\n// 计算传入值在数组中对应处于的下标\nexport const getDataIndex = (originStart, dataStart, mark) => {\n    let index = moment(dataStart).diff(moment(originStart), mark)\n    if (mark === 'hours') index = Math.ceil(index / 2);\n    return index\n}\n\n//计算电池趋势默认数组总长度\nexport const setBatteryLength = (start, end, mark, scale) => {\n    // 处理起始点和终结点\n    start = start.slice(0, 15) + \"0:00\"\n    end = end.slice(0, 15) + \"0:00\"\n    let length = Math.ceil(moment(end).diff(moment(start), mark, true) / scale);\n    return [length, start, end]\n}\n\n// 获取两个时间段之间间隔的2个小时数\nexport const getBatteryLength = (start, end) => {\n    let length = moment(end).diff(moment(start), \"minutes\");\n    return length\n}\n\n// 计算时间区间间隔天数\nexport const getIntervalDays = (start, end) => {\n    let dateSpan, iDays;\n    start = Date.parse(start);\n    end = Date.parse(end);\n    dateSpan = end - start;\n    dateSpan = Math.abs(dateSpan);\n    iDays = Math.floor(dateSpan / (24 * 3600 * 1000));\n    return iDays;\n}\n\n// 判断间隔天数是否超过规定值\nexport const checkIntervalDays = (dateFilter) => {\n    if (dateFilter && dateFilter.length > 0) {\n        let [start, end] = dateFilter\n        let time = getIntervalDays(start, end);\n        if (time > exportDays) {\n            Message.warning(\"导出数据只支持7天以内\");\n            return false\n        } else {\n            return true\n        }\n    } else {\n        Message.warning(\"请先选择时间区间\");\n        return false;\n    }\n}\n\n// 计算时间区间的间隔时间\nexport const getIntervalTime = (start, end) => {\n    let days = moment(end).diff(moment(start), 'days')\n    let hours = (moment(end).diff(moment(start), 'hours')) % 24\n    let minutes = (moment(end).diff(moment(start), 'minutes')) % 60\n    let seconds = (moment(end).diff(moment(start), 'seconds')) % 60\n    return (days ? days + \"天\" : '') + (hours ? hours + '时' : \"\") + minutes + \"分\" + seconds + \"秒\"\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"monitor-container large-screen\",attrs:{\"id\":\"monitor-container\"}},[(_vm.isCarousel)?_c('el-carousel',{ref:\"carousel\",attrs:{\"trigger\":\"click\",\"height\":\"100vh\",\"interval\":_vm.carouseTime * 1000,\"autoplay\":_vm.autoplay,\"arrow\":\"never\"},on:{\"change\":_vm.changeCarousel}},[_c('el-carousel-item',{attrs:{\"name\":\"主监控页\",\"label\":\"主监控页\"}},[_c('main-monitor',{ref:\"mainMonitor\",attrs:{\"mapList\":_vm.mapList},on:{\"clickChangeMap\":_vm.clickChangeMap}})],1),_vm._l((_vm.mapList),function(item,i){return _c('el-carousel-item',{key:i,attrs:{\"name\":'map-' + item.id,\"label\":item.name}},[_c('div',{staticClass:\"map-view\",attrs:{\"id\":'map-' + item.id}})])})],2):_c('div',[_c('div',{attrs:{\"id\":\"map-view\"}}),_c('div',{staticClass:\"ui-layer map-layer\"},[_c('el-select',{staticStyle:{\"width\":\"250px\",\"margin-right\":\"10px\",\"color\":\"#ccc\"},attrs:{\"popper-append-to-body\":false,\"placeholder\":\"地图名\",\"size\":\"small\"},on:{\"change\":_vm.changeMap},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.areaLists),function(group,i){return _c('el-option-group',{key:'area' + group.id},[_c('div',{staticClass:\"workSpace-main\"},[_c('span',{staticClass:\"workSpaceNumber\"},[_vm._v(_vm._s(i + 1))]),_c('span',{staticClass:\"workSpaceSelect\"},[_c('span',[_vm._v(_vm._s(group.name))])])]),_vm._l((group['topologyMapPos']),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\"}},[_c('span',[_vm._v(_vm._s(item.name))]),(!_vm.unLoginLargeScreen)?_c('el-link',{attrs:{\"underline\":true,\"type\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$router.push({\n                    path: (\"/mapDetails/\" + (item.id)),\n                    query: { backPage: _vm.$route.fullPath },\n                  })}}},[_vm._v(\"详情 \")]):_vm._e()],1)])})],2)}),1),_c('div',[_c('el-button',{attrs:{\"icon\":\"el-icon-s-tools\",\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.layersVisible = !_vm.layersVisible}}}),(_vm.layersVisible)?_vm._l(([\n              '路线',\n              '点位名称',\n              '激光图',\n              'AMR标签',\n              '任务路径' ]),function(label,index){return _c('el-button',{key:index,staticClass:\"layer-btn\",class:{ 'layer-btn-active': _vm.activeArr.includes(index) },attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.setLayer(index)}}},[_vm._v(_vm._s(label)+\" \")])}):_vm._e(),_c('el-button',{attrs:{\"icon\":\"el-icon-map-location\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.locateVisible = !_vm.locateVisible}}}),(_vm.locateVisible)?[_c('el-button',{staticClass:\"locate-btn\",attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.getLocate()}}},[_vm._v(\"已存视角\")]),_c('el-button',{staticClass:\"locate-btn\",attrs:{\"size\":\"small\",\"type\":\"info\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.getDefaultLocate()}}},[_vm._v(\"默认视角\")]),_c('el-button',{staticClass:\"locate-btn\",attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.saveLocate()}}},[_vm._v(\"保存\")])]:_vm._e()],2)],1)]),_c('vue-drag-resize',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.topVisible),expression:\"topVisible\"}],attrs:{\"w\":215,\"h\":250,\"isDraggable\":true,\"isResizable\":false,\"x\":400,\"y\":100,\"z\":1001}},[_c('div',{staticClass:\"ui-layer top-layer\"},[_vm._l((_vm.prop),function(item,index){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.prop.length > 0),expression:\"prop.length > 0\"}],key:index,staticClass:\"top-item\"},[(index === 1)?_c('div',{staticStyle:{\"margin\":\"15px 0\",\"height\":\"2px\",\"background\":\"-webkit-linear-gradient(\"}}):_c('p',[_c('span',{staticClass:\"top-item-label\"},[_vm._v(_vm._s(item.label))]),_c('span',[_vm._v(_vm._s(item.value))])])])}),_c('div',{staticClass:\"border-top\"}),_c('div',{staticClass:\"border-close\"},[_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){_vm.topVisible = false}}})]),_c('div',{staticClass:\"border-bottom\"})],2)]),(_vm.info)?_c('vue-drag-resize',{attrs:{\"h\":300,\"isDraggable\":true,\"isResizable\":false,\"w\":400,\"x\":50,\"y\":400,\"z\":1001,\"dragCancel\":\"button,button>span,.el-icon-close,.info-box-btn\"}},[_c('div',{staticClass:\"ui-layer info-layer\"},[_c('div',{staticClass:\"info-title\"},[_c('span',{staticStyle:{\"color\":\"#0075d9\",\"font-size\":\"16px\"}},[_vm._v(\"ID\")]),_c('span',{staticStyle:{\"color\":\"#0075d9\"}},[_vm._v(_vm._s(_vm.info[\"id\"]))]),_c('span',{staticStyle:{\"color\":\"#0075d9\",\"font-size\":\"16px\"}},[_vm._v(\"IP\")]),_c('el-button',{staticStyle:{\"color\":\"#0075d9\",\"margin-right\":\"5px\",\"text-decoration\":\"underline\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.toAgvWeb(_vm.info['ip'])}}},[_vm._v(_vm._s(_vm.info[\"ip\"]))]),(!_vm.unLoginLargeScreen)?_c('el-button',{staticStyle:{\"margin-left\":\"0px\"},attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push({\n              path: '/task/list',\n              query: {\n                mapId: _vm.value,\n                vehicleId: _vm.info['id'],\n                backPage: _vm.$route.fullPath,\n              },\n            })}}},[_vm._v(\"新增任务 \")]):_vm._e(),_c('el-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.releaseLockedPoints(_vm.info)}}},[_vm._v(\"释放点位\")])],1),_c('div',{staticClass:\"info-btn\"},[_c('span',{staticClass:\"info-box-btn\",class:{ 'active-box': _vm.infoState === 0 },on:{\"click\":function($event){_vm.infoState = 0}}},[_vm._v(\"基本信息\")]),_c('span',{staticClass:\"info-box-btn\",class:{ 'active-box': _vm.infoState === 1 },on:{\"click\":function($event){_vm.infoState = 1}}},[_vm._v(\"任务信息\")]),_c('span',{staticClass:\"info-box-btn\",class:{ 'active-box': _vm.infoState === 2 },on:{\"click\":function($event){_vm.infoState = 2}}},[_vm._v(\"任务进度\")])]),(_vm.infoState === 0)?_c('div',[_c('div',{staticClass:\"info-item\"},[_c('div',{staticClass:\"item-title\"},[_vm._v(\"电量\")]),_c('div',{staticClass:\"item-content\"},[_c('span',{staticClass:\"battery\",class:{ 'battery-low': _vm.info['batteryPercentile'] < 30 }},[_c('span',{staticClass:\"battery-size\",style:({\n                  height: Math.min(84, _vm.info['batteryPercentile']) + '%',\n                  backgroundColor:\n                    _vm.info['batteryPercentile'] < 30 ? '#fc2201' : '#38ffae',\n                })})]),_c('span',[_vm._v(_vm._s(_vm.info[\"batteryPercentile\"])+\"%\")])]),_c('div',{staticClass:\"item-title\"},[_vm._v(\"状态\")]),_c('div',{staticClass:\"item-content item-lines\"},[(_vm.info['stateId'] !== 9)?_c('el-button',{style:({\n                backgroundColor: [6, 8].includes(_vm.info['stateId'])\n                  ? '#fc2201'\n                  : '#4987ff',\n                borderColor: 'transparent',\n                cursor: 'text',\n              }),attrs:{\"size\":\"mini\",\"type\":\"danger\"}},[_vm._v(\" \"+_vm._s(_vm.info[\"state\"])+\" \")]):_vm._e(),(_vm.info['stateId'] === 2)?_c('i',{staticClass:\"\\n                el-icon-video-pause\\n                state-icon state-icon-pause\\n                item-lines-buttom\\n              \",on:{\"click\":function($event){return _vm.pauseAmr(_vm.info)}}}):_vm._e(),(_vm.info['stateId'] === 6)?_c('i',{staticClass:\"\\n                el-icon-video-play\\n                state-icon state-icon-resume\\n                item-lines-buttom\\n              \",on:{\"click\":function($event){return _vm.resumeAmr(_vm.info)}}}):_vm._e(),(_vm.info['stateId'] === 9)?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.toAgvWeb(_vm.info['ip'])}}},[_vm._v(\"等待确认\")]):_vm._e()],1)]),_c('div',{staticClass:\"info-item\"},[_c('div',{staticClass:\"item-title\"},[_vm._v(\"位置\")]),_c('div',{staticClass:\"item-content item-lines\"},[_c('div',[_vm._v(\" \"+_vm._s(_vm.info[\"coordinate\"][\"x\"])+\", \"+_vm._s(_vm.info[\"coordinate\"][\"y\"])+\" \")]),(_vm.info.coordinate && _vm.info.coordinate.location)?_c('div',{staticClass:\"item-content-oneLine item-lines-buttom\"},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":_vm.info['coordinate']['location'],\"placement\":\"top\"}},[_c('span',[_vm._v(_vm._s(_vm.info[\"coordinate\"][\"location\"]))])])],1):_vm._e()]),_c('div',{staticClass:\"item-title\"},[_vm._v(\"速度\")]),_c('div',{staticClass:\"item-content\"},[_vm._v(\" \"+_vm._s(_vm.info.velocity && _vm.info.velocity.vx !== undefined ? _vm.info.velocity.vx.toFixed(2) + \"m/s\" : \"---\")+\" \")])])]):_vm._e(),(_vm.infoState === 1 && _vm.amrTaskInfo.id)?_c('div',[_c('el-card',{staticClass:\"orderInfo\"},[_c('div',{staticClass:\"orderInfo-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"当前任务\")]),(!_vm.unLoginLargeScreen)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$router.push({\n                  path: '/task/list',\n                  query: {\n                    backPage: _vm.$route.fullPath,\n                    taskChainId: _vm.amrTaskInfo.id,\n                  },\n                })}}},[_vm._v(\"查看更多\")]):_vm._e()],1),_c('div',{staticClass:\"orderInfo-item\"},[_c('div',{staticClass:\"orderInfo-item-title\"},[_vm._v(\"任务编号:\")]),_c('div',{staticClass:\"orderInfo-item-value\"},[_vm._v(\" \"+_vm._s(_vm.amrTaskInfo.id || \"---\")+\" \")])]),_c('div',{staticClass:\"orderInfo-item\"},[_c('div',{staticClass:\"orderInfo-item-title\"},[_vm._v(\"任务名称:\")]),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":_vm.amrTaskInfo.name,\"placement\":\"top\"}},[_c('div',{staticClass:\"orderInfo-item-value\"},[_vm._v(\" \"+_vm._s(_vm.amrTaskInfo.name || \"---\")+\" \")])])],1),_c('div',{staticClass:\"orderInfo-item\"},[_c('div',{staticClass:\"orderInfo-item-title\"},[_vm._v(\"目标点位:\")]),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":_vm.amrTaskInfo.targetPoint,\"placement\":\"top\"}},[_c('div',{staticClass:\"orderInfo-item-value\"},[_vm._v(\" \"+_vm._s(_vm.amrTaskInfo.targetPoint || \"---\")+\" \")])])],1),_c('div',{staticClass:\"orderInfo-item\"},[_c('div',{staticClass:\"orderInfo-item-title\"},[_vm._v(\"优先级:\")]),_c('div',{staticClass:\"orderInfo-item-value\"},[_vm._v(\" \"+_vm._s(_vm.amrTaskInfo.priority === undefined ? \"---\" : _vm.amrTaskInfo.priority > 0 ? \"高\" : _vm.amrTaskInfo.priority === 0 ? \"正常\" : \"低\")+\" \")])]),_c('div',{staticClass:\"orderInfo-item\"},[_c('div',{staticClass:\"orderInfo-item-title\"},[_vm._v(\"任务状态:\")]),_c('div',{staticClass:\"orderInfo-item-value\"},[_vm._v(\" \"+_vm._s(_vm.taskStateList[_vm.amrTaskInfo.status] || \"---\")+\" \")])])])],1):_vm._e(),(_vm.infoState === 1 && !_vm.amrTaskInfo.id)?_c('div',[_c('el-card',{staticClass:\"orderInfo empty-main\"},[_vm._v(\" 未执行过任务, 点击右上角手动新建任务试试。 \")])],1):_vm._e(),(_vm.infoState === 2 && _vm.amrTaskInfo.id)?_c('div',[_c('div',{staticClass:\"orderProgress\"},[_c('div',{staticClass:\"orderProgress-item\"},[_vm._v(\" 任务ID: \"),_c('span',{staticClass:\"orderProgress-id\"},[_vm._v(_vm._s(_vm.amrTaskInfo.id || \"---\"))])]),(_vm.amrTaskInfo.status !== 4)?_c('div',{staticClass:\"orderProgress-item\"},[_c('el-progress',{attrs:{\"percentage\":_vm.amrTaskInfo.process || 0}})],1):_vm._e(),(_vm.amrTaskInfo.status === 4)?_c('div',{staticClass:\"orderProgress-item\"},[_c('el-progress',{attrs:{\"percentage\":100,\"color\":\"#F56C6C\",\"format\":function () {\n                  return '异常中';\n                }}})],1):_vm._e(),(_vm.amrTaskInfo.taskList)?_c('div',{staticClass:\"orderProgress-item orderProgress-steps\"},[(\n                _vm.amrTaskInfo.intervalTime &&\n                _vm.amrTaskInfo.remainTime &&\n                _vm.amrTaskInfo.status !== 4\n              )?_c('div',{staticClass:\"orderProgress-time\"},[_vm._v(\" 已执行\"+_vm._s(_vm.amrTaskInfo.intervalTime)+\", 大约剩余\"+_vm._s(_vm.amrTaskInfo.remainTime)+\" \")]):_vm._e(),_c('el-steps',{attrs:{\"active\":_vm.amrTaskInfo.active || 0,\"finish-status\":\"success\",\"direction\":_vm.amrTaskInfo.taskList.length < 4 ? 'horizontal' : 'vertical'}},_vm._l((_vm.amrTaskInfo.taskList),function(item,i){return _c('el-step',{key:i,attrs:{\"title\":item.name,\"description\":item.time}})}),1)],1):_vm._e()])]):_vm._e(),(_vm.infoState === 2 && !_vm.amrTaskInfo.id)?_c('div',[_c('el-card',{staticClass:\"orderInfo empty-main\"},[_vm._v(\" 无实时任务, 进度为空。 \")])],1):_vm._e(),_c('div',{staticClass:\"border-top\"}),_c('div',{staticClass:\"border-close\"},[_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){return _vm.changeActiveInfoId(0)}}})]),_c('div',{staticClass:\"border-bottom\"})])]):_vm._e(),(!_vm.isCarousel || _vm.carouselIndex !== 0)?_c('agv-layer',{ref:\"agvLayer\",attrs:{\"amrList\":_vm.amrList,\"isPc\":_vm.isPc},on:{\"changeActiveInfoId\":_vm.changeActiveInfoId}}):_vm._e(),_c('div',{staticClass:\"tool-container\"},[_c('el-menu',{attrs:{\"background-color\":\"#001844\",\"text-color\":\"#fff\",\"active-text-color\":\"teal\"}},[(!_vm.unLoginLargeScreen)?_c('el-tooltip',{attrs:{\"content\":\"退出大屏展示\",\"placement\":\"right\",\"enterable\":false}},[_c('el-menu-item',{attrs:{\"index\":\"0\"},on:{\"click\":function($event){return _vm.handleVehicleOp('largeScreen')}}},[_c('i',{staticClass:\"el-icon-circle-close\"})])],1):_vm._e(),_c('el-tooltip',{attrs:{\"content\":_vm.isFullScreen ? '取消全屏' : '开启全屏',\"placement\":\"right\",\"enterable\":false}},[_c('el-menu-item',{attrs:{\"index\":\"2\"},on:{\"click\":function($event){return _vm.handleVehicleOp('fullScreen')}}},[_c('i',{class:_vm.isFullScreen ? 'el-icon-close' : 'el-icon-full-screen'})])],1)],1)],1),_c('div',{staticClass:\"nowTime\"},[_vm._v(_vm._s(_vm.nowTime))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"monitor-container large-screen\" id=\"monitor-container\">\n    <!-- 中央大屏 -->\n    <el-carousel\n      trigger=\"click\"\n      height=\"100vh\"\n      :interval=\"carouseTime * 1000\"\n      :autoplay=\"autoplay\"\n      arrow=\"never\"\n      @change=\"changeCarousel\"\n      ref=\"carousel\"\n      v-if=\"isCarousel\"\n    >\n      <el-carousel-item name=\"主监控页\" label=\"主监控页\">\n        <main-monitor\n          :mapList=\"mapList\"\n          @clickChangeMap=\"clickChangeMap\"\n          ref=\"mainMonitor\"\n        />\n      </el-carousel-item>\n      <el-carousel-item\n        v-for=\"(item, i) in mapList\"\n        :key=\"i\"\n        :name=\"'map-' + item.id\"\n        :label=\"item.name\"\n      >\n        <div :id=\"'map-' + item.id\" class=\"map-view\"></div>\n      </el-carousel-item>\n    </el-carousel>\n    <!-- 局部大屏 -->\n    <div v-else>\n      <div id=\"map-view\"></div>\n      <div class=\"ui-layer map-layer\">\n        <el-select\n          :popper-append-to-body=\"false\"\n          @change=\"changeMap\"\n          placeholder=\"地图名\"\n          size=\"small\"\n          style=\"width: 250px; margin-right: 10px; color: #ccc\"\n          v-model=\"value\"\n        >\n          <el-option-group\n            :key=\"'area' + group.id\"\n            v-for=\"(group, i) in areaLists\"\n          >\n            <div class=\"workSpace-main\">\n              <span class=\"workSpaceNumber\">{{ i + 1 }}</span>\n              <span class=\"workSpaceSelect\">\n                <span>{{ group.name }}</span>\n              </span>\n            </div>\n            <el-option\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n              v-for=\"item in group['topologyMapPos']\"\n            >\n              <div style=\"display: flex; justify-content: space-between\">\n                <span>{{ item.name }}</span>\n                <el-link\n                  :underline=\"true\"\n                  @click.stop=\"\n                    $router.push({\n                      path: `/mapDetails/${item.id}`,\n                      query: { backPage: $route.fullPath },\n                    })\n                  \"\n                  type=\"primary\"\n                  v-if=\"!unLoginLargeScreen\"\n                  >详情\n                </el-link>\n              </div>\n            </el-option>\n          </el-option-group>\n        </el-select>\n        <div>\n          <el-button\n            @click=\"layersVisible = !layersVisible\"\n            icon=\"el-icon-s-tools\"\n            size=\"small\"\n            type=\"primary\"\n          />\n          <template v-if=\"layersVisible\">\n            <el-button\n              :class=\"{ 'layer-btn-active': activeArr.includes(index) }\"\n              :key=\"index\"\n              @click=\"setLayer(index)\"\n              class=\"layer-btn\"\n              size=\"small\"\n              v-for=\"(label, index) in [\n                '路线',\n                '点位名称',\n                '激光图',\n                'AMR标签',\n                '任务路径',\n              ]\"\n              >{{ label }}\n            </el-button>\n          </template>\n          <el-button\n            @click=\"locateVisible = !locateVisible\"\n            icon=\"el-icon-map-location\"\n            size=\"small\"\n            type=\"info\"\n          />\n          <template v-if=\"locateVisible\">\n            <el-button\n              class=\"locate-btn\"\n              size=\"small\"\n              @click=\"getLocate()\"\n              type=\"primary\"\n              plain\n              >已存视角</el-button\n            >\n\n            <el-button\n              class=\"locate-btn\"\n              size=\"small\"\n              @click=\"getDefaultLocate()\"\n              type=\"info\"\n              plain\n              >默认视角</el-button\n            >\n            <el-button\n              class=\"locate-btn\"\n              size=\"small\"\n              type=\"success\"\n              @click=\"saveLocate()\"\n              plain\n              >保存</el-button\n            >\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <!-- <div class=\"ui-layer search-layer\">\n      <el-input\n        placeholder=\"请输入AMR名称/任务链名称\"\n        size=\"small\"\n        style=\"width:250px;margin-right:10px;\"\n        v-model=\"searchVal\" :maxlength=\"30\">\n        <i class=\"el-input__icon el-icon-search\" slot=\"prefix\"/>\n      </el-input>\n      <el-button size=\"small\" type=\"primary\">搜索</el-button>\n    </div> -->\n\n    <!-- 点位路径详情 -->\n    <vue-drag-resize\n      :w=\"215\"\n      :h=\"250\"\n      :isDraggable=\"true\"\n      :isResizable=\"false\"\n      :x=\"400\"\n      :y=\"100\"\n      :z=\"1001\"\n      v-show=\"topVisible\"\n    >\n      <div class=\"ui-layer top-layer\">\n        <div\n          :key=\"index\"\n          class=\"top-item\"\n          v-for=\"(item, index) in prop\"\n          v-show=\"prop.length > 0\"\n        >\n          <div\n            style=\"\n              margin: 15px 0;\n              height: 2px;\n              background: -webkit-linear-gradient(\n                left,\n                rgba(45, 96, 206, 0.1),\n                #2d60ce,\n                rgba(45, 96, 206, 0.1)\n              );\n            \"\n            v-if=\"index === 1\"\n          ></div>\n          <p v-else>\n            <span class=\"top-item-label\">{{ item.label }}</span>\n            <span>{{ item.value }}</span>\n          </p>\n        </div>\n        <!--   边框样式   -->\n        <div class=\"border-top\"></div>\n        <div class=\"border-close\">\n          <i @click=\"topVisible = false\" class=\"el-icon-close\" />\n        </div>\n        <div class=\"border-bottom\"></div>\n      </div>\n    </vue-drag-resize>\n\n    <vue-drag-resize\n      :h=\"300\"\n      :isDraggable=\"true\"\n      :isResizable=\"false\"\n      :w=\"400\"\n      :x=\"50\"\n      :y=\"400\"\n      :z=\"1001\"\n      v-if=\"info\"\n      dragCancel=\"button,button>span,.el-icon-close,.info-box-btn\"\n    >\n      <div class=\"ui-layer info-layer\">\n        <div class=\"info-title\">\n          <span style=\"color: #0075d9; font-size: 16px\">ID</span>\n          <span style=\"color: #0075d9\">{{ info[\"id\"] }}</span>\n          <span style=\"color: #0075d9; font-size: 16px\">IP</span>\n          <el-button\n            type=\"text\"\n            @click=\"toAgvWeb(info['ip'])\"\n            style=\"\n              color: #0075d9;\n              margin-right: 5px;\n              text-decoration: underline;\n            \"\n            >{{ info[\"ip\"] }}</el-button\n          >\n\n          <el-button\n            style=\"margin-left: 0px\"\n            @click=\"\n              $router.push({\n                path: '/task/list',\n                query: {\n                  mapId: value,\n                  vehicleId: info['id'],\n                  backPage: $route.fullPath,\n                },\n              })\n            \"\n            size=\"mini\"\n            type=\"primary\"\n            v-if=\"!unLoginLargeScreen\"\n            >新增任务\n          </el-button>\n          <el-button\n            type=\"warning\"\n            @click=\"releaseLockedPoints(info)\"\n            size=\"mini\"\n            style=\"margin-left: 5px\"\n            >释放点位</el-button\n          >\n        </div>\n        <div class=\"info-btn\">\n          <span\n            :class=\"{ 'active-box': infoState === 0 }\"\n            @click=\"infoState = 0\"\n            class=\"info-box-btn\"\n            >基本信息</span\n          >\n          <span\n            :class=\"{ 'active-box': infoState === 1 }\"\n            @click=\"infoState = 1\"\n            class=\"info-box-btn\"\n            >任务信息</span\n          >\n          <span\n            :class=\"{ 'active-box': infoState === 2 }\"\n            @click=\"infoState = 2\"\n            class=\"info-box-btn\"\n            >任务进度</span\n          >\n        </div>\n        <div v-if=\"infoState === 0\">\n          <div class=\"info-item\">\n            <div class=\"item-title\">电量</div>\n            <div class=\"item-content\">\n              <span\n                :class=\"{ 'battery-low': info['batteryPercentile'] < 30 }\"\n                class=\"battery\"\n              >\n                <!--    定位问题，防超出，最大84 -->\n                <span\n                  :style=\"{\n                    height: Math.min(84, info['batteryPercentile']) + '%',\n                    backgroundColor:\n                      info['batteryPercentile'] < 30 ? '#fc2201' : '#38ffae',\n                  }\"\n                  class=\"battery-size\"\n                />\n              </span>\n              <span>{{ info[\"batteryPercentile\"] }}%</span>\n            </div>\n            <div class=\"item-title\">状态</div>\n            <div class=\"item-content item-lines\">\n              <el-button\n                :style=\"{\n                  backgroundColor: [6, 8].includes(info['stateId'])\n                    ? '#fc2201'\n                    : '#4987ff',\n                  borderColor: 'transparent',\n                  cursor: 'text',\n                }\"\n                size=\"mini\"\n                type=\"danger\"\n                v-if=\"info['stateId'] !== 9\"\n              >\n                {{ info[\"state\"] }}\n              </el-button>\n              <!-- 小车处于运行状态，可以暂停小车 -->\n              <i\n                class=\"\n                  el-icon-video-pause\n                  state-icon state-icon-pause\n                  item-lines-buttom\n                \"\n                @click=\"pauseAmr(info)\"\n                v-if=\"info['stateId'] === 2\"\n              ></i>\n              <!-- 小车处于外部中断状态，可以恢复小车 -->\n              <i\n                class=\"\n                  el-icon-video-play\n                  state-icon state-icon-resume\n                  item-lines-buttom\n                \"\n                @click=\"resumeAmr(info)\"\n                v-if=\"info['stateId'] === 6\"\n              ></i>\n              <!-- 小车处于等待确认状态，可以跳转至单车web确认小车 -->\n              <el-button\n                type=\"danger\"\n                @click.stop=\"toAgvWeb(info['ip'])\"\n                v-if=\"info['stateId'] === 9\"\n                >等待确认</el-button\n              >\n            </div>\n          </div>\n          <div class=\"info-item\">\n            <div class=\"item-title\">位置</div>\n            <div class=\"item-content item-lines\">\n              <div>\n                {{ info[\"coordinate\"][\"x\"] }}, {{ info[\"coordinate\"][\"y\"] }}\n              </div>\n              <div\n                class=\"item-content-oneLine item-lines-buttom\"\n                v-if=\"info.coordinate && info.coordinate.location\"\n              >\n                <el-tooltip\n                  effect=\"dark\"\n                  :content=\"info['coordinate']['location']\"\n                  placement=\"top\"\n                >\n                  <span>{{ info[\"coordinate\"][\"location\"] }}</span>\n                </el-tooltip>\n              </div>\n            </div>\n            <div class=\"item-title\">速度</div>\n            <div class=\"item-content\">\n              {{\n                info.velocity && info.velocity.vx !== undefined\n                  ? info.velocity.vx.toFixed(2) + \"m/s\"\n                  : \"---\"\n              }}\n            </div>\n          </div>\n        </div>\n\n        <div v-if=\"infoState === 1 && amrTaskInfo.id\">\n          <el-card class=\"orderInfo\">\n            <div slot=\"header\" class=\"orderInfo-header\">\n              <span>当前任务</span>\n              <el-button\n                type=\"primary\"\n                size=\"mini\"\n                @click.stop=\"\n                  $router.push({\n                    path: '/task/list',\n                    query: {\n                      backPage: $route.fullPath,\n                      taskChainId: amrTaskInfo.id,\n                    },\n                  })\n                \"\n                v-if=\"!unLoginLargeScreen\"\n                >查看更多</el-button\n              >\n            </div>\n            <div class=\"orderInfo-item\">\n              <div class=\"orderInfo-item-title\">任务编号:</div>\n              <div class=\"orderInfo-item-value\">\n                {{ amrTaskInfo.id || \"---\" }}\n              </div>\n            </div>\n            <div class=\"orderInfo-item\">\n              <div class=\"orderInfo-item-title\">任务名称:</div>\n              <el-tooltip\n                effect=\"dark\"\n                :content=\"amrTaskInfo.name\"\n                placement=\"top\"\n              >\n                <div class=\"orderInfo-item-value\">\n                  {{ amrTaskInfo.name || \"---\" }}\n                </div>\n              </el-tooltip>\n            </div>\n            <div class=\"orderInfo-item\">\n              <div class=\"orderInfo-item-title\">目标点位:</div>\n              <el-tooltip\n                effect=\"dark\"\n                :content=\"amrTaskInfo.targetPoint\"\n                placement=\"top\"\n              >\n                <div class=\"orderInfo-item-value\">\n                  {{ amrTaskInfo.targetPoint || \"---\" }}\n                </div>\n              </el-tooltip>\n            </div>\n            <div class=\"orderInfo-item\">\n              <div class=\"orderInfo-item-title\">优先级:</div>\n              <div class=\"orderInfo-item-value\">\n                {{\n                  amrTaskInfo.priority === undefined\n                    ? \"---\"\n                    : amrTaskInfo.priority > 0\n                    ? \"高\"\n                    : amrTaskInfo.priority === 0\n                    ? \"正常\"\n                    : \"低\"\n                }}\n              </div>\n            </div>\n            <div class=\"orderInfo-item\">\n              <div class=\"orderInfo-item-title\">任务状态:</div>\n              <div class=\"orderInfo-item-value\">\n                {{ taskStateList[amrTaskInfo.status] || \"---\" }}\n              </div>\n            </div>\n          </el-card>\n        </div>\n        <div v-if=\"infoState === 1 && !amrTaskInfo.id\">\n          <el-card class=\"orderInfo empty-main\">\n            未执行过任务, 点击右上角手动新建任务试试。\n          </el-card>\n        </div>\n        <div v-if=\"infoState === 2 && amrTaskInfo.id\">\n          <div class=\"orderProgress\">\n            <div class=\"orderProgress-item\">\n              任务ID:\n              <span class=\"orderProgress-id\">{{\n                amrTaskInfo.id || \"---\"\n              }}</span>\n            </div>\n            <div class=\"orderProgress-item\" v-if=\"amrTaskInfo.status !== 4\">\n              <el-progress :percentage=\"amrTaskInfo.process || 0\"></el-progress>\n            </div>\n            <div class=\"orderProgress-item\" v-if=\"amrTaskInfo.status === 4\">\n              <el-progress\n                :percentage=\"100\"\n                color=\"#F56C6C\"\n                :format=\"\n                  () => {\n                    return '异常中';\n                  }\n                \"\n              ></el-progress>\n            </div>\n            <div\n              class=\"orderProgress-item orderProgress-steps\"\n              v-if=\"amrTaskInfo.taskList\"\n            >\n              <div\n                class=\"orderProgress-time\"\n                v-if=\"\n                  amrTaskInfo.intervalTime &&\n                  amrTaskInfo.remainTime &&\n                  amrTaskInfo.status !== 4\n                \"\n              >\n                已执行{{ amrTaskInfo.intervalTime }}, 大约剩余{{\n                  amrTaskInfo.remainTime\n                }}\n              </div>\n              <el-steps\n                :active=\"amrTaskInfo.active || 0\"\n                finish-status=\"success\"\n                :direction=\"\n                  amrTaskInfo.taskList.length < 4 ? 'horizontal' : 'vertical'\n                \"\n              >\n                <el-step\n                  :title=\"item.name\"\n                  :description=\"item.time\"\n                  v-for=\"(item, i) in amrTaskInfo.taskList\"\n                  :key=\"i\"\n                ></el-step>\n              </el-steps>\n            </div>\n          </div>\n        </div>\n        <div v-if=\"infoState === 2 && !amrTaskInfo.id\">\n          <el-card class=\"orderInfo empty-main\">\n            无实时任务, 进度为空。\n          </el-card>\n        </div>\n        <!--   边框样式   -->\n        <div class=\"border-top\"></div>\n        <div class=\"border-close\">\n          <i @click=\"changeActiveInfoId(0)\" class=\"el-icon-close\" />\n        </div>\n        <!--      <div class=\"border-close\"><i @click=\"infoVisible=false\" class=\"el-icon-close\"/></div>-->\n        <div class=\"border-bottom\"></div>\n      </div>\n    </vue-drag-resize>\n\n    <agv-layer\n      :amrList=\"amrList\"\n      @changeActiveInfoId=\"changeActiveInfoId\"\n      v-if=\"!isCarousel || carouselIndex !== 0\"\n      ref=\"agvLayer\"\n      :isPc=\"isPc\"\n    />\n    <!-- 左下角的快捷按钮列表 -->\n    <div class=\"tool-container\">\n      <el-menu\n        background-color=\"#001844\"\n        text-color=\"#fff\"\n        active-text-color=\"teal\"\n      >\n        <el-tooltip\n          content=\"退出大屏展示\"\n          placement=\"right\"\n          :enterable=\"false\"\n          v-if=\"!unLoginLargeScreen\"\n        >\n          <el-menu-item index=\"0\" @click=\"handleVehicleOp('largeScreen')\">\n            <i class=\"el-icon-circle-close\"></i>\n          </el-menu-item>\n        </el-tooltip>\n        <el-tooltip\n          :content=\"isFullScreen ? '取消全屏' : '开启全屏'\"\n          placement=\"right\"\n          :enterable=\"false\"\n        >\n          <el-menu-item index=\"2\" @click=\"handleVehicleOp('fullScreen')\">\n            <i\n              :class=\"isFullScreen ? 'el-icon-close' : 'el-icon-full-screen'\"\n            ></i>\n          </el-menu-item>\n        </el-tooltip>\n      </el-menu>\n    </div>\n    <div class=\"nowTime\">{{ nowTime }}</div>\n  </div>\n</template>\n\n<script>\nimport * as _ from \"lodash\";\nimport {\n  pauseAmr,\n  resumeAmr,\n  getAreaMonitor,\n  getOnlineAmr,\n  getAmrTaskInfo,\n  getOldOnlineAmr,\n} from \"@/api/monitor\";\nimport { getTraffic } from \"@/api/traffic\";\nimport { getMapDetails } from \"@/api/map\";\nimport { getTaskActionList } from \"@/api/task/taskList\";\nimport { getExternalList, getExternalTypeList } from \"@/api/config/external\";\nimport { getChargePileList } from \"@/api/config/chargePile\";\nimport { Message, MessageBox, Notification } from \"element-ui\";\nimport Cookies from \"js-cookie\";\nimport { nowTimeTotal, formatTime, getIntervalTime } from \"@/utils/time.js\";\nimport store from \"@/store\";\nimport {\n  SpotTypeEnum,\n  taskStateList,\n} from \"../../../public/static/Enumeration\";\nimport screenfull from \"screenfull\";\nimport { setGraham } from \"@/utils/graham.js\";\nimport { releaseLockedPoints } from \"@/api/vehicle\";\nimport {\n  handleOldAmrData,\n  decodeAreaId,\n  sortAmrList,\n} from \"@/utils/monitorUtils.js\";\nimport AgvLayer from \"./components/agvLayer\";\nimport MainMonitor from \"./components/mainMonitor\";\nimport { getTokenCopy } from \"@/utils/auth\";\nimport \"@/views/monitor/components/monitor.scss\";\nimport setNotification from \"@/utils/notification\";\n\nconst SCALE = 20;\nvar monitorMapper = {}; // 3d绘制对象集合 中央大屏：map-地图id：mapMonitor；局部大屏 key：map-view\nvar headDocument = null; //headD的OM元素\n\nexport default {\n  props: [\"innerHeight\"],\n  components: { AgvLayer, MainMonitor },\n  data() {\n    return {\n      timer: 0, // 接口定时器\n      timerTime: 1200, // 接口定时器时长\n      taskTimer: 0, // 任务详情定时器\n      taskTime: 3000, // 任务详情定时器时长\n      layersVisible: false,\n      activeArr: [0, 2, 3, 4], // [ 0, 1, 2, 3, 4 ]\n      nodesMapper: {}, //点位集合，改为mapId-nodes\n      routesMapper: {}, //路径集合，改为mapId-routes\n      opt: null,\n      prop: [],\n      topVisible: false,\n      amrList: [],\n      // infoVisible: true,\n      infoState: 0, //小车状态\n      info: null, //选中的小车详情\n      amrTaskInfo: {}, //选中的小车任务详情\n      activeInfoId: 0,\n      searchVal: \"\",\n      areaLists: [],\n      mapList: [], // 地图列表，根据点位名称排序\n      value: Number(Cookies.get(\"map__value\")) || 0, //当前展示地图id\n      nowTimeTimer: 0, //当前时间定时器\n      nowTime: \"\", //当前时间\n      externalTypeEnum: {}, //外部设备枚举\n      taskStateList, //任务状态列表\n      actionList: {}, //任务类型列表\n      isFullScreen: document.fullscreenElement, //是否全屏\n      animateTime: 50, //一帧绘制间隔\n      params: \"\", //旧的小车数据，用来判断数据是否发生改变\n      loadingMessage: null, //提示正在绘制，手动关闭\n      timeout: null, //切换地图内容显隐定时器\n      unLoginLargeScreen: !getTokenCopy(), //若是未登录的大屏展示页面，只作为展示使用\n      locateVisible: false, //是否显示视角切换按钮\n      initTimer: null, // 初始加载bigMap文件时，定时查看是否加载结束\n      doingStatusList: [0, 1], //任务没执行完成的状态列表\n      shouldConcatOldAmr: false, //是否需要加载1.0的小车列表\n      specialAreaId: 0, //免登录大屏，指定展示的区域id\n      carouselIndex: 0, // 当前轮播图对应的下标\n      carouseTime: 8, // 地图轮播时间\n      readyDrawTime: 4, // 预加载地图准备时间\n      readyDrawTimer: 0, // 预加载地图定时器\n      isCarousel: false, //是否包含轮播图\n      autoplay: false, //轮播图是否自动切换\n      isClearDraw: false, //是否切换时清除地图\n      clearDrawNum: 6, //当地图数量高于该值时，清除地图\n      changeCarouselTimer: 0, //切换轮播图定时器，需要等切换完后才能执行，比如onresize\n      notificationMap: new setNotification(), // 故障通知\n      isPc: window.globalConfig.isPc, //是否是pc端\n    };\n  },\n  beforeDestroy() {\n    this.changeCarouselTimer && clearTimeout(this.changeCarouselTimer);\n    this.readyDrawTimer && clearTimeout(this.readyDrawTimer);\n    this.initTimer && clearInterval(this.initTimer);\n    this.initTimer = null;\n    this.loadingMessage && this.loadingMessage.close();\n    this.timer && clearInterval(this.timer);\n    this.timer = null;\n    this.taskTimer && clearInterval(this.taskTimer);\n    // 清空对象集合的占用内存\n    for (let key in monitorMapper) {\n      let mapMonitor = monitorMapper[key];\n      mapMonitor && mapMonitor.destroyed();\n      // cancelAnimationFrame(mapMonitor.rafId);\n      mapMonitor = null;\n    }\n    monitorMapper = {};\n    this.nowTimeTimer && clearInterval(this.nowTimeTimer);\n    this.timeout && clearTimeout(this.timeout);\n    window.removeEventListener(\"resize\", this.onResize);\n    headDocument = null;\n    Notification.closeAll();\n    this.notificationMap.dangerNotificationList = null;\n  },\n  async mounted() {\n    // 判断是否需要展示1.0的小车\n    this.shouldConcatOldAmr =\n      store.getters.permissions.indexOf(\"monitor/showOldAmr\") > -1;\n    // 免登录大屏时，获取指定区域\n    if (this.unLoginLargeScreen) {\n      let { areaId } = this.$route.query;\n      this.specialAreaId = decodeAreaId(areaId);\n    }\n    // 大屏展示时，一开始等待bigMap文件加载结束再去绘制地图\n    this.initTimer = setInterval(async () => {\n      if (this.initTimer) {\n        // js文件加载结束后\n        if (window.BIGMapMonitor) {\n          this.initTimer && clearInterval(this.initTimer);\n          this.initTimer = null;\n          await this.getAreaMonitor();\n          if (!this.isCarousel) {\n            // 如果是局部大屏页，直接绘制默认地图\n            this.$nextTick(async () => {\n              await this.changeMap();\n              window.addEventListener(\"resize\", this.onResize);\n              this.activeArr.push(1); //默认显示点位\n              this.setLayer(-1);\n            });\n          } else {\n            // 如果主监控页，默认展示主监控页\n            window.addEventListener(\"resize\", this.onResize);\n            this.activeArr.push(1); //默认显示点位\n            this.preDrawMonitor(0);\n          }\n        } else {\n          if (!headDocument) {\n            // 只有进入大屏展示页面，才加载bigMap文件；以免首屏加载速度变慢\n            headDocument = document.getElementsByTagName(\"head\")[0];\n            var script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = \"bigMap.monitor.js?v=1.14_20220402\";\n            headDocument.appendChild(script);\n          }\n        }\n      }\n    }, 50);\n    // 获取任务类型列表\n    getTaskActionList().then((res) => {\n      if (res.state && res.data) {\n        res.data.forEach((item) => {\n          this.$set(this.actionList, item.action, item.name);\n        });\n      }\n    });\n    // 右下角的时钟\n    this.nowTimeTimer && clearInterval(this.nowTimeTimer);\n    this.nowTimeTimer = setInterval(() => {\n      this.nowTime = nowTimeTotal();\n    }, 1000);\n  },\n  methods: {\n    // 当左侧菜单栏伸缩和resize时，作出响应；在layout-compnonts-AppMain.vue中调用\n    onResize() {\n      this.resetMapSize(this.value);\n      let mapMonitor = monitorMapper[this.setMapId()];\n      mapMonitor && mapMonitor.onWindowResize();\n      this.isFullScreen = document.fullscreenElement;\n    },\n    // 获取区域和地图列表\n    async getAreaMonitor() {\n      await getAreaMonitor().then((res) => {\n        if (res.state && res.data) {\n          this.areaLists = [];\n          let mapList = [];\n          let mapMapper = {};\n          res.data.forEach((v) => {\n            if (\n              !this.unLoginLargeScreen ||\n              this.specialAreaId === v[\"areaPo\"].id\n            ) {\n              v[\"areaPo\"][\"topologyMapPos\"] = v[\"topologyMapPos\"];\n              v[\"topologyMapPos\"].forEach(async (map) => {\n                mapMapper[map.id] = true;\n                mapList.push(map);\n              });\n              if (v[\"topologyMapPos\"].length > 0) {\n                this.areaLists.push(v[\"areaPo\"]);\n              }\n            }\n          });\n          // 当没有选中地图时，默认打开第一张\n          if (!this.value || !mapMapper[this.value]) {\n            if (mapList[0]) {\n              this.value = mapList[0].id;\n            } else {\n              this.value = 0;\n            }\n          }\n          // 根据地图名称排序, localeCompare: 当左边的string对应的ascii高于右边时，为1，相等0，小于-1\n          mapList.sort((a, b) => {\n            return a.name.localeCompare(b.name);\n          });\n          this.mapList = mapList;\n          this.isClearDraw = mapList.length > this.clearDrawNum; // 根据地图个数判断是否需要清空旧地图数据\n        }\n      });\n    },\n    // 切换地图展示\n    async changeMap() {\n      this.topVisible = false; //关闭点位路径详情框\n      this.onResize();\n      await this.getMapData();\n      this.getOnlineAmr();\n      this.timer && clearInterval(this.timer);\n      this.timer = setInterval(() => {\n        if (this.timer) this.getOnlineAmr();\n      }, this.timerTime);\n    },\n    // 获取地图详情并绘制\n    async getMapData(value) {\n      Notification.closeAll();\n      this.notificationMap.dangerNotificationList = {};\n      let mapId = value ? value : this.value;\n      console.log(\"当前地图: \" + mapId);\n      if (!mapId) return;\n      let mapMonitor = monitorMapper[this.setMapId(mapId)];\n      this.loadingMessage && this.loadingMessage.close();\n      // 轮播图中，自动切换时不提示；直接点击时，若是已经绘制过，不提示\n      if (!value && (!this.isCarousel || (this.isCarousel && !mapMonitor))) {\n        this.loadingMessage = Message({\n          type: \"info\",\n          duration: 200000,\n          message: \"正在绘制地图中, 请稍后\",\n        });\n      }\n      let ele = document.getElementById(this.setMapId(mapId));\n      if (!ele) return Message.error(\"容器错误, 绘制地图失败\"); // 找不到对应容器\n      // 当对象还没new时，先new一个\n      if (!mapMonitor) {\n        mapMonitor = new window.BIGMapMonitor(ele, this.animateTime);\n        monitorMapper[this.setMapId(mapId)] = mapMonitor;\n        // 让instance的指向保持当前地图monitor，否则点击小车上label-box无效\n        window.BIGMapMonitor.instance =\n          monitorMapper[this.setMapId(this.value)];\n        mapMonitor.clickObjCallback = (vehicleId) => {\n          this.changeActiveInfoId(vehicleId, true);\n        };\n        mapMonitor.clickNodeCallback = (spotCode) => {\n          if (!this.nodesMapper[this.value]) return;\n          const n = this.nodesMapper[this.value][spotCode];\n          // mapMonitor.locate([n[\"x\"] * SCALE, 1, -n[\"y\"] * SCALE]);\n          this.topVisible = true;\n          this.prop = [];\n          [\n            [\"id\", \"点位ID\"],\n            [],\n            [\"alias\", \"别名\"],\n            [\"code\", \"编码\"],\n            [\"allowPark\", \"停靠\"],\n            [\"theta\", \"角度\"],\n            [\"typeName\", \"类型\"],\n            [\"x\", \"坐标 x\"],\n            [\"y\", \"坐标 y\"],\n          ].forEach((l) => {\n            this.prop.push({\n              label: l[1],\n              value: n[l[0]],\n            });\n          });\n        };\n        mapMonitor.clickRouteCallback = (routeId) => {\n          if (!this.routesMapper[this.value]) return;\n          let edgePo = this.routesMapper[this.value][routeId];\n          // mapMonitor.locate([ n['x'] * SCALE, 1, n['y'] * SCALE ]);\n          this.topVisible = true;\n          this.prop = [];\n          [\n            [\"id\", \"路径ID\"],\n            [],\n            [\"source\", \"起始点\"],\n            [\"target\", \"结束点\"],\n            [\"maxSpeed\", \"最大速度\"],\n          ].forEach((l) => {\n            this.prop.push({\n              label: l[1],\n              value: edgePo[l[0]],\n            });\n          });\n        };\n      }\n      let res = await getMapDetails({ mapId: mapId }).then(async (res) => {\n        // 当选中地图获取不到详情时\n        if (\n          !res.state ||\n          !res.data ||\n          (this.unLoginLargeScreen &&\n            res.data.topologyMap.areaId !== this.specialAreaId)\n        ) {\n          this.value = \"\";\n          this.loadingMessage && this.loadingMessage.close();\n          return;\n        }\n        Cookies.set(\"map__value\", this.value);\n        const { Edge, Vertex, area } = res.data;\n        this.animateTime = 50;\n        if (Vertex.length > 1000) {\n          this.animateTime += Math.floor(Vertex.length / 1000) * 25;\n          if (this.animateTime > 100) this.animateTime = 100;\n        }\n        const {\n          backgroundImgUrl,\n          height,\n          weight: width,\n          originX,\n          originY,\n          name,\n        } = res.data[\"topologyMap\"];\n        this.nodesMapper[mapId] = {};\n        this.routesMapper[mapId] = {};\n        Vertex.forEach((p) => {\n          const n = p[\"vertexPo\"];\n          this.nodesMapper[mapId][n.code] = n;\n        });\n        let routes = []; //过滤飞线\n        Edge.forEach((e) => {\n          const r = e[\"edgePo\"];\n          this.routesMapper[mapId][r.id] = r;\n          const sP = this.nodesMapper[mapId][r[\"source\"]];\n          const eP = this.nodesMapper[mapId][r[\"target\"]];\n          if (sP && eP) {\n            routes.push({\n              id: r.id,\n              startCode: r[\"source\"],\n              endCode: r[\"target\"],\n              startPos: [sP[\"x\"] * SCALE, 0, -sP[\"y\"] * SCALE],\n              endPos: [eP[\"x\"] * SCALE, 0, -eP[\"y\"] * SCALE],\n              property3: Number(r.turningMode),\n            });\n          } else {\n            console.log(e);\n          }\n        });\n        this.opt = {\n          floor: backgroundImgUrl,\n          width: width * SCALE,\n          height: height * SCALE,\n          minX: originX * SCALE,\n          minY: originY * SCALE,\n          nodes: [], //点位延迟绘制\n          routes: routes,\n          baseMapName: name,\n        };\n        mapMonitor.createScene(this.opt);\n        return { area, Vertex };\n      });\n      let area, Vertex;\n      if (res && res.area) {\n        area = res.area;\n        Vertex = res.Vertex;\n      } else {\n        return;\n      }\n      // 绘制点位、外部设备和交管块\n      if (Object.keys(this.externalTypeEnum).length === 0) {\n        // 获取外部设备类型枚举\n        await getExternalTypeList().then((res) => {\n          if (res && res.state) {\n            res.data.forEach((item) => {\n              this.$set(this.externalTypeEnum, item.id, item.name);\n            });\n          }\n        });\n      }\n      // 获取外部设备列表\n      let externalMapper = {};\n      let externalListRes = await getExternalList({ mapIds: [mapId] });\n      if (externalListRes && externalListRes.state && externalListRes.data) {\n        externalListRes.data.data.forEach((external) => {\n          // 返回的点位由逗号拼接，需要切割；适配旧版本vertexCode\n          let vertexCodes = external.vertexCodes || external.vertexCode;\n          vertexCodes = vertexCodes.split(\",\");\n          vertexCodes.forEach((code) => {\n            externalMapper[code] = external;\n          });\n        });\n      }\n      let nodes = [];\n      let nodeIdMapper = {}; //点位id映射\n      Vertex.forEach((p) => {\n        const n = p[\"vertexPo\"];\n        let external = externalMapper[n.code];\n        if (external) {\n          n.externalType = external.typeId;\n          n.typeName = this.externalTypeEnum[external.typeId];\n        } else {\n          n.typeName = SpotTypeEnum[n.type];\n        }\n        nodeIdMapper[n.id] = n;\n        nodes.push({\n          node: n.code,\n          alias: n.alias,\n          x: n.x * SCALE,\n          y: -n.y * SCALE,\n          type: Number(n.type),\n          externalType: n.externalType,\n          id: n.id,\n        });\n      });\n      // 获取交管块点位列表\n      let blocks = [];\n      let blockRes = await getTraffic({ areaId: area.id });\n      if (blockRes && blockRes.state && blockRes.data && blockRes.data.blocks) {\n        blockRes.data.blocks.forEach(({ ids }) => {\n          let block = [];\n          ids.forEach((id) => {\n            let [blockMapId, nodeId] = id;\n            if (blockMapId !== mapId) return;\n            let node = nodeIdMapper[nodeId];\n            if (node) block.push([node[\"x\"] * SCALE, -node[\"y\"] * SCALE]);\n          });\n          if (block.length > 1) blocks.push(block);\n        });\n      }\n      blocks = blocks.map((item) => setGraham(item)); //获取最外围的点位集合\n      // 获取充电桩列表\n      let chargePiles = [];\n      let chargeRes = await getChargePileList({ mapId: mapId });\n      if (chargeRes && chargeRes.state && chargeRes.data.data) {\n        chargeRes.data.data.forEach((item) => {\n          if (item.enable) {\n            let node = nodeIdMapper[item.vertexId];\n            if (node) chargePiles.push([node[\"x\"] * SCALE, -node[\"y\"] * SCALE]);\n          }\n        });\n      }\n      mapMonitor.createOthers({ nodes, blocks, chargePiles });\n      // 如果不是提前绘制地图时\n      if (!value) {\n        this.changeActiveInfoId(0);\n        mapMonitor.rafId && clearInterval(mapMonitor.rafId);\n        mapMonitor.rafId = setInterval(() => {\n          mapMonitor && mapMonitor.animate();\n        }, this.animateTime);\n        this.getLocate(true); //自动切换至已存视角（如果保存过）\n      }\n      this.timeout = setTimeout(() => {\n        this.loadingMessage && this.loadingMessage.close();\n      }, 500);\n    },\n    // 切换地图模块显示\n    setLayer(layer, value) {\n      let mapId = value ? value : this.value;\n      let mapMonitor = monitorMapper[this.setMapId(mapId)];\n      if (this.activeArr.includes(layer)) {\n        this.activeArr = _.without(this.activeArr, layer);\n      } else {\n        this.activeArr.push(layer);\n      }\n      // 如果是第一次绘制地图，则提示\n      if (\n        !value &&\n        layer === 1 &&\n        this.activeArr.includes(layer) &&\n        Object.keys(this.nodesMapper[mapId]).length > 0 &&\n        mapMonitor.nodeIconsGroup.children.length === 0\n      ) {\n        this.loadingMessage && this.loadingMessage.close();\n        this.loadingMessage = Message({\n          type: \"info\",\n          duration: 10000,\n          message: \"正在绘制点位名称中, 请稍后\",\n        });\n      }\n      this.timeout && clearTimeout(this.timeout);\n      setTimeout(() => {\n        if (!mapMonitor) return;\n        mapMonitor.setLayers({\n          routesVisible: this.activeArr.includes(0),\n          nodesVisible: this.activeArr.includes(1),\n          laserVisible: this.activeArr.includes(2),\n          objLabelVisible: this.activeArr.includes(3),\n          pathVisible: this.activeArr.includes(4),\n        });\n        this.timeout = setTimeout(() => {\n          this.loadingMessage && this.loadingMessage.close();\n        }, 500);\n      }, 50);\n    },\n    // 返回的在线小车列表，已经经过地图id的过滤，这样可以避免小车本体没有上报地图id导致的500\n    async getOnlineAmr() {\n      let mapMonitor = monitorMapper[this.setMapId()];\n      if (!this.value || !mapMonitor) return;\n      let oldAmrList = []; //1.0小车列表\n      if (this.shouldConcatOldAmr) {\n        let oldAmrData = await getOldOnlineAmr();\n        oldAmrList = handleOldAmrData(oldAmrData);\n      }\n      await getOnlineAmr({ mapId: this.value }).then((res) => {\n        let isSortAmr = this.$refs.agvLayer.isSortAmr;\n        this.amrList = sortAmrList(res.data, oldAmrList, isSortAmr);\n        this.info =\n          this.amrList.find((a) => Number(a[\"id\"]) === this.activeInfoId) ||\n          null;\n        // 当获取不到选中小车的信息时，解除选中\n        if (!this.info) this.changeActiveInfoId(0);\n        //  清空旧数据\n        if (this.amrList.length < 1 && mapMonitor.clearAniObjs) {\n          mapMonitor.clearAniObjs();\n          let string = JSON.stringify([]);\n          let isVehiclesChange = false;\n          if (this.params !== string) {\n            this.params = string;\n            isVehiclesChange = true;\n          }\n          if (isVehiclesChange) mapMonitor.enableRender();\n          return;\n        }\n        let params = [];\n        this.amrList.forEach((amr) => {\n          amr = JSON.parse(JSON.stringify(amr)); //防止修改原数据\n          let path = [];\n          let occupiedNodes = [];\n          let targetPoint = \"\";\n          if (\n            amr[\"unFinishRoute\"] &&\n            amr[\"unFinishRoute\"][\"unfinishedVertexes\"] &&\n            amr[\"unFinishRoute\"][\"unfinishedVertexes\"].length > 0 &&\n            this.nodesMapper[this.value]\n          ) {\n            path = amr[\"unFinishRoute\"][\"unfinishedVertexes\"].map((p) => {\n              const { x, y, code } = p;\n              let point = this.nodesMapper[this.value][code];\n              if (point) {\n                targetPoint = code;\n                return [point.x * SCALE, 2, -point.y * SCALE];\n              }\n              return [x * SCALE, 2, -y * SCALE];\n            });\n          }\n          if (amr.lockedPoint && this.nodesMapper[this.value]) {\n            amr.lockedPoint.forEach((code) => {\n              // 先从点位列表中获取位置；若是虚拟锁点，则从占用路径获取位置\n              let node =\n                this.nodesMapper[this.value][code] ||\n                (amr[\"unFinishRoute\"] &&\n                  amr[\"unFinishRoute\"][\"unfinishedVertexes\"] &&\n                  amr[\"unFinishRoute\"][\"unfinishedVertexes\"].filter(\n                    (p) => p.code === code\n                  )[0]);\n              if (node) {\n                let { x, y } = node;\n                occupiedNodes.push([x * SCALE, -y * SCALE]);\n              }\n            });\n          }\n          // 载物状态和小车状态分开来展示\n          let isLoad = false;\n          if (amr.loadStatus && amr.loadStatus !== \"EMPTY\") {\n            isLoad = true; //当小车载物时，展示载物图标\n          }\n          let isActive = this.activeInfoId === Number(amr[\"id\"]);\n          params.push({\n            code: amr[\"name\"],\n            id: Number(amr[\"id\"]),\n            x: amr[\"coordinate\"][\"x\"] * SCALE,\n            y: 2,\n            z: -amr[\"coordinate\"][\"y\"] * SCALE,\n            angle: amr[\"coordinate\"][\"theta\"],\n            type: amr[\"stateId\"] || 0, // 小车调度运行状态\n            state: amr[\"state\"],  // 小车调度状态中文\n            warnId: amr[\"warnId\"], // 小车故障类型\n            path: isActive ? path : [],\n            occupiedNodes: isActive ? occupiedNodes : null,\n            isLoad,\n            targetPoint, //目标点拿的是锁点的真实点位最后一个\n            batteryPercentile: amr[\"batteryPercentile\"],\n            times: this.timerTime,\n          });\n        });\n        let string = JSON.stringify(params);\n        let isVehiclesChange = false;\n        if (this.params !== string) {\n          this.params = string;\n          isVehiclesChange = true;\n        }\n        mapMonitor.update(params, isVehiclesChange);\n        if (this.isPc) this.notificationMap.getDangerList(this.amrList);\n      });\n    },\n    // 容器的体积重置\n    resetMapSize(mapId) {\n      const mapView = document.getElementById(this.setMapId(mapId));\n      if (!mapView) return;\n      const container = document.getElementById(\"monitor-container\");\n      const { width } = container.getBoundingClientRect();\n      let height = window.innerHeight;\n      const { paddingTop, paddingRight, paddingBottom, paddingLeft } =\n        window.getComputedStyle(container, \"padding\");\n      const pLeft = paddingLeft.split(\"px\")[0];\n      const pRight = paddingRight.split(\"px\")[0];\n      const pTop = paddingTop.split(\"px\")[0];\n      const pBottom = paddingBottom.split(\"px\")[0];\n      let offsetW = width - pLeft - pRight + \"px\";\n      let offsetH = height - pTop - pBottom + \"px\";\n      mapView.style.width = offsetW;\n      mapView.style.height = offsetH;\n      // 放置小车标签的容器，也需要自适应\n      if (mapView.children[0]) {\n        mapView.children[0].style.width = offsetW;\n        mapView.children[0].style.height = offsetH;\n      }\n    },\n    // 暂停小车\n    pauseAmr(row) {\n      MessageBox.confirm(`确定暂停小车: ${row.name}?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          pauseAmr({ id: row.id }).then((res) => {\n            if (res.state) {\n              Message.success(\"小车暂停成功\");\n            }\n          });\n        })\n        .catch(() => {});\n    },\n    // 恢复小车\n    resumeAmr(row) {\n      MessageBox.confirm(`确定恢复小车: ${row.name}?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          resumeAmr({ id: row.id }).then((res) => {\n            if (res.state) {\n              Message.success(\"小车恢复成功\");\n            }\n          });\n        })\n        .catch(() => {});\n    },\n    // 获取小车任务详情\n    getAmrTaskInfo() {\n      getAmrTaskInfo({ id: this.activeInfoId }).then((res) => {\n        this.amrTaskInfo = {};\n        if (res.state && res.data) {\n          let { taskChain, tasks } = res.data;\n          if (taskChain) {\n            this.$set(this.amrTaskInfo, \"id\", taskChain.id);\n            this.$set(this.amrTaskInfo, \"name\", taskChain.name);\n            this.$set(this.amrTaskInfo, \"priority\", taskChain.priority);\n            this.$set(this.amrTaskInfo, \"status\", taskChain.status);\n          }\n          if (tasks) {\n            let taskList = [];\n            let active = 0;\n            let targetPoint = \"\";\n            tasks.forEach(({ action, startTime, status, endPointCode }, i) => {\n              let params = {\n                name: this.actionList[action],\n                time: startTime ? formatTime(startTime) + \"\" : \"\",\n              };\n              taskList.push(params);\n              if (this.doingStatusList.indexOf(status) === -1) {\n                active = ++i;\n              } else {\n                if (!targetPoint) targetPoint = endPointCode;\n              }\n            });\n            this.$set(this.amrTaskInfo, \"taskList\", taskList);\n            this.$set(this.amrTaskInfo, \"active\", active);\n            this.$set(this.amrTaskInfo, \"targetPoint\", targetPoint);\n            let intervalTime = getIntervalTime(taskChain.startTime, new Date());\n            this.$set(this.amrTaskInfo, \"intervalTime\", intervalTime);\n            let process =\n              this.info && this.info.unFinishRoute\n                ? _.round(this.info.unFinishRoute.processRate * 100, 1)\n                : 0;\n            this.$set(this.amrTaskInfo, \"process\", process);\n            let remainTime = \"\";\n            if (process) {\n              let lastTime =\n                new Date(taskChain.startTime).getTime() +\n                ((new Date().getTime() -\n                  new Date(taskChain.startTime).getTime()) /\n                  process) *\n                  100;\n              remainTime = getIntervalTime(new Date(), lastTime);\n            }\n            this.$set(this.amrTaskInfo, \"remainTime\", remainTime);\n          }\n        }\n      });\n    },\n    // 释放占用点位\n    releaseLockedPoints(row) {\n      MessageBox.confirm(`确定释放以下小车占用点位: ${row.name}?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          releaseLockedPoints({ amrId: row.id }).then((res) => {\n            if (res.state) {\n              Message.success(\"小车占用点位释放成功\");\n            }\n          });\n        })\n        .catch(() => {});\n    },\n    // 跳转至单车web\n    toAgvWeb(ip) {\n      window.open(\"http://\" + ip + \":9998\");\n    },\n    // 点击左下角工具栏\n    handleVehicleOp(op) {\n      switch (op) {\n        case \"largeScreen\": //大屏与监控页面切换\n          if (this.isFullScreen) this.handleVehicleOp(\"fullScreen\"); //返回监控页面时，退出全屏\n          this.$router.push(\"/monitor/index\"); //监控页面\n          break;\n        case \"fullScreen\": //全屏切换\n          if (!screenfull.isEnabled) {\n            Message.warning(\"您的浏览器不支持全屏\");\n          } else {\n            screenfull.toggle();\n          }\n          break;\n      }\n    },\n    // 打开保存的视角\n    getLocate(isAuto) {\n      let mapMonitor = monitorMapper[this.setMapId()];\n      if (!mapMonitor) return;\n      let value = localStorage.getItem(\"mapLocate\" + this.value);\n      if (value) {\n        let { camera, control } = JSON.parse(value);\n        mapMonitor.setLocate(camera, control);\n      } else {\n        if (!isAuto) {\n          Message({\n            type: \"warning\",\n            message: \"没有获取到保存的视角\",\n            offset: 80,\n          });\n        }\n      }\n    },\n    // 打开默认的视角\n    getDefaultLocate() {\n      let mapMonitor = monitorMapper[this.setMapId()];\n      if (!mapMonitor) return;\n      mapMonitor.setLocate();\n    },\n    // 保存视角\n    saveLocate() {\n      let mapMonitor = monitorMapper[this.setMapId()];\n      if (!mapMonitor) return;\n      let { x: x1, y: y1, z: z1 } = mapMonitor.camera.position;\n      let { x: x2, y: y2, z: z2 } = mapMonitor.control.target;\n      let value = {\n        camera: { x: _.round(x1, 2), y: _.round(y1, 2), z: _.round(z1, 2) },\n        control: { x: _.round(x2, 2), y: _.round(y2, 2), z: _.round(z2, 2) },\n      };\n      localStorage.setItem(\"mapLocate\" + this.value, JSON.stringify(value));\n      Message({\n        type: \"success\",\n        message: \"视角保存成功\",\n        offset: 80,\n      });\n    },\n    // 是否选中小车，用以判断是否去获取任务详情\n    // isClickVehicle: 如果是直接点击小车图标的，就不需要调用跟随小车函数了，因为bigMap里会调用\n    changeActiveInfoId(id, isClickVehicle) {\n      let mapMonitor = monitorMapper[this.setMapId()];\n      this.taskTimer && clearInterval(this.taskTimer);\n      // 1.0的小车，不做点击处理\n      if (id < 0) {\n        this.activeInfoId = 0;\n        this.info = null;\n        this.amrTaskInfo = {};\n        return;\n      }\n      this.activeInfoId = Number(id);\n      if (this.activeInfoId) {\n        this.getAmrTaskInfo();\n        this.taskTimer = setInterval(() => {\n          if (this.taskTimer) this.getAmrTaskInfo();\n        }, this.taskTime);\n        if (!isClickVehicle && mapMonitor && mapMonitor.clickVehicle) {\n          mapMonitor.clickVehicle(this.activeInfoId); //跟随小车\n        }\n      } else {\n        this.info = null;\n        this.amrTaskInfo = {};\n      }\n    },\n    // 手动点击跳转地图\n    clickChangeMap(index) {\n      this.$refs.carousel.setActiveItem(index + 1);\n    },\n    // 切换轮播图\n    async changeCarousel(now, pre) {\n      this.topVisible = false;\n      this.carouselIndex = now;\n      let map = this.mapList[--now];\n      this.value = map ? map.id : 0;\n      if (this.value) {\n        let mapMonitor = monitorMapper[this.setMapId()];\n        if (!mapMonitor) await this.getMapData();\n        mapMonitor = monitorMapper[this.setMapId()];\n        // 让instance的指向保持当前地图monitor，否则点击小车上label-box无效\n        window.BIGMapMonitor.instance = mapMonitor;\n        this.setLayer(-1);\n        // 需要等待轮播图切换动画完成才能resize\n        this.changeCarouselTimer && clearTimeout(this.changeCarouselTimer);\n        this.changeCarouselTimer = setTimeout(() => {\n          this.onResize();\n          this.changeActiveInfoId(0);\n          mapMonitor.rafId && clearInterval(mapMonitor.rafId);\n          mapMonitor.rafId = setInterval(() => {\n            if (mapMonitor) mapMonitor.animate();\n          }, this.animateTime);\n          this.getLocate(true); //自动切换至已存视角（如果保存过）\n        }, 500);\n        this.getOnlineAmr();\n        this.timer && clearInterval(this.timer);\n        this.timer = setInterval(() => {\n          if (this.timer) this.getOnlineAmr();\n        }, this.timerTime);\n      } else {\n        this.$refs.mainMonitor && this.$refs.mainMonitor.openInterval();\n      }\n      this.clearOldMonitor(--pre);\n      this.preDrawMonitor(++now);\n    },\n    // 绘制下一张地图\n    async preDrawMonitor(index) {\n      let map = this.mapList[index];\n      this.readyDrawTimer && clearTimeout(this.readyDrawTimer);\n      if (!map) {\n        console.log(\"即将进入主监控页\");\n      } else {\n        this.readyDrawTimer = setTimeout(async () => {\n          let mapId = map.id;\n          this.resetMapSize(mapId);\n          let mapMonitor = monitorMapper[this.setMapId(mapId)];\n          if (mapMonitor) {\n            // 如果已经预加载过地图\n            // mapMonitor.onWindowResize();\n          } else {\n            // 如果没有预加载过\n            await this.getMapData(mapId);\n            if (this.activeArr.includes(1)) this.setLayer(-1, mapId);\n          }\n          // 如果要绘制的是当前轮播地图，则不进行重复绘制\n          // if (this.carouselIndex === index || this.value === mapId) return;\n        }, (this.carouseTime - this.readyDrawTime) * 1000);\n      }\n    },\n    // 清空上一张地图\n    clearOldMonitor(preIndex) {\n      let map = this.mapList[preIndex];\n      if (!map) {\n        this.$refs.mainMonitor && this.$refs.mainMonitor.clearInterval();\n      } else {\n        // 清空上一张地图的数据，以免占用内存\n        let preId = this.setMapId(map.id);\n        let monitor = monitorMapper[preId];\n        switch (this.isClearDraw) {\n          case true: // 清空旧绘制时，全部清空\n            if (monitor) {\n              monitor.destroyed();\n              monitor = null;\n              monitorMapper[preId] = null;\n            }\n            // 将canvas清除掉；谷歌浏览器最多支持16个canvas同时存在\n            var dom = document.getElementById(preId);\n            if (dom) dom.innerText = \"\";\n            break;\n          case false: //不清空旧绘制时，清掉动态的数据\n            if (monitor) {\n              monitor.clearAniObjs();\n              monitor.rafId && clearInterval(monitor.rafId);\n              monitor.traceTarget = null;\n              monitor.intersected = null;\n            }\n            break;\n        }\n      }\n    },\n    // 根据不同情形，返回不同的key\n    setMapId(value) {\n      let mapId = value ? value : this.value;\n      if (!this.isCarousel) {\n        return \"map-view\";\n      } else {\n        return \"map-\" + mapId;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.large-screen {\n  width: 100vw;\n  height: 100vh;\n}\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./largeScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./largeScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./largeScreen.vue?vue&type=template&id=f88af942&scoped=true&\"\nimport script from \"./largeScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./largeScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./largeScreen.vue?vue&type=style&index=0&id=f88af942&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f88af942\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\n// 获取所有机器人列表☑️\nexport function getVehicleList(data) {\n  return request.post('/amr/getAmrPageList', data)\n}\n\n// 获取在线机器列表☑️\nexport function getOnlineVehicleList() {\n  return request.post('/amr/onlineAmr')\n}\n\n// 获取小车类型列表☑️\nexport function getVehicleTypeList() {\n  return request.get('/amr/listAmrType')\n}\n\n// 添加设备☑️\nexport function addVehicle(data) {\n  return request.post('/amr/register', data)\n}\n\n// 修改设备 名称☑️\nexport function updateVehicle(data) {\n  return request.post('/amr/editorAmr', data)\n}\n\n// 启用/禁用小车☑️\nexport function toggleVehicleEnable(data) {\n  return request.get('/amr/enable', data)\n}\n\n// 删除设备☑️\nexport function deleteVehicle(id) {\n  return request.post('/amr/deleteAmr/' + id)\n}\n\n// 获取设备详情☑️\nexport function getVehicleDetail(data) {\n  return request.get('/amr/getDetailAmr', data)\n}\n\n// 修改小车区域☑️\nexport function updateVehicleArea(data) {\n  return request.get('/amr/updateArea', data)\n}\n\n// 修改小车分组\nexport function updateVehicleGroup(data) {\n  return request.get('/amr/updateGroup', data)\n}\n\n// 修改小车充电类型\nexport function updateVehicleModel(data) {\n  return request.get('chargeConf/update/amrAdaptation', data)\n}\n\n// 修改小车充电桩\nexport function updateVehicleCharge(data) {\n  return request.get('chargeConf/update/amrBind', data)\n}\n\n// 获取小车充电桩强制绑定情况\nexport function getChargeForceBind(data) {\n  return request.get('chargeConf/bind/force', data)\n}\n\n// 获取小车休息点\nexport function getVehicleRest(data) {\n  return request.get('rest/config/find', data)\n}\n\n// 新增小车休息点\nexport function addVehicleRest(data) {\n  return request.post('rest/config/add', data)\n}\n\n// 修改小车休息点\nexport function updateVehicleRest(data) {\n  return request.post('rest/config/update', data)\n}\n\n// 删除小车休息点\nexport function deleteVehicleRest(data) {\n  return request.get('rest/config/delete', data)\n}\n\n// 小车离线后注销\nexport function unRegister(data) {\n  return request.get('amr/unRegister', data)\n}\n\n// 获取小车占用点位列表\nexport function getLockedPoints(data) {\n  return request.get('traffic/locked/find', data)\n}\n\n// 释放小车占用点位列表\nexport function releaseLockedPoints(data) {\n  return request.get('traffic/locked/release', data)\n}"],"sourceRoot":""}