(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64852466","chunk-86048bd4","chunk-2d0e66a9"],{"008b":function(e,t){function r(e){return e}e.exports=r},"03eb":function(e,t){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=r},"0560":function(e,t,r){"use strict";var a=r("88d4"),n=r("34cd").find,o=r("d421"),i="find",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},"0863":function(e,t,r){var a=r("03eb"),n=r("2f04");function o(e,t,r){n(e,(function(n,o){if(a(e,o))return t.call(r,e[o],o,e)}))}e.exports=o},"0877":function(e,t,r){var a=r("88d4"),n=r("c88c"),o=r("d421");a({target:"Array",proto:!0},{fill:n}),o("fill")},"14c7":function(e,t){function r(e){return Object.prototype.toString.call(e).slice(8,-1)}e.exports=r},1648:function(e,t,r){},"16ad":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("304d"),r("f257"),r("89a8"),r("2478"),r("b110"),r("fe35");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},"1e14":function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"f",(function(){return o})),r.d(t,"j",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"i",(function(){return p})),r.d(t,"k",(function(){return h})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return f}));var a=r("b775");function n(){return a["b"].post("editor/getLocalMaps")}function o(e){return a["b"].post("editor/getServerMapZip",e,"blob")}function i(e){return a["b"].post("/editor/saveServereMapZip",e,"","multipart/form-data;charset=UTF-8")}function s(e){return a["b"].post("editor/deleteServerMapZip",e)}function l(){return a["b"].post("area/list",{})}function c(){return a["b"].get("map/mapList")}function u(e,t,r){return a["b"].get("map/downloadFile/"+e,{areaId:t,areaName:r},"blob")}function p(e,t,r){return a["b"].post("map/uploadFile?areaId="+t+"&areaName="+r,e,"","multipart/form-data;charset=UTF-8")}function h(e){return a["b"].post("map/updateMap",e)}function d(e){return a["b"].post("/equipment/list",e)}function f(){return a["b"].get("/equipment/type")}},2580:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAASNQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Rb17eAAAAGF0Uk5TACN+v9715MF5Fh2o+v+WCFHu9mZx+/yUPgsSQKRDwyEG46wHCnvaEZnO4Uk21gKHeKFKY3PPkTI9jLDEXzHtnwVtdppg2P4D12sop+kNvEhSGoT3+NC7/WUJKwSp9AEqGeZf2cYAAAERSURBVHiczdFnV8IwFAbgq1gXvIoIIrhARcUNVKAOqAIqigMHKrj+/68wLZbGJP0s90PW857knhOi/qqBQd+Qpg2PjI4pedwfwG9pE5OyB6dsC4WscVr2cASYic7GiOJz8wpfYNcvLnm3l0gCyyvC4Sq3TgFr64JvpOPuZhPYEh1wE9vAzq7kXGIP2Fe4m8gAWZXbiZyu6wdAnk0Fx4uGYRwCR2w6ppOSky6b/CWnwFl35ST+OlWAKvEJwakG9J60EqJnz5G8IDcheuISqHP7K8HpGmjEyLNubllTd/L5fd3+wOaD1XVY4Y94em75ai+MI6+yv6XRq1Zb9XIn+P5haSla/PTqzmy2v7473t3/U/0A9Kokr1ZRRmYAAAAASUVORK5CYII="},"2f04":function(e,t,r){var a,n,o=r("03eb");function i(){for(var e in n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=!0,{toString:null})a=!1}function s(e,t,r){var s,c=0;for(s in null==a&&i(),e)if(!1===l(t,e,s,r))break;if(a){var u=e.constructor,p=!!u&&e===u.prototype;while(s=n[c++])if(("constructor"!==s||!p&&o(e,s))&&e[s]!==Object.prototype[s]&&!1===l(t,e,s,r))break}}function l(e,t,r,a){return e.call(a,t[r],r,t)}e.exports=s},3505:function(e,t,r){"use strict";r("5451")},"3d86":function(e,t,r){var a=r("88d4"),n=r("e3f7"),o=r("bf1f"),i=r("25ef"),s=r("60d4"),l=r("f182"),c=r("df7a");function u(e,t){var r,a,p=arguments.length<3?e:arguments[2];return i(e)===p?e[t]:(r=l.f(e,t),r?s(r)?r.value:void 0===r.get?void 0:n(r.get,p):o(a=c(e))?u(a,t,p):void 0)}a({target:"Reflect",stat:!0},{get:u})},"3d9b":function(e,t,r){"use strict";r("46db")},"3fe9":function(e,t,r){var a=r("88d4"),n=r("66e9");a({target:"Object",stat:!0},{is:n})},"46db":function(e,t,r){},5451:function(e,t,r){},5888:function(e,t,r){var a=r("7b8c");function n(e){return a(e,"Object")}e.exports=n},5904:function(e,t,r){"use strict";var a=r("98fb").f,n=r("b143"),o=r("20f7"),i=r("20cd"),s=r("3cb0"),l=r("e3b8"),c=r("6a0e"),u=r("5763"),p=r("3b43"),h=r("ea71").fastKey,d=r("ef7c"),f=d.set,g=d.getterFor;e.exports={getConstructor:function(e,t,r,c){var u=e((function(e,a){s(e,d),f(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),p||(e.size=0),void 0!=a&&l(a,e[c],{that:e,AS_ENTRIES:r})})),d=u.prototype,v=g(t),m=function(e,t,r){var a,n,o=v(e),i=y(e,t);return i?i.value=r:(o.last=i={index:n=h(t,!0),key:t,value:r,previous:a=o.last,next:void 0,removed:!1},o.first||(o.first=i),a&&(a.next=i),p?o.size++:e.size++,"F"!==n&&(o.index[n]=i)),e},y=function(e,t){var r,a=v(e),n=h(t);if("F"!==n)return a.index[n];for(r=a.first;r;r=r.next)if(r.key==t)return r};return o(d,{clear:function(){var e=this,t=v(e),r=t.index,a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete r[a.index],a=a.next;t.first=t.last=void 0,p?t.size=0:e.size=0},delete:function(e){var t=this,r=v(t),a=y(t,e);if(a){var n=a.next,o=a.previous;delete r.index[a.index],a.removed=!0,o&&(o.next=n),n&&(n.previous=o),r.first==a&&(r.first=n),r.last==a&&(r.last=o),p?r.size--:t.size--}return!!a},forEach:function(e){var t,r=v(this),a=i(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:r.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!y(this,e)}}),o(d,r?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),p&&a(d,"size",{get:function(){return v(this).size}}),u},setStrong:function(e,t,r){var a=t+" Iterator",n=g(t),o=g(a);c(e,t,(function(e,t){f(this,{type:a,target:e,state:n(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),u(t)}}},"60d4":function(e,t,r){var a=r("6c75");e.exports=function(e){return void 0!==e&&(a(e,"value")||a(e,"writable"))}},6671:function(e,t,r){var a=r("03eb"),n=r("673a"),o=r("5888"),i=r("9797");function s(e){return function(t,r){return a(this,r)&&e(t,this[r])}}function l(e,t){return a(this,t)}function c(e,t,r){return r=r||i,o(e)&&o(t)?n(e,s(r),t)&&n(t,l,e):r(e,t)}e.exports=c},"66e9":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"673a":function(e,t,r){var a=r("0863"),n=r("a632");function o(e,t,r){t=n(t,r);var o=!0;return a(e,(function(r,a){if(!t(r,a,e))return o=!1,!1})),o}e.exports=o},6875:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABhElEQVRYR+2XsS4EURSGv/8ZVEoKEkpRCIV9AhoShYTYbIM3kCBRaygJUSjovIAtCIUSiSDRi8IT/HJlJLI7s3NHZrNs3PLOued8858559wRHV7qcHz+JoDtGjAGjAL9wCNwAWxLei6iamEFbN8AIxlBXoFlSaexEIUAbJ8AM4nzWeAaeAcmkv2F5NmUpLMYiGgA2/PAUXAqKfWc7XVgA6hLqpQNcAzMAS3fznaADLAVSfU8iCIKPAADQJ+klyzHtnuBmqTNvOCfasYYBRvbbiV/rJ9Gu3+A36mA7UlgCxj/aW4bzl0Ca2lV0aSA7SHgrqTAjW6GJd1/30wD2AOWgENJi2WA2D4AQpfcl1TNAzgHQgqiGkkMYJLS4LepQ6YpEA1g+xZ4kjTdCqSdAFHN6R+gnQq8JfOhp1PfwGACECZl5mqbAjElmEzSUNbll2HXAuwAK21qxbuSVvNa8Ve+YhUuYtfU3rNut2EihqEUfj7KWFdAtXESFroTlkGR5iP6RtS1AB90wugh/fkkxAAAAABJRU5ErkJggg=="},"6ad8":function(e,t,r){var a=r("e8d1"),n=r("0863"),o=r("14c7"),i=r("77ea");function s(e,t){switch(o(e)){case"Object":return l(e,t);case"Array":return c(e,t);default:return a(e)}}function l(e,t){if(i(e)){var r={};return n(e,(function(e,r){this[r]=s(e,t)}),r),r}return t?t(e):e}function c(e,t){var r=[],a=-1,n=e.length;while(++a<n)r[a]=s(e[a],t);return r}e.exports=s},"6dce":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"map-editor"},[r("map-editor",{attrs:{isRcs:e.isRcs}}),e.isRcs?r("el-page-header",{staticClass:"editor-back",on:{back:e.goBack}}):e._e()],1)},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-editor"},[a("div",{attrs:{id:"main"}}),a("div",{staticClass:"file-utils"},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[a("el-button",{staticClass:"fileCommands",attrs:{type:"primary"}},[e._v("文件"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isRcs?e._e():a("el-dropdown-item",{attrs:{command:"openServerFile"}},[e._v("从后台打开 ")]),a("el-dropdown-item",{attrs:{command:"openSchedulerFile"}},[e._v("从调度打开")]),a("el-dropdown-item",{attrs:{command:"openLocalFile"}},[e._v("本地打开")]),e.isRcs?e._e():a("el-dropdown-item",{attrs:{command:"saveToServer",divided:""}},[e._v("保存至后台")]),a("el-dropdown-item",{attrs:{command:"sendToScheduler",divided:e.isRcs}},[e._v("保存至调度")]),a("el-dropdown-item",{attrs:{command:"downloadPng",divided:""}},[e._v("下载.png")]),a("el-dropdown-item",{attrs:{command:"downloadZip"}},[e._v("下载地图 (Ctrl+S)")]),a("el-dropdown-item",{attrs:{command:"updateFileName",divided:""}},[e._v("修改地图名称")]),a("el-dropdown-item",{attrs:{command:"extendParseManage"}},[e._v("更新扩展属性模版")])],1)],1),a("el-dropdown",{attrs:{trigger:"hover","hide-on-click":!1},on:{command:e.handleCommand}},[a("div",{staticClass:"map_tool_head_item"},[a("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAXxJREFUOE+tlCFPA0EQhd9IBAmpKDdzrcOVIDFAAoZCAoqEBInDEn4ARWFRYFEYEgQIQlUTcBgEkBKwt3sUTQiiO+Sa9nItV2jaO3l58+XtvtlHyPijv3hhGK455/aSGlU99H2/2m/uT6Ax5hbAfM/wnYgsDASs1+vjuVxuMp/Pv0UD1tpAVSU5TESGmf3oX6PRmHLOWc/zPjua2GEYhtPOucjRBIBrAGMAFvs4qQH4ArAK4KPZbM4Vi8XXSBsDrbWXqro+TEZEdMrM2zGwfflXaTBVPQDwQkTfqjpDRPt9dOUorJZDY8wJgJ1eoYikhmaM0RTojYisJI/8qKqljjBy5vt+Jc1NEASVpFMiegKwyczPXQ6stUnohohc9AFuEdFZnCxRKYJ1hdJek+yAPe4w0pEzCqUmIkutO8xibQDsishRJosNoCoi5a5QRnl6zrnlQqHw8CvlAcvhnZm9f8shbd/S6ouI7pl5dqD66hWlFSwRHTPz+VDAYZrnBwMT5hUejcOzAAAAAElFTkSuQmCC"}})]),e.Topo?a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"toggleSpotVisible"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399","active-text":"显示所有点位( Ctrl + G )"},model:{value:e.Topo.layersVisible["spot"],callback:function(t){e.$set(e.Topo.layersVisible,"spot",t)},expression:"Topo.layersVisible['spot']"}})],1),a("el-dropdown-item",{attrs:{command:"toggleRouteVisible"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399","active-text":"显示所有路径( Ctrl + P )"},model:{value:e.Topo.layersVisible["route"],callback:function(t){e.$set(e.Topo.layersVisible,"route",t)},expression:"Topo.layersVisible['route']"}})],1)],1):e._e()],1),e.Topo?a("el-tooltip",{attrs:{content:"锁定( Ctrl + L )",placement:"bottom",effect:"light"}},[a("div",{staticClass:"map_tool_head_item",on:{click:function(t){e.Topo.isLock=!e.Topo.isLock}}},[a("img",{staticClass:"lock-img",attrs:{src:e.Topo.isLock?r("ca59"):r("6875")}})])]):e._e(),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"filepicker"},on:{change:e.readMapFile}})],1),a("div",{staticClass:"map-select"},[e.surplusInfo&&e.isMapSelectShow?a("el-button",{staticClass:"batch",attrs:{type:"warning"},on:{click:e.openBatchDialog}},[e._v("批量修改")]):e._e(),e.surplusInfo&&e.isMapSelectShow?a("el-select",{attrs:{filterable:"",placeholder:"请选择点位",clearable:"",size:"small"},on:{change:e.handleSelectValueChange,"visible-change":e.responseSpotsMapperChange},model:{value:e.mapSelectValue,callback:function(t){e.mapSelectValue=t},expression:"mapSelectValue"}},[a("el-option-group",{directives:[{name:"show",rawName:"v-show",value:1===e.Topo.state,expression:"Topo.state === 1"}],key:"type"},[a("div",{staticClass:"workSpace-main"},[a("span",{staticClass:"workSpaceNumber"},[e._v("1")]),a("span",{staticClass:"workSpaceSelect"},[e._v("点位类型")])]),e._l(e.SpotTypeEnum,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:"spotType--"+t}})}))],2),a("el-option-group",{key:"code"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.Topo.state,expression:"Topo.state === 1"}],staticClass:"workSpace-main"},[a("span",{staticClass:"workSpaceNumber"},[e._v("2")]),a("span",{staticClass:"workSpaceSelect"},[e._v("点位名称")])]),e._l(e.Topo?e.Topo.spotsMapper:new Map,(function(e,t){return a("el-option",{key:t,attrs:{label:e[1].code,value:Number(e[0])}})}))],2)],1):e._e()],1),a("el-drawer",{ref:"serverDrawer",attrs:{visible:e.isShowDrawer,direction:"ltr",modal:!1,"with-header":!1},on:{"update:visible":function(t){e.isShowDrawer=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isGetMapDetailsLoading,expression:"isGetMapDetailsLoading"}],ref:"serverTable",staticStyle:{width:"100%"},attrs:{data:e.serverMapList,"highlight-current-row":!0,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"100px"}}),a("el-table-column",{attrs:{prop:"name",label:"地图名称",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(r){return e.openServerMap(t.row)}}},[e._v("打开")]),a("el-button",{staticClass:"delete-btn",attrs:{type:"text"},on:{click:function(r){return e.deleteServerMap(t.row.id,t.row.name)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"从调度打开地图",visible:e.openFromScheduler,modal:!1,"append-to-body":!0,width:"400px"},on:{"update:visible":function(t){e.openFromScheduler=t}}},[a("el-form",{ref:"schedulerMap",staticClass:"map-form",model:{value:e.schedulerMap,callback:function(t){e.schedulerMap=t},expression:"schedulerMap"}},[a("el-form-item",{attrs:{label:"选择区域"}},[a("el-select",{attrs:{placeholder:"请选择区域",filterable:"",clearable:""},on:{change:e.filterSchedulerMaps},model:{value:e.schedulerCheckedArea,callback:function(t){e.schedulerCheckedArea=t},expression:"schedulerCheckedArea"}},e._l(e.schedulerAreaList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:Number(t)}})})),1)],1),a("el-form-item",{attrs:{label:"选择地图"}},[a("el-select",{attrs:{placeholder:"请选择地图",filterable:"",clearable:""},model:{value:e.schedulerMap.selectedMap,callback:function(t){e.$set(e.schedulerMap,"selectedMap",t)},expression:"schedulerMap.selectedMap"}},e._l(e.schedulerMap.schedulerMaps,(function(t,r){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:t[1].areaId===e.schedulerCheckedArea,expression:"item[1].areaId === schedulerCheckedArea"}],key:r,attrs:{label:t[1].name,value:t[0]}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{padding:"0 20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.openFromScheduler=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success",loading:e.isGetMapDetailsLoading},on:{click:e.openSchedulerMap}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"保存至调度",visible:e.saveToScheduler,modal:!1,"append-to-body":!0,width:"400px"},on:{"update:visible":function(t){e.saveToScheduler=t}}},[a("el-form",{ref:"schedulerMap",staticClass:"map-form",model:{value:e.schedulerMap,callback:function(t){e.schedulerMap=t},expression:"schedulerMap"}},[a("el-form-item",{attrs:{label:"选择区域"}},[a("el-select",{attrs:{placeholder:"请选择区域",filterable:""},model:{value:e.schedulerCheckedArea,callback:function(t){e.schedulerCheckedArea=t},expression:"schedulerCheckedArea"}},e._l(e.schedulerAreaList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:Number(t)}})})),1)],1)],1),a("div",{staticClass:"saveToSchedulerMsg"},[e._v("保存至调度成功后, 地图将自动被禁用。")]),a("div",{staticClass:"dialog-footer",staticStyle:{padding:"0 20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.saveToScheduler=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success",loading:e.isSaveToSchedulerLoading},on:{click:e.saveMapToScheduler}},[e._v("确 定")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.surplusInfo,expression:"surplusInfo"}],staticClass:"thumbnail"},[a("canvas",{attrs:{id:"thumbnail",width:"0",height:"0"}}),a("div",{attrs:{id:"thumbnailSolidRect"}})]),a("el-dialog",{attrs:{title:"合并地图窗口","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.mergeVisible,width:"400px"},on:{"update:visible":function(t){e.mergeVisible=t}}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-upload",{attrs:{drag:"",limit:1,action:"#","http-request":e.httpRequest,"on-change":e.mergeUploadChange,"file-list":e.mergeUploadFileList}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("zip格式，大小10M以内")])])],1)]),a("div",{staticClass:"custom-template",style:{display:e.form.visible?"block":"none"}},[a("predefine-template",{attrs:{form:e.form,keyhiddenList:e.keyhiddenList,type:"custom"}})],1),a("div",{staticClass:"fillRange-template",style:{display:e.fillRangeForm.visible?"block":"none"}},[a("div",{staticClass:"fillRange-start"},[e._v(" 起点: "+e._s(e.fillRangeForm.start?e.fillRangeForm.start.code:"-- 请在地图中选择 --")+" ")]),a("div",{staticClass:"fillRange-end"},[e._v(" 终点: "+e._s(e.fillRangeForm.end?e.fillRangeForm.end.code:"-- 请在地图中选择 --")+" ")]),a("div",[a("span",[e._v("距离: ")]),a("el-input-number",{attrs:{precision:2,step:.1,min:e.minPointsSpacing,max:e.maxPointsSpacing,size:"small"},model:{value:e.fillRangeForm.baseLength,callback:function(t){e.$set(e.fillRangeForm,"baseLength",t)},expression:"fillRangeForm.baseLength"}})],1),a("div",[a("span",[e._v("方向: ")]),a("el-radio",{attrs:{label:"both"},model:{value:e.fillRangeForm.direction,callback:function(t){e.$set(e.fillRangeForm,"direction",t)},expression:"fillRangeForm.direction"}},[e._v("双向")]),a("el-radio",{attrs:{label:"one"},model:{value:e.fillRangeForm.direction,callback:function(t){e.$set(e.fillRangeForm,"direction",t)},expression:"fillRangeForm.direction"}},[e._v("单向")]),a("el-radio",{attrs:{label:"none"},model:{value:e.fillRangeForm.direction,callback:function(t){e.$set(e.fillRangeForm,"direction",t)},expression:"fillRangeForm.direction"}},[e._v("不加路径")])],1),a("div",[a("el-collapse",{model:{value:e.fillRangeCollapse,callback:function(t){e.fillRangeCollapse=t},expression:"fillRangeCollapse"}},[a("el-collapse-item",{attrs:{title:"点位模版",name:"spot"}},[a("predefine-template",{attrs:{form:e.fillRangeForm.customSpot,type:"fillRange"}})],1),a("el-collapse-item",{attrs:{title:"路径模版",name:"route"}},[a("predefine-template",{attrs:{form:e.fillRangeForm.customRoute,type:"fillRange"}})],1)],1)],1),a("el-button",{staticClass:"long-btn",attrs:{type:"success"},on:{click:e.addFillContent}},[e._v("填充")])],1),e.Topo?a("div",{staticClass:"spotsRoute-template",style:{display:e.Topo&&e.Topo.spotsRouteForm.visible?"block":"none"}},[a("div",{staticClass:"spotsRoute-start"},[e._v(" 起点: "+e._s(e.Topo&&e.Topo.handlerSpots.length>0?e.Topo.handlerSpots[0].code:"-- 请在地图中选择 --")+" ")]),a("div",{staticClass:"spotsRoute-end"},[e._v(" 终点: "+e._s(e.Topo&&e.Topo.handlerSpots.length>1?e.Topo.handlerSpots[e.Topo.handlerSpots.length-1].code:"-- 请在地图中选择 --")+" ")]),a("div",[a("el-radio-group",{on:{change:function(){e.Topo&&e.Topo.removeCheckedArcRoute()}},model:{value:e.Topo.spotsRouteForm.type,callback:function(t){e.$set(e.Topo.spotsRouteForm,"type",t)},expression:"Topo.spotsRouteForm.type"}},[a("el-radio",{attrs:{label:"add"}},[e._v("选择点位/路径")]),a("el-radio",{attrs:{label:"delete"}},[e._v("移除点位/路径")])],1)],1),8===e.Topo.state[0]?a("p",{staticClass:"spotsRoute-footer"},[a("el-button",{attrs:{type:"success"},on:{click:function(){e.Topo&&e.Topo.handleJustify()}}},[e._v("两端对齐")]),a("el-popover",{attrs:{title:"操作步骤",placement:"right",trigger:"hover"}},[e._l(e.justifyInfo,(function(t,r){return a("p",{key:r},[e._v(e._s(t))])})),a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})],2)],1):10===e.Topo.state[0]?a("p",{staticClass:"spotsRoute-footer"},[a("el-button",{attrs:{type:"success"},on:{click:function(){e.Topo&&e.Topo.handleArc()}}},[e._v("绘制圆弧")]),a("el-popover",{attrs:{title:"操作步骤",placement:"right",trigger:"hover"}},[e._l(e.arcInfo,(function(t,r){return a("p",{key:r},[e._v(e._s(t))])})),a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})],2)],1):e._e()]):e._e(),a("div",{staticClass:"prop-template",style:{display:e.propForm.visible?"block":"none"}},[a("el-button",{staticStyle:{position:"absolute",left:"2px",top:"2px",background:"transparent",border:"none"},attrs:{icon:"el-icon-close",size:"mini",circle:""},on:{click:e.closePropTemplate}}),a("prop-template",{attrs:{form:e.propForm,Topo:e.Topo,keyhiddenList:e.keyhiddenList,type:"prop",item:e.propForm.propertyTemplate}}),a("extend-template",{directives:[{name:"show",rawName:"v-show",value:e.propForm.propertyTemplate&&(!e.propForm.propertyTemplate.type||0!==e.propForm.propertyTemplate.type[0]),expression:"\n        propForm.propertyTemplate &&\n        (!propForm.propertyTemplate.type ||\n          propForm.propertyTemplate.type[0] !== 0)\n      "}],attrs:{type:"prop",extendUser:e.extendUser,extendParse:e.extendParse,extendForm:e.extendForm},on:{changeBoolean:e.changeBoolean}})],1),a("el-dialog",{attrs:{title:"批量修改",visible:e.isBatch,modal:!1,"append-to-body":!0,width:"400px"},on:{"update:visible":function(t){e.isBatch=t}}},[e.Topo?a("el-collapse",{model:{value:e.BatchCollapse,callback:function(t){e.BatchCollapse=t},expression:"BatchCollapse"}},[a("el-collapse-item",{attrs:{title:"批量修改点位",name:"spot"}},[a("div",{staticClass:"batch-item"},[a("div",{staticClass:"batch-title"},[e._v("点位列表")]),a("el-radio",{attrs:{label:"check"},model:{value:e.batchForm.spotsRange,callback:function(t){e.$set(e.batchForm,"spotsRange",t)},expression:"batchForm.spotsRange"}},[e._v("选中部分")]),a("el-radio",{attrs:{label:"all"},model:{value:e.batchForm.spotsRange,callback:function(t){e.$set(e.batchForm,"spotsRange",t)},expression:"batchForm.spotsRange"}},[e._v("全部点位")])],1),a("prop-template",{attrs:{form:e.Topo.spotProps,Topo:e.Topo,keyhiddenList:e.SpotBatchHiddenList,type:"batch",item:e.batchForm.spot,batchType:"spot"},on:{handleBatch:e.handleBatch}}),a("extend-template",{attrs:{type:"batch",extendUser:"spot",extendParse:e.extendParse,extendForm:e.batchForm.spotExtend},on:{changeBoolean:e.changeBoolean,handleBatch:e.handleBatch}})],1),a("el-collapse-item",{attrs:{title:"批量修改路径",name:"route"}},[a("div",{staticClass:"batch-item"},[a("div",{staticClass:"batch-title"},[e._v("路径列表")]),a("el-radio",{attrs:{label:"check"},model:{value:e.batchForm.routesRange,callback:function(t){e.$set(e.batchForm,"routesRange",t)},expression:"batchForm.routesRange"}},[e._v("选中部分")]),a("el-radio",{attrs:{label:"all"},model:{value:e.batchForm.routesRange,callback:function(t){e.$set(e.batchForm,"routesRange",t)},expression:"batchForm.routesRange"}},[e._v("全部路径")])],1),a("prop-template",{attrs:{form:e.Topo.routeProps,Topo:e.Topo,keyhiddenList:e.routeBatchHiddenList,type:"batch",item:e.batchForm.route,batchType:"route"},on:{handleBatch:e.handleBatch}}),a("extend-template",{attrs:{type:"batch",extendUser:"route",extendParse:e.extendParse,extendForm:e.batchForm.routeExtend},on:{changeBoolean:e.changeBoolean,handleBatch:e.handleBatch}})],1)],1):e._e()],1),a("extend-manage",{ref:"extendManage",attrs:{extendParse:e.extendParse},on:{changeExtendParse:e.changeExtendParse}})],1)},i=[],s=r("16ad");r("304d"),r("c93c");function l(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function c(e,t){if(null==e)return{};var r,a,n=l(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var u=r("045d"),p=r("febe"),h=r("a018"),d=r("e902");r("8fec");function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}r("7a6f"),r("89a8"),r("ca71"),r("b276");function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){if(t&&("object"===Object(s["a"])(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function b(e){var t=m();return function(){var r,a=v(e);if(t){var n=v(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return A(this,r)}}r("e186"),r("bb13"),r("b110"),r("fe35"),r("51b3"),r("b3d9"),r("87d5"),r("1a91"),r("10dd"),r("5a05"),r("4c1e"),r("fee8"),r("8ea3");function w(e,t,r,a){var n,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(i=(o<3?n(i):o>3?n(t,r,i):n(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}var x=r("430a");
/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */function k(e){return k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){return S(e)||E(e)||R()}function S(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function E(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function R(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function I(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function O(e,t){T(e,t),Object.getOwnPropertyNames(t.prototype).forEach((function(r){T(e.prototype,t.prototype,r)})),Object.getOwnPropertyNames(t).forEach((function(r){T(e,t,r)}))}function T(e,t,r){var a=r?Reflect.getOwnMetadataKeys(t,r):Reflect.getOwnMetadataKeys(t);a.forEach((function(a){var n=r?Reflect.getOwnMetadata(a,t,r):Reflect.getOwnMetadata(a,t);r?Reflect.defineMetadata(a,n,e,r):Reflect.defineMetadata(a,n,e)}))}var F={__proto__:[]},B=F instanceof Array;function P(e){return function(t,r,a){var n="function"===typeof t?t:t.constructor;n.__decorators__||(n.__decorators__=[]),"number"!==typeof a&&(a=void 0),n.__decorators__.push((function(t){return e(t,r,a)}))}}function L(e){var t=k(e);return null==e||"object"!==t&&"function"!==t}function D(e,t){var r=t.prototype._init;t.prototype._init=function(){var t=this,r=Object.getOwnPropertyNames(e);if(e.$options.props)for(var a in e.$options.props)e.hasOwnProperty(a)||r.push(a);r.forEach((function(r){Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t},configurable:!0})}))};var a=new t;t.prototype._init=r;var n={};return Object.keys(a).forEach((function(e){void 0!==a[e]&&(n[e]=a[e])})),n}var j=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=t.name||e._componentTag||e.name;var r=e.prototype;Object.getOwnPropertyNames(r).forEach((function(e){if("constructor"!==e)if(j.indexOf(e)>-1)t[e]=r[e];else{var a=Object.getOwnPropertyDescriptor(r,e);void 0!==a.value?"function"===typeof a.value?(t.methods||(t.methods={}))[e]=a.value:(t.mixins||(t.mixins=[])).push({data:function(){return M({},e,a.value)}}):(a.get||a.set)&&((t.computed||(t.computed={}))[e]={get:a.get,set:a.set})}})),(t.mixins||(t.mixins=[])).push({data:function(){return D(this,e)}});var a=e.__decorators__;a&&(a.forEach((function(e){return e(t)})),delete e.__decorators__);var n=Object.getPrototypeOf(e.prototype),o=n instanceof x["default"]?n.constructor:x["default"],i=o.extend(t);return X(i,e,o),I()&&O(i,e),i}var U={prototype:!0,arguments:!0,callee:!0,caller:!0};function X(e,t,r){Object.getOwnPropertyNames(t).forEach((function(a){if(!U[a]){var n=Object.getOwnPropertyDescriptor(e,a);if(!n||n.configurable){var o=Object.getOwnPropertyDescriptor(t,a);if(!B){if("cid"===a)return;var i=Object.getOwnPropertyDescriptor(r,a);if(!L(o.value)&&i&&i.value===o.value)return}0,Object.defineProperty(e,a,o)}}}))}function Q(e){return"function"===typeof e?Y(e):function(t){return Y(t,e)}}Q.registerHooks=function(e){j.push.apply(j,C(e))};var N=Q,V="__reactiveInject__";function J(e){var t=function(){var r=this,a="function"===typeof e?e.call(this):e;for(var n in a=Object.create(a||null),a[V]=this[V]||{},t.managed)a[t.managed[n]]=this[n];var o=function(e){a[t.managedReactive[e]]=i[e],Object.defineProperty(a[V],t.managedReactive[e],{enumerable:!0,get:function(){return r[e]}})},i=this;for(var n in t.managedReactive)o(n);return a};return t.managed={},t.managedReactive={},t}function G(e){return"function"!==typeof e||!e.managed&&!e.managedReactive}function H(e){return P((function(t,r){var a=t.provide;G(a)&&(a=t.provide=J(a)),a.managed[r]=e||r}))}var q="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function K(e,t,r){if(q&&!Array.isArray(e)&&"function"!==typeof e&&"undefined"===typeof e.type){var a=Reflect.getMetadata("design:type",t,r);a!==Object&&(e.type=a)}}function W(e){return void 0===e&&(e={}),function(t,r){K(e,t,r),P((function(t,r){(t.props||(t.props={}))[r]=e}))(t,r)}}function z(e,t){void 0===t&&(t={});var r=t.deep,a=void 0!==r&&r,n=t.immediate,o=void 0!==n&&n;return P((function(t,r){"object"!==typeof t.watch&&(t.watch=Object.create(null));var n=t.watch;"object"!==typeof n[e]||Array.isArray(n[e])?"undefined"===typeof n[e]&&(n[e]=[]):n[e]=[n[e]],n[e].push({handler:r,deep:a,immediate:o})}))}var Z=r("ebb4"),_=r("597f"),$=r("c159"),ee=(r("0877"),r("0560"),r("acc0"),r("993f"),r("e766"),r("2788"),r("aa08"),r("1926"),r("d1ba"),r("3fe9"),r("d5ee"),r("f257"),r("7c98")),te=r.n(ee),re=r("f725"),ae=r.n(re),ne=4,oe=.03,ie=20,se=.2,le=25,ce=1,ue=5,pe=20,he=0,de=[[10,10,10],[200,165,0],[104,131,139],[255,0,0]],fe=1,ge=2,ve="rgb(255,250,250)",me="rgba(64,158,255,0.3)",ye=3.14159265;function Ae(e){var t,r=0,a=e.x2-e.x1,n=e.y2-e.y1;return 0===a?r=n>0?0:180:a>0?0===n?r=90:n>0?(t=Math.abs(a/n),r=180*Math.atan(t)/ye):n<0&&(t=Math.abs(a/n),r=180*Math.atan(t)/ye,r=180-r):0===n?r=270:n>=0?(t=Math.abs(a/n),r=180*Math.atan(t)/ye,r=360-r):(t=Math.abs(a/n),r=180*Math.atan(t)/ye,r=180+r),te.a.round(r*ye/180,3)}var be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e||0===e?(e=te.a.round(e%360,t),e>180?e-=360:e<-180&&(e+=360),e):180},we=function(){function e(t){Object(h["a"])(this,e),this._x=0,this._y=0,this._dir=0,this.code="",this.refId=0,this.icon=null,this.view=Rr.instance,this.alias="",this._x=t.x,this._y=t.y,this._dir=t.dir,this.code=t.code,this.alias=t.alias,this.refId=t.refId,this.type=t.type,this.orient=t.orient,this.description=t.description,this.isForbidden=t.isForbidden,this.isTraffic=t.isTraffic,this.layingOff=t.layingOff,this.offset=t.offset,this.offsetTheta=t.offsetTheta,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.property1=t.property1,this.property2=t.property2,this.property3=t.property3,this.property4=t.property4,this.property5=t.property5,this.relocWeight=t.relocWeight,this.property2X=t.property2X,this.property2Y=t.property2Y,this.property2Theta=t.property2Theta,this.property3X=t.property3X,this.property3Y=t.property3Y,this.property3Theta=t.property3Theta,this.extend=t.extend,this.externalType=t.externalType}return Object(d["a"])(e,[{key:"x",get:function(){return te.a.round(this._x*this.view.SCALE-this.view.ox,ne)},set:function(e){this._x=te.a.round((e+this.view.ox)/this.view.SCALE,ne)}},{key:"y",get:function(){return te.a.round(this.view.oy-this._y*this.view.SCALE+this.view.height,ne)},set:function(e){this._y=te.a.round((this.view.oy+this.view.height-e)/this.view.SCALE,ne)}},{key:"dir",get:function(){return be(180*this._dir/Math.PI)||0},set:function(e){this._dir=te.a.round(e*Math.PI/180,ne)||0}}]),e}(),xe=function(e){return e.map((function(e){return{refId:e.refId,x:e.x,y:e.y,dir:e.dir,code:e.code,alias:e.alias,type:e.type,orient:e.orient,description:e.description,isForbidden:e.isForbidden,isTraffic:e.isTraffic,layingOff:e.layingOff,offset:e.offset,offsetTheta:e.offsetTheta,offsetX:e.offsetX,offsetY:e.offsetY,property1:e.property1,property2:e.property2,property3:e.property3,property4:e.property4,property5:e.property5,relocWeight:e.relocWeight,property2X:e.property2X,property2Y:e.property2Y,property2Theta:e.property2Theta,property3X:e.property3X,property3Y:e.property3Y,property3Theta:e.property3Theta,extend:e.extend}}))},ke=we;function Me(e){return te.a.round(Math.sqrt((e[2]-e[0])*(e[2]-e[0])+(e[3]-e[1])*(e[3]-e[1])),ne)}function Ce(e,t,r){var a=te.a.round(Me([].concat(Object(u["a"])(e),Object(u["a"])(r))),3),n=te.a.round(Me([].concat(Object(u["a"])(t),Object(u["a"])(r))),3),o=te.a.round(Me([].concat(Object(u["a"])(e),Object(u["a"])(t))),3),i=te.a.round((a*a+n*n-o*o)/(2*a*n),3);return te.a.round(180*Math.acos(i>1?1:i)/Math.PI,3)}function Se(e){return 0===e[0]&&0===e[1]?0:e[1]<0?360-Ce(e,[1,0],[0,0]):Ce(e,[1,0],[0,0])}var Ee=Object(d["a"])((function e(t){Object(h["a"])(this,e),this.refId=0,this.startSpotRefId=0,this.endSpotRefId=0,this.icon=null,this.arrow=null,this.maxSpeed=0,this.avoidanceMode=0,this.expansionMode=0,this.fullWeight=0,this.isAvoidance=0,this.type=0,this.property5=0,this.refId=t.refId,this.startSpotRefId=t.startSpotRefId,this.endSpotRefId=t.endSpotRefId,this.maxSpeed=t.maxSpeed,this.avoidanceMode=t.avoidanceMode,this.expansionMode=t.expansionMode,this.fullWeight=t.fullWeight,this.isAvoidance=t.isAvoidance,this.pointMode=Number(t.pointMode),this.property1=t.property1,this.property2=Number(t.property2),this.property3=Number(t.property3),this.property4=t.property4,this.property5=Number(t.property5),this.securityDist=t.securityDist,this.walkConfidence=t.walkConfidence,this.walkMode=t.walkMode,this.extend=t.extend})),Re=function(e){return e.map((function(e){return{refId:e.refId,startSpotRefId:e.startSpotRefId,endSpotRefId:e.endSpotRefId,maxSpeed:e.maxSpeed,avoidanceMode:e.avoidanceMode,expansionMode:e.expansionMode,fullWeight:e.fullWeight,isAvoidance:e.isAvoidance,pointMode:e.pointMode,property1:e.property1,property2:Number(e.property2),property3:Number(e.property3),property4:e.property4,property5:Number(e.property5),securityDist:e.securityDist,walkConfidence:e.walkConfidence,walkMode:e.walkMode,extend:e.extend}}))},Ie=Ee,Oe=!1,Te=0,Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;Oe||(Te=setTimeout((function(){e(),Oe=!1,clearTimeout(Te)}),t),Oe=!0)},Be=Fe,Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=te.a.min([e,r])||0,o=te.a.min([t,a])||0;return{x:n-he|0,y:o-he|0,width:Math.abs(r-e)+2*he||0,height:Math.abs(a-t)+2*he||0}},Le=Pe;function De(e,t){return(e[0]-t[0])*(e[0]-t[2])<=0&&(e[1]-t[1])*(e[1]-t[3])<=0}var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];if(e[0]===e[2]||e[1]===e[3])return!1;var r=te.a.round((e[1]-e[3])/(e[0]-e[2]),ne),a=te.a.round((e[0]*e[3]-e[2]*e[1])/(e[0]-e[2]),ne);t[0]===t[2]&&(t[0]+=.05);var n=te.a.round((t[1]-t[3])/(t[0]-t[2]),ne),o=te.a.round((t[0]*t[3]-t[2]*t[1])/(t[0]-t[2]),ne);if(r!==n){var i=(o-a)/(r-n);if((i-e[0])*(i-e[2])<0&&(i-t[0])*(i-t[2])<0)return!0}return!1},Ye=je,Ue=[{value:1,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACS0lEQVRYR73WP4gTQRQG8PeWrGBsYhHIfKNBsNcmCoKFldUVcsXZCCIneNWBClqIVtfYnMIV/gHh4BrhClGwsLO4ylMUFbQQi8SdJZCgjRgwm5GBWzjjbGY3O3EhTebt+377MptdpoxDKXUfwFLWuq/veQJAE9Gr4XC42Gw2P/oKHO/jApj630S0CGBjFog8gDT3DoArvhFFACb7ZbVana/Vat99QYoCTO4PrfV5KeUzH4hpAGnuCoCbZRFlAMTMz4UQc2UQpQAmmJnVaDSak1K+nQZSGpCGBkGw3Gg01ooivAF2gjcBLBRB+AaQ1voLM58A0MsD8Q7YFToP4IkLMUuAyV4FcHUSYtYAk70N4HgW4n8A0uxjAF5P8zR0/Yx51s2GjIhoHcDd3Sf4nMBPItoynyRJtsIw7AVB0Gu32/1Wq2Ue6dbDG4CZF4QQm3nGMasJfFZKHZl0tTZc0Qn8IqJLRHSOiE5bGhZ+QhYBvCCiywA+RVF0lpkfZ4zbutvL7oF//uOVUttE1LI0fgrgTN694JwAM68LIS6MN1RKmVf2e7YgrfVFKeWjPAgXYAnAA1ujTqezt1KpfNBaH7asfw3D8GS9Xo9diExAHMfXhRC3JzVQSt0gohXr7mZeE0IsTw1wnWjW+/3+gcFg8J6Z94/Xa62/SSkPuvpkTsB1YrqulFo1d4etHoCzv7PABel2u0eTJHlnqXsDwHaX/FVaGmC6RVF0jZlvEdG+ne65X828AExoHMeHkiQ5FQTBHgAPXZNL170B8gaO1/0BSjnqIe6S1cYAAAAASUVORK5CYII=",title:"移动"},{value:2,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADTElEQVRYR62XS2jUUBSG/3vTMkgVBJ2S3BYVcWOLG4u4c+PKhbqy2oVSRNz4BIsIvloEH4gvEEWw+ERKqwUFF0XFpa9tFaQLC5PcM8ys1UVLjmRIhsyYTO7MNKvJ3Jt7vvP6TyKwRBcR9fm+fx7AZinlVcdxHpkcLUw2Ze0plUobFhYWpoUQm6K9QohRx3HGsp5tG0BrvQbANIABIcR3AFPMPBoYNoFoC2B+ft7J5XLvmLk/ND7oOM4PIrpoCtEygOu6qyzL+srM6+PGo5CbQrQEUC6XVywuLv5kZqdRzk0gmgaYm5vLdXV1FQGsNMl5FkRTAMwsiOgvgFwzOW8EYQxQKBSWWZb1J6zuoNorBWea8zQIIwCt9WoA5XhPJ7VYVriT1jMBiGgdM/8KPf8EYKZRi8WNSCmHbNueiIPH15n5WEMAIupn5tnwgJmOjo7h7u7uoqmnaUIUPc/MhVSAYrG41ff9z6HxKaXUYJonJooXq5U+AJOBeDHzRCKA67rbpZTv63T8uVJqfxqEUsoknVXjURf991CxWNzl+/7ryHNmfiWEiPI4rpQ6FIdwXXfYsqzfjuNMNRo8wbSMPI+3cA0AEe1h5sn6sBPRAWZ+EvzPzPd6enqOZE25ukglGq8Udiw3icajda31YQAPwvubSqlTJhBpnlclPPhR57kPQAJ4K6Xca9v27xjEcQB3wvvLSqmzrYS9Rk/ixpn5gxDiPoDHAJYD+Cil3Gfbdil6yPO800KIa6EupL50ZHlejQARvWHmnQC+dXZ27s7n80REO8Kc55n5i2VZgaBUxCi4PM+7IIQY831/pLe390Z9FEyNV5wgIo+ZVX0va623AXgKYC2AWaVU9XWr3bDXpEBrfQvAyaSQaq0HADwDsLHVPo8PrCTwShdorV8AGEqCCGYBgC2t9nlWp1TbUGsdhLuidM1Ia9hFqX1uDBAeNM7MB5uBaKbgUlMQX9BaB2ITiE5mJNo1XrGRROV53l0hREVuG4zUlsNe0wVpOXJd97aU8kRKYS6J8dQIRFBEdJ2ZR+IQSxF2owhEm7TWVwCciSAABEOr5ksoq9IbrWe+RIQ6cQnAueigpC+hViGMAILDPc87CiAYRC+FEA+zFM4U6B9InWcgFKR38QAAAABJRU5ErkJggg==",title:"标尺"},{value:3,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABUUlEQVRYR+1XsUrEQBCdzRZL6oRgNiikEERbP0AbC9FSf0CxFvwAT/AnLPwJBRsLez/BK1JEdyUkfRISRgIXOI4ju7d3sIXZdua9ffs2M7MhsMaSUt4j4gHn/NKUhpgCO9xMwIRzbsxjDBwFjA78bweKotguy3LPcZxbRDxt2/bYdd2p7/s/q5b1SmWYJMkWY+wRAK6WbUQIeaWU3gVBMNUVoi2gbzo6xISQSRiGD1q5OklZlu02TfOlk9vnVFUVxnH8q8JoOSClfEHEcxXZQvyZc36twigF5Hke1XX9rSJaFmeM7Xielw5hlQLSND2ilH6YCEDEkyiK3gcFSCkvAGB/IOkQEc9MBBBC3gDgc1CAEAJNyDeFsX8FqpNY/whnQ8deGXYCrDei+dGrurIuvvFW3G9qdRjNn9zaOF60f3yWjw6MDlh3QAhxAwBP6/wd/wG9JfkGpTqhVQAAAABJRU5ErkJggg==",title:"点位"},{value:4,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACpElEQVRYR81WPWgUQRT+3t4FAgo2mmPeXkRioSRBCyMpREghBFKKEQSLiCJi4V8haSRJJVYGRNRKK0VFBDsRJIWSJommiSCikGTf3IlptBJu98kct+Fi5JLL7d65sMXuzHzvm/dmvu8RWvxQi+Pj/yEgIleI6Jyq7gYwH4bhjc7Ozqm0M1TOgLV2TFXHiWg6iqIPRDQMYBcR9RhjFtIkUSYgIt8AfGLmIfddLBaPhGH4jojmALxKgoCqTmcymflcLlesxiMR2e+CA5hk5qvxoLX2l6puTyL4Xxi3mfla/C8uwbSqtqvqWd/355aXl0c8z3uoqk+jKLqfBAnP87o8zzuqqiMAXjLzcYcbl+A8gAcAfhPRF1XtcYPMnPgtEZFyrCiKzuTz+UerAZaWlgYymcxpIuoAsGCMGU1i5//CEJEZImo3xvQmvsPNkBaRmwBG29rakk/xZggEQXCKiB4D6GtJBqy1T1R1iJl3NJ2AiBwCMAPgBTOfaCqBykEfAzAQRdHOfD6/so6AtXZYVfsB9Ktq72ZqutEcIvoIYE/l/enS7/v++1UdiAFE5B6ACxsBbnF8SlXd9bvFzD/WKGHFD747A1LV60T0lplntxiormXlEgRBcJeILhLRuDFmoi6EBidXu+FnZh5sEK/u5bS4uLg3m806/b/j+/6luhEaXNB6AlUNSaolEJFBVT1ARAVndvEhb8ohjFu+NZ1Qpd1bFSIRSeUaBkFwjIjeuBsG4HmpVOrIZrOuI+oqlUqH1yhhmkJU3eDGGQnD8GAtKXam0fCjqoaI9jnrjesuIpMALjtSqZtR7H5E5Lrr1xW1LZeDmU+mTsCl0FrbDeBZ3GsCmGXmvnVm1HC+awAUCoVtqtrted5KLpf7us6M0gxeC7spJahF4A/eNS5X9jsL3wAAAABJRU5ErkJggg==",title:"路径"},{value:5,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABpUlEQVRYR8WXMU7FMAxA7d6i6R+YYYTlH4S/I8HIgMTEwmfiAhwAVrgHTIyflaVK7oBojFLRKm3TxEkqtXPr92LHlouw8oMr82ERAaXUvdb6EhF/EfG5LMsH7sGyBQyciPY2EBH3XIksgQ6OiIemaa6KovhBxBciOuFKJAvYcADYlWX5ZbKglDoGgFeuRJLAHLwrQ4xEtEAIHisRJcCFx0iwBWLhXAmWQCqcIxEUyIWHJLwCNvy/rQ52y3GnnU9iVmB8cqu3F5VwCrjSPurtLIm6rrdFUbwTUT0R8NV8KYlZAc6Fy5Wwv9da3/YZ4MBnLhO7HDYcAB6FEHetQAw8VcKGE9FTVVXXJhamwGMlRmUzC8tFFwOllN8AcAQAZ0KIz8zenpRjlPY3IcRusLzkCjh2gF4iBM8ugX0SV3d0wwsAJifvS5B6CV2lGkuY8e2DtxmwLlS7XJr9bql5H4IPBJbIBKfm48xFjWJfh6TAJxlwlcOs25vN5sMHl1Kedus4J+2DNpwL7PrhiJ0RnPdDC8k5ANwQ0ZYTLOWd4EqWEjTmm9UF/gBjUw8YkrmZpAAAAABJRU5ErkJggg==",title:"擦除激光"},{value:[6,1],data:"data:image/png;base64,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",title:"绘制激光",children:[{value:[6,1],content:'<b style="margin:0 10px">低</b>',data:"data:image/png;base64,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",title:"低"},{value:[6,2],content:'<b style="margin:0 10px">中</b>',data:"data:image/png;base64,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",title:"中"},{value:[6,3],content:'<b style="margin:0 10px">高</b>',data:"data:image/png;base64,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",title:"高"}]},{value:[7,2],data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABe0lEQVRYR+2WrU9DMRTFz5kDPHgEgg+LZg4mgJAMDQkCzNzb5tjk3uQEJAiQBELCh5hkGkXCh+BPQOBA7pC+3C51GNaXLK+qr6/p/fXc9twSOTfmHB8FQKFAVAXSNF2XNF8qlb6SJLl0FyAqQLfbvZG04wIPh8NKs9nsRwVI0/QRwFq2c7KVJEl7LACSFgFUSbZDn4kCIGkKwDOABQAPJDc9RCwAJ7GTOmskRyr/O4CkaQvy4wNKigMgqQrgygLvkrx2/ZgAxwBaBtDyB27yACT5nfZI1oJcx1FAkoK7XCY5sFxPGICkHoA5AG+hg0VRQNIBgDOTuk+yEuR6/CkIDpqLOyBZLgBiK+Aq1p0FPSV5FAC8Aliy7xmSme9L2gNwbuP7JC9s3NWHbxt3B3o5qIYnAA5t3laj0bgfVSpbcBbAB8nbAGADwCqAd+/3geev2LwX7w/2z9UJ9yZ4Itn3a3U6nW2Srkx/1uv1DHgsD5LAuP7sFgCFArkr8AsgDFEwkQ0Z8AAAAABJRU5ErkJggg==",title:"置信度",children:[{value:[7,1],content:'<b style="margin:0 10px">低</b>',data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABnElEQVRYR+2Wr08DMRzF39sUhwePQAyw6M3BBBCSoSFBgMG129QOtay3zExAggBJICT8EEimUSQwBH8CAgdmuX1JL3fLOQzrkuWq2q+497nX9n1LTHhwwvrIADIHnDpgjFkTkYVcLvellLq0F8ApQBAENyKybYWHw2G5Vqs9OgUwxjwBKEZ/TvpKqeOxALTb7YKIVKxAOmecAHQ6nZnBYPBCcpHkg1JqI4FwAtBsNov5fN5aHQ2t9cjlfwfwfd+zIr7v/ySCzgCMMRUAV7Hwjtb62s6dAQRB0BARP32ipxNARBp2mwF0SR4le+3MARGR1F0ukezZ9fQBiEgXwDyAPslRgjlxQET2AZzFVj+SLCe2uwJIDprV7ZEsZQCuHbAd6y4WPSV5mAJ4A7AUr2dJRrlvjNkFcB7X97TWF3Ff8DzP+47rfa31cqobngA4sGsR2axWq/ejTiUi9oNzAD5I3qYA1gGsAngnGeV9KnJX7DwMw9d6vR7lQwxXIVkIw/DZvnqSeqvV2rJtGsBnAjyWB0kquP6cZgCZAxN34BendXswzdkYSgAAAABJRU5ErkJggg==",title:"低"},{value:[7,2],content:'<b style="margin:0 10px">中</b>',data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABe0lEQVRYR+2WrU9DMRTFz5kDPHgEgg+LZg4mgJAMDQkCzNzb5tjk3uQEJAiQBELCh5hkGkXCh+BPQOBA7pC+3C51GNaXLK+qr6/p/fXc9twSOTfmHB8FQKFAVAXSNF2XNF8qlb6SJLl0FyAqQLfbvZG04wIPh8NKs9nsRwVI0/QRwFq2c7KVJEl7LACSFgFUSbZDn4kCIGkKwDOABQAPJDc9RCwAJ7GTOmskRyr/O4CkaQvy4wNKigMgqQrgygLvkrx2/ZgAxwBaBtDyB27yACT5nfZI1oJcx1FAkoK7XCY5sFxPGICkHoA5AG+hg0VRQNIBgDOTuk+yEuR6/CkIDpqLOyBZLgBiK+Aq1p0FPSV5FAC8Aliy7xmSme9L2gNwbuP7JC9s3NWHbxt3B3o5qIYnAA5t3laj0bgfVSpbcBbAB8nbAGADwCqAd+/3geev2LwX7w/2z9UJ9yZ4Itn3a3U6nW2Srkx/1uv1DHgsD5LAuP7sFgCFArkr8AsgDFEwkQ0Z8AAAAABJRU5ErkJggg==",title:"中"},{value:[7,3],content:'<b style="margin:0 10px">高</b>',data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABWklEQVRYR+2Wq05EMRRF15aAB49A8LBoxsEIICSDhgQBhl9g+IYRkCBAEggJDzGS0SgSHoJPQODAbtLJuaQOw+0k5Fb1cW/P6m67T8WIi0YcnwagUaCoAraXgWngQ9J5ugClAa6Ajbh5bUn90gD3wFIAdCUd1gJgexbopAC5z9iuH8D2GPAIzAB3klYriFIASeK00mGR9KPynwPYHo8gX9kqywDY7gAXEXhT0mWq2y4GcAB08xP9PwFsVyvtSdrP9rqMArad3eWWpEFI/c8AbPeAKeAld7AiCtjeAU5C6r6kdrbX9W9BdtBS3IGkVgNQWoGUsW4i6LGkvQzgGZiL9oSkoe/b3gJOo39b0ln0p/zwGf3pQM9ncx0Bu9Fek3SbZ6o04STwJuk6+2kFWAReK7/PLHchvnuq/CHGUp5Ib4KH9OrJ5lqPNP1eAdfyIMmM69dqA9AoMHIFvgFQMEUwYr6fHAAAAABJRU5ErkJggg==",title:"高"}]},{value:[8,1],data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAyUlEQVRYR+2X0QlCMQxFkzGSFXQIHcJ5xHkcwg6hKyRjRPqhqDSFhILwSKE/fSm97zQkvQjOUNWzmR0AoM/P0RCxEdHF2xtZx4mAu5ntRt8R8UFE+8hBXqwrQESsb2LmrxhvPStmOwKyObOMgKqmcmaZgGzOlIAiUASKAIrIbdBy373Fa0Ze8wnGt/8L8P4kWlqj8a9zKwmLQBEoAisJzEp6Y+bj0OSsqoT9WQ4Ap1831V0UAFw9K7eMwCadUepOoyRm7jh1p1EBT0edtxJ5gKlKAAAAAElFTkSuQmCC",title:"对齐",children:[{value:[8,1],content:'<b style="margin:0 10px">水平</b>',data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAyUlEQVRYR+2X0QlCMQxFkzGSFXQIHcJ5xHkcwg6hKyRjRPqhqDSFhILwSKE/fSm97zQkvQjOUNWzmR0AoM/P0RCxEdHF2xtZx4mAu5ntRt8R8UFE+8hBXqwrQESsb2LmrxhvPStmOwKyObOMgKqmcmaZgGzOlIAiUASKAIrIbdBy373Fa0Ze8wnGt/8L8P4kWlqj8a9zKwmLQBEoAisJzEp6Y+bj0OSsqoT9WQ4Ap1831V0UAFw9K7eMwCadUepOoyRm7jh1p1EBT0edtxJ5gKlKAAAAAElFTkSuQmCC",title:"对齐"},{value:[8,2],content:'<b style="margin:0 10px">垂直</b>',data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAyUlEQVRYR+1XwQ3CMAy0x3BWgCFgCOapmIchyBCwgj2GkSsiIVpATeqoQo6Up+3TJXeXIDQsZr5aeUrpWNsGawutjpn1CaC6T3VhAPgfBkRkUNUDANjuuTIiZhSRm6ruek4usxDxjmtIqQZ8mRsANsGA+XlvBZRrM6pgAIBTbyWYAgDgElkQDEwYcMyG0fuJ6PzqnHMA3LLBbj4R7b8C8MqGT30nDASALTDgmQ35/Q8xK0OPbCje/1OGS143axxXWHEw0MpA8/f8AXL7ukfaksi0AAAAAElFTkSuQmCC",title:"对齐"},{value:[8,3],content:'<b style="margin:0 10px">两端</b>',data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABMElEQVR4Xu2bWQ7DIAxE7Zs1J6t6suZmrqIu8EMIEjglfvm2AkzGy2BHJfijwc8vAAADgiOACwQnwH4QNDPLAFpVdZkBMDN7isjtu1dVLTJ91wUAAAbgAsQAgmBCgCzQkAIfqro22FdNzWxLa/eqYTLongYb1pZlEABbfm9+etUBLQtfEoAapX+UE3FhwOH99GJAMQh+/DOnpwcDimu4l8IA8I7QMCCLkriAQxokBpRAJgh6X4iQBcgCpEHqAAohKkFKYbQAWiAhgBhCDI25FT4UZxBDiCHn9jhqEDWIGkQNogZRgwHUYKU9fPnmaPj2eHgAav34HKBLjsgwJMWsMMPSTIszLt+SC8+ydb8SO+ugpXW7AfBvBxuxH36aGoHqTO+EATN9rRF7hQEjUJ3pnS9JBeBfnhGiHAAAAABJRU5ErkJggg==",title:"对齐"}]},{value:[9,1],data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABIklEQVRYR+2XUYrCMBCGMySXyJSCi48eQr3IXkW9gJfxAHYPsb5uoTQBzzBhlgYrrrRNkZYskr5mOv3yz/zTBETkByJ/XySAuwLW2gURLUIlUUp9E9GqL04pddVaX6qq2gzElFrrslm/AxhjfoQQQQAAOBHRUUp5HoD9ZOYlAOx6YkpE/HgG4NDub+uFc+4gpexLvmHmg08OsO7I6ZVBRL/5RwVGAyDitgvWGNOo4gGyLNs/xzRlaZUbBHDObfM8L9oEdV3vH+QsEkCfAiN76E9YZw+8WoIEcHOBYOavARd4+7ZlnLQEyYazKWCt3TFzO9n+/SCavgnHKjDbHIgOMPZnFF2B93FBQMr5bRgCmOtIFvdQGv1Y/oqFpngnXc2iK/ALJMXRMGV+cTEAAAAASUVORK5CYII=",title:"填充"},{value:[10,1],data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEc0lEQVR4Xu2aa6hmYxTHf39icinxYaQoYTTJJZd8cJdGyZ1Iw3zAyIzRaEpuH1BSfCBSjEFRbiEiRRJj+CKXQoiYL+TLlEshEX+t07On3du+nXf2Pvvs931X7c457eestf7/vZ6117PWFlMumnL8zAiYRcCUMzDbAkMMANt3AqdW+P6epFhTK71GgO0Dgfz1BxDXn+ln9vsWSf8FGtunAe/WIoPTJW2uW7dgBNjeE7gIuDIHus6/7P6/wDsJ+F/A/elGEcAgKKR/AmzvBJwDnJuA79wUccN1qyQ9na0diY5+CbB9I7AGOLgAzJvA9yPX1rRuDyCiJfu5L3BC7sqTuEHSA4uKANtnArdECI4Aj3CNp/W8pNjbY4nttcDDRWHeawTYjid1K3BDDtk24EngRUkfjYV45J+qQPZGgO2VQLx2luX83QjcJ+m7NoCXhHn/SdD2bcDdOZBvRJaW9HabwEsIqDLRfRK0vQm4JnnxD7BW0hNdAM/rtP0ocGiFndh6ayT9XOfL2HWA7dfS6y1s/AZcIen1OoOL7f5YBNgOoGcnMD8l8E2qs8WGf/79gJTwnklIIsGtbCvD98HOvCLA9pHAZ8nR2GcrJGV/9+H/DttsTIDt3YAPgSOS1dULkfB2GGGNgvkQ8BiwOunbKCkqssFLIwJsXw08ntB+nEL/18Gjh2ZJ0PYW4OQEOPZ9J0VOH4TWRoDtC4BXknObJF3bh6Nd2WxCQIAPEkKOk/RJV870obeSANsR9hH+IRP39ANUHQGR+CIBTuTTb0LAD8D+k/r0KwmwfXwqfGLd5ZKe7WOPdm2zdAvY3pDrvi5ru7HRNbCm+qsIeAG4JBqXkg5pqnBo66oIyPZ/9PMu7QOY7b0l/dKl7UICbB+UWtZhe72kh7p0oki37fXAg8B1kh7pyn4ZASuAt5LRUyS935UDZXptfw0sBz6XdFRX9ssIOA94NRk9VtKnXTlQQcAHwIkxEpN0Rlf2ywi4DHguGV0u6ZuuHMjrHZn6Hg3sBUQOyJoujae+Tf0tI+AqIOvuHiDpx6YKx13X9tS3qR9lBFwPZIlvn64zcebsSLu7KAK+bfs0WkbATcC9ybElkv5uymhb62z3mgNizHVHArNUUjRAF1RsZ3XIVklFE+ZW/CmLgIuBl5KFRiOmVrzJKbF9D3AzcJek29vWn+krI+Aw4Mu0aJ2kbBzdlR+Fem2fJCm2QmdSRsAuwO/ArjGLl7SuMw96Vlx1FojW1zHAZkmjHzv07HZ75qsIiPFXzP23SVransnFpamKgPyb4HxJMQ2eOKki4HDgi4Q4egPx7V5801cmT0mKz2EGJXVN0ZeBCxP43euQSapts9fpWOj7dQREDshG4Zlvpd/lTCIBS1I9sL0SGwWZTnBzVePEERCgbMeZIM4GczKNBERVGMPQ/aaSgBQF21+JUxcBowREZViQqee+0J7IHFBAQOmbapIJOAuILlFVLfDVEA9Ngytc2i6UZgS0zejQ9M0iYGhPrG1/ZxHQNqND0/c/fjKWUBQhBEAAAAAASUVORK5CYII=",title:"圆弧"},{value:11,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABIBJREFUWEetl3vI32MYxj+XPxByXhFF5jTHHGYohzlmzixpJYbRlNmGxFZIDltmZk2UHFeaOZWMKKY1YnKMkJiaw5h/sD+sdOl6e75vz/t9v7/3/dHu+v3xe577eZ7rue/7up77Kzaz2b4DuBQ4APgaeEXSzb2O0Wjn2x4LXAaslLRyJH/bq4HjO3zeByZLWtee6wnA9j7A/cCF1aJfgeUZl7S23sz2C8BFIwBcKGl2XwBsbwW8DpzcY8P1wDxJCzNv+5yEuvJ9E7gHuA04vRrfXtKf9Z6dEbCdW784WnqANcB9wBXAucV/E3CcpI9s5wJvV/uMk/RVPwCuBx4qji8DKaIdgBtKPYyEbb6kW0pkrgOWVM5jJX3XD4ALgJcqx+R8oJJLuGcCp3ag+AHYX9Im27sA7wH7Fb9lksKOIdYrBTsCnwN7Vt7PAQskfVCAXAMEyLjKZ6qkJ8v8XcDcau4sSamr0QFUBzza8v8HeKAAWW87aZkFHApskHRtWXtIuf12Zf1SSaHyMBuJhu001IuTx0Tj4a5NbQdkgDU2XtKH/xXAz8BuZVGEZELHBm8VICvqOduh4WnV2DelGJdIShQHrVcNhAFhQmNTgB+BOcAZHUCeKEC+KCk4CFgKHNHyfTfskrSsGR8GwPbRhd+Nz+OSrmr+2J5agESia/sjIAqQjba3BULH/LZs+S6XdEnGugCkUs8sC0KrSZK+bIU4LLmpAGkH5LMUqqSnSjTGFxAXd4EYAsB2qFVX/ixJD3YVT9n8qAJkGL+LNKdQ3ym+UctE48Bqv9mDAGzvCiRHjXCskHR2FfrIasRojaQ8uYNmO+FMRHLbti0uEVlbxOnVqqDXDQAofH6mpecTJQVQ5iM2q4CoWyxzQ55m2+F8CjdAdm6h+KmAWGA7kUjRDphs7wvk8GOrRXfWt7Qddbu8mh8jaUNXamwfDswAruyYzxO+dzW+NgAeAwarHHhN0qQq9JNLD9AMLZIUCR4w26HcKXm+JX1bjafoEpGTuoCWsRsDIE3GmMppEZBDvre9NfAGcEKZ/z15zlw5fC8gOT24dEwT68Nspye4tQeAASoGQFcblZzNBwIg731jcyXdXd2yjt4nkgaFx3beg0+BLYp/1PGXQv3Vkh4ZqIFyk3QugxtXB0b99ij/I6dHStpY1oR6z1a+cyTlxk1qnm71Dln7cTsaNQ13B+5tFVvtP71BXSgb/W9oFwmeUIFLDSU1jS2WlMIcZl1KmHzPS1vV8v67dEl5J9Lp1LmdJinpaG6fR6qph7+AdEKptdEBVJtcXYC0Of0bsA0QrY+tknRitW46UD/TMyWlsDttxO8C2zuVm/b8sEjbLil9YygZNkW8oi2xqOYxvQ7P+KgfJmXjbJJCPb9jsxRbaJsuOEDDnsamSKoLtf8UdKG2nb4gfV7dB8Y1TUYOPq9oQsaGCNr/SkEPEMl/9P72iuNdrjMk5SEa0fpKQQ8ghxUgnc1mXtVamjdbBNob2c73YHJfP2Z9hb/vIhwtjLYjt0nLNCB68Xy7Z+i1x786I63FgtYdVQAAAABJRU5ErkJggg==",title:"擦除反射板"}],Xe=[{value:1,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABLklEQVQ4T82Ur07EQBDGZyoxGMwOaUItDg3iUDwBySneAYvhUDjeAEEQhDOgUTzCGZ6g2ZkmGBRqu0M2aS9w2Xbb9ASbrNlv+us3f3YROhYz7xDRd5fedY4xwVp75L3fzfP8fTKwqqq59/6pruvTyUARuVbVRXAVgF3unHOroii+Yvo6ZRF5UNWLESmuEPHVGHPz+5s10Fp7nGXZUlWpCeir3wEAhA2IyMaY/Rb6pynMvAcALwBwkqqhiJyr6rKBLlqn0S6LyL1z7jHVlMbAZ+PujIjeosAQUJblLAUMccx8CQB3AHBFRLedwKHNEZFDVf1AxGdjzPz/Abea8qimpGo4amxisHAt23NVnQFA2P2D3eeKmXVD7796qRTDXLYxgx6HFHCoPnkON3+0deAPx8KVFTYv93EAAAAASUVORK5CYII=",title:"撤销( Ctrl + Z )"},{value:2,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABSElEQVQ4T7WUIU/EQBCFZ3JJEySqme2uQBPCH0CcQSJIAAMCQ0JQOAwGgcHwGwgSQ3BgOEPQJGhC2HRXEZpU4DpkL3vkCtfutoHamfna9950EHo8Wus5pdTnrFHswQOt9TBJko80TZ9+zvcGDgaDe0TcIqKraWgjsCiK+bIsl5sUOKCvHQshTid9v4DGmH1EPGDmpVg7EPGCiHZdfw1orX1m5kUPegOAlxbo0NWYOWfmTSnlYw1orb1h5jXftJJl2UMTzIXiJY+qqtqQUr7XJOd5voqId+M3IC4Q0WubXA/cFkLszUzZGHMIAOfMfJRl2VnIOwdUSo0a99AYcwkAOwCwLoS4DgHb6uNQ/gPYSXLwC7uGEgS6hi5rEwX00O/FRkS3qLeTYSI6iQkr+tcTQkQdkujj0LR3f3K+oj2M8SjUE+VLCDJd/wJYcpEV1EzMjQAAAABJRU5ErkJggg==",title:"恢复( Ctrl + Y )"},{value:3,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAjElEQVQ4T93UwQ2AIAwF0HYMOg1OJk4m05QxMB4wqCWtBj3AmbzA708ROh/s7MEBppRmK+6cW1p3T2DOORjQSESTGSSiZgzMvO7QwGD5opYrIsYyqNtQ6gyNoEfE8AgsQ5CGwsz5XxAAopZZXRvthV7Drj1sghJkKfKYoJqrWBspwzcr7bsFa6mL5c4GfXKqFXa0iFwAAAAASUVORK5CYII=",title:"插入新地图"},{value:4,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAARVJREFUSEvtln0OgyAMxQfeQuNd3MnmTrbdxegthOWRNOkaoYIfWRb9RwyFn320T83t5MuczLv9HnAYhs5a221RommantarGQJYVdWrFOi9fxYBsdA5984B40U3AfmbamBSJhuobRybXwVEUCmA1rVtG2RfBRzHsTfGPEqh8zzfL+BXH0pJIZEmL+/RzZLWdZ00BmkKuwIp+6VNSYVdgNQq8FNUMMmMajwkw5iXQu7DgPS1QIawKkgIm4sBIT9iKD5q3rJKedHknOE0TZ7ONemlKSC3PekmsmikRVJ8yJr3WQq41I+pM4z1bxKoNb2c521xAYMCVM4YW2u9cy5IjjHu9ByTC78gvECW4tSfqNxz1OL/H/gBG2NoLPoQop0AAAAASUVORK5CYII=",title:"复制( Ctrl + C )"},{value:5,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAL1JREFUSEvtlcENwjAMRf23qJwTEzACV4ZgB0agiA26AgsxQS/IzhhGRYhDSJGpQtRDcnb84mdbAVU+qMyjBixufB1KRaQHcPKWx8zuh2cDGzBV/TelZnbO9TWE0Hv7/VMPp0pijLs0OYB7Dth13fgRmwucG5oXcDSzjaOiIzMPDfg0sCqlqjoNQvkezo2/iNwAbIsOzbdkqnolokMDEpF/Dx1K9w6lF/fiO5ItDnF/nIsJycUGLGXynae60gfc7ncd30Gv5gAAAABJRU5ErkJggg==",title:"粘贴( Ctrl + V )"}];r("3d86"),r("fb4d");function Qe(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=v(e),null===e)break;return e}function Ne(){return Ne="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var a=Qe(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Ne.apply(this,arguments)}function Ve(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Je(e,t,r){return Je=m()?Reflect.construct:function(e,t,r){var a=[null];a.push.apply(a,t);var n=Function.bind.apply(e,a),o=new n;return r&&f(o,r.prototype),o},Je.apply(null,arguments)}function Ge(e){var t="function"===typeof Map?new Map:void 0;return Ge=function(e){if(null===e||!Ve(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Je(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)},Ge(e)}var He=r("ca59"),qe=r("6875"),Ke=function(){function e(){Object(h["a"])(this,e),this.dom=null,this.status=0,this.cvs=null,this.ctx=null,this.tpData={spots:[],lines:[]},this.layerCvs=null,this.layerCtx=null,this.squareCvs=null,this.squareCtx=null,this.dx=0,this.dy=0,this.angle=0,this.rotatable=!1,this.mergeX=0,this.mergeY=0,this._visible=!1,this.btn1=null,this.pgmContent=null;var t=document.createElement("div");t.className="merge-ctl-box",this.cvs=document.createElement("canvas"),this.ctx=this.cvs.getContext("2d"),this.layerCvs=document.createElement("canvas"),this.layerCtx=this.cvs.getContext("2d"),this.squareCvs=document.createElement("canvas"),this.squareCtx=this.squareCvs.getContext("2d");var r=document.createElement("input");r.value=String(this.angle),r.onchange=this.angleChange.bind(this),r.type="number",r.step="0.5",r.min="-180",r.max="180",t.append(r);var a=document.createElement("button");this.btn1=a,a.className="lock",a.innerHTML='<img src="'.concat(qe,'">'),a.onclick=this.lock.bind(this),t.append(a);var n=document.createElement("button");n.onclick=this.cancel.bind(this),n.className="cancel",n.innerText="取消",t.append(n);var o=document.createElement("button");o.onclick=this.confirm.bind(this),o.className="confirm",o.innerText="确认",t.append(o),["mousedown"].forEach((function(e){t.addEventListener(e,(function(e){return e.stopPropagation(),!1}))})),this.dom=t,document.getElementById("main").append(t)}return Object(d["a"])(e,[{key:"addCustomMergeUI",value:function(){}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e,this.dom.style.display=e?"block":"none"}},{key:"renderMergeData",value:function(e){var t,r,a,n=this;this.visible=!0,this.status=Rr.instance.state,Rr.instance.state=0,this.mergeX=this.mergeY=0,this.angle=0,this.rotatable=!1,this.btn1.innerHTML='<img src="'.concat(qe,'">'),this.tpData.lines=e["lines"],this.tpData.spots=[];var o=window.handleZip.correctImageData(e.pgm),i=o.width,s=o.height,l=[i,s];this.cvs.width=l[0],this.cvs.height=l[1],this.ctx=this.cvs.getContext("2d"),null===(t=this.ctx)||void 0===t||t.putImageData(o,0,0),this.pgmContent=o;var c=te.a.round(Math.sqrt(i*i+s*s));this.squareCvs.width=this.squareCvs.height=c,this.squareCtx=this.squareCvs.getContext("2d"),this.dx=(c-i)/2,this.dy=(c-s)/2;var u=[i,s];this.layerCvs.width=u[0],this.layerCvs.height=u[1],this.layerCtx=this.layerCvs.getContext("2d"),null===(r=this.layerCtx)||void 0===r||r.putImageData(o,0,0);var p=Rr.instance.SCALE;this.layerCtx.fillStyle="#ee880066",e["spots"].forEach((function(t){var r,a,o,i,s=te.a.round((t.x-e["originX"])*p,ne),l=te.a.round((e["originY"]+e["height"]-t.y)*p,ne);t["cvsx"]=s,t["cvsy"]=l,n.tpData.spots.push(t),null===(r=n.layerCtx)||void 0===r||r.beginPath(),null===(a=n.layerCtx)||void 0===a||a.arc(s,l,3,0,2*Math.PI),null===(o=n.layerCtx)||void 0===o||o.closePath(),null===(i=n.layerCtx)||void 0===i||i.fill()})),this.layerCtx.strokeStyle="#ee8800ff",this.layerCtx.lineWidth=1,e["lines"].forEach((function(t){var r,a;null===(r=n.layerCtx)||void 0===r||r.moveTo(te.a.round((t["startSpotX"]-e["originX"])*p,ne),te.a.round((e["originY"]+e["height"]-t["startSpotY"])*p,ne)),null===(a=n.layerCtx)||void 0===a||a.lineTo(te.a.round((t["endSpotX"]-e["originX"])*p,ne),te.a.round((e["originY"]+e["height"]-t["endSpotY"])*p,ne))})),null===(a=this.layerCtx)||void 0===a||a.stroke(),Rr.instance.state=0,Tt.instance.renderMergeData(e)}},{key:"angleChange",value:function(e){this.angle=Number(e.target.value),Tt.instance.render(),console.log("angle",this.angle)}},{key:"lock",value:function(){this.rotatable=!this.rotatable,console.log(this.rotatable),this.rotatable?this.btn1.innerHTML='<img src="'.concat(He,'">'):this.btn1.innerHTML='<img src="'.concat(qe,'">'),console.log("lock",this.rotatable)}},{key:"cancel",value:function(){this.visible=!1,Rr.instance.state=this.status,Tt.instance.renderMergeData(),console.log("cancel")}},{key:"confirm",value:function(){this.visible=!1,Rr.instance.state=this.status,Tt.instance.renderMergeData(),console.log("confirm")}},{key:"mousedown",value:function(e){var t=Rr.instance,a=t.gx,n=t.gy,o=t.scale,i=Tt.instance.mergeCanvas,s=i.width,l=i.height,c=te.a.round(a+this.mergeX+s*o-20*o),u=te.a.round(n+this.mergeY+l*o/2-10*o),p=te.a.round(a+this.mergeX+s*o),h=te.a.round(n+this.mergeY+l*o/2+10*o),d=this.rotateComputed([c,u]),f=Object($["a"])(d,2),g=f[0],v=f[1],m=this.rotateComputed([p,u]),y=Object($["a"])(m,2),A=y[0],b=y[1],w=this.rotateComputed([c,h]),x=Object($["a"])(w,2),k=x[0],M=x[1],C=Me([e.pageX,e.pageY,g,v]),S=Se([e.pageX-g,e.pageY-v])-Se([A-g,b-v]),E=te.a.round(C*Math.cos(S*Math.PI/180)),R=Se([e.pageX-g,e.pageY-v])-Se([k-g,M-v]),I=te.a.round(C*Math.cos(R*Math.PI/180)),O=20*o;E>0&&E<O&&I>0&&I<O?(Rr.instance.ele.style.cursor="url(".concat(r("2580"),") 16 16, auto"),console.log("hit")):console.log("miss")}},{key:"rotateComputed",value:function(e){var t=Rr.instance,r=t.gx,a=t.gy,n=t.scale,o=Tt.instance.mergeCanvas,i=o.width,s=o.height,l=te.a.round(r+this.mergeX+i*n/2),c=te.a.round(a+this.mergeY+s*n/2),u=te.a.round((e[0]-l)*Math.cos(this.angle*Math.PI/180)-(e[1]-c)*Math.sin(this.angle*Math.PI/180)+l),p=te.a.round((e[0]-l)*Math.sin(this.angle*Math.PI/180)+(e[1]-c)*Math.cos(this.angle*Math.PI/180)+c);return[u,p]}},{key:"rotateRender",value:function(e,t){console.log(this)}}]),e}(),We=Ke;function ze(e,t,r){var a=te.a.round((e[0]-t[0])*Math.cos(r)-(e[1]-t[1])*Math.sin(r)+t[0],ne),n=te.a.round((e[0]-t[0])*Math.sin(r)+(e[1]-t[1])*Math.cos(r)+t[1],ne);return[a,n]}var Ze=window.enumerationList,_e=Ze.SpotLabelEnum,$e=Ze.OrientEnum,et=Ze.SpotTypeEnum,tt=Ze.property4Enum,rt=Object(d["a"])((function e(){Object(h["a"])(this,e),this.visible=!1,this.labels=_e,this.childLabels={type:et,orient:$e,property4:tt},this.propertyTemplate={code:"",alias:"",description:"",refId:0,x:0,y:0,dir:0,type:[0],layingOff:!1,orient:[0],offset:0,isTraffic:!1,isForbidden:!1,offsetX:0,offsetY:0,offsetTheta:0,relocWeight:0,property2X:0,property2Y:0,property2Theta:0,property3X:0,property3Y:0,property3Theta:0,property4:[0],property5:!0}})),at=rt,nt=function(e){var t={};for(var r in _e)void 0!==e[r]&&(t[r]=e[r]);return t["type"]=[e["type"]],t["orient"]=[e["orient"]],t["property4"]=[e["property4"]],t["property5"]=Boolean(e["property5"]),t["layingOff"]=Boolean(e["layingOff"]),t["isTraffic"]=Boolean(e["isTraffic"]),t["isForbidden"]=Boolean(e["isForbidden"]),t.extend=e.extend,t},ot=window.enumerationList,it=ot.RouteLabelEnum,st=ot.PointModeEnum,lt=ot.Property2Enum,ct=ot.Property3Enum,ut=Object(d["a"])((function e(){Object(h["a"])(this,e),this.visible=!1,this.labels=it,this.childLabels={pointMode:st,property2:lt,property3:ct},this.propertyTemplate={refId:0,startSpotRefId:0,endSpotRefId:0,maxSpeed:0,securityDist:0,pointMode:[0],isAvoidance:!1,avoidanceMode:0,expansionMode:0,property1:"",property2:[0],property3:[1],property4:"",property5:!1,fullWeight:!1,walkConfidence:0,walkMode:0,type:0}})),pt=ut,ht=function(e){var t={};for(var r in it)void 0!==e[r]&&(t[r]=e[r]);return t["pointMode"]=[e["pointMode"]],t["property2"]=[e["property2"]],t["property3"]=[e["property3"]],t["isAvoidance"]=Boolean(e["isAvoidance"]),t["property5"]=Boolean(Number(e["property5"])),t["fullWeight"]=Boolean(e["fullWeight"]),t.extend=e.extend,t},dt=r("5422"),ft=function(e,t,r){var a={x:0,y:0};return a.x=te.a.round((e.x-r.x)*Math.cos(t)-(e.y-r.y)*Math.sin(t)+r.x,2),a.y=te.a.round((e.x-r.x)*Math.sin(t)+(e.y-r.y)*Math.cos(t)+r.y,2),a},gt=function(){var e=Rr.instance.handlerSpots.length;if(!(e>2))return dt["Message"].warning("选取的点位过少"),!1;var t=function(){for(var t=Rr.instance.handlerSpots[0],r=Rr.instance.handlerSpots[e-1],a=[t],n=Rr.instance.handlerSpots.slice(1),o=function(t){var o=Rr.instance.handlerSpots[t],i=0,s=0;if(n.forEach((function(a,n){if(Rr.instance.routesMapper.has("".concat(o.refId,"-").concat(a.refId))){if(t!==e-2&&r.refId===a.refId)return;s=n,i++}})),1!==i)return dt["Message"].warning("根据已选取的点位列表、起点、终点, 无法构建一条完整路径; 问题点位: ".concat(o.code)),{v:{v:!1}};a.push(n[s]),n.splice(s,1)},i=0;i<e-1;i++){var l=o(i);if("object"===Object(s["a"])(l))return l.v}return a[a.length-1].refId!==r.refId?(dt["Message"].warning("根据已选取的点位列表、起点、终点, 无法构建一条完整路径; 问题点位: ".concat(a[a.length-1].code)),{v:!1}):{v:{routeSpots:a,start:t,end:r}}}();return"object"===Object(s["a"])(t)?t.v:void 0},vt=function(){var e=Rr.instance.handlerRoutes[0];if(e){var t=e.startSpotRefId,r=e.endSpotRefId,a=[],n=[];if(Rr.instance.routesMapper.forEach((function(e){var o=e.startSpotRefId,i=e.endSpotRefId;i===t&&o!==r?a.push(o):o===r&&i!==t&&n.push(i)})),a.length){if(n.length){var o=[];return a.forEach((function(e){e=Rr.instance.spotsMapper.get(e),n.forEach((function(a){a=Rr.instance.spotsMapper.get(a),o.push({routeSpots:[e,Rr.instance.spotsMapper.get(t),Rr.instance.spotsMapper.get(r),a],start:e,end:a})}))})),o}return dt["Message"].warning("选中的路径没有离开的方向, 无法构建一条完整路径"),[]}return dt["Message"].warning("选中的路径没有进入的方向, 无法构建一条完整路径"),[]}},mt=function(e){var t=e.routeSpots,r=e.start,a=e.end,n=Rr.instance.scale,o=Math.atan2(t[1].y-r.y,t[1].x-r.x),i=Math.atan2(a.y-t[2].y,a.x-t[2].x),s=.5,l=.5,c=Math.pow(Math.pow(t[2].y-t[1].y,2)+Math.pow(t[2].x-t[1].x,2),.5),u=c*s*Math.cos(o)+t[1].x,p=c*s*Math.sin(o)+t[1].y,h=c*l*Math.cos(i+Math.PI)+t[2].x,d=c*l*Math.sin(i+Math.PI)+t[2].y;return"M".concat(t[1].x*n," ").concat(t[1].y*n," C ").concat(u*n," ").concat(p*n,", ").concat(h*n," ").concat(d*n,", ").concat(t[2].x*n," ").concat(t[2].y*n)},yt=function(e,t,r,a){var n=Rr.instance.scale,o=Ae({x1:e,y1:t,x2:r,y2:a}),i=te.a.round(e*n+le*Math.sin(o),ne),s=te.a.round(t*n+le*Math.cos(o),ne),l=te.a.round(r*n-le*Math.sin(o),ne),c=te.a.round(a*n-le*Math.cos(o),ne);return"M".concat(i," ").concat(s," L").concat((i+l)/2," ").concat((s+c)/2," L").concat(l," ").concat(c)},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{lx:te.a.round((Rr.instance.ox+e)/Rr.instance.SCALE,ne),ly:te.a.round((Rr.instance.oy+Rr.instance.height-t)/Rr.instance.SCALE,ne)}},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{rx:te.a.round(e*Rr.instance.SCALE-Rr.instance.ox,ne),ry:te.a.round(Rr.instance.oy+Rr.instance.height-t*Rr.instance.SCALE,ne)}},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{ax:te.a.round(e*Rr.instance.scale+Rr.instance.gx+Rr.instance.left,ne),ay:te.a.round(t*Rr.instance.scale+Rr.instance.gy+Rr.instance.top,ne)}},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{rx:te.a.round((e-Rr.instance.gx-Rr.instance.left)/Rr.instance.scale,ne),ry:te.a.round((t-Rr.instance.gy-Rr.instance.top)/Rr.instance.scale,ne)}},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=Rr.instance.spotsMapper.get(e[0]),r=Rr.instance.spotsMapper.get(e[1]),a={x1:t&&t.x||0,y1:t&&t.y||0,x2:r&&r.x||0,y2:r&&r.y||0},n=Ae(a),o="".concat(e[1],"-").concat(e[0]),i=te.a.round(a.x1*Rr.instance.scale+le*Math.sin(n),ne),s=te.a.round(a.y1*Rr.instance.scale+le*Math.cos(n),ne),l=te.a.round(a.x2*Rr.instance.scale-le*Math.sin(n),ne),c=te.a.round(a.y2*Rr.instance.scale-le*Math.cos(n),ne);if(Rr.instance.routesMapper.has(o)){var u=te.a.round(Math.PI/2+n,ne),p=te.a.round(le/4*Math.sin(u),ne),h=te.a.round(le/4*Math.cos(u),ne);i-=p,s-=h,l-=p,c-=h}return"M".concat(i," ").concat(s," L").concat((i+l)/2," ").concat((s+c)/2," L").concat(l," ").concat(c)},Mt=function(e){return 0===Number(e)?"#f30bca":"#578cff"},Ct=200,St=50,Et=0,Rt=function(){function e(t){Object(h["a"])(this,e),this.ctx=null,this.maxLength=Ct,this.scale=1,this.width=0,this.height=0,this.provisionalCanvas=null,this.thumbnailSolidRect=null,this.isDrag=!1,this.lineWidth=6,this.surplusInfo=t,e.instance=this,this.init()}return Object(d["a"])(e,[{key:"init",value:function(){var e=this,t=this.surplusInfo,r=t.width,a=t.height,n=t.originX,o=t.originY;this.surplusInfo.mapSize={width:Math.ceil(20*r),height:Math.ceil(20*a)},this.surplusInfo.mapRange={minposX:Math.ceil(20*n),maxposY:Math.ceil(20*a+20*o)};var i=0,s=0,l=document.getElementById("thumbnail"),c=Rr.instance.width,u=Rr.instance.height,p=Rr.instance.scale,h=Tt.instance.canvas.width-St,d=Tt.instance.canvas.height-St;c/u>h/d?(i=this.maxLength,s=te.a.round(u*i/c,2),this.scale=p*i/h):(s=this.maxLength,i=te.a.round(c*s/u,2),this.scale=p*s/d),l.width=i,l.height=s,this.ctx=l.getContext("2d"),this.width=i,this.height=s,this.lineWidth/=p,this.createCanvas(),this.render(),this.thumbnailSolidRect=document.getElementById("thumbnailSolidRect"),this.changePositionRect();var f=document.getElementsByClassName("thumbnail")[0];f.style.height=s+"px",f.onmousemove=function(t){t.stopPropagation(),f.oncontextmenu=function(){return!1},e.isDrag&&e.mouseHandler(t,f.offsetLeft,f.offsetTop)},f.onmousedown=function(t){t.stopPropagation(),t.preventDefault(),e.isDrag=!0,e.mouseHandler(t,f.offsetLeft,f.offsetTop)},f.onmouseup=function(t){t.stopPropagation(),e.isDrag=!1},f.onmouseleave=function(t){t.stopPropagation(),e.isDrag=!1}}},{key:"render",value:function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.width,this.height);var e=this.provisionalCanvas,t=Tt.instance.getLaserData(),r=t.pgmWidth,a=t.pgmHeight,n=t.pgmContent;e.width=r,e.height=a,e.ctx.putImageData(n,0,0),this.ctx.drawImage(e,0,0,this.width,this.height),this.ctx.setTransform(this.scale,0,0,this.scale,this.width/2,this.height/2),this.mapRoutes()}},{key:"mapRoutes",value:function(){var e=this;this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.strokeStyle="#2b85e495",this.ctx.lineWidth=this.lineWidth;var t=Rr.instance.spotsMapper,r=Rr.instance.routesMapper;this.ctx.beginPath(),r.forEach((function(r){var a=t.get(r.startSpotRefId),n=t.get(r.endSpotRefId);if(a&&n){var o=e.rePosX(20*a._x),i=e.rePosY(20*a._y),s=e.rePosX(20*n._x),l=e.rePosY(20*n._y);e.ctx.moveTo(o,i),e.ctx.lineTo(s,l)}})),this.ctx.stroke(),this.ctx.closePath()}},{key:"rePosX",value:function(e){return e=e||0,te.a.round(e-this.surplusInfo.mapRange.minposX-this.surplusInfo.mapSize.width/2,1)}},{key:"rePosY",value:function(e){return e=e||0,te.a.round(this.surplusInfo.mapRange.maxposY-e-this.surplusInfo.mapSize.height/2,1)}},{key:"createCanvas",value:function(){var e=document.createElement("CANVAS");e.style.display="none",document.body.appendChild(e),e.ctx=e.getContext("2d"),this.provisionalCanvas=e}},{key:"changePositionRect",value:function(e){var t,r,a=Rr.instance.scale/this.scale,n=(Tt.instance.canvas.width-St)/a,o=(Tt.instance.canvas.height-St)/a;if(e){t=e.left-n/2,r=e.top-o/2;var i=-t*a+St,s=-r*a+St;Rr.instance.draw.move(i,s),Rr.instance.gx=i,Rr.instance.gy=s,Tt.instance.render()}else t=-(Rr.instance.gx-St)/a,r=-(Rr.instance.gy-St)/a;t<0?(n+=t,n>this.width&&(n=this.width),t=0):n+t>this.width&&(n=this.width-t),r<0?(o+=r,r=0,o>this.height&&(o=this.height)):o+r>this.height&&(o=this.height-r),this.thumbnailSolidRect.style.opacity=n<0||o<0?"0":"1",this.thumbnailSolidRect.style.width=n+"px",this.thumbnailSolidRect.style.height=o+"px",this.thumbnailSolidRect.style.left=t+"px",this.thumbnailSolidRect.style.top=r+"px"}},{key:"mouseHandler",value:function(e,t,r){var a=e.pageX-Et-t,n=e.pageY-r;this.changePositionRect({left:a,top:n})}}]),e}(),It=Rt,Ot=function(){function e(){Object(h["a"])(this,e),this.canvas=null,this.canvasCtx=null,this.laserData=null,this.laserCanvas=null,this.laserCtx=null,this.boundaryCanvas=null,this.boundaryCtx=null,this.workspaceCanvas=null,this.workspaceCtx=null,this.customMerge=new We,this.mergeCanvas=null,this.mergeCtx=null,this.mergeHandleArea=[],this.handlerCanvas=null,this.handlerCtx=null,this.mx=0,this.my=0,this.enable=!1,this.handleArea=[],this.canvas=this.createCanvas(),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.bottom="0px",this.canvas.style.left="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="-1",Rr.instance.ele.insertAdjacentElement("afterbegin",this.canvas),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.imageSmoothingEnabled=!1,this.canvasCtx.font="24px serif",this.canvasCtx.fillStyle="rgba(255,255,255,0.55)",this.canvasCtx.textAlign="center",this.canvasCtx.fillText("请选择文件",this.canvas.width/2+25,this.canvas.height/2+25),this.boundaryCanvas=this.createCanvas(),this.boundaryCtx=this.boundaryCanvas.getContext("2d"),this.laserCanvas=this.createCanvas(),this.workspaceCanvas=this.createCanvas(),this.workspaceCtx=this.workspaceCanvas.getContext("2d"),this.handlerCanvas=this.createCanvas(),this.mergeCanvas=this.createCanvas(),this.mergeCtx=this.mergeCanvas.getContext("2d"),this.mouseHandler(),e.instance=this}return Object(d["a"])(e,[{key:"renderMapCloud",value:function(e){var t=Rr.instance,r=t.width,a=t.height;this.laserCanvas.width=r,this.laserCanvas.height=a,this.laserCtx=this.laserCanvas.getContext("2d"),this.workspaceCanvas.width=r,this.workspaceCanvas.height=a,this.workspaceCtx=this.workspaceCanvas.getContext("2d"),this.handlerCanvas.width=r,this.handlerCanvas.height=a,this.handlerCtx=this.handlerCanvas.getContext("2d"),this.handlerCtx.imageSmoothingEnabled=!1,this.laserCtx.putImageData(this.imageDataCopy(e),0,0),this.render()}},{key:"render",value:function(){this.canvasCtx.clearRect(0,0,this.canvas.width,this.canvas.height);var e=Rr.instance,t=e.gx,r=e.gy,a=e.scale,n=this.workspaceCanvas,o=n.width,i=n.height;this.canvasCtx.drawImage(this.workspaceCanvas,t,r,o*a,i*a);var s=this.laserCanvas,l=s.width,c=s.height;this.canvasCtx.drawImage(this.laserCanvas,t,r,l*a,c*a),this.customMerge.visible&&this.renderMergeLayer();var u=this.handlerCanvas,p=u.width,h=u.height;this.canvasCtx.drawImage(this.handlerCanvas,t,r,p*a,h*a)}},{key:"createCanvas",value:function(){var e=document.createElement("canvas"),t=Rr.instance.ele.getBoundingClientRect(),r=t.width,a=t.height;return e.width=r,e.height=a,e}},{key:"renderRectArea",value:function(e,t,r,a){var n=xt(e,t),o=n.rx,i=n.ry,s=xt(r,a),l=s.rx,c=s.ry,u=Le(o,i,l,c),p=u.x,h=u.y,d=u.width,f=u.height;this.handlerCtx.clearRect(0,0,this.handlerCanvas.width,this.handlerCanvas.height),this.handlerCtx.fillStyle="rgba(255,255,0,0.3)",this.handlerCtx.fillRect(p,h,te.a.floor(d),te.a.floor(f)),this.handlerCtx.fill(),this.render()}},{key:"renderMergeRectArea",value:function(e,t,r,a){var n,o,i,s,l,c,u,p,h,d=xt(e,t),f=d.rx,g=d.ry,v=xt(r,a),m=v.rx,y=v.ry,A=Le(f,g,m,y),b=A.x,w=A.y,x=A.width,k=A.height,M=this.mergeCanvas,C=M.width,S=M.height,E=this.customMerge.angle*Math.PI/180;this.mergeHandleArea=[f,g,m,y],this.mergeCtx.clearRect(0,0,C,S),null===(n=this.mergeCtx)||void 0===n||n.drawImage(this.customMerge.layerCvs,0,0),this.mergeCtx.fillStyle="rgba(255,255,255,0.1)",null===(o=this.mergeCtx)||void 0===o||o.fillRect(0,0,C,S),null===(i=this.mergeCtx)||void 0===i||i.fill(),null===(s=this.mergeCtx)||void 0===s||s.translate(C/2,S/2),null===(l=this.mergeCtx)||void 0===l||l.rotate(-E),this.mergeCtx.fillStyle="#ffffff33",null===(c=this.mergeCtx)||void 0===c||c.fillRect(b-this.customMerge.mergeX-C/2,w-this.customMerge.mergeY-S/2,x,k),null===(u=this.mergeCtx)||void 0===u||u.fill(),null===(p=this.mergeCtx)||void 0===p||p.rotate(E),null===(h=this.mergeCtx)||void 0===h||h.translate(-C/2,-S/2),this.render()}},{key:"computeMergeArea",value:function(){var e,t,r,a,n,o,i,s=this;if(4===this.mergeHandleArea.length){var l=Le.apply(void 0,Object(u["a"])(this.mergeHandleArea)),c=l.x,p=l.y,h=l.width,d=l.height;if(h&&d){var f,g,v=[te.a.min([c,0]),te.a.min([p,0]),te.a.max([h+c,this.laserCanvas.width]),te.a.max([d+p,this.laserCanvas.height])],m=this.customMerge.angle*Math.PI/180,y=c-this.customMerge.mergeX,A=p-this.customMerge.mergeY,b=this.customMerge.pgmContent.width,w=this.customMerge.pgmContent.height;if(m){var x,k,M,C,S,E,R,I=te.a.round(Math.sqrt(b*b+w*w));this.customMerge.squareCvs.width=this.customMerge.squareCvs.height=I,null===(x=this.customMerge.squareCtx)||void 0===x||x.clearRect(0,0,I,I),null===(k=this.customMerge.squareCtx)||void 0===k||k.translate(I/2,I/2),null===(M=this.customMerge.squareCtx)||void 0===M||M.rotate(m),null===(C=this.customMerge.squareCtx)||void 0===C||C.drawImage(this.customMerge.cvs,this.customMerge.dx-I/2,this.customMerge.dy-I/2),null===(S=this.customMerge.squareCtx)||void 0===S||S.rotate(-m),null===(E=this.customMerge.squareCtx)||void 0===E||E.translate(-I/2,-I/2),f=window.handleZip.correctImageData(null===(R=this.customMerge.squareCtx)||void 0===R?void 0:R.getImageData(y+this.customMerge.dx,A+this.customMerge.dy,te.a.ceil(h),te.a.ceil(d)))}else{var O,T,F;this.customMerge.squareCvs.width=b+Math.abs(this.customMerge.mergeX),this.customMerge.squareCvs.height=w+Math.abs(this.customMerge.mergeY),null===(O=this.customMerge.squareCtx)||void 0===O||O.clearRect(0,0,this.customMerge.pgmContent.width,this.customMerge.pgmContent.height),null===(T=this.customMerge.squareCtx)||void 0===T||T.putImageData(this.customMerge.pgmContent,this.customMerge.mergeX,this.customMerge.mergeY),f=window.handleZip.correctImageData(null===(F=this.customMerge.squareCtx)||void 0===F?void 0:F.getImageData(c,p,h,d))}g=this.laserCtx.getImageData(0,0,this.laserCanvas.width,this.laserCanvas.height),this.laserCanvas.width=v[2]-v[0],this.laserCanvas.height=v[3]-v[1],this.laserCtx=this.laserCanvas.getContext("2d"),this.laserCtx.putImageData(g,c<0?-c:0,p<0?-p:0);var B=[this.laserCanvas.width,this.laserCanvas.height];this.handlerCanvas.width=B[0],this.handlerCanvas.height=B[1],this.handlerCtx=this.handlerCanvas.getContext("2d"),null===(e=this.laserCtx)||void 0===e||e.putImageData(f,c<0?0:c,p<0?0:p);var P=new Map;this.customMerge.tpData.spots.forEach((function(e){var t=ze([e["cvsx"],e["cvsy"]],[s.customMerge.layerCvs.width/2,s.customMerge.layerCvs.height/2],m),r=t[0]+s.customMerge.mergeX,a=t[1]+s.customMerge.mergeY;if(De([r,a],[c,p,c+h,p+d])){var n=wt(r,a),o=n.ax,i=n.ay;e.dir*=180/Math.PI;var l=Rr.instance.addSpot(o,i,nt(e),!1,!0);l&&P.set(e.refId,l.refId)}}));var L=Array.from(P.keys());this.customMerge.tpData.lines.forEach((function(e){L.includes(e["startSpotRefId"])&&L.includes(e["endSpotRefId"])&&(Rr.instance.newRoute.start=P.get(e["startSpotRefId"])||0,Rr.instance.newRoute.end=P.get(e["endSpotRefId"])||0,Rr.instance.addRoute(ht(e),!1),Rr.instance.newRoute.start=Rr.instance.newRoute.end=0)})),Rr.instance.width=this.laserCanvas.width;var D=this.laserCanvas.height-Rr.instance.height;Rr.instance.height=this.laserCanvas.height,Rr.instance.ox+=te.a.min([c,0]),Rr.instance.oy-=te.a.min([p,0])+D,Rr.instance.gx+=te.a.min([c,0])*Rr.instance.scale,Rr.instance.gy+=te.a.min([p,0])*Rr.instance.scale,Rr.instance.reRender(),Rr.instance.rangeDraw(),It.instance.render(),this.mergeHandleArea=[],this.customMerge.mergeX-=te.a.min([c,0]),this.customMerge.mergeY-=te.a.min([p,0]);var j=this.mergeCanvas,Y=j.width,U=j.height;null===(t=this.customMerge.layerCtx)||void 0===t||t.translate(Y/2,U/2),null===(r=this.customMerge.layerCtx)||void 0===r||r.rotate(-m),this.customMerge.layerCtx.fillStyle=me,null===(a=this.customMerge.layerCtx)||void 0===a||a.fillRect(c-this.customMerge.mergeX-Y/2,p-this.customMerge.mergeY-U/2,h,d),null===(n=this.customMerge.layerCtx)||void 0===n||n.fill(),null===(o=this.customMerge.layerCtx)||void 0===o||o.rotate(m),null===(i=this.customMerge.layerCtx)||void 0===i||i.translate(-Y/2,-U/2),this.renderMergeRectArea(0,0,0,0)}}}},{key:"renderLine",value:function(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=xt(e,t),i=o.rx,s=o.ry,l=xt(r,a),c=l.rx,u=l.ry;this.handlerCtx.clearRect(0,0,this.handlerCanvas.width,this.handlerCanvas.height),this.handlerCtx.beginPath(),this.handlerCtx.strokeStyle="rgb(".concat(de[n].join(","),")"),this.handlerCtx.lineWidth=fe;var p=[te.a.floor(i),te.a.floor(s),te.a.floor(c),te.a.floor(u)];i=p[0],s=p[1],c=p[2],u=p[3],this.handlerCtx.moveTo(i,s),this.handlerCtx.lineTo(c,u),this.handlerCtx.stroke(),this.handlerCtx.closePath(),this.render()}},{key:"clearHandlerArea",value:function(){this.handleArea=[],this.handlerCtx.clearRect(0,0,this.handlerCanvas.width,this.handlerCanvas.height),this.render()}},{key:"addLaserData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(4===this.handleArea.length){var t=Object($["a"])(this.handleArea,4),r=t[0],a=t[1],n=t[2],o=t[3],i=xt(r,a),s=i.rx,l=i.ry,c=xt(n,o),u=c.rx,p=c.ry,h=Le(s,l,u,p),d=h.x,f=h.y,g=h.width,v=h.height,m=[te.a.ceil(d-1),te.a.ceil(f-1),te.a.ceil(g+2),te.a.ceil(v+2)];if(d=m[0],f=m[1],g=m[2],v=m[3],g&&v){var y=this.imageDataCopy(this.laserCtx.getImageData(d,f,g,v));this.laserCtx.beginPath(),this.laserCtx.lineWidth=fe,this.laserCtx.strokeStyle="rgb(".concat(de[e].join(","),")");var A=[te.a.floor(s),te.a.floor(l),te.a.floor(u),te.a.floor(p)];s=A[0],l=A[1],u=A[2],p=A[3],this.laserCtx.moveTo(s,l),this.laserCtx.lineTo(u,p),this.laserCtx.stroke(),this.laserCtx.closePath();var b=this.laserCtx.getImageData(d,f,g,v);b=window.handleZip.correctImageData(b,e),this.laserCtx.putImageData(b,d,f);var w=this.imageDataCopy(b);this.clearHandlerArea(),Yt.execute({directive:32,type:"UPDATE",target:[{x:d,y:f,data:w},{x:d,y:f,data:y}]})}}this.handleArea=[]}},{key:"mouseHandler",value:function(){var e=this;Rr.instance.ele.addEventListener("wheel",this.mouseWheelHandler.bind(this),!1),Rr.instance.ele.addEventListener("mousemove",(function(t){e.customMerge.visible&&e.enable&&(e.customMerge.rotatable?e.renderMergeRectArea(e.mx,e.my,t.pageX,t.pageY):(e.customMerge.mergeX+=te.a.round((t.pageX-e.mx)/Rr.instance.scale,ne),e.customMerge.mergeY+=te.a.round((t.pageY-e.my)/Rr.instance.scale,ne),e.render(),e.mx=t.pageX,e.my=t.pageY)),Rr.instance.movable&&e.render(),e.enable&&(5!==Rr.instance.state&&7!==Rr.instance.state[0]&&11!==Rr.instance.state||(e.handleArea=[e.mx,e.my,t.pageX,t.pageY],e.renderRectArea.apply(e,Object(u["a"])(e.handleArea))),6===Rr.instance.state[0]&&(e.handleArea=[e.mx,e.my,t.pageX,t.pageY],e.renderLine.apply(e,Object(u["a"])(e.handleArea).concat([Rr.instance.state[1]]))))})),Rr.instance.ele.addEventListener("mousedown",(function(t){if(0===t.button&&(e.mx=t.pageX,e.my=t.pageY,e.enable=!0,e.customMerge.visible&&e.customMerge.mousedown(t),6===Rr.instance.state[0])){var r=xt(t.pageX,t.pageY),a=r.rx,n=r.ry,o=[te.a.floor(a),te.a.floor(n)];a=o[0],n=o[1];var i=wt(a+1,n+1),s=i.ax,l=i.ay;e.handleArea=[t.pageX,t.pageY,s,l],e.renderLine.apply(e,Object(u["a"])(e.handleArea).concat([Rr.instance.state[1]]))}})),Rr.instance.ele.addEventListener("mouseup",(function(t){0===t.button&&(5===Rr.instance.state&&e.deleteLaserData(),11===Rr.instance.state&&e.deletePlate(),7===Rr.instance.state[0]&&e.setLaserDataConfidence(Rr.instance.state[1]),6===Rr.instance.state[0]&&e.addLaserData(Rr.instance.state[1]),e.customMerge.visible&&e.enable&&e.customMerge.rotatable&&e.computeMergeArea(),e.enable=!1)})),window.addEventListener("resize",this.laserMapResize)}},{key:"laserMapResize",value:function(){}},{key:"mouseWheelHandler",value:function(e){if(!Rr.instance.width||!Rr.instance.height)return e.stopPropagation(),void e.preventDefault();this.render()}},{key:"setLaserDataConfidence",value:function(t){if(4===this.handleArea.length){var r=Object($["a"])(this.handleArea,4),a=r[0],n=r[1],o=r[2],i=r[3],s=xt(a,n),l=s.rx,c=s.ry,u=xt(o,i),p=u.rx,h=u.ry,d=Le(l,c,p,h),f=d.x,g=d.y,v=d.width,m=d.height;if(v&&m){var y=this.laserCtx.getImageData(f,g,v,m),A=this.imageDataCopy(y);y=e.paintPath(y,t);var b=this.imageDataCopy(y);this.laserCtx.putImageData(y,f,g),this.clearHandlerArea(),Yt.execute({directive:33,type:"UPDATE",target:[{x:f,y:g,data:b},{x:f,y:g,data:A}]})}}}},{key:"deleteLaserData",value:function(){if(4===this.handleArea.length){var e=Object($["a"])(this.handleArea,4),t=e[0],r=e[1],a=e[2],n=e[3],o=xt(t,r),i=o.rx,s=o.ry,l=xt(a,n),c=l.rx,u=l.ry,p=Le(i,s,c,u),h=p.x,d=p.y,f=p.width,g=p.height;if(f&&g){for(var v=this.laserCtx.getImageData(h,d,f,g),m=this.imageDataCopy(v),y=0;y<v.data.length;y+=4)v.data[y+3]=0;var A=this.imageDataCopy(v);this.drawLaserData(h,d,v),this.clearHandlerArea(),Yt.execute({directive:31,type:"DELETE",target:[{x:h,y:d,data:A},{x:h,y:d,data:m}]})}}}},{key:"deletePlate",value:function(){if(4===this.handleArea.length){var e=Object($["a"])(this.handleArea,4),t=e[0],r=e[1],a=e[2],n=e[3],o=xt(t,r),i=o.rx,s=o.ry,l=xt(a,n),c=l.rx,u=l.ry,p=Le(i,s,c,u),h=p.width,d=p.height;if(h&&d){var f=At(i,s),g=f.lx,v=f.ly,m=At(c,u),y=m.lx,A=m.ly,b=[];Rr.instance.plateMapper.forEach((function(e){e.forEach((function(t,r){var a=t.x,n=t.y;void 0!==a&&void 0!==n&&De([a,n],[g,v,y,A])&&(Rr.instance.removePlate({id:e.id,i:r}),b.push({item:t,i:r,id:e.id}))}))})),this.clearHandlerArea(),Yt.execute({directive:661,type:"DELETE",target:b})}}}},{key:"imageDataCopy",value:function(e){return new ImageData(e.data.slice(0,e.data.length),e.width,e.height)}},{key:"drawLaserData",value:function(e,t,r){this.laserCtx.putImageData(r,e,t),this.render()}},{key:"renderMergeData",value:function(e){var t,r,a,n;if(void 0===e)return null===(n=this.mergeCtx)||void 0===n||n.clearRect(0,0,this.mergeCanvas.width,this.mergeCanvas.height),void this.render();this.customMerge.visible=!0;var o=this.customMerge.layerCvs,i=o.width,s=o.height,l=[i,s];this.mergeCanvas.width=l[0],this.mergeCanvas.height=l[1],this.mergeCtx=null===(t=this.mergeCanvas)||void 0===t?void 0:t.getContext("2d"),null===(r=this.mergeCtx)||void 0===r||r.save(),this.mergeCtx.fillStyle="rgba(255,255,255,0.1)",this.mergeCtx.fillRect(0,0,this.mergeCanvas.width,this.mergeCanvas.height),null===(a=this.mergeCtx)||void 0===a||a.fill(),this.mergeCtx.drawImage(this.customMerge.layerCvs,0,0,i,s),this.render()}},{key:"renderMergeLayer",value:function(){var e,t,r,a,n=Rr.instance,o=n.gx,i=n.gy,s=n.scale,l=this.mergeCanvas,c=l.width,u=l.height,p=o+this.customMerge.mergeX*s,h=i+this.customMerge.mergeY*s,d=this.customMerge.angle*Math.PI/180,f=c*s/2,g=u*s/2;null===(e=this.canvasCtx)||void 0===e||e.translate(p+f,h+g),null===(t=this.canvasCtx)||void 0===t||t.rotate(d),this.canvasCtx.drawImage(this.mergeCanvas,-f,-g,c*s,u*s),null===(r=this.canvasCtx)||void 0===r||r.rotate(-d),null===(a=this.canvasCtx)||void 0===a||a.translate(-(p+f),-(h+g))}},{key:"getLaserData",value:function(){return{pgmContent:this.laserCtx.getImageData(0,0,this.laserCanvas.width,this.laserCanvas.height),pgmWidth:this.laserCanvas.width,pgmHeight:this.laserCanvas.height}}}],[{key:"paintPath",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<e.data.length;r+=4)(e.data[r]||e.data[r+1]||e.data[r+2])&&(e.data[r]=de[t][0],e.data[r+1]=de[t][1],e.data[r+2]=de[t][2],e.data[r+3]=255);return e}}]),e}(),Tt=Ot,Ft=function(e){if(console.log(e),11===e.directive&&e.target[0].forEach((function(e){var t=Rr.instance.spotsMapper.get(e.refId);t.x=e.x,t.y=e.y,t.dir=e.dir,Rr.instance.updateSpot(t)})),12===e.directive&&e.target.forEach((function(e){Rr.instance.createSpot(new ke(e))})),22===e.directive&&e.target.forEach((function(e){Rr.instance.createRoute(new Ie(e)),Rr.instance.renderRoute(e.startSpotRefId)})),1212===e.directive&&(e.target[1].forEach((function(e){Rr.instance.createSpot(new ke(e))})),e.target[0].forEach((function(e){Rr.instance.createRoute(new Ie(e)),Rr.instance.renderRoute(e.startSpotRefId)}))),1323===e.directive&&(e.target[0].forEach((function(e){Rr.instance.deleteRoute("".concat(e.startSpotRefId,"-").concat(e.endSpotRefId))})),e.target[1].forEach((function(e){Rr.instance.deleteSpot(e)}))),31===e.directive||32===e.directive||33===e.directive){var t=e.target[0],r=t.x,a=t.y,n=t.data;Tt.instance.drawLaserData(r,a,n)}661===e.directive&&e.target.forEach((function(e){Rr.instance.removePlate(e)}))},Bt=Ft,Pt=function(e){if(11===e.directive&&e.target[1].forEach((function(e){var t=Rr.instance.spotsMapper.get(e.refId);t.x=e.x,t.y=e.y,t.dir=e.dir,Rr.instance.updateSpot(t)})),12===e.directive&&e.target.forEach((function(e){Rr.instance.deleteSpot(e)})),22===e.directive&&e.target.forEach((function(e){Rr.instance.deleteRoute("".concat(e.startSpotRefId,"-").concat(e.endSpotRefId))})),1212===e.directive&&(e.target[0].forEach((function(e){Rr.instance.deleteRoute("".concat(e.startSpotRefId,"-").concat(e.endSpotRefId))})),e.target[1].forEach((function(e){Rr.instance.deleteSpot(e)}))),1323===e.directive&&(e.target[1].forEach((function(e){Rr.instance.createSpot(new ke(e))})),e.target[0].forEach((function(e){Rr.instance.createRoute(new Ie(e)),Rr.instance.renderRoute(e.startSpotRefId)}))),31===e.directive||32===e.directive||33===e.directive){var t=e.target[1],r=t.x,a=t.y,n=t.data;Tt.instance.drawLaserData(r,a,n)}661===e.directive&&e.target.forEach((function(e){Rr.instance.undoPlate(e)}))},Lt=Pt,Dt=function(e){g(r,e);var t=b(r);function r(){return Object(h["a"])(this,r),t.call(this)}return Object(d["a"])(r,[{key:"push",value:function(e){return Bt(e),Ne(v(r.prototype),"push",this).call(this,e)}},{key:"pop",value:function(){var e=Ne(v(r.prototype),"pop",this).call(this);return Lt(e),e}}]),r}(Ge(Array)),jt={backStack:new Dt,goStack:[],execute:function(e){this.backStack.splice(this.backStack.length,0,e),Rr.instance.saveMsg("上次操作"+e.type+e.directive);var t=this.backStack.length;t>pe&&this.backStack.splice(0,t-pe),this.goStack=[],console.log(this.backStack)},undo:function(){if(this.backStack.length>0){var e=this.backStack.pop();e&&(this.goStack.push(e),Rr.instance.saveMsg("撤销"+e.type+e.directive))}else dt["Message"].info("无撤销的数据")},redo:function(){if(this.goStack.length>0){var e=this.goStack.pop();e&&(this.backStack.push(e),Rr.instance.saveMsg("恢复"+e.type+e.directive))}else dt["Message"].info("无恢复的数据")}},Yt=jt,Ut="0,0 0,2 3,1 0,0",Xt=window.enumerationList,Qt=Xt.SpotLabelEnum,Nt=Xt.SpotTypeEnum,Vt=Xt.OrientEnum,Jt=Xt.property4Enum,Gt=Object(d["a"])((function e(){Object(h["a"])(this,e),this.visible=!1,this.labels=Qt,this.childLabels={type:Nt,orient:Vt,property4:Jt},this.predefineTemplate={codePrefix:"Goal",codeSuffix:"",dir:0,type:[0],orient:[7]}})),Ht=Gt,qt=window.enumerationList,Kt=qt.RouteLabelEnum,Wt=qt.PointModeEnum,zt=qt.Property2Enum,Zt=qt.Property3Enum,_t=Object(d["a"])((function e(){Object(h["a"])(this,e),this.visible=!1,this.labels=Kt,this.childLabels={pointMode:Wt,property2:zt,property3:Zt},this.predefineTemplate={maxSpeed:0,pointMode:[0],property2:[0],property3:[1],property5:!1,fullWeight:!1}})),$t=_t;function er(e){return JSON.parse(JSON.stringify(e))}var tr="/static/img/",rr=new Image;rr.src=tr+"spot_0.png";var ar=new Image;ar.src=tr+"spot_1.png";var nr=new Image;nr.src=tr+"spot_2.png";var or=new Image;or.src=tr+"spot_3.png";var ir=new Image;ir.src=tr+"spot_4.png";var sr=new Image;sr.src=tr+"spot_5.png";var lr=function(e){var t=new Image;switch(e){case 1:t.src=tr+"point-station-reserve.png";break;case 2:t.src=tr+"point-station-using.png";break;default:t.src=tr+"point-station-normal.png";break}return t},cr=new Image;cr.src=tr+"external_1.png";var ur=new Image;ur.src=tr+"external_2.png";var pr=new Image;pr.src=tr+"external_3.png";var hr=new Image;hr.src=tr+"external_0.png";var dr=(new Map).set(0,rr).set(1,ar).set(2,nr).set(3,or).set(4,ir).set(5,sr).set(6,lr),fr=(new Map).set(1,cr).set(2,ur).set(3,pr),gr=function(e){if(void 0!==e.externalType){var t=fr.get(e.externalType);return t||hr}return dr.get(e.type)?6===e.type?dr.get(6)(e.useState):dr.get(e.type):dr.get(0)},vr=new Image;vr.src=tr+"arrow_arc.png";var mr=new Image;mr.src=tr+"arrow.png";var yr=function(e){if(!isNaN(Number(e)))return!1;try{return JSON.parse(e),!0}catch(t){return!1}},Ar=function(e,t){switch(e){case"dir":case"offsetTheta":case"property2Theta":case"property3Theta":t=be(t);break;case"offsetX":case"offsetY":case"property2X":case"property2Y":case"property3X":case"property3Y":case"maxSpeed":case"securityDist":case"avoidanceMode":case"expansionMode":t=te.a.round(t,ne);break;case"x":t=te.a.round(t*Rr.instance.SCALE-Rr.instance.ox,ne);break;case"y":t=te.a.round(Rr.instance.oy-t*Rr.instance.SCALE+Rr.instance.height,ne);break;case"type":case"orient":case"pointMode":case"property2":case"property3":case"property4":t=t[0];break;case"property5":case"layingOff":case"isTraffic":case"isForbidden":case"isAvoidance":case"fullWeight":t=Number(t);break}return t},br=['1. 默认选中"添加点位"选项, 通过框选来选中欲对齐的点位列表;',"2. 已选中的点位列表中, 第一个点位作为起点, 最后一个点位作为终点;",'3. 若想要修改已选中点位, 请选择"移除点位"选项, 通过框选移除点位;','4. 点击"两端对齐"按钮。'],wr=['1. 默认选中"添加点位/路径"选项, 通过单击来选择路径, 通过框选来选中点位列表;',"2. 选中一条路径或者4个点位后, 自动绘制圆弧;","3. 已选中的点位列表中, 第一个点位作为起点, 最后一个点位作为终点, 只能选中4个点位;",'4. 若想要修改已选中点位/路径, 请选择"移除点位/路径"选项, 自动移除路径, 通过框选移除点位;',"5. 可以按住单个点位进行移动, 若当前已绘制圆弧, 圆弧将实时变动;","6. 可通过单击圆弧跳转至该圆弧对应的点位列表模式, 方便单条圆弧的修改。"],xr=r("f375"),kr=r.n(xr),Mr=function(e){return"rgb("+Math.floor(e[0])+","+Math.floor(e[1])+","+Math.floor(e[2])+")"},Cr=window.enumerationList.SpotTypeEnum,Sr=[],Er=function(){function e(t){Object(h["a"])(this,e),this.ele=null,this.handlerSpots=[],this.handlerRoutes=[],this.draggable=!1,this.rotatable=!1,this.movable=!1,this.selectable=!1,this.PADDING=50,this.baseSpot=null,this.ox=0,this.oy=0,this.SCALE=20,this.width=0,this.height=0,this.scale=1,this.spots=[],this.routes=[],this.plates=[],this.plateMapper=new Map,this.areas=[],this.areaMapper=new Map,this.spotsMapper=new Map,this.routesMapper=new Map,this.draw=null,this.gx=0,this.gy=0,this.top=0,this.left=0,this.axes=null,this.tipElement=null,this.timer=0,this.saveMsgElement=null,this._state=1,this.rulerTool={rulerG:null,data:[]},this.customSpot=new Ht,this.customRoute=new $t,this.spotProps=new at,this.routeProps=new pt,this.newRoute={start:0,end:0,line:ae.a.G},this.border=null,this.fillRange={start:null,end:null,baseLength:window.globalConfig.pointsSpacing[1],direction:"both",visible:!1,customSpot:null,customRoute:null},this.lastKeydown="",this.spotsRouteForm={visible:!1,type:"add"},this.arcForm={path:[],params:[],newSpot:null,oldSpot:null},this.externalTypeEnum={},this.visualSpots=new Map,this.separator=",",this.copyData={},this.layersVisible={spot:!0,route:!0},this.isLock=!0,this.lockingMessage=null,this.pageXY=[0,0],this.ele=t,this.ele.style.position="relative",this.ele.style.userSelect="none",this.ele.style.overflow="hidden",this.ele.tabIndex=-1,this.ele.oncontextmenu=function(){return!1};var r=this.ele.getBoundingClientRect(),a=r.width,n=r.height,o=r.top,i=r.left;this.draw=ae()(this.ele).size(a,n).group(),this.border=this.draw.group(),this.top=o,this.left=i,this.createMenuBar(),this.mouseHandler(),this.keyboardHandler(),this.tipElement=document.createElement("div"),this.tipElement.classList.add("map_tool_tip_content"),this.ele.appendChild(this.tipElement),this.rulerTool.rulerG=this.draw.group(),this.newRoute.line=this.draw.group(),e.instance=this}return Object(d["a"])(e,[{key:"renderMapData",value:function(e){var t=this;this.SCALE=e.SCALE||20,this.ox=te.a.round(e.originX*this.SCALE,ne),this.oy=te.a.round(e.originY*this.SCALE,ne),this.width=te.a.round(e.width*this.SCALE,ne),this.height=te.a.round(e.height*this.SCALE,ne);var r=this.ele.getBoundingClientRect(),a=r.width,n=r.height,o=this.width/this.height,i=(a-this.PADDING)/(n-this.PADDING),s=(a-this.PADDING)/this.width,l=(n-this.PADDING)/this.height;o>i?(this.scale=s,this.gx=this.PADDING,this.gy=(n-this.PADDING-this.height*this.scale)/2):(this.scale=l,this.gx=(a-this.PADDING-this.width*this.scale)/2,this.gy=this.PADDING),this.draw.move(this.gx,this.gy),this.spots=e.spots,this.routes=e.lines,this.plates=[],e.reflectionPlates.forEach((function(e,r){e.id=++r,t.plates.push(e)})),this.areas=[],e.areas.forEach((function(e,r){e.id=++r,t.areas.push(e)})),this.spotsMapper.forEach((function(e){e.icon.remove()})),this.routesMapper.forEach((function(e){e.icon.remove()})),this.spotsMapper.clear(),this.routesMapper.clear(),this.spots.forEach((function(e){t.spotsMapper.set(e.refId,e)})),this.routes.forEach((function(e){t.routesMapper.set("".concat(e.startSpotRefId,"-").concat(e.endSpotRefId),e)})),this.plateMapper.forEach((function(e){e.icons.forEach((function(e){e&&e.remove()}))})),this.plateMapper.clear(),this.plates.forEach((function(e){t.plateMapper.set(e.id,e)})),this.areaMapper.forEach((function(e){e.icon.remove()})),this.areaMapper.clear(),this.areas.forEach((function(e){t.areaMapper.set(e.id,e)})),this.removeArc(),this.handlerSpots=[],this.clearVisualSpots(),this.copyData={},this.layersVisible={spot:!0,route:!0}}},{key:"state",get:function(){return this._state},set:function(e){this.width&&this.height?(console.log("state:",e),this._state=e,3===e?this.addCustomSpot():this.customSpot.visible=!1,4===e?this.addCustomRoute():this.customRoute.visible=!1,9===e[0]&&1===e[1]?(this.fillRange.visible=!0,this.fillRange.customSpot||(this.fillRange.customSpot=er(this.customSpot)),this.fillRange.customRoute||(this.fillRange.customRoute=er(this.customRoute)),this.setFillRange()):(this.fillRange.start&&(this.uncheckedSpot(this.fillRange.start),this.fillRange.start=null),this.fillRange.end&&(this.uncheckedSpot(this.fillRange.end),this.fillRange.end=null),this.fillRange.visible=!1),8===e[0]&&3===e[1]||10===e[0]&&1===e[1]?(this.spotsRouteForm.visible=!0,this.spotsRouteForm.type="add"):this.spotsRouteForm.visible=!1,this.removeArc(),Tt.instance.clearHandlerArea(),this.rulerTool.rulerG.clear(),this.rulerTool.data=[],this.clearHandlerElements(),this.hideTip(),this.clearMapSelectValue(),this.clearVisualSpots()):this._state=e}},{key:"mouseWheelHandler",value:function(e){if(!this.width||!this.height)return e.stopPropagation(),void e.preventDefault();var t=xt(e.pageX,e.pageY),r=t.rx,a=t.ry,n=e.wheelDelta||-e.detail||e.deltaY;n<0?this.scale>oe&&(this.scale=te.a.round(this.scale*(1-se),ne)):this.scale<ie&&(this.scale=te.a.round(this.scale*(1+se),ne)),this.reRender();var o=wt(r,a),i=o.ax,s=o.ay;this.gx-=i-e.pageX,this.gy-=s-e.pageY,this.rangeDraw(),this.renderRuler()}},{key:"render",value:function(){var e=this;this.areas.forEach((function(t){e.createArea(t)})),this.plates.forEach((function(t){e.createPlate(t)})),this.spots.forEach((function(t){e.createSpot(new ke(t))})),this.routes.forEach((function(t){e.createRoute(new Ie(t))})),this.border.clear(),this.border.stroke({color:"#fff",width:1,dasharray:"15,10"}).rect(this.width*this.scale,this.height*this.scale).fill("none")}},{key:"createRoute",value:function(e){var t=this,r=Mt(e.property3),a=this.draw.marker(2,2,(function(e){e.polyline(Ut).fill(r)}));e.icon=this.draw.path(kt([e.startSpotRefId,e.endSpotRefId])).stroke({width:ue,color:"rgba(140,187,255,0.35)"}).marker("mid",a),e.arrow=a,this.routeVisible(e)?e.icon.show():e.icon.hide(),e.icon.on("mousedown",(function(r){t.syncRoutePropForm(e),10===t.state[0]&&1===t.state[1]&&"add"===t.spotsRouteForm.type&&(0===Number(e.property3)?(t.clearHandlerElements(),t.removeArc(),t.checkedRoute(e),t.handlerRoutes=[e],t.handleArc()):dt["Message"].warning("中间路径的转弯方式必须是圆弧转弯")),1===t.state&&(0===r.button&&!t.draggable&&t.handlerRoutes.length<2&&(t.handlerRoutes.find((function(t){return t.refId===e.refId}))||t.clearHandlerElements(),t.checkedRoute(e),t.handlerRoutes=[e]),t.hideTip())})),e.icon.on("mouseover",(function(r){t.popTip("<p>refId：".concat(e.refId,"</p><p>最大速度：").concat(e.maxSpeed,"</p>"),[r.pageX,r.pageY],"top",!1),1===t.state&&(t.ele.style.cursor="pointer",!t.selectable&&t.handlerRoutes.length<1&&t.checkedRoute(e))})),e.icon.on("mouseout",(function(){t.hideTip(),1===t.state&&(t.ele.style.cursor="default",!t.selectable&&t.handlerRoutes.length<1&&(t.handlerRoutes.find((function(t){return t.refId===e.refId}))||t.uncheckedRoute(e)))}));var n={x:0,y:0,timestamp:0};e.icon.on("click",(function(r){1===t.state&&(r.pageX===n.x&&r.pageY===n.y&&(new Date).getTime()-n.timestamp<500&&t.doubleClickRoute(e),n.x=r.pageX,n.y=r.pageY,n.timestamp=(new Date).getTime())})),this.routesMapper.set("".concat(e.startSpotRefId,"-").concat(e.endSpotRefId),e)}},{key:"updateRoute",value:function(e,t){var r=Mt(t);e.arrow.update((function(e){e.polyline(Ut).fill(r)}))}},{key:"routeVisible",value:function(e){var t=this.spotsMapper.get(e.startSpotRefId),r=this.spotsMapper.get(e.endSpotRefId);if(t&&r){var a=wt(t.x,t.y),n=wt(r.x,r.y);return Me([a.ax,a.ay,n.ax,n.ay])>2*le}}},{key:"reRender",value:function(){var e=this;this.spotsMapper.forEach((function(t){t.icon.move(t.x*e.scale-le/2,t.y*e.scale-le/2)})),this.routesMapper.forEach((function(t){t.icon.plot(kt([t.startSpotRefId,t.endSpotRefId])),e.routeVisible(t)?e.layersVisible["route"]&&t.icon.show():t.icon.hide()})),this.areaMapper.forEach((function(t){var r=t.x,a=t.y,n=t.width,o=t.height,i=t.icon,s=bt(r,a),l=s.rx,c=s.ry;i.move(l*e.scale,c*e.scale).children()[0].size(n*e.scale,o*e.scale)})),this.plateMapper.forEach((function(t){t.forEach((function(r,a){var n=r.x,o=r.y;if(void 0!==n&&void 0!==o){var i=bt(n,o),s=i.rx,l=i.ry;t.icons[a].move(s*e.scale-ge/2,l*e.scale-ge/2).children()[0].radius(ge*e.scale)}}))})),this.visualSpots.forEach((function(t){t.icon.move(t.x*e.scale-le/2,t.y*e.scale-le/2)})),this.arcForm.params.length&&this.arcForm.path.length&&this.arcForm.params.forEach((function(t,r){e.arcForm.path[r].plot(mt(t))})),this.border.clear(),this.border.stroke({color:"#fff",width:1,dasharray:"15,10"}).rect(this.width*this.scale,this.height*this.scale).fill("none")}},{key:"mouseHandler",value:function(){var e=this;this.ele.addEventListener("wheel",this.mouseWheelHandler.bind(this),!1);var t=0,r=0,a=this.draw.group().rect(0,0).fill("none").attr("id","rect-region").stroke({width:1,color:"#ccfaff",dasharray:"5,5"});this.ele.addEventListener("mousedown",(function(a){if(!e.width||!e.height)return a.stopPropagation(),void a.preventDefault();if(0===a.button&&("SVG"===a.target.tagName.toUpperCase()&&(e.selectable=!0,(!Array.isArray(e.state)||8==e.state[0]&&3!==e.state[1]||10==e.state[0]&&1!==e.state[1])&&e.clearHandlerElements()),1===e.state&&e.handlerSpots.length>0&&(Sr=xe(e.handlerSpots))),2===a.button&&(e.movable=!0),2===e.state&&0===a.button){var n=xt(a.pageX,a.pageY),o=n.rx,i=n.ry,s=At(o,i),l=s.lx,c=s.ly,p=e.rulerTool.data.slice(-2,-1)[0];p?Me([].concat(Object(u["a"])(p),[l,c]))-.1>0&&e.rulerTool.data.push([l,c]):e.rulerTool.data.push([l,c]),e.renderRuler()}3===e.state&&0===a.button&&e.addSpot(a.pageX,a.pageY,e.customSpot.predefineTemplate),4===e.state&&a.button,t=a.pageX,r=a.pageY})),this.ele.addEventListener("mousemove",(function(n){if(e.movable&&(e.gx+=n.pageX-t,e.gy+=n.pageY-r,e.rangeDraw(),t=n.pageX,r=n.pageY),0!==e.state){var o=[1===e.state&&e.draggable,1===e.state&&e.rotatable&&1===e.handlerSpots.length,10===e.state[0]&&1===e.state[1]&&e.draggable&&!!e.arcForm.newSpot];if(e.isLock&&!e.lockingMessage&&o.indexOf(!0)>-1&&(e.lockingMessage=Object(dt["Message"])({type:"info",duration:5e3,message:"地图编辑锁定中, 解锁请点击左上角的锁图标或者快捷键: Ctrl + L",onClose:function(){e.lockingMessage=null}})),!e.isLock&&1===e.state&&(e.draggable&&(e.handlerSpots.forEach((function(a){a.x+=te.a.round((n.pageX-t)/e.scale,ne),a.y+=te.a.round((n.pageY-r)/e.scale,ne),e.updateSpot(a)})),t=n.pageX,r=n.pageY),e.rotatable&&1===e.handlerSpots.length)){e.ele.style.cursor="url('/static/img/rotate.png') 16 16, auto";var i=e.handlerSpots[0],s=wt(i.x,i.y),l=s.ax,c=s.ay;i.dir=be(i.dir-Se([n.pageX-l,n.pageY-c])+Se([t-l,r-c])),e.updateSpot(i),e.popTip("角度：".concat(i.dir),[l,c]),t=n.pageX,r=n.pageY}if(!e.isLock&&10===e.state[0]&&1===e.state[1]){var u=e.arcForm.newSpot;e.draggable&&u&&(u.x+=te.a.round((n.pageX-t)/e.scale,ne),u.y+=te.a.round((n.pageY-r)/e.scale,ne),e.updateSpot(u),t=n.pageX,r=n.pageY,e.arcForm.path.length&&e.handleArc())}if((1===e.state||8===e.state[0]||10===e.state[0]&&1===e.state[1])&&e.selectable){a&&a.size(0,0);var p=xt(t,r),h=p.rx,d=p.ry,f=xt(n.pageX,n.pageY),g=f.rx,v=f.ry,m=Le(h*e.scale,d*e.scale,g*e.scale,v*e.scale),y=m.x,A=m.y,b=m.width,w=m.height;a.size(b,w).move(y,A),Be((function(){e.getSelectedElements(h,d,g,v,n.pageX<t)}),100)}if(2===e.state){if(e.rulerTool.data.length>0){var x=xt(n.pageX,n.pageY),k=x.rx,M=x.ry,C=At(k,M),S=C.lx,E=C.ly;e.rulerTool.data.splice(e.rulerTool.data.length-1,e.rulerTool.data.length>1?1:0,[S,E]),e.renderRuler()}e.pageXY=[n.pageX,n.pageY]}if(4===e.state&&e.draggable&&(e.newRoute.line&&e.newRoute.line.clear(),e.newRoute.start)){var R=e.spotsMapper.get(e.newRoute.start),I=R.x,O=R.y,T=xt(n.pageX,n.pageY),F=T.rx,B=T.ry;e.newRoute.line.path(yt(I,O,F,B)).stroke({width:ue,color:"rgba(140,187,255,1)"}).marker("mid",2,2,(function(e){e.polyline(Ut).fill("#578cff")}))}}var P=xt(n.pageX,n.pageY),L=P.rx,D=P.ry,j=At(L,D),Y=j.lx,U=j.ly;e.axes.innerText="激光坐标 ：( ".concat(Y,", ").concat(U," ) \n 画布坐标 ：( ").concat(te.a.round(L),", ").concat(te.a.round(D)," )")})),this.ele.addEventListener("mouseup",(function(t){if(e.ele.style.cursor="default",0===t.button){if(4===e.state&&(e.newRoute.line&&e.newRoute.line.clear(),e.newRoute.start=0,e.newRoute.end=0),8===e.state[0]&&3!==e.state[1]&&(e.baseSpot?(Sr=xe(e.handlerSpots),1===e.state[1]&&e.handlerSpots.forEach((function(t){t.y=e.baseSpot.y,e.updateSpot(t)})),2===e.state[1]&&e.handlerSpots.forEach((function(t){t.x=e.baseSpot.x,e.updateSpot(t)})),e.baseSpot=null):e.handlerSpots.length>2&&dt["Message"].info("手速太快，需要确认对齐基准点")),e.draggable||e.rotatable||8===e.state[0]){var r=e.arcForm,n=r.newSpot,o=r.oldSpot;if(10===e.state[0]&&n)o.x===n.x&&o.y===n.y||Yt.execute({directive:11,type:"UPDATE",target:[xe([n]),xe([o])]});else if(!e.handlerSpots[0]||!e.handlerSpots[0].visualKey){var i=xe(e.handlerSpots);JSON.stringify(Sr)!==JSON.stringify(i)&&Yt.execute({directive:11,type:"UPDATE",target:[i,Sr]})}}e.draggable=!1,e.rotatable=!1,e.selectable=!1,a.size(0,0)}2===t.button&&(e.movable=!1,e.ele.style.cursor="default")})),window.addEventListener("resize",this.topoResize)}},{key:"topoResize",value:function(){if(this&&this.ele){var e=this.ele.getBoundingClientRect(),t=e.width,r=e.height;this.draw.parent().node.setAttribute("width",t),this.draw.parent().node.setAttribute("height",r)}}},{key:"keyboardHandler",value:function(){var e=this;this.ele.onkeydown=function(t){17===t.keyCode||"CONTROL"===t.key.toUpperCase()?e.lastKeydown="CONTROL":"CONTROL"===e.lastKeydown&&(t.stopPropagation(),t.preventDefault(),90===t.keyCode||"Z"===t.key.toUpperCase()?(Yt.undo(),e.reHandleArc()):89===t.keyCode||"Y"===t.key.toUpperCase()?(Yt.redo(),e.reHandleArc()):83===t.keyCode||"S"===t.key.toUpperCase()?e.downloadZip():67===t.keyCode||"C"===t.key.toUpperCase()?e.copyParams():86===t.keyCode||"V"===t.key.toUpperCase()?e.pasteParams():71===t.keyCode||"G"===t.key.toUpperCase()?e.setLayersVisible("spot",!e.layersVisible["spot"]):80===t.keyCode||"P"===t.key.toUpperCase()?e.setLayersVisible("route",!e.layersVisible["route"]):76===t.keyCode||"L"===t.key.toUpperCase()?(e.isLock=!e.isLock,e.isLock?dt["Message"].success("已锁定"):dt["Message"].success("已解锁")):65!==t.keyCode&&"A"!==t.key.toUpperCase()||2===e.state&&e.addSpot(e.pageXY[0],e.pageXY[1],e.customSpot.predefineTemplate)),1===e.state&&(46!==t.keyCode&&"DELETE"!==t.key.toUpperCase()&&8!==t.keyCode||(e.handlerRoutes.forEach((function(t){e.deleteRoute("".concat(t.startSpotRefId,"-").concat(t.endSpotRefId))})),e.handlerSpots.forEach((function(t){e.deleteSpot(t)})),Yt.execute({directive:1323,type:"DELETE",target:[Re(e.handlerRoutes),xe(e.handlerSpots.map((function(e){return e.x=e._x,e.y=e._y,e.dir=e._dir,e})))]}))),2===e.state&&(27!==t.keyCode&&"ESCAPE"!==t.key.toUpperCase()||(e.rulerTool.rulerG.clear(),e.rulerTool.data=[]))},this.ele.onkeyup=function(t){17!==t.keyCode&&"CONTROL"!==t.key.toUpperCase()||(e.lastKeydown="")}}},{key:"createSpot",value:function(e){var t=this;e.icon=this.draw.group(),e.icon.move(e.x*this.scale-le/2,e.y*this.scale-le/2).attr("id","spot-"+e.refId),e.icon.circle(le).fill("rgba(6,33,58,0.36)").stroke({width:ce,color:"rgba(255,224,0,0.35)"}).attr("id","spot-"+e.refId);var r=e.icon.image(gr(e).src,25,25),a=e.icon.polyline("0,".concat(-le/2," ").concat(-le/2,",0 0,").concat(le/2," ").concat(-le/4,",0 0,").concat(-le/2)).fill("rgba(6,255,158,0.47)").move(-le/2+ce,0).rotate(be(180-e.dir),le/2,le/2).attr("id","spot-"+e.refId),n={x:0,y:0,timestamp:0};r.on("click",(function(r){1===t.state&&(r.pageX===n.x&&r.pageY===n.y&&(new Date).getTime()-n.timestamp<500&&t.doubleClickSpot(e),n.x=r.pageX,n.y=r.pageY,n.timestamp=(new Date).getTime())})),r.on("mousedown",(function(r){t.syncSpotPropForm(e),t.checkFillSpot(e),(1===t.state||4===t.state||10===t.state[0]&&1===t.state[1])&&(0===r.button&&(1===t.state?(t.ele.style.cursor="move",t.handlerSpots.length<2?(t.clearHandlerElements(),t.handlerSpots=[e],t.checkedSpot(e)):t.handlerSpots.find((function(t){return t.refId===e.refId}))||(t.clearHandlerElements(),t.handlerSpots=[e],t.checkedSpot(e)),t.draggable=!0,console.log("鼠标左键按下","开始拖拽点位")):10===t.state[0]&&1===t.state[1]&&(t.arcForm.newSpot=e,t.arcForm.oldSpot={x:e.x,y:e.y,refId:e.refId},t.draggable=!0),4===t.state&&(t.draggable=!0,t.newRoute.start=e.refId,t.ele.style.cursor="crosshair")),t.hideTip())})),r.on("mouseup",(function(r){0===r.button&&4===t.state&&t.newRoute.start&&e.refId&&t.newRoute.start-e.refId!==0&&(t.newRoute.end=e.refId,t.addRoute(t.customRoute.predefineTemplate))})),r.on("mouseover",(function(){t.spotIconMoseover(e)})),r.on("mouseout",(function(){t.hideTip(),9===t.state[0]&&1===t.state[1]||(4===t.state&&t.uncheckedSpot(e),t.ele.style.cursor="default",t.draggable||0!==t.handlerSpots.length||t.handlerSpots.find((function(t){return t.refId===e.refId}))||t.uncheckedSpot(e))})),a.on("mousedown",(function(r){1===t.state&&0===r.button&&t.handlerSpots.length<2&&(t.ele.style.cursor="url('/static/img/rotate.png') 16 16, auto",t.handlerSpots=[e],t.rotatable=!0)})),a.on("mouseover",(function(){1===t.state&&t.handlerSpots.length<2&&(t.ele.style.cursor="url('/static/img/rotate.png') 16 16, auto")})),a.on("mouseout",(function(){1===t.state&&t.handlerSpots.length<2&&(t.ele.style.cursor="default")})),this.spotsMapper.set(e.refId,e)}},{key:"checkedSpot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ffb74a";e.icon.children()[0].fill(t).stroke({color:t}),e.icon.children()[2].fill("rgb(174,236,255)")}},{key:"uncheckedSpot",value:function(e){e.visualKey||(e.icon.children()[0].fill("rgba(6,33,58,0.36)").stroke({color:"rgba(255,224,0,0.35)"}),e.icon.children()[2].fill("rgba(6,255,158,0.47)"))}},{key:"updateSpot",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.visualSpots.forEach((function(a){if(a.visualKey===e.visualKey){a.icon.move(a.x*t.scale-le/2,a.y*t.scale-le/2),a.icon.children()[2].rotate(be(180-a.dir),le/2,le/2);var n=t.spotsMapper.get(a.refId),o=At(a.x,a.y),i=o.lx,s=o.ly,l=ft({x:i-n._x,y:s-n._y},-Math.PI/180*n.dir,{x:0,y:0});"visual2"===a.visualKey?(n.property2X=l.x,n.property2Y=l.y,n.property2Theta=a.dir-n.dir):(n.property3X=l.x,n.property3Y=l.y,n.property3Theta=a.dir-n.dir),!r&&t.syncSpotPropForm(n)}else if(a.refId===e.refId){var c,u,p=e._x,h=e._y,d=e.property2X,f=e.property2Y,g=e.property2Theta,v=e.property3X,m=e.property3Y,y=e.property3Theta,A=e.dir;if("visual2"===a.visualKey){var b=ft({x:d,y:f},Math.PI/180*A,{x:0,y:0});c=bt(p+b.x,h+b.y).rx,u=bt(p+b.x,h+b.y).ry,a.dir=g+e.dir}else{var w=ft({x:v,y:m},Math.PI/180*A,{x:0,y:0});c=bt(p+w.x,h+w.y).rx,u=bt(p+w.x,h+w.y).ry,a.dir=y+e.dir}a.x=c,a.y=u,a.icon.move(a.x*t.scale-le/2,a.y*t.scale-le/2),a.icon.children()[2].rotate(be(180-a.dir),le/2,le/2)}})),e.visualKey||(e.icon.move(e.x*this.scale-le/2,e.y*this.scale-le/2),e.icon.children()[2].rotate(be(180-e.dir),le/2,le/2),e.icon.children()[1].load(gr(e).src),!r&&this.syncSpotPropForm(e),this.renderRoute(e.refId))}},{key:"readSpot",value:function(e){}},{key:"checkedRoute",value:function(e){this.ele.style.cursor="pointer",e.icon.stroke({color:"#578cff"})}},{key:"uncheckedRoute",value:function(e){this.ele.style.cursor="default",e.icon.stroke({width:ue,color:"rgba(140,187,255,0.2)"})}},{key:"renderRoute",value:function(e){var t=this,r=Array.from(this.routesMapper.keys()).map((function(e){return e.split("-")})).map((function(e){return e.map((function(e){return Number(e)}))})),a=r.filter((function(t){return t.includes(e)}));a.forEach((function(e){var r=t.routesMapper.get(e.join("-"));r.icon.plot(kt(e)),t.routeVisible(r)?r.icon.show():r.icon.hide()}))}},{key:"popTip",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Object($["a"])(r,2),i=o[0],s=o[1];i-=this.left,s-=this.top,clearTimeout(this.timer),this.tipElement.className="map_tool_tip_content",this.tipElement.classList.add("map_tool_tip_content_"+a),this.tipElement.innerHTML="",this.tipElement.insertAdjacentHTML("beforeend",e),this.tipElement.style.display="block";var l=this.tipElement.getBoundingClientRect(),c=l.width,u=l.height,p=30,h=i-c/2+"px",d=s-u-p+"px";switch(a){case"right":h=i+p+"px",d=s-u/2+"px";break;case"left":h=i-c-p+"px",d=s-u/2+"px";break;case"bottom":h=i-c/2+"px",d=s+p+"px";break}this.tipElement.style.left=h,this.tipElement.style.top=d,this.timer=n?setTimeout((function(){t.tipElement.style.display="none",clearTimeout(t.timer)}),600):0}},{key:"hideTip",value:function(){this.tipElement.innerHTML="",this.tipElement.style.display="none"}},{key:"getSelectedElements",value:function(e,t,r,a){var n=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(8===this.state[0]&&3===this.state[1]||10===this.state[0]&&1===this.state[1]){var i=!1;return this.spotsMapper.forEach((function(o){if(De([o.x,o.y],[e,t,r,a])){var s=n.handlerSpots.indexOf(o);"add"===n.spotsRouteForm.type&&-1===s?(n.handlerSpots.push(o),i=!0):"delete"===n.spotsRouteForm.type&&s>-1&&(n.handlerSpots.splice(s,1),n.uncheckedSpot(o),i=!0)}})),10===this.state[0]&&1===this.state[1]&&i&&(this.removeCheckedArcRoute(),4!==this.handlerSpots.length?this.removeArc():this.handleArc()),this.unclearCheckedSpots()}if(this.clearHandlerElements(),this.spotsMapper.forEach((function(o){De([o.x,o.y],[e,t,r,a])&&(n.handlerSpots.push(o),n.checkedSpot(o))})),this.routesMapper.forEach((function(i){if(o){var s=kt([i.startSpotRefId,i.endSpotRefId]).replace(/(L(.*?)L)|M/g,"").split(" ").map((function(e){return te.a.round(Number(e)/n.scale,ne)}));Ye([e,t,r,a],s)&&(n.handlerRoutes.push(i),n.checkedRoute(i))}n.handlerSpots.find((function(e){return e.refId===i.startSpotRefId}))&&n.handlerSpots.find((function(e){return e.refId===i.endSpotRefId}))&&(n.handlerRoutes.push(i),n.checkedRoute(i)),n.handlerRoutes[0]&&n.syncRoutePropForm(n.handlerRoutes[0])})),8===this.state[0]&&1===this.handlerSpots.length){this.baseSpot=this.handlerSpots[0];var s=this.baseSpot,l=s.x,c=s.y,u=wt(l,c),p=u.ax,h=u.ay;this.popTip("选为对齐基准点位",[p,h])}}},{key:"clearHandlerElements",value:function(){var e=this;this.handlerSpots.forEach((function(t){e.uncheckedSpot(t)})),this.handlerSpots=[],this.handlerRoutes.forEach((function(t){e.uncheckedRoute(t)})),this.handlerRoutes=[]}},{key:"createMenuBar",value:function(){var e=this,t=document.createElement("div");t.classList.add("map_tool_menu_bar");var r=document.createElement("div");r.classList.add("map_tool_head_bar"),r.insertAdjacentHTML("afterbegin",'<div class="map_tool_logo"></div>'),this.axes=document.createElement("div"),this.axes.classList.add("map_tool_axes"),this.ele.append(t,r,this.axes),[t,r].forEach((function(e){e.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),e.addEventListener("mouseup",(function(e){e.stopPropagation(),e.preventDefault()}))})),Ue.forEach((function(r,a){var n=document.createElement("div");n.classList.add("map_tool_menu_item"),!a&&n.classList.add("map_tool_menu_item_active");var o='<img src="'.concat(r.data,'" />');if(n.insertAdjacentHTML("beforeend",o),r.children&&r.children.length>0){n.classList.add("map_tool_menu_item_more");var i=document.createElement("div");i.classList.add("map_tool_menu_item_children"),r.children.forEach((function(t){var a=document.createElement("div");a.classList.add("map_tool_menu_item_children_item"),a.insertAdjacentHTML("beforeend","<img src=".concat(t.data," /> ").concat(t.content)),a.onmousedown=function(o){0===o.button&&(n.firstElementChild.src=a.firstElementChild.src,a.parentNode.style.display="none",o.stopPropagation(),!Object.is(e.state.toString(),t.value.toString())&&(e.state=t.value),r.value=e.state)},i.append(a)})),i.onmouseover=function(){i.style.display="block"},i.onmouseout=function(){i.style.display="none"},n.append(i)}n.onmouseenter=function(t){var a=n.getBoundingClientRect(),o=a.bottom,i=a.right,s=a.height;!Object.is(e.state.toString(),r.value.toString())&&e.popTip(r.title,[i,o-s/2],"right")},n.onmouseleave=function(){e.hideTip()},n.onmousedown=function(t){for(var a=0;a<n.parentNode.children.length;a++){var o=n.parentNode.children[a];o.className.indexOf("map_tool_menu_item_more")>-1&&(o.lastElementChild.style.display="none")}if(!Tt.instance.customMerge.visible){if(2===t.button&&r.children&&r.children.length>0){var i=n.lastElementChild;if(i&&i.className.includes("map_tool_menu_item_children")){var s=n.getBoundingClientRect(),l=s.top,c=s.right;i.style.display="block",i.style.left=c-e.left+"px",i.style.top=l-e.top+"px"}}!Object.is(e.state.toString(),r.value.toString())&&(e.state=r.value);for(var u=0;u<n.parentNode.children.length;u++){var p=n.parentNode.children[u];p.classList.remove("map_tool_menu_item_active")}n.classList.add("map_tool_menu_item_active")}},t.append(n)})),Xe.forEach((function(t){var a=document.createElement("div");a.classList.add("map_tool_head_item"),a.onmouseover=function(r){var n=a.getBoundingClientRect(),o=n.bottom,i=n.right,s=n.width,l=n.height;e.popTip(t.title,[i-s/2,o-l/2],"bottom")},a.onmouseout=function(){e.hideTip()},a.onmousedown=function(r){0===r.button&&(-1===[4,5].indexOf(t.value)&&e.clearHandlerElements(),e.headFunc(t.value)),e.hideTip()};var n='<img src="'.concat(t.data,'" />');a.insertAdjacentHTML("beforeend",n),r.append(a)}))}},{key:"doubleClickRoute",value:function(e){}},{key:"doubleClickSpot",value:function(e){}},{key:"syncSpotPropForm",value:function(e){}},{key:"syncRoutePropForm",value:function(e){}},{key:"setFillRange",value:function(){}},{key:"downloadZip",value:function(){}},{key:"clearMapSelectValue",value:function(){}},{key:"closePropTemplate",value:function(){}},{key:"saveMsg",value:function(){It.instance.render()}},{key:"headFunc",value:function(e){if(1===e&&(Yt.undo(),this.reHandleArc()),2===e&&(Yt.redo(),this.reHandleArc()),3===e){if(!this.width||!this.height)return;Tt.instance.customMerge.addCustomMergeUI()}4===e&&this.copyParams(),5===e&&this.pasteParams()}},{key:"renderRuler",value:function(){var e=this;this.rulerTool.rulerG.clear();var t=this.rulerTool.data;if(!(t.length<1)){var r=bt.apply(void 0,Object(u["a"])(t[0])),a=r.rx,n=r.ry;a=te.a.round(a*this.scale,ne),n=te.a.round(n*this.scale,ne),this.rulerTool.rulerG.text("0 m").fill("#cccccc").font({size:12,anchor:"middle"}).move(a+4,n+4),t.length>1&&t.forEach((function(t,r,a){if(r>0){var n=bt.apply(void 0,Object(u["a"])(a[r-1])),o=n.rx,i=n.ry,s=bt.apply(void 0,Object(u["a"])(t)),l=s.rx,c=s.ry;o=te.a.round(o*e.scale,ne),i=te.a.round(i*e.scale,ne),l=te.a.round(l*e.scale,ne),c=te.a.round(c*e.scale,ne),e.rulerTool.rulerG.polyline("".concat(o,", ").concat(i," ").concat(l,",").concat(c)).stroke({width:2,color:"#ff0"});var p=a.slice(0,r+1).reduce((function(e,t,r,a){return r>0?te.a.round(e+Me([].concat(Object(u["a"])(a[r-1]),Object(u["a"])(t))),ne):0}),0);e.rulerTool.rulerG.text(p+" m").fill("#cccccc").font({size:12,anchor:"middle"}).move(l+4,c-20)}}))}}},{key:"addCustomSpot",value:function(){}},{key:"addCustomRoute",value:function(){}},{key:"setCustomSpot",value:function(e){}},{key:"addSpot",value:function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4?arguments[4]:void 0,o=xt(e,t),i=o.rx,s=o.ry,l=At(i,s),c=l.lx,u=l.ly;if(!Tt.instance.customMerge.visible&&!De([i,s],[0,0,this.width,this.height]))return!1;var p=te.a.max(Array.from(this.spotsMapper.keys())),h=p?p+1:1,d=r.codePrefix,f=r.codeSuffix,g=(r.aliasPrefix,r.aliasSuffix,r.dir),v=r.type,m=r.orient,y=this.spotProps.propertyTemplate.property4,A=Object(_["a"])(Object(_["a"])(Object(_["a"])({},this.spotProps.propertyTemplate),r),{},{x:c,y:u,dir:g*Math.PI/180,alias:"",refId:h,type:v[0]||0,orient:m[0]||0,property4:y[0]});n||(A.code="".concat(d||"Goal","_")+h+"".concat(f?"_"+f:"")),A.code=this.checkSpotCodeRepeat(A.code);var b=new ke(A);return this.createSpot(b),a&&Yt.execute({directive:12,type:"ADD",target:[A]}),A}},{key:"deleteSpot",value:function(e){var t=this,r=this.spotsMapper.get(e.refId);return!!r&&(r.icon.children().forEach((function(e){e.off()})),r&&r.icon.remove(),Array.from(this.routesMapper.values()).filter((function(t){return[t.startSpotRefId,t.endSpotRefId].includes(e.refId)})).forEach((function(e){t.handlerRoutes.push(e),t.deleteRoute("".concat(e.startSpotRefId,"-").concat(e.endSpotRefId))})),this.spotsMapper.delete(e.refId))}},{key:"addRoute",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.spotsMapper.get(this.newRoute.start)&&this.spotsMapper.get(this.newRoute.end)){if(this.routesMapper.get("".concat(this.newRoute.start,"-").concat(this.newRoute.end)))return!1;var r=te.a.max(Array.from(this.routesMapper.values()).map((function(e){return e.refId}))),a=r?r+1:1,n=Object(_["a"])(Object(_["a"])(Object(_["a"])({},this.routeProps.propertyTemplate),e),{},{refId:a,startSpotRefId:this.newRoute.start,endSpotRefId:this.newRoute.end});return this.createRoute(new Ie(n)),this.renderRoute(n.endSpotRefId),t&&Yt.execute({directive:22,type:"ADD",target:[n]}),n}}},{key:"deleteRoute",value:function(e){var t=this.routesMapper.get(e);if(t){t.icon.off(),t.icon.remove();var r=this.routesMapper.delete(e);return this.renderRoute(t.endSpotRefId),r}return!1}},{key:"rangeDraw",value:function(){var e=this.ele.getBoundingClientRect(),t=e.width,r=e.height,a={left:this.left+this.PADDING+1-this.width*this.scale,top:this.top+this.PADDING+1-this.height*this.scale};this.gx>t?this.gx=t:this.gx<a.left&&(this.gx=a.left),this.gy>r?this.gy=r:this.gy<a.top&&(this.gy=a.top),this.draw.move(this.gx,this.gy),It.instance.changePositionRect()}},{key:"handleSpotsFromFile",value:function(e){var t=this;return e.map((function(e){e.offsetTheta=be(180*Number(e.offsetTheta)/Math.PI);var r=e.property2.split(t.separator);e.property2X=Number(r[0])||0,e.property2Y=Number(r[1])||0,e.property2Theta=be(180*Number(r[2])/Math.PI);var a=e.property3.split(t.separator);return e.property3X=Number(a[0])||0,e.property3Y=Number(a[1])||0,e.property3Theta=be(180*Number(a[2])/Math.PI),e.property4=e.property4?Number(e.property4):0,e.property5="0"===e.property5?0:1,e}))}},{key:"filterExtend",value:function(e,t,r){if(yr(e)){for(var a in e=JSON.parse(String(e)),e)t[a]&&t[a].user===r||delete e[a];return JSON.stringify(e)}return""}},{key:"handleSpotsToFile",value:function(e,t){var r=this;return e.forEach((function(e){e._dir=e._dir||0,e.offsetTheta=te.a.round(be(e.offsetTheta)*Math.PI/180,4),e.property2=e.property2X+r.separator+e.property2Y+r.separator+te.a.round(be(e.property2Theta)*Math.PI/180,4),e.property3=e.property3X+r.separator+e.property3Y+r.separator+te.a.round(be(e.property3Theta)*Math.PI/180,4),e.property4=e.property4?String(e.property4):"0",e.code||(e.code=(new Date).getTime()+""),0===e.type?e.extend="":e.extend=r.filterExtend(e.extend,t,"spot")})),e}},{key:"handleRoutesToFile",value:function(e,t){var r=this;return e.forEach((function(e){e.extend=r.filterExtend(e.extend,t,"route")})),e}},{key:"addFillContent",value:function(){var e=this.fillRange,t=e.start,r=e.end,a=e.baseLength,n=e.direction;if(!t||!r)return dt["Message"].warning("请先选择填充的起点和终点");if(!this.spotsMapper.get(t.refId))return this.fillRange.start=null,dt["Message"].warning("填充的起点不存在, 请重新选择");if(!this.spotsMapper.get(r.refId))return this.fillRange.end=null,dt["Message"].warning("填充的终点不存在, 请重新选择");var o=wt(t.x,t.y),i=wt(r.x,r.y),s=Me([o.ax,o.ay,i.ax,i.ay])/this.scale/20,l=te.a.round(s/a,0);te.a.round(s/a,1)-l>.1&&l++,a=te.a.round(s/l,2);for(var c=[],u=[],p=0,h=a;p<l-1;p++,h+=a){var d=[o.ax+h/s*(i.ax-o.ax),o.ay+h/s*(i.ay-o.ay)],f=this.addSpot(d[0],d[1],this.fillRange.customSpot.predefineTemplate,!1);f&&c.push(f)}if("none"!==n){c.unshift(t),c.push(r);for(var g=0;g<c.length-1;g++){this.newRoute.start=c[g].refId,this.newRoute.end=c[g+1].refId;var v=this.addRoute(this.fillRange.customRoute.predefineTemplate,!1);if(v&&u.push(v),"both"===n){this.newRoute.start=c[g+1].refId,this.newRoute.end=c[g].refId;var m=this.addRoute(this.fillRange.customRoute.predefineTemplate,!1);m&&u.push(m)}}this.newRoute.start=0,this.newRoute.end=0,c.shift(),c.pop()}Yt.execute({directive:1212,type:"ADD",target:[Re(u),xe(c)]})}},{key:"handleSelectValueChange",value:function(e,t){var r=this;if(t){var a=[];this.spotsMapper.forEach((function(t){t.type===e&&(r.checkedSpot(t),a.push(t))})),this.clearHandlerElements(),this.handlerSpots=a}else{var n=this.spotsMapper.get(Number(e)),o=wt(n.x,n.y),i=o.ax,s=o.ay;this.gx+=this.ele.offsetWidth/2-i,this.gy+=this.ele.offsetHeight/2-s,this.rangeDraw(),this.checkFillSpot(n)&&(this.spotIconMoseover(n),this.clearHandlerElements(),this.handlerSpots=[n],this.checkedSpot(n))}}},{key:"checkFillSpot",value:function(e){return 9!==this.state[0]||1!==this.state[1]||(this.fillRange.start&&e.refId===this.fillRange.start.refId?(this.uncheckedSpot(e),this.fillRange.start=null):this.fillRange.end&&e.refId===this.fillRange.end.refId?(this.uncheckedSpot(e),this.fillRange.end=null):this.fillRange.start?this.fillRange.end?(this.uncheckedSpot(this.fillRange.start),this.uncheckedSpot(this.fillRange.end),this.checkedSpot(e,"#76a9ff"),this.fillRange.start=e,this.fillRange.end=null):(this.checkedSpot(e,"#0954d6"),this.fillRange.end=e):(this.checkedSpot(e,"#76a9ff"),this.fillRange.start=e),!1)}},{key:"spotIconMoseover",value:function(e){var t=this,r="<p>编号：".concat(e.code,"</p><p>别名：").concat(e.alias,"</p><p>类型：").concat(Cr[e.type],"</p><p>角度：").concat(e.dir,"</p>"),a=this.externalTypeEnum[e.externalType];void 0!==e.externalType&&a&&(r+="<p>外设：".concat(a,"</p>"));var n=wt(e.x,e.y),o=n.ax,i=n.ay;this.popTip(r,[o,i],"top",!1),setTimeout((function(){t.hideTip()}),3e3),(1===this.state||4===this.state||10===this.state[0]&&1===this.state[1])&&(4===this.state?(this.ele.style.cursor="crosshair",this.checkedSpot(e)):this.ele.style.cursor="move",this.draggable||0!==this.handlerSpots.length||this.checkedSpot(e))}},{key:"checkSpotCodeRepeat",value:function(e,t){if(-1!==e.indexOf("/")&&(dt["Message"].warning("点位编号不允许包含/"),e=e.replace(/\//gi,""),e===t))return e;var r,a=Object(Z["a"])(this.spotsMapper);try{for(a.s();!(r=a.n()).done;){var n=r.value;if(e===n[1].code)return dt["Message"].warning("点位编号重复"),e+"_"+(new Date).getTime()}}catch(o){a.e(o)}finally{a.f()}return e}},{key:"unclearCheckedSpots",value:function(){var e=this,t=this.handlerSpots.length;t>0&&this.checkedSpot(this.handlerSpots[0],"#76a9ff"),t>1&&this.checkedSpot(this.handlerSpots[t-1],"#0954d6"),t>2&&this.handlerSpots.forEach((function(r,a){0!==a&&a!==t-1&&e.checkedSpot(r)}))}},{key:"handleJustify",value:function(){var e=gt();if(e){for(var t=e.routeSpots,r=e.start,a=e.end,n=xe(t),o=te.a.round((a.x-r.x)/(t.length-1),2),i=te.a.round((a.y-r.y)/(t.length-1),2),s=r.x,l=r.y,c=1;c<t.length-1;c++){var u=t[c];s+=o,l+=i,u.x=s,u.y=l,this.updateSpot(u)}var p=xe(t);Yt.execute({directive:11,type:"UPDATE",target:[p,n]})}}},{key:"handleArc",value:function(){var e=this;if(this.removeArc(),this.handlerSpots.length){if(4!==this.handlerSpots.length)return dt["Message"].warning("请选择4个点位");var t=gt();if(t){var r=t.routeSpots;if(0===Number(this.routesMapper.get("".concat(r[1].refId,"-").concat(r[2].refId)).property3)){this.arcForm.params=[t];var a="rgba(255,20,147,0.85)";this.arcForm.path=[this.drawArc(t,a)]}else dt["Message"].warning("中间路径的转弯方式必须是圆弧转弯")}}else if(this.handlerRoutes.length){var n=vt();if(n.length>0){this.arcForm.params=n;var o=kr()({count:n.length});n.forEach((function(t,r){e.arcForm.path.push(e.drawArc(t,Mr(o[r].rgb())))}))}}}},{key:"reHandleArc",value:function(){10!==this.state[0]||1!==this.state[1]||4!==this.handlerSpots.length&&!this.handlerRoutes.length||this.handleArc()}},{key:"drawArc",value:function(e,t){var r=this,a=this.draw.path(mt(e)).fill("none").stroke({width:ue,color:t}).on("click",(function(){r.handlerRoutes.length&&(r.clearHandlerElements(),r.handlerSpots=e.routeSpots,r.unclearCheckedSpots(),r.removeArc(),r.handleArc())}));return a}},{key:"removeArc",value:function(){this.arcForm.path.length&&(this.arcForm.path.forEach((function(e){e.remove()})),this.arcForm.path=[],this.arcForm.params=[])}},{key:"removeCheckedArcRoute",value:function(){this.handlerRoutes.length&&(this.removeArc(),this.uncheckedRoute(this.handlerRoutes[0]),this.handlerRoutes=[])}},{key:"visualSpot",value:function(e,t){var r=this,a=2===e?"rgba(140,187,255,1)":"rgba(245,108,108,1)";e="visual"+e;var n=this.visualSpots.get(e);if(n)n.icon.remove(),this.visualSpots.delete(e);else{var o,i,s=t._x,l=t._y,c=t.property2X,u=t.property2Y,p=t.property2Theta,h=t.property3X,d=t.property3Y,f=t.property3Theta,g=t.refId,v=t.dir,m={};if("visual2"===e){var y=ft({x:c,y:u},Math.PI/180*v,{x:0,y:0});o=bt(s+y.x,l+y.y).rx,i=bt(s+y.x,l+y.y).ry,m.dir=p+v}else{var A=ft({x:h,y:d},Math.PI/180*v,{x:0,y:0});o=bt(s+A.x,l+A.y).rx,i=bt(s+A.x,l+A.y).ry,m.dir=f+v}m.x=o,m.y=i,m.visualKey=e,m.refId=g,m.icon=this.draw.group(),m.icon.move(o*this.scale-le/2,i*this.scale-le/2),m.icon.circle(le).fill(a).stroke({width:ce,color:a}).attr("id",e);var b=m.icon.image(gr({type:4}).src,25,25),w=m.icon.polyline("0,".concat(-le/2," ").concat(-le/2,",0 0,").concat(le/2," ").concat(-le/4,",0 0,").concat(-le/2)).fill(a).move(-le/2+ce,0).rotate(be(180-m.dir),le/2,le/2).attr("id",e);b.on("mousedown",(function(e){0===e.button&&(r.draggable=!0,r.clearHandlerElements(),r.handlerSpots=[m])})),b.on("mouseover",(function(){r.ele.style.cursor="move"})),b.on("mouseout",(function(){r.ele.style.cursor="default"})),w.on("mousedown",(function(e){r.rotatable=!0,r.clearHandlerElements(),r.handlerSpots=[m]})),w.on("mouseover",(function(){r.ele.style.cursor="url('/static/img/rotate.png') 16 16, auto"})),w.on("mouseout",(function(){r.ele.style.cursor="default"})),this.visualSpots.set(m.visualKey,m)}}},{key:"clearVisualSpots",value:function(){this.visualSpots.forEach((function(e){e.icon.remove()})),this.visualSpots.clear()}},{key:"platePath",value:function(e,t,r,a){var n=bt(e,t),o=n.rx,i=n.ry,s=bt(r,a),l=s.rx,c=s.ry,u=o*this.scale,p=i*this.scale,h=l*this.scale,d=c*this.scale;return"M".concat(u," ").concat(p," L").concat((u+h)/2," ").concat((p+d)/2," L").concat(h," ").concat(d)}},{key:"createPlate",value:function(e){var t=this;e.icons=[],e.forEach((function(r){var a=t.drawPlate(r,e.id);a&&e.icons.push(a)})),this.plateMapper.set(e.id,e)}},{key:"undoPlate",value:function(e){var t=e.item,r=e.i,a=e.id,n=this.plateMapper.get(a),o=this.drawPlate(t,a);o&&(n.icons[r]=o,n[r]=t,this.plateMapper.set(a,n))}},{key:"drawPlate",value:function(e,t){var r=this.draw.group(),a=e.x,n=e.y;if(void 0!==a&&void 0!==n){var o=bt(a,n),i=o.rx,s=o.ry;return r.move(i*this.scale-ge/2,s*this.scale-ge/2).attr("id","plate-"+t).circle(ge*this.scale*2).fill(ve),r}}},{key:"handlePlatesToFile",value:function(){var e=[];return this.plateMapper.forEach((function(t){var r=t.filter((function(e){return void 0!==e.x&&void 0!==e.y}));r.length>0&&e.push(r)})),e}},{key:"removePlate",value:function(e){var t=e.id,r=e.i,a=this.plateMapper.get(t);a.icons[r].remove(),a[r]={},this.plateMapper.set(t,a)}},{key:"createArea",value:function(e){var t=this,r=e.x,a=e.y,n=e.width,o=e.height,i=bt(r,a),s=i.rx,l=i.ry;e.icon=this.draw.group(),e.icon.move(s*this.scale,l*this.scale).rect(n*this.scale,o*this.scale).fill(me).attr("id","area-"+e.id),this.areaMapper.set(e.id,e),e.icon.on("mouseover",(function(){t.areaIconMoseover(e)}))}},{key:"areaIconMoseover",value:function(e){var t=this,r=e.x,a=e.y,n=e.width,o=e.height,i=e.id,s="<p>编号：".concat(i,"</p><p>宽度：").concat(n,"</p><p>高度：").concat(o,"</p>"),l=bt(r,a),c=l.rx,u=l.ry,p=wt(c+n/2*this.scale,u),h=p.ax,d=p.ay;this.popTip(s,[h,d],"top",!1),setTimeout((function(){t.hideTip()}),3e3)}},{key:"handleAreasToFile",value:function(){var e=[];return this.areaMapper.forEach((function(t){var r=t.x,a=t.y,n=t.width,o=t.height,i={x:r,y:a,width:n,height:o};e.push(i)})),e}},{key:"copyParams",value:function(){if(1===this.handlerSpots.length&&0===this.handlerRoutes.length){var e=this.handlerSpots[0],t=e.description,r=e.extend,a=e.externalType,n=e.isForbidden,o=e.isTraffic,i=e.layingOff,s=e.offset,l=e.offsetTheta,c=e.offsetX,u=e.offsetY,p=e.orient,h=e.property1,d=e.property2,f=e.property2Theta,g=e.property2X,v=e.property2Y,m=e.property3,y=e.property3Theta,A=e.property3X,b=e.property3Y,w=e.property4,x=e.property5,k=e.relocWeight,M=e.type,C=e._dir;this.copyData={type:"spot",data:{description:t,extend:r,externalType:a,isForbidden:n,isTraffic:o,layingOff:i,offset:s,offsetTheta:l,offsetX:c,offsetY:u,orient:p,property1:h,property2:d,property2Theta:f,property2X:g,property2Y:v,property3:m,property3Theta:y,property3X:A,property3Y:b,property4:w,property5:x,relocWeight:k,type:M,_dir:C}}}else if(0===this.handlerSpots.length&&1===this.handlerRoutes.length){var S=this.handlerRoutes[0],E=S.avoidanceMode,R=S.expansionMode,I=S.extend,O=S.fullWeight,T=S.isAvoidance,F=S.maxSpeed,B=S.pointMode,P=S.property1,L=S.property2,D=S.property3,j=S.property4,Y=S.property5,U=S.securityDist,X=S.type,Q=S.walkConfidence,N=S.walkMode;this.copyData={type:"route",data:{avoidanceMode:E,expansionMode:R,extend:I,fullWeight:O,isAvoidance:T,maxSpeed:F,pointMode:B,property1:P,property2:L,property3:D,property4:j,property5:Y,securityDist:U,type:X,walkConfidence:Q,walkMode:N}}}else dt["Message"].warning("请选择单个点位或者单个路径")}},{key:"pasteParams",value:function(){var e=this.copyData.data;if(!e)return dt["Message"].warning("请先复制点位或路径");1===this.handlerSpots.length&&"spot"===this.copyData.type?(Object.assign(this.handlerSpots[0],e),dt["Message"].success("点位属性粘贴成功"),this.updateSpot(this.handlerSpots[0],!0),this.closePropTemplate()):1===this.handlerRoutes.length&&"route"===this.copyData.type&&(this.handlerRoutes[0]["property3"]!==e["property3"]&&this.updateRoute(this.handlerRoutes[0],e["property3"]),Object.assign(this.handlerRoutes[0],e),dt["Message"].success("路径属性粘贴成功"),this.closePropTemplate())}},{key:"setLayersVisible",value:function(e,t){var r=this;switch(e){case"spot":this.spotsMapper.forEach((function(e){e.icon&&(t?e.icon.show():e.icon.hide())}));break;case"route":this.routesMapper.forEach((function(e){e.icon&&(t&&r.routeVisible(e)?e.icon.show():e.icon.hide())}));break}this.layersVisible[e]=t}}]),e}(),Rr=Er,Ir=r("1e14"),Or=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"custom-template-content":"custom"===e.type}},e._l(e.form.predefineTemplate,(function(t,a){return r("div",{directives:[{name:"show",rawName:"v-show",value:"custom"!==e.type||-1===e.keyhiddenList.indexOf(a),expression:"type !== 'custom' || keyhiddenList.indexOf(k) === -1"}],key:a,class:{"custom-item":"custom"===e.type,"fillRange-model":"fillRange"===e.type}},[r("b",{class:{"fillRange-modelTitle":"fillRange"===e.type}},[e._v(e._s(e.form.labels[a])+" : ")]),"boolean"===typeof t?r("span",[r("el-radio",{attrs:{label:!0},model:{value:e.form.predefineTemplate[a],callback:function(t){e.$set(e.form.predefineTemplate,a,t)},expression:"form.predefineTemplate[k]"}},[e._v("是")]),r("el-radio",{attrs:{label:!1},model:{value:e.form.predefineTemplate[a],callback:function(t){e.$set(e.form.predefineTemplate,a,t)},expression:"form.predefineTemplate[k]"}},[e._v("否")])],1):e._e(),"string"===typeof t?r("span",[r("el-input",{class:{"custom-form-inline":"custom"===e.type},attrs:{size:"mini"},model:{value:e.form.predefineTemplate[a],callback:function(t){e.$set(e.form.predefineTemplate,a,"string"===typeof t?t.trim():t)},expression:"form.predefineTemplate[k]"}})],1):e._e(),"number"===typeof t?r("span",[r("el-input-number",{class:{"custom-form-inline":"custom"===e.type},attrs:{size:"mini","controls-position":"right",min:"maxSpeed"===a?0:-1/0,max:"maxSpeed"===a?3:1/0},model:{value:e.form.predefineTemplate[a],callback:function(t){e.$set(e.form.predefineTemplate,a,e._n(t))},expression:"form.predefineTemplate[k]"}})],1):e._e(),Array.isArray(t)?r("span",[r("el-select",{class:{"custom-form-inline":"custom"===e.type},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.form.predefineTemplate[a][0],callback:function(t){e.$set(e.form.predefineTemplate[a],0,t)},expression:"form.predefineTemplate[k][0]"}},e._l(e.form.childLabels[a],(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1):e._e()])})),0)},Tr=[],Fr={props:["form","keyhiddenList","type"]},Br=Fr,Pr=r("cba8"),Lr=Object(Pr["a"])(Br,Or,Tr,!1,null,"3e36b449",null),Dr=Lr.exports,jr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"prop-template-content":"prop"===e.type}},e._l(e.form.propertyTemplate,(function(t,a){return r("div",{directives:[{name:"show",rawName:"v-show",value:-1===e.keyhiddenList.indexOf(a),expression:"keyhiddenList.indexOf(k) === -1"}],key:a,class:{"prop-item":"prop"===e.type,"batch-item":"batch"===e.type}},["prop"===e.type?r("span",[-1===["property2X","property3X"].indexOf(a)?r("b",[e._v(e._s(e.form.labels[a])+" : ")]):r("el-button","property2X"===a?{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.Topo.visualSpot(2,e.item)}}}:{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.Topo.visualSpot(3,e.item)}}},[e._v(e._s(e.form.labels[a]))])],1):"batch"===e.type?r("div",{staticClass:"batch-title"},[e._v(" "+e._s(e.form.labels[a]||e.form.labels["_"+a])+": ")]):e._e(),"boolean"===typeof t?r("span",[r("el-radio",{attrs:{label:!0},model:{value:e.item[a],callback:function(t){e.$set(e.item,a,t)},expression:"item[k]"}},[e._v("是")]),r("el-radio",{attrs:{label:!1},model:{value:e.item[a],callback:function(t){e.$set(e.item,a,t)},expression:"item[k]"}},[e._v("否")])],1):e._e(),"string"===typeof t?r("span",[r("el-input",{class:{"prop-form-inline":"prop"===e.type},attrs:{size:"mini"},model:{value:e.item[a],callback:function(t){e.$set(e.item,a,"string"===typeof t?t.trim():t)},expression:"item[k]"}})],1):e._e(),"number"===typeof t?r("span",[a.toUpperCase().indexOf("REFID")>-1?r("el-input",{class:{"prop-form-inline":"prop"===e.type},attrs:{disabled:"",size:"mini",value:e.Topo.spotsMapper.get(e.item[a])?e.Topo.spotsMapper.get(e.item[a]).code:""}}):r("el-input-number",{class:{"prop-form-inline":"prop"===e.type},attrs:{size:"mini","controls-position":"right",min:"maxSpeed"===a?0:-1/0,max:"maxSpeed"===a?3:1/0},model:{value:e.item[a],callback:function(t){e.$set(e.item,a,e._n(t))},expression:"item[k]"}})],1):e._e(),Array.isArray(t)&&("batch"!==e.type||e.item[a])?r("span",[r("el-select",{class:{"prop-form-inline":"prop"===e.type},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.item[a][0],callback:function(t){e.$set(e.item[a],0,t)},expression:"item[k][0]"}},e._l(e.form.childLabels[a],(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1):e._e(),"batch"===e.type?r("el-button",{staticClass:"batch-btn",attrs:{type:"primary"},on:{click:function(t){return e.handleBatch(a,e.batchType,e.form.labels[a]||e.form.labels["_"+a])}}},[e._v("修改")]):e._e()],1)})),0)},Yr=[],Ur={props:["form","keyhiddenList","Topo","type","item","batchType"],methods:{handleBatch:function(e,t,r){this.$emit("handleBatch",e,t,r)}}},Xr=Ur,Qr=Object(Pr["a"])(Xr,jr,Yr,!1,null,"298c5f44",null),Nr=Qr.exports,Vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"prop-template-content":"prop"===e.type}},e._l(e.extendParse,(function(t,a){return r("div",{directives:[{name:"show",rawName:"v-show",value:t.user===e.extendUser&&a,expression:"item.user === extendUser && key"}],key:a},["double"===t.type&&Array.isArray(t.name)?"prop"===e.type&&e.extendForm[a]?e._l(t["name"],(function(n,o){return r("div",{key:o,class:{"prop-item":"prop"===e.type,"batch-item":"batch"===e.type}},[r("b",[e._v(e._s(t.name[o]||a+(o+1))+" : ")]),r("span",[r("el-input-number",{staticClass:"prop-form-inline",attrs:{size:"mini","controls-position":"right",max:null!==t.max[o]?t.max[o]:1/0,min:null!==t.min[o]?t.min[o]:-1/0,precision:void 0!==t.precision?t.precision[o]:3},model:{value:e.extendForm[a][o],callback:function(t){e.$set(e.extendForm[a],o,t)},expression:"extendForm[key][i]"}})],1)])})):"batch"===e.type?e._l(e.extendForm[a],(function(n,o){return r("div",{key:o,staticClass:"batch-item"},[r("div",{staticClass:"batch-title"},[e._v(e._s(t.name[o]||a+(o+1))+" :")]),r("span",[r("el-input-number",{staticClass:"prop-form-inline",attrs:{size:"mini","controls-position":"right",max:null!==t.max[o]?t.max[o]:1/0,min:null!==t.min[o]?t.min[o]:-1/0,precision:void 0!==t.precision?t.precision[o]:3},model:{value:e.extendForm[a][o],callback:function(t){e.$set(e.extendForm[a],o,t)},expression:"extendForm[key][i]"}})],1),r("el-button",{staticClass:"batch-btn",attrs:{type:"primary"},on:{click:function(r){e.handleBatch(a,e.extendUser+"Extend",t.name[o]||a+(o+1))}}},[e._v("修改")])],1)})):e._e():r("div",{class:{"prop-item":"prop"===e.type,"batch-item":"batch"===e.type}},[r("b",{class:{"batch-title":"batch"===e.type}},[e._v(e._s(t.name||a)+" : ")]),"boolean"===t.type?r("span",{staticClass:"extend-radio"},[r("el-radio",{attrs:{label:1},model:{value:e.extendForm[a],callback:function(t){e.$set(e.extendForm,a,t)},expression:"extendForm[key]"}},[e._v("是")]),r("el-radio",{attrs:{label:0},model:{value:e.extendForm[a],callback:function(t){e.$set(e.extendForm,a,t)},expression:"extendForm[key]"}},[e._v("否")]),r("i",{staticClass:"el-icon-close close-radio",on:{click:function(t){return e.changeBoolean(e.extendForm,a)}}})],1):e._e(),"string"===t.type?r("span",[r("el-input",{staticClass:"prop-form-inline",attrs:{size:"mini"},model:{value:e.extendForm[a],callback:function(t){e.$set(e.extendForm,a,"string"===typeof t?t.trim():t)},expression:"extendForm[key]"}})],1):e._e(),"double"===t.type?r("span",[r("el-input-number",{staticClass:"prop-form-inline",attrs:{size:"mini","controls-position":"right",max:null!==t.max?t.max:1/0,min:null!==t.min?t.min:-1/0,precision:void 0!==t.precision?t.precision:3},model:{value:e.extendForm[a],callback:function(t){e.$set(e.extendForm,a,t)},expression:"extendForm[key]"}})],1):e._e(),"int"===t.type&&t.valueEnum?r("span",[r("el-select",{staticClass:"prop-form-inline",attrs:{multiple:"object"===typeof t.value,size:"mini",placeholder:"请选择",clearable:""},model:{value:e.extendForm[a],callback:function(t){e.$set(e.extendForm,a,t)},expression:"extendForm[key]"}},e._l(t.valueEnum,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:Number(t)}})})),1)],1):e._e(),"int"!==t.type||t.valueEnum?e._e():r("span",[r("el-input-number",{staticClass:"prop-form-inline",attrs:{size:"mini","controls-position":"right",max:null!==t.max?t.max:1/0,min:null!==t.min?t.min:-1/0,precision:0},model:{value:e.extendForm[a],callback:function(t){e.$set(e.extendForm,a,t)},expression:"extendForm[key]"}})],1),"batch"===e.type?r("el-button",{staticClass:"batch-btn",attrs:{type:"primary"},on:{click:function(r){return e.handleBatch(a,e.extendUser+"Extend",t.name||a)}}},[e._v("修改")]):e._e()],1)],2)})),0)},Jr=[],Gr={props:["extendUser","extendParse","extendForm","type"],methods:{changeBoolean:function(e,t){this.$emit("changeBoolean",e,t)},handleBatch:function(e,t,r){this.$emit("handleBatch",e,t,r)}}},Hr=Gr,qr=Object(Pr["a"])(Hr,Vr,Jr,!1,null,"0b56af38",null),Kr=qr.exports,Wr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"更新扩展属性模版",visible:e.isExtendParseDialog,width:"600px"},on:{"update:visible":function(t){e.isExtendParseDialog=t}}},[r("el-tree",{ref:"tree",staticClass:"tree-filter",attrs:{data:e.datas,"node-key":"id","default-expand-all":!0,"show-checkbox":"","default-checked-keys":e.defaultCheckedList},on:{check:e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data,n=t.node;return r("div",{staticClass:"node-class",class:{addColor:"增加"===n.parent.label&&-1!==e.defaultCheckedList.indexOf(a.id),updateColor:"修改"===n.parent.label&&-1!==e.defaultCheckedList.indexOf(a.id),deleteColor:"删除"===n.parent.label&&-1!==e.defaultCheckedList.indexOf(a.id)}},[e._v(" "+e._s(a.label)+" ")])}}])}),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.isExtendParseDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)},zr=[],Zr=r("9a9d"),_r={props:["extendParse"],data:function(){return{datas:[],defaultCheckedList:[],isExtendParseDialog:!1,keyMap:{}}},methods:{handleCheckChange:function(e,t){var r=t.checkedKeys;this.defaultCheckedList=r},getName:function(e){return Zr[e]?Zr[e].name:this.extendParse[e].name},intDatas:function(e,t,r){var a=this,n=1;this.datas=[{label:"默认扩展属性模版与地图内的对比",children:[{label:"增加",children:[]},{label:"删除",children:[]},{label:"修改",children:[]}]}],this.defaultCheckedList=[],[e,t,r].forEach((function(e,t){e.forEach((function(e,r){a.defaultCheckedList.push(n),a.keyMap[n]={value:e,type:t},a.datas[0].children[t].children[r]={label:a.getName(e),value:e,id:n++}}))}))},saveEdit:function(){var e=[];for(var t in this.keyMap)this.defaultCheckedList.indexOf(Number(t))>-1&&e.push(this.keyMap[t]);e.length>0&&this.$emit("changeExtendParse",e),this.isExtendParseDialog=!1}}},$r=_r,ea=(r("3d9b"),Object(Pr["a"])($r,Wr,zr,!1,null,"81d2e97a",null)),ta=ea.exports,ra=r("cc0f"),aa=r.n(ra),na=new FileReader,oa={},ia=function(e,t){oa||(oa={}),"object"===Object(s["a"])(t)?t.size&&"string"===typeof t.type&&0===t.type.indexOf("application/")?(na.readAsText(t),na.onload=function(t){t.target&&(oa[e]=aa()(t.target.result))}):oa[e]=JSON.stringify(t):oa[e]=t},sa=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:oa||(oa={}),n=function(){oa[t]===r?a():dt["MessageBox"].confirm("在您修改途中，已经有别人做过修改了，如果保存就会覆盖别人的劳动成果。确定继续保存?","警告！！！！！！！！！！！！！！",{confirmButtonText:"继续保存",cancelButtonText:"取消",type:"error"}).then(Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a();case 1:case"end":return e.stop()}}),e)})))).catch((function(){}))},"object"===Object(s["a"])(r)?r.size&&"string"===typeof r.type&&0===r.type.indexOf("application/")?(na.readAsText(r),na.onload=function(e){e.target&&(r=aa()(e.target.result),n())}):(r=JSON.stringify(r),n()):n();case 3:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),la=function(){oa=null},ca=["width","height","routes","spots","reflectionPlates","areas","originX","originY","pgmContent","extendParse"],ua=window.enumerationList,pa=ua.SportKeyHiddenList,ha=ua.RouteKeyHiddenList,da=ua.SpotBatchHiddenList,fa=ua.routeBatchHiddenList,ga=ua.SpotTypeEnum,va=r("9a9d"),ma=function(e){g(r,e);var t=b(r);function r(){var e;return Object(h["a"])(this,r),e=t.apply(this,arguments),e.mergeVisible=!1,e.form={},e.propForm={},e.keyhiddenList=[],e.fillRangeForm={customSpot:{predefineTemplate:{}},customRoute:{predefineTemplate:{}}},e.fillRangeCollapse=[],e.mapSelectValue="",e.isMapSelectShow=!0,e.maxPointsSpacing=window.globalConfig.pointsSpacing[1],e.minPointsSpacing=window.globalConfig.pointsSpacing[0],e.SpotBatchHiddenList=da,e.routeBatchHiddenList=fa,e.BatchCollapse=[],e.SpotTypeEnum=ga,e.preventExceed=0,e.input="",e.Topo=null,e.mergeUploadFileList=[],e.isShowDrawer=!1,e.serverMapList=[],e.currentRow={},e.serverCheckedMap={},e.openFromScheduler=!1,e.saveToScheduler=!1,e.isSaveToSchedulerLoading=!1,e.schedulerMap={schedulerMaps:new Map,selectedMap:""},e.schedulerAreaList={},e.isGetMapListLoading=!1,e.isGetMapDetailsLoading=!1,e.schedulerCheckedArea="",e.schedulerCheckedMap=0,e.surplusInfo=null,e.thumbnailCanvas=null,e.isBatch=!1,e.batchForm={spot:{},route:{},spotExtend:{},routeExtend:{},spotsRange:"check",routesRange:"check"},e.extendParse={},e.extendUser="spot",e.extendForm={},e.justifyInfo=br,e.arcInfo=wr,e.loadingMessage=null,e}return Object(d["a"])(r,[{key:"handlePropForm",value:function(e,t){if(this.propForm.propertyTemplate=this.handleUndefinedValue(this.propForm.propertyTemplate),e&&t)if("spot"===this.extendUser){if(e.refId===t.refId){var r,a=null===(r=this.Topo)||void 0===r?void 0:r.spotsMapper.get(e.refId);a.code!==e.code&&(a.code=this.Topo.checkSpotCodeRepeat(e.code,a.code),e.code=a.code),e.dir=be(e.dir),e.offsetTheta=be(e.offsetTheta),e.property2Theta=be(e.property2Theta),e.property3Theta=be(e.property3Theta),e._x=te.a.round(e._x,ne),e._y=te.a.round(e._y,ne),e.offsetX=te.a.round(e.offsetX,ne),e.offsetY=te.a.round(e.offsetY,ne),e.property2X=te.a.round(e.property2X,ne),e.property2Y=te.a.round(e.property2Y,ne),e.property3X=te.a.round(e.property3X,ne),e.property3Y=te.a.round(e.property3Y,ne),Object.assign(a,e),a.type=e["type"][0],a.orient=e["orient"][0],a["property4"]=e["property4"][0],a["property5"]=Number(e["property5"]),a["layingOff"]=Number(e["layingOff"]),a["isTraffic"]=Number(e["isTraffic"]),a["isForbidden"]=Number(e["isForbidden"]),this.Topo.updateSpot(a,!0)}}else if(e.refId===t.refId){var n,o=null===(n=this.Topo)||void 0===n?void 0:n.routesMapper.get("".concat(e.startSpotRefId,"-").concat(e.endSpotRefId));o["property3"]!==e["property3"][0]&&this.Topo.updateRoute(o,e["property3"][0]),e.maxSpeed=te.a.round(e.maxSpeed,ne),e.securityDist=te.a.round(e.securityDist,ne),e.avoidanceMode=te.a.round(e.avoidanceMode,0),e.expansionMode=te.a.round(e.expansionMode,0),Object.assign(o,e),o["pointMode"]=e["pointMode"][0],o["property2"]=e["property2"][0],o["property3"]=e["property3"][0],o["isAvoidance"]=Number(e["isAvoidance"]),o.property5=Number(e["property5"]),o.fullWeight=Number(e["fullWeight"])}}},{key:"handleForm",value:function(){this.form.predefineTemplate=this.handleUndefinedValue(this.form.predefineTemplate)}},{key:"handleExtendForm",value:function(){if(this.propForm.propertyTemplate){var e=this.handleExtendJSON(this.extendForm);if("spot"===this.extendUser){var t,r=null===(t=this.Topo)||void 0===t?void 0:t.spotsMapper.get(this.propForm.propertyTemplate.refId);r.extend=JSON.stringify(e),this.Topo.updateSpot(r,!0)}else{var a,n="".concat(this.propForm.propertyTemplate.startSpotRefId,"-").concat(this.propForm.propertyTemplate.endSpotRefId),o=null===(a=this.Topo)||void 0===a?void 0:a.routesMapper.get(n);o.extend=JSON.stringify(e),this.propForm.propertyTemplate.extend=JSON.stringify(e)}}}},{key:"mounted",value:function(){var e=this;this.Topo=new Rr(document.getElementById("main")),this.LaserMap=new Tt,this.LaserMap.customMerge.addCustomMergeUI=function(){e.mergeVisible=!0},this.Topo.addCustomSpot=function(){e.Topo.customSpot.visible=!0,e.form=e.Topo.customSpot},this.Topo.addCustomRoute=function(){e.Topo.customRoute.visible=!0,e.form=e.Topo.customRoute},this.Topo.doubleClickSpot=function(t){var r=JSON.parse(JSON.stringify(e.Topo.spotProps));r.visible=!0,r.propertyTemplate=nt(t),e.propForm=r,e.keyhiddenList=pa,e.extendUser="spot",e.extendForm=e.handleExtend(e.propForm.propertyTemplate.extend),e.Topo.clearVisualSpots()},this.Topo.doubleClickRoute=function(t){var r=JSON.parse(JSON.stringify(e.Topo.routeProps));r.visible=!0,r.propertyTemplate=ht(t),e.propForm=r,e.keyhiddenList=ha,e.extendUser="route",e.extendForm=e.handleExtend(e.propForm.propertyTemplate.extend),e.Topo.clearVisualSpots()},this.Topo.syncSpotPropForm=function(t){e.propForm.propertyTemplate&&(e.propForm.propertyTemplate.startSpotRefId?e.Topo.doubleClickSpot(t):(e.propForm.propertyTemplate=nt(t),e.extendUser="spot",e.extendForm=e.handleExtend(e.propForm.propertyTemplate.extend)))},this.Topo.syncRoutePropForm=function(t){e.propForm.propertyTemplate&&(e.propForm.propertyTemplate.startSpotRefId?(e.propForm.propertyTemplate=ht(t),e.extendUser="route",e.extendForm=e.handleExtend(e.propForm.propertyTemplate.extend)):e.Topo.doubleClickRoute(t))},this.Topo.setFillRange=function(){e.fillRangeCollapse=[],e.fillRangeForm=e.Topo.fillRange},this.Topo.downloadZip=function(){e.saveFile("downloadZip")},this.Topo.clearMapSelectValue=function(){e.mapSelectValue=""},this.Topo.closePropTemplate=this.closePropTemplate,Object(Ir["d"])().then((function(t){t&&t.state&&t.data.forEach((function(t){e.$set(e.Topo.externalTypeEnum,t.id,t.name)}))}));var t=this.$route.query,r=t.fileName,a=t.areaId,n=t.mapId,o=t.areaName;r&&a&&(this.schedulerMap.selectedMap=n,this.schedulerCheckedArea=Number(a),Object(Ir["e"])(r,Number(a),o).then((function(t){if(t){var a=new File([new Blob([t])],r+".zip",{type:"application/zip"}),n={target:{files:[a]}};e.readMapFile(n,"scheduler")}}))),this.preventExceed=setInterval((function(){Object(Ir["h"])().catch((function(){e.preventExceed&&clearInterval(e.preventExceed)}))}),6e5)}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.Topo.topoResize),window.removeEventListener("resize",this.LaserMap.laserMapResize),this.preventExceed&&clearInterval(this.preventExceed),this.loadingMessage&&this.loadingMessage.close(),this.Topo.lockingMessage&&this.Topo.lockingMessage.close(),la()}},{key:"closePropTemplate",value:function(){this.propForm.visible=!1,this.Topo.clearVisualSpots()}},{key:"httpRequest",value:function(e){var t=this;this.loadingMessage&&this.loadingMessage.close(),this.loadingMessage=this.$message({type:"info",duration:2e5,message:"正在绘制合并地图中, 请稍后"}),window.handleZip.parseMapFile({target:{files:[e.file]}},{},!0).then((function(e){t.mergeVisible=!1,t.mergeUploadFileList=[];var r=e.width,a=e.height,n=e.routes,o=e.spots,i=e.originX,s=e.originY,l=e.pgmContent,c={width:r,height:a,lines:n,spots:t.Topo.handleSpotsFromFile(o),originX:i,originY:s,pgm:l};Object.assign(c,{SCALE:20}),t.LaserMap.customMerge.renderMergeData(c),t.loadingMessage&&t.loadingMessage.close()})).catch((function(e){dt["Message"].error("解析文件失败："+e),t.loadingMessage&&t.loadingMessage.close()}))}},{key:"mergeUploadChange",value:function(e){console.log("upload change",e)}},{key:"handleCommand",value:function(e){var t=this;if("openServerFile"===e)this.getServerMapList();else if("openLocalFile"===e){var r=document.getElementById("filepicker");r&&r.click()}else if("openSchedulerFile"===e)this.getSchedulerMapList(),this.openFromScheduler=!0;else if("downloadPng"===e||"downloadZip"===e||"saveToServer"===e)this.saveFile(e);else if("sendToScheduler"===e)this.surplusInfo?(this.getSchedulerAreaList(),this.saveToScheduler=!0):dt["Message"].warning("请先选择一张地图并打开");else if("updateFileName"===e)this.surplusInfo?this.$prompt("请输入新的地图名","修改地图名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\w-]*[a-zA-Z-_]+[\w-]*$/,inputErrorMessage:"地图名由字母、数字、下划线组成, 不能为纯数字"}).then(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.handleZip.updateFileName(r.value)?(dt["Message"].success("地图名称修改成功"),t.serverCheckedMap.id=""):dt["Message"].warning("与旧地图名称相同, 不做修改");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){})):dt["Message"].warning("请先选择一张地图并打开");else if("extendParseManage"===e){if(0===Object.keys(this.extendParse).length)return dt["Message"].warning("未获取到地图包内的扩展属性模版, 不做比较");var a=Object.keys(this.extendParse),n=Object.keys(va),o=te.a.difference(n,a),i=te.a.difference(a,n),s=te.a.difference(a,i).filter((function(e){return JSON.stringify(t.extendParse[e])!==JSON.stringify(va[e])}));if(0===[].concat(Object(u["a"])(o),Object(u["a"])(i),Object(u["a"])(i)).length)return dt["Message"].success("地图包内的扩展属性模版与默认的一致, 无需更新");this.$refs.extendManage.intDatas(o,i,s),this.$refs.extendManage.isExtendParseDialog=!0}else"toggleSpotVisible"===e?this.Topo.setLayersVisible("spot",this.Topo.layersVisible["spot"]):"toggleRouteVisible"===e&&this.Topo.setLayersVisible("route",this.Topo.layersVisible["route"])}},{key:"saveFile",value:function(e){var t=this;this.surplusInfo?("sendToScheduler"===e&&(this.isSaveToSchedulerLoading=!0),this.$nextTick((function(){var r={originX:te.a.round(t.Topo.ox/t.Topo.SCALE,2),originY:te.a.round(t.Topo.oy/t.Topo.SCALE,2),width:te.a.round(t.Topo.width/t.Topo.SCALE,2),height:te.a.round(t.Topo.height/t.Topo.SCALE,2),routes:t.Topo.handleRoutesToFile(t.Topo.routesMapper,t.extendParse),spots:t.Topo.handleSpotsToFile(t.Topo.spotsMapper,t.extendParse),reflectionPlates:t.Topo.handlePlatesToFile(),areas:t.Topo.handleAreasToFile()},a=Object.assign(t.surplusInfo,{extendParse:t.extendParse},r,t.LaserMap.getLaserData());"downloadZip"===e||"downloadPng"===e?window.handleZip.saveMapFile(a,e):window.handleZip.saveMapFile(a,e).then((function(r){var a=r.content,n=r.fileName,o=new FormData;if("saveToServer"===e)if(o.append("file",new File([a],n,{type:"application/zip"})),t.serverCheckedMap.id){var i=function(){o.append("id",t.serverCheckedMap.id),Object(Ir["j"])(o).then((function(e){e&&200===e.code&&(ia("serverMap".concat(t.serverCheckedMap.id),a),dt["Message"].success("后台地图修改成功"))}))};Object(Ir["f"])({id:t.serverCheckedMap.id}).then((function(e){e&&sa("serverMap".concat(t.serverCheckedMap.id),e,i)}))}else{var s=function(){Object(Ir["j"])(o).then((function(e){e&&200===e.code&&dt["Message"].success("保存地图至后台成功")}))};Object(Ir["h"])().then((function(e){if(e&&e.data&&e.data.length>0){var t=e.data.filter((function(e){return e.name===n}));t.length>0?dt["MessageBox"].confirm("后台已存在同名地图, 确定覆盖?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.append("id",t[0].id),Object(Ir["j"])(o).then((function(e){e&&200===e.code&&dt["Message"].success("后台地图修改成功")}))})).catch((function(){})):s()}else s()})).catch((function(){s()}))}else if("sendToScheduler"===e){o.append("file",new File([a],n+".zip",{type:"application/zip"}));var l=t.schedulerAreaList[t.schedulerCheckedArea].name;Object(Ir["i"])(o,Number(t.schedulerCheckedArea),l).then((function(e){t.isSaveToSchedulerLoading=!1,(e.state||e.storeSuccess)&&(t.saveToScheduler=!1,ia("scheduler".concat(l+n),a),dt["MessageBox"].confirm("地图保存至调度成功, 是否启用该地图?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(Ir["g"])().then((function(e){if(e.state){var r=e.data.data.filter((function(e){return e.name===n&&e.areaId===t.schedulerCheckedArea}))[0];r?(r.enable=1,Object(Ir["k"])(r).then((function(e){e.state&&dt["Message"].success("地图启用成功")}))):dt["Message"].error("在调度地图列表中找不到该地图")}}))})).catch((function(){})))}))}}))}))):dt["Message"].warning("请先选择一张地图并打开")}},{key:"getServerMapList",value:function(){var e=this;this.isShowDrawer=!0,this.serverMapList=[],Object(Ir["h"])().then((function(t){t&&t.data&&t.data.length>0&&(e.serverMapList=t.data,e.serverCheckedMap.id&&e.serverMapList.some((function(t,r){t.id!==e.serverCheckedMap.id||e.$refs.serverTable.setCurrentRow(e.serverMapList[r])})))}))}},{key:"openServerMap",value:function(e){var t=this;this.currentRow=e,e&&this.serverCheckedMap.id!==e.id&&(this.isGetMapDetailsLoading=!0,Object(Ir["f"])({id:e.id}).then((function(r){if(t.isGetMapDetailsLoading=!1,r){ia("serverMap".concat(e.id),r);var a=e.name,n=new File([new Blob([r])],a+".zip",{type:"application/zip"}),o={target:{files:[n]}};t.readMapFile(o,"server")}})))}},{key:"deleteServerMap",value:function(e,t){var r=this;this.$confirm("确定删除 ".concat(t,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(Ir["a"])({id:e}).then((function(e){e&&200===e.code&&(dt["Message"].success("后台地图删除成功"),r.getServerMapList())}))})).catch((function(){}))}},{key:"readMapFile",value:function(e,t){var r=this;this.loadingMessage&&this.loadingMessage.close(),this.loadingMessage=this.$message({type:"info",duration:2e5,message:"正在绘制地图中, 请稍后"}),window.handleZip.parseMapFile(e,{}).then(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(a){var n,o,i,s,l,u,p,h,d,f,g,v,m,y,A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=document.getElementById("filepicker"),n.value="",o=a.width,i=a.height,s=a.routes,l=a.spots,u=a.reflectionPlates,p=a.areas,h=a.originX,d=a.originY,f=a.pgmContent,g=a.extendParse,v=c(a,ca),r.extendParse=g||va,r.surplusInfo=v,"scheduler"!==t){e.next=12;break}return m={},e.next=9,Object(Ir["c"])({mapIds:[r.schedulerMap.selectedMap]});case 9:y=e.sent,y&&y.state&&y.data.data.forEach((function(e){var t=e.vertexCodes||e.vertexCode;t=t.split(","),t.forEach((function(t){m[t]=e}))})),l=l.map((function(e){var t=m[e.code];return t&&(e.externalType=t.typeId),e}));case 12:A={width:o,height:i,lines:s,spots:r.Topo.handleSpotsFromFile(l),reflectionPlates:u||[],areas:p||[],originX:h,originY:d},Object.assign(A,{SCALE:20,ele:document.getElementById("main")}),r.Topo.renderMapData(A),r.Topo.render(),r.LaserMap.renderMapCloud(f),r.thumbnailCanvas=new It(A),"server"===t?(r.serverCheckedMap=JSON.parse(JSON.stringify(r.currentRow)),r.schedulerCheckedArea="",r.schedulerCheckedMap=0,r.isGetMapDetailsLoading=!1,r.$refs.serverDrawer.closeDrawer()):"scheduler"===t?(r.serverCheckedMap={},r.schedulerCheckedMap=r.schedulerMap.selectedMap,r.isGetMapDetailsLoading=!1,r.openFromScheduler=!1):(r.serverCheckedMap={},r.schedulerCheckedArea="",r.schedulerCheckedMap=0),r.loadingMessage&&r.loadingMessage.close();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r.isGetMapDetailsLoading=!1,dt["Message"].error("解析文件失败："+e),r.loadingMessage&&r.loadingMessage.close()}))}},{key:"filterSchedulerMaps",value:function(){this.schedulerMap.selectedMap=""}},{key:"getSchedulerAreaList",value:function(){var e=this;Object(Ir["b"])().then((function(t){t.state&&t.data.data&&(e.schedulerAreaList={},t.data.data.forEach((function(t){e.$set(e.schedulerAreaList,t.id,t)})))}))}},{key:"getSchedulerMapList",value:function(){var e=this;this.isGetMapListLoading=!0,this.getSchedulerAreaList(),Object(Ir["g"])().then((function(t){if(e.isGetMapListLoading=!1,t.state){e.schedulerMap.schedulerMaps.clear();var r=t.data.data;r&&r.length>0&&(r.forEach((function(t){e.schedulerMap.schedulerMaps.set(t.id,t)})),e.schedulerMap.schedulerMaps.get(e.schedulerCheckedMap)?e.schedulerMap.selectedMap=e.schedulerCheckedMap:e.schedulerMap.selectedMap="")}else e.openFromScheduler=!0}))}},{key:"openSchedulerMap",value:function(){var e=this;if(!this.schedulerMap.selectedMap)return dt["Message"].warning("请选择地图");if(this.schedulerCheckedMap!==this.schedulerMap.selectedMap){this.isGetMapDetailsLoading=!0;var t=this.schedulerMap.schedulerMaps.get(this.schedulerMap.selectedMap).name,r=this.schedulerAreaList[this.schedulerCheckedArea].name;Object(Ir["e"])(t,Number(this.schedulerCheckedArea),r).then((function(a){if(e.isGetMapDetailsLoading=!1,a){ia("scheduler".concat(r+t),a);var n=new File([new Blob([a])],t+".zip",{type:"application/zip"}),o={target:{files:[n]}};e.readMapFile(o,"scheduler")}}))}else this.openFromScheduler=!1}},{key:"saveMapToScheduler",value:function(){var e=this;if(!this.schedulerCheckedArea)return dt["Message"].warning("请选择区域");var t=function(){e.saveFile("sendToScheduler")};if(this.schedulerCheckedMap&&this.schedulerMap.schedulerMaps.get(this.schedulerCheckedMap)&&this.schedulerAreaList[this.schedulerCheckedArea]){var r=this.schedulerMap.schedulerMaps.get(this.schedulerCheckedMap).name,a=this.schedulerAreaList[this.schedulerCheckedArea].name;Object(Ir["e"])(r,Number(this.schedulerCheckedArea),a).then((function(e){e&&sa("scheduler".concat(a+r),e,t)}))}else t()}},{key:"handleUndefinedValue",value:function(e){var t="";for(var r in e)void 0===e[r]&&(e[r]=-1,t=r,this.$nextTick((function(){e[t]=0})));return e}},{key:"addFillContent",value:function(){this.Topo.addFillContent()}},{key:"handleSelectValueChange",value:function(){if(this.mapSelectValue)if("string"===typeof this.mapSelectValue){var e=this.mapSelectValue.split("spotType--")[1];this.Topo.handleSelectValueChange(Number(e),!0)}else this.Topo.handleSelectValueChange(this.mapSelectValue,!1)}},{key:"responseSpotsMapperChange",value:function(e){e&&(this.mapSelectValue="",this.isMapSelectShow=!1,this.isMapSelectShow=!0)}},{key:"openBatchDialog",value:function(){this.batchForm.spot=JSON.parse(JSON.stringify(this.Topo.spotProps.propertyTemplate)),this.batchForm.route=JSON.parse(JSON.stringify(this.Topo.routeProps.propertyTemplate));var e=this.extendUser;this.extendUser="spot",this.batchForm.spotExtend=this.handleExtend(""),this.extendUser="route",this.batchForm.routeExtend=this.handleExtend(""),this.extendUser=e,this.isBatch=!0}},{key:"handleBatch",value:function(e,t,r){var a=this;this.$confirm("确定批量修改: ".concat(r,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){switch(t){case"spot":case"spotExtend":var r="check"===a.batchForm.spotsRange?a.Topo.handlerSpots:a.Topo.spotsMapper;r.forEach((function(r){if("spot"===t)r[e]=Ar(e,a.batchForm.spot[e]);else{var n=a.handleExtend(r.extend);n[e]=a.batchForm.spotExtend[e];var o=a.handleExtendJSON(n);r.extend=JSON.stringify(o)}a.Topo.updateSpot(r,!0)}));break;case"route":case"routeExtend":var n="check"===a.batchForm.routesRange?a.Topo.handlerRoutes:a.Topo.routesMapper;n.forEach((function(r){var n=a.Topo.routesMapper.get("".concat(r.startSpotRefId,"-").concat(r.endSpotRefId));if(n){if("route"===t)n[e]=Ar(e,a.batchForm.route[e]),"property3"===e&&a.Topo.updateRoute(a.Topo.routesMapper.get("".concat(n.startSpotRefId,"-").concat(n.endSpotRefId)),n[e]);else{var o=a.handleExtend(r.extend);o[e]=a.batchForm.routeExtend[e];var i=a.handleExtendJSON(o);r.extend=JSON.stringify(i)}Rr.instance.routesMapper.set("".concat(r.startSpotRefId,"-").concat(r.endSpotRefId),n)}}));break}dt["Message"].success("批量修改成功")})).catch((function(){}))}},{key:"handleExtend",value:function(e){if(yr(e))for(var t in e=JSON.parse(String(e)),this.extendParse){var r=this.extendParse[t];r.user!==this.extendUser||e[t]||"object"===Object(s["a"])(r.name)&&("object"===Object(s["a"])(r.value)&&r.value.length===r.name.length?e[t]=JSON.parse(JSON.stringify(r.value)):e[t]=new Array(r.name.length))}else for(var a in e={},this.extendParse){var n=this.extendParse[a];n.user===this.extendUser&&("object"===Object(s["a"])(n.name)?"object"===Object(s["a"])(n.value)&&n.value.length===n.name.length?e[a]=JSON.parse(JSON.stringify(n.value)):e[a]=new Array(n.name.length):e[a]=n.value)}return e}},{key:"changeBoolean",value:function(e,t){e[t]=null}},{key:"handleExtendJSON",value:function(e){var t={};for(var r in e){var a=e[r];if(a||!1===a||0===a)if("object"===Object(s["a"])(a)){if(a.length>0){var n=a.filter((function(e){return e||0===e}));n.length>0&&(t[r]=JSON.parse(JSON.stringify(a)))}}else t[r]=a}return t}},{key:"changeExtendParse",value:function(e){var t=this;e.forEach((function(e){var r=e.type,a=e.value;1===r?delete t.extendParse[a]:t.$set(t.extendParse,a,va[a])})),dt["Message"].success("地图扩展属性模版更新成功"),this.closePropTemplate()}}]),r}(x["default"]);w([W()],ma.prototype,"isRcs",void 0),w([H()],ma.prototype,"mergeVisible",void 0),w([H()],ma.prototype,"form",void 0),w([H()],ma.prototype,"propForm",void 0),w([H()],ma.prototype,"keyhiddenList",void 0),w([H()],ma.prototype,"fillRangeForm",void 0),w([H()],ma.prototype,"fillRangeCollapse",void 0),w([H()],ma.prototype,"mapSelectValue",void 0),w([H()],ma.prototype,"isMapSelectShow",void 0),w([H()],ma.prototype,"maxPointsSpacing",void 0),w([H()],ma.prototype,"minPointsSpacing",void 0),w([H()],ma.prototype,"SpotBatchHiddenList",void 0),w([H()],ma.prototype,"routeBatchHiddenList",void 0),w([H()],ma.prototype,"BatchCollapse",void 0),w([H()],ma.prototype,"SpotTypeEnum",void 0),w([H()],ma.prototype,"preventExceed",void 0),w([z("propForm.propertyTemplate",{deep:!0})],ma.prototype,"handlePropForm",null),w([z("form.predefineTemplate",{deep:!0})],ma.prototype,"handleForm",null),w([z("extendForm",{deep:!0})],ma.prototype,"handleExtendForm",null),w([H()],ma.prototype,"input",void 0),w([H()],ma.prototype,"Topo",void 0),w([H()],ma.prototype,"LaserMap",void 0),w([H()],ma.prototype,"mergeUploadFileList",void 0),w([H()],ma.prototype,"isShowDrawer",void 0),w([H()],ma.prototype,"serverMapList",void 0),w([H()],ma.prototype,"currentRow",void 0),w([H()],ma.prototype,"serverCheckedMap",void 0),w([H()],ma.prototype,"openFromScheduler",void 0),w([H()],ma.prototype,"saveToScheduler",void 0),w([H()],ma.prototype,"isSaveToSchedulerLoading",void 0),w([H()],ma.prototype,"schedulerMap",void 0),w([H()],ma.prototype,"schedulerAreaList",void 0),w([H()],ma.prototype,"isGetMapListLoading",void 0),w([H()],ma.prototype,"isGetMapDetailsLoading",void 0),w([H()],ma.prototype,"schedulerCheckedArea",void 0),w([H()],ma.prototype,"schedulerCheckedMap",void 0),w([H()],ma.prototype,"surplusInfo",void 0),w([H()],ma.prototype,"thumbnailCanvas",void 0),w([H()],ma.prototype,"isBatch",void 0),w([H()],ma.prototype,"batchForm",void 0),w([H()],ma.prototype,"extendParse",void 0),w([H()],ma.prototype,"extendUser",void 0),w([H()],ma.prototype,"extendForm",void 0),w([H()],ma.prototype,"justifyInfo",void 0),w([H()],ma.prototype,"arcInfo",void 0),w([H()],ma.prototype,"loadingMessage",void 0),ma=w([N({components:{PredefineTemplate:Dr,PropTemplate:Nr,ExtendTemplate:Kr,ExtendManage:ta}})],ma);var ya=ma,Aa=ya,ba=(r("8955"),Object(Pr["a"])(Aa,o,i,!1,null,null,null)),wa=ba.exports,xa={components:{mapEditor:wa},data:function(){return{isRcs:!1,backPage:"/"}},mounted:function(){this.isRcs="/mapEditor"===this.$route.path,this.backPage=this.$route.query.backPage||"/"},methods:{goBack:function(){this.$router.push(this.backPage)}}},ka=xa,Ma=(r("3505"),Object(Pr["a"])(ka,a,n,!1,null,"7b5efaab",null));t["default"]=Ma.exports},7043:function(e,t,r){var a=r("0863"),n=r("ac07");function o(e,t){var r=-1,a=e.length;while(++r<a)if(l(e[r],t))return!0;return!1}function i(e,t){var r=-1,a=t.length;while(++r<a)if(!o(e,t[r]))return!1;return!0}function s(e,t){var r=!0;return a(t,(function(t,a){if(!l(e[a],t))return r=!1})),r}function l(e,t){return e&&"object"===typeof e&&t&&"object"===typeof t?n(e)&&n(t)?i(e,t):s(e,t):e===t}e.exports=l},"731f":function(e,t,r){var a=r("9ad2"),n=r("bf1f"),o=r("8ad4"),i=r("819d"),s=Object.isExtensible,l=a((function(){s(1)}));e.exports=l||i?function(e){return!!n(e)&&((!i||"ArrayBuffer"!=o(e))&&(!s||s(e)))}:s},"77ea":function(e,t){function r(e){return!!e&&"object"===typeof e&&e.constructor===Object}e.exports=r},"7a6f":function(e,t,r){var a=r("88d4"),n=r("da77"),o=r("e7c5"),i=r("9ba9"),s=r("1416"),l=r("25ef"),c=r("bf1f"),u=r("b143"),p=r("9ad2"),h=n("Reflect","construct"),d=Object.prototype,f=[].push,g=p((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),v=!p((function(){h((function(){}))})),m=g||v;a({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(e,t){s(e),l(t);var r=arguments.length<3?e:s(arguments[2]);if(v&&!g)return h(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var a=[null];return o(f,a,t),new(o(i,e,a))}var n=r.prototype,p=u(c(n)?n:d),m=o(e,p,t);return c(m)?m:p}})},"7b8c":function(e,t,r){var a=r("14c7");function n(e,t){return a(e)===t}e.exports=n},"819d":function(e,t,r){var a=r("9ad2");e.exports=a((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},"819f":function(e,t){function r(e){return function(t){return t[e]}}e.exports=r},8236:function(e,t,r){
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */
(function(t,r){e.exports=r()})(0,(function(){"use strict";for(var e=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e<t?t:e>r?r:e},t=e,r=function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var r=0;r<=3;r++)r<3?((e[r]<0||e[r]>255)&&(e._clipped=!0),e[r]=t(e[r],0,255)):3===r&&(e[r]=t(e[r],0,1));return e},a={},n=0,o=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<o.length;n+=1){var i=o[n];a["[object "+i+"]"]=i.toLowerCase()}var s=function(e){return a[Object.prototype.toString.call(e)]||"object"},l=s,c=function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==l(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},u=s,p=function(e){if(e.length<2)return null;var t=e.length-1;return"string"==u(e[t])?e[t].toLowerCase():null},h=Math.PI,d={clip_rgb:r,limit:e,type:s,unpack:c,last:p,PI:h,TWOPI:2*h,PITHIRD:h/3,DEG2RAD:h/180,RAD2DEG:180/h},f={format:{},autodetect:[]},g=d.last,v=d.clip_rgb,m=d.type,y=f,A=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=this;if("object"===m(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var a=g(e),n=!1;if(!a){n=!0,y.sorted||(y.autodetect=y.autodetect.sort((function(e,t){return t.p-e.p})),y.sorted=!0);for(var o=0,i=y.autodetect;o<i.length;o+=1){var s=i[o];if(a=s.test.apply(s,e),a)break}}if(!y.format[a])throw new Error("unknown format: "+e);var l=y.format[a].apply(null,n?e:e.slice(0,-1));r._rgb=v(l),3===r._rgb.length&&r._rgb.push(1)};A.prototype.toString=function(){return"function"==m(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var b=A,w=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(w.Color,[null].concat(e)))};w.Color=b,w.version="2.4.2";var x=w,k=d.unpack,M=Math.max,C=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=k(e,"rgb"),a=r[0],n=r[1],o=r[2];a/=255,n/=255,o/=255;var i=1-M(a,M(n,o)),s=i<1?1/(1-i):0,l=(1-a-i)*s,c=(1-n-i)*s,u=(1-o-i)*s;return[l,c,u,i]},S=C,E=d.unpack,R=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];e=E(e,"cmyk");var r=e[0],a=e[1],n=e[2],o=e[3],i=e.length>4?e[4]:1;return 1===o?[0,0,0,i]:[r>=1?0:255*(1-r)*(1-o),a>=1?0:255*(1-a)*(1-o),n>=1?0:255*(1-n)*(1-o),i]},I=R,O=x,T=b,F=f,B=d.unpack,P=d.type,L=S;T.prototype.cmyk=function(){return L(this._rgb)},O.cmyk=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(T,[null].concat(e,["cmyk"])))},F.format.cmyk=I,F.autodetect.push({p:2,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=B(e,"cmyk"),"array"===P(e)&&4===e.length)return"cmyk"}});var D=d.unpack,j=d.last,Y=function(e){return Math.round(100*e)/100},U=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=D(e,"hsla"),a=j(e)||"lsa";return r[0]=Y(r[0]||0),r[1]=Y(100*r[1])+"%",r[2]=Y(100*r[2])+"%","hsla"===a||r.length>3&&r[3]<1?(r[3]=r.length>3?r[3]:1,a="hsla"):r.length=3,a+"("+r.join(",")+")"},X=U,Q=d.unpack,N=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];e=Q(e,"rgba");var r=e[0],a=e[1],n=e[2];r/=255,a/=255,n/=255;var o,i,s=Math.min(r,a,n),l=Math.max(r,a,n),c=(l+s)/2;return l===s?(o=0,i=Number.NaN):o=c<.5?(l-s)/(l+s):(l-s)/(2-l-s),r==l?i=(a-n)/(l-s):a==l?i=2+(n-r)/(l-s):n==l&&(i=4+(r-a)/(l-s)),i*=60,i<0&&(i+=360),e.length>3&&void 0!==e[3]?[i,o,c,e[3]]:[i,o,c]},V=N,J=d.unpack,G=d.last,H=X,q=V,K=Math.round,W=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=J(e,"rgba"),a=G(e)||"rgb";return"hsl"==a.substr(0,3)?H(q(r),a):(r[0]=K(r[0]),r[1]=K(r[1]),r[2]=K(r[2]),("rgba"===a||r.length>3&&r[3]<1)&&(r[3]=r.length>3?r[3]:1,a="rgba"),a+"("+r.slice(0,"rgb"===a?3:4).join(",")+")")},z=W,Z=d.unpack,_=Math.round,$=function(){var e,t=[],r=arguments.length;while(r--)t[r]=arguments[r];t=Z(t,"hsl");var a,n,o,i=t[0],s=t[1],l=t[2];if(0===s)a=n=o=255*l;else{var c=[0,0,0],u=[0,0,0],p=l<.5?l*(1+s):l+s-l*s,h=2*l-p,d=i/360;c[0]=d+1/3,c[1]=d,c[2]=d-1/3;for(var f=0;f<3;f++)c[f]<0&&(c[f]+=1),c[f]>1&&(c[f]-=1),6*c[f]<1?u[f]=h+6*(p-h)*c[f]:2*c[f]<1?u[f]=p:3*c[f]<2?u[f]=h+(p-h)*(2/3-c[f])*6:u[f]=h;e=[_(255*u[0]),_(255*u[1]),_(255*u[2])],a=e[0],n=e[1],o=e[2]}return t.length>3?[a,n,o,t[3]]:[a,n,o,1]},ee=$,te=ee,re=f,ae=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ne=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,oe=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ie=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,se=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,le=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ce=Math.round,ue=function(e){var t;if(e=e.toLowerCase().trim(),re.format.named)try{return re.format.named(e)}catch(f){}if(t=e.match(ae)){for(var r=t.slice(1,4),a=0;a<3;a++)r[a]=+r[a];return r[3]=1,r}if(t=e.match(ne)){for(var n=t.slice(1,5),o=0;o<4;o++)n[o]=+n[o];return n}if(t=e.match(oe)){for(var i=t.slice(1,4),s=0;s<3;s++)i[s]=ce(2.55*i[s]);return i[3]=1,i}if(t=e.match(ie)){for(var l=t.slice(1,5),c=0;c<3;c++)l[c]=ce(2.55*l[c]);return l[3]=+l[3],l}if(t=e.match(se)){var u=t.slice(1,4);u[1]*=.01,u[2]*=.01;var p=te(u);return p[3]=1,p}if(t=e.match(le)){var h=t.slice(1,4);h[1]*=.01,h[2]*=.01;var d=te(h);return d[3]=+t[4],d}};ue.test=function(e){return ae.test(e)||ne.test(e)||oe.test(e)||ie.test(e)||se.test(e)||le.test(e)};var pe=ue,he=x,de=b,fe=f,ge=d.type,ve=z,me=pe;de.prototype.css=function(e){return ve(this._rgb,e)},he.css=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(de,[null].concat(e,["css"])))},fe.format.css=me,fe.autodetect.push({p:5,test:function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];if(!t.length&&"string"===ge(e)&&me.test(e))return"css"}});var ye=b,Ae=x,be=f,we=d.unpack;be.format.gl=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=we(e,"rgba");return r[0]*=255,r[1]*=255,r[2]*=255,r},Ae.gl=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(ye,[null].concat(e,["gl"])))},ye.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var xe=d.unpack,ke=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r,a=xe(e,"rgb"),n=a[0],o=a[1],i=a[2],s=Math.min(n,o,i),l=Math.max(n,o,i),c=l-s,u=100*c/255,p=s/(255-c)*100;return 0===c?r=Number.NaN:(n===l&&(r=(o-i)/c),o===l&&(r=2+(i-n)/c),i===l&&(r=4+(n-o)/c),r*=60,r<0&&(r+=360)),[r,u,p]},Me=ke,Ce=d.unpack,Se=Math.floor,Ee=function(){var e,t,r,a,n,o,i=[],s=arguments.length;while(s--)i[s]=arguments[s];i=Ce(i,"hcg");var l,c,u,p=i[0],h=i[1],d=i[2];d*=255;var f=255*h;if(0===h)l=c=u=d;else{360===p&&(p=0),p>360&&(p-=360),p<0&&(p+=360),p/=60;var g=Se(p),v=p-g,m=d*(1-h),y=m+f*(1-v),A=m+f*v,b=m+f;switch(g){case 0:e=[b,A,m],l=e[0],c=e[1],u=e[2];break;case 1:t=[y,b,m],l=t[0],c=t[1],u=t[2];break;case 2:r=[m,b,A],l=r[0],c=r[1],u=r[2];break;case 3:a=[m,y,b],l=a[0],c=a[1],u=a[2];break;case 4:n=[A,m,b],l=n[0],c=n[1],u=n[2];break;case 5:o=[b,m,y],l=o[0],c=o[1],u=o[2];break}}return[l,c,u,i.length>3?i[3]:1]},Re=Ee,Ie=d.unpack,Oe=d.type,Te=x,Fe=b,Be=f,Pe=Me;Fe.prototype.hcg=function(){return Pe(this._rgb)},Te.hcg=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(Fe,[null].concat(e,["hcg"])))},Be.format.hcg=Re,Be.autodetect.push({p:1,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=Ie(e,"hcg"),"array"===Oe(e)&&3===e.length)return"hcg"}});var Le=d.unpack,De=d.last,je=Math.round,Ye=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=Le(e,"rgba"),a=r[0],n=r[1],o=r[2],i=r[3],s=De(e)||"auto";void 0===i&&(i=1),"auto"===s&&(s=i<1?"rgba":"rgb"),a=je(a),n=je(n),o=je(o);var l=a<<16|n<<8|o,c="000000"+l.toString(16);c=c.substr(c.length-6);var u="0"+je(255*i).toString(16);switch(u=u.substr(u.length-2),s.toLowerCase()){case"rgba":return"#"+c+u;case"argb":return"#"+u+c;default:return"#"+c}},Ue=Ye,Xe=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Qe=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Ne=function(e){if(e.match(Xe)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16),r=t>>16,a=t>>8&255,n=255&t;return[r,a,n,1]}if(e.match(Qe)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var o=parseInt(e,16),i=o>>24&255,s=o>>16&255,l=o>>8&255,c=Math.round((255&o)/255*100)/100;return[i,s,l,c]}throw new Error("unknown hex color: "+e)},Ve=Ne,Je=x,Ge=b,He=d.type,qe=f,Ke=Ue;Ge.prototype.hex=function(e){return Ke(this._rgb,e)},Je.hex=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(Ge,[null].concat(e,["hex"])))},qe.format.hex=Ve,qe.autodetect.push({p:4,test:function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];if(!t.length&&"string"===He(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var We=d.unpack,ze=d.TWOPI,Ze=Math.min,_e=Math.sqrt,$e=Math.acos,et=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r,a=We(e,"rgb"),n=a[0],o=a[1],i=a[2];n/=255,o/=255,i/=255;var s=Ze(n,o,i),l=(n+o+i)/3,c=l>0?1-s/l:0;return 0===c?r=NaN:(r=(n-o+(n-i))/2,r/=_e((n-o)*(n-o)+(n-i)*(o-i)),r=$e(r),i>o&&(r=ze-r),r/=ze),[360*r,c,l]},tt=et,rt=d.unpack,at=d.limit,nt=d.TWOPI,ot=d.PITHIRD,it=Math.cos,st=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];e=rt(e,"hsi");var r,a,n,o=e[0],i=e[1],s=e[2];return isNaN(o)&&(o=0),isNaN(i)&&(i=0),o>360&&(o-=360),o<0&&(o+=360),o/=360,o<1/3?(n=(1-i)/3,r=(1+i*it(nt*o)/it(ot-nt*o))/3,a=1-(n+r)):o<2/3?(o-=1/3,r=(1-i)/3,a=(1+i*it(nt*o)/it(ot-nt*o))/3,n=1-(r+a)):(o-=2/3,a=(1-i)/3,n=(1+i*it(nt*o)/it(ot-nt*o))/3,r=1-(a+n)),r=at(s*r*3),a=at(s*a*3),n=at(s*n*3),[255*r,255*a,255*n,e.length>3?e[3]:1]},lt=st,ct=d.unpack,ut=d.type,pt=x,ht=b,dt=f,ft=tt;ht.prototype.hsi=function(){return ft(this._rgb)},pt.hsi=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(ht,[null].concat(e,["hsi"])))},dt.format.hsi=lt,dt.autodetect.push({p:2,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=ct(e,"hsi"),"array"===ut(e)&&3===e.length)return"hsi"}});var gt=d.unpack,vt=d.type,mt=x,yt=b,At=f,bt=V;yt.prototype.hsl=function(){return bt(this._rgb)},mt.hsl=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(yt,[null].concat(e,["hsl"])))},At.format.hsl=ee,At.autodetect.push({p:2,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=gt(e,"hsl"),"array"===vt(e)&&3===e.length)return"hsl"}});var wt=d.unpack,xt=Math.min,kt=Math.max,Mt=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];e=wt(e,"rgb");var r,a,n,o=e[0],i=e[1],s=e[2],l=xt(o,i,s),c=kt(o,i,s),u=c-l;return n=c/255,0===c?(r=Number.NaN,a=0):(a=u/c,o===c&&(r=(i-s)/u),i===c&&(r=2+(s-o)/u),s===c&&(r=4+(o-i)/u),r*=60,r<0&&(r+=360)),[r,a,n]},Ct=Mt,St=d.unpack,Et=Math.floor,Rt=function(){var e,t,r,a,n,o,i=[],s=arguments.length;while(s--)i[s]=arguments[s];i=St(i,"hsv");var l,c,u,p=i[0],h=i[1],d=i[2];if(d*=255,0===h)l=c=u=d;else{360===p&&(p=0),p>360&&(p-=360),p<0&&(p+=360),p/=60;var f=Et(p),g=p-f,v=d*(1-h),m=d*(1-h*g),y=d*(1-h*(1-g));switch(f){case 0:e=[d,y,v],l=e[0],c=e[1],u=e[2];break;case 1:t=[m,d,v],l=t[0],c=t[1],u=t[2];break;case 2:r=[v,d,y],l=r[0],c=r[1],u=r[2];break;case 3:a=[v,m,d],l=a[0],c=a[1],u=a[2];break;case 4:n=[y,v,d],l=n[0],c=n[1],u=n[2];break;case 5:o=[d,v,m],l=o[0],c=o[1],u=o[2];break}}return[l,c,u,i.length>3?i[3]:1]},It=Rt,Ot=d.unpack,Tt=d.type,Ft=x,Bt=b,Pt=f,Lt=Ct;Bt.prototype.hsv=function(){return Lt(this._rgb)},Ft.hsv=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(Bt,[null].concat(e,["hsv"])))},Pt.format.hsv=It,Pt.autodetect.push({p:2,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=Ot(e,"hsv"),"array"===Tt(e)&&3===e.length)return"hsv"}});var Dt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},jt=Dt,Yt=d.unpack,Ut=Math.pow,Xt=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=Yt(e,"rgb"),a=r[0],n=r[1],o=r[2],i=Vt(a,n,o),s=i[0],l=i[1],c=i[2],u=116*l-16;return[u<0?0:u,500*(s-l),200*(l-c)]},Qt=function(e){return(e/=255)<=.04045?e/12.92:Ut((e+.055)/1.055,2.4)},Nt=function(e){return e>jt.t3?Ut(e,1/3):e/jt.t2+jt.t0},Vt=function(e,t,r){e=Qt(e),t=Qt(t),r=Qt(r);var a=Nt((.4124564*e+.3575761*t+.1804375*r)/jt.Xn),n=Nt((.2126729*e+.7151522*t+.072175*r)/jt.Yn),o=Nt((.0193339*e+.119192*t+.9503041*r)/jt.Zn);return[a,n,o]},Jt=Xt,Gt=Dt,Ht=d.unpack,qt=Math.pow,Kt=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];e=Ht(e,"lab");var r,a,n,o,i,s,l=e[0],c=e[1],u=e[2];return a=(l+16)/116,r=isNaN(c)?a:a+c/500,n=isNaN(u)?a:a-u/200,a=Gt.Yn*zt(a),r=Gt.Xn*zt(r),n=Gt.Zn*zt(n),o=Wt(3.2404542*r-1.5371385*a-.4985314*n),i=Wt(-.969266*r+1.8760108*a+.041556*n),s=Wt(.0556434*r-.2040259*a+1.0572252*n),[o,i,s,e.length>3?e[3]:1]},Wt=function(e){return 255*(e<=.00304?12.92*e:1.055*qt(e,1/2.4)-.055)},zt=function(e){return e>Gt.t1?e*e*e:Gt.t2*(e-Gt.t0)},Zt=Kt,_t=d.unpack,$t=d.type,er=x,tr=b,rr=f,ar=Jt;tr.prototype.lab=function(){return ar(this._rgb)},er.lab=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(tr,[null].concat(e,["lab"])))},rr.format.lab=Zt,rr.autodetect.push({p:2,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=_t(e,"lab"),"array"===$t(e)&&3===e.length)return"lab"}});var nr=d.unpack,or=d.RAD2DEG,ir=Math.sqrt,sr=Math.atan2,lr=Math.round,cr=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=nr(e,"lab"),a=r[0],n=r[1],o=r[2],i=ir(n*n+o*o),s=(sr(o,n)*or+360)%360;return 0===lr(1e4*i)&&(s=Number.NaN),[a,i,s]},ur=cr,pr=d.unpack,hr=Jt,dr=ur,fr=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=pr(e,"rgb"),a=r[0],n=r[1],o=r[2],i=hr(a,n,o),s=i[0],l=i[1],c=i[2];return dr(s,l,c)},gr=fr,vr=d.unpack,mr=d.DEG2RAD,yr=Math.sin,Ar=Math.cos,br=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=vr(e,"lch"),a=r[0],n=r[1],o=r[2];return isNaN(o)&&(o=0),o*=mr,[a,Ar(o)*n,yr(o)*n]},wr=br,xr=d.unpack,kr=wr,Mr=Zt,Cr=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];e=xr(e,"lch");var r=e[0],a=e[1],n=e[2],o=kr(r,a,n),i=o[0],s=o[1],l=o[2],c=Mr(i,s,l),u=c[0],p=c[1],h=c[2];return[u,p,h,e.length>3?e[3]:1]},Sr=Cr,Er=d.unpack,Rr=Sr,Ir=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=Er(e,"hcl").reverse();return Rr.apply(void 0,r)},Or=Ir,Tr=d.unpack,Fr=d.type,Br=x,Pr=b,Lr=f,Dr=gr;Pr.prototype.lch=function(){return Dr(this._rgb)},Pr.prototype.hcl=function(){return Dr(this._rgb).reverse()},Br.lch=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(Pr,[null].concat(e,["lch"])))},Br.hcl=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(Pr,[null].concat(e,["hcl"])))},Lr.format.lch=Sr,Lr.format.hcl=Or,["lch","hcl"].forEach((function(e){return Lr.autodetect.push({p:2,test:function(){var t=[],r=arguments.length;while(r--)t[r]=arguments[r];if(t=Tr(t,e),"array"===Fr(t)&&3===t.length)return e}})}));var jr={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Yr=jr,Ur=b,Xr=f,Qr=d.type,Nr=Yr,Vr=Ve,Jr=Ue;Ur.prototype.name=function(){for(var e=Jr(this._rgb,"rgb"),t=0,r=Object.keys(Nr);t<r.length;t+=1){var a=r[t];if(Nr[a]===e)return a.toLowerCase()}return e},Xr.format.named=function(e){if(e=e.toLowerCase(),Nr[e])return Vr(Nr[e]);throw new Error("unknown color name: "+e)},Xr.autodetect.push({p:5,test:function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];if(!t.length&&"string"===Qr(e)&&Nr[e.toLowerCase()])return"named"}});var Gr=d.unpack,Hr=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=Gr(e,"rgb"),a=r[0],n=r[1],o=r[2];return(a<<16)+(n<<8)+o},qr=Hr,Kr=d.type,Wr=function(e){if("number"==Kr(e)&&e>=0&&e<=16777215){var t=e>>16,r=e>>8&255,a=255&e;return[t,r,a,1]}throw new Error("unknown num color: "+e)},zr=Wr,Zr=x,_r=b,$r=f,ea=d.type,ta=qr;_r.prototype.num=function(){return ta(this._rgb)},Zr.num=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(_r,[null].concat(e,["num"])))},$r.format.num=zr,$r.autodetect.push({p:5,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(1===e.length&&"number"===ea(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var ra=x,aa=b,na=f,oa=d.unpack,ia=d.type,sa=Math.round;aa.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(sa)},aa.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,r){return r<3?!1===e?t:sa(t):t}))},ra.rgb=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(aa,[null].concat(e,["rgb"])))},na.format.rgb=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=oa(e,"rgba");return void 0===r[3]&&(r[3]=1),r},na.autodetect.push({p:3,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=oa(e,"rgba"),"array"===ia(e)&&(3===e.length||4===e.length&&"number"==ia(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var la=Math.log,ca=function(e){var t,r,a,n=e/100;return n<66?(t=255,r=n<6?0:-155.25485562709179-.44596950469579133*(r=n-2)+104.49216199393888*la(r),a=n<20?0:.8274096064007395*(a=n-10)-254.76935184120902+115.67994401066147*la(a)):(t=351.97690566805693+.114206453784165*(t=n-55)-40.25366309332127*la(t),r=325.4494125711974+.07943456536662342*(r=n-50)-28.0852963507957*la(r),a=255),[t,r,a,1]},ua=ca,pa=ua,ha=d.unpack,da=Math.round,fa=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r,a=ha(e,"rgb"),n=a[0],o=a[2],i=1e3,s=4e4,l=.4;while(s-i>l){r=.5*(s+i);var c=pa(r);c[2]/c[0]>=o/n?s=r:i=r}return da(r)},ga=fa,va=x,ma=b,ya=f,Aa=ga;ma.prototype.temp=ma.prototype.kelvin=ma.prototype.temperature=function(){return Aa(this._rgb)},va.temp=va.kelvin=va.temperature=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(ma,[null].concat(e,["temp"])))},ya.format.temp=ya.format.kelvin=ya.format.temperature=ua;var ba=d.unpack,wa=Math.cbrt,xa=Math.pow,ka=Math.sign,Ma=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=ba(e,"rgb"),a=r[0],n=r[1],o=r[2],i=[Sa(a/255),Sa(n/255),Sa(o/255)],s=i[0],l=i[1],c=i[2],u=wa(.4122214708*s+.5363325363*l+.0514459929*c),p=wa(.2119034982*s+.6806995451*l+.1073969566*c),h=wa(.0883024619*s+.2817188376*l+.6299787005*c);return[.2104542553*u+.793617785*p-.0040720468*h,1.9779984951*u-2.428592205*p+.4505937099*h,.0259040371*u+.7827717662*p-.808675766*h]},Ca=Ma;function Sa(e){var t=Math.abs(e);return t<.04045?e/12.92:(ka(e)||1)*xa((t+.055)/1.055,2.4)}var Ea=d.unpack,Ra=Math.pow,Ia=Math.sign,Oa=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];e=Ea(e,"lab");var r=e[0],a=e[1],n=e[2],o=Ra(r+.3963377774*a+.2158037573*n,3),i=Ra(r-.1055613458*a-.0638541728*n,3),s=Ra(r-.0894841775*a-1.291485548*n,3);return[255*Fa(4.0767416621*o-3.3077115913*i+.2309699292*s),255*Fa(-1.2684380046*o+2.6097574011*i-.3413193965*s),255*Fa(-.0041960863*o-.7034186147*i+1.707614701*s),e.length>3?e[3]:1]},Ta=Oa;function Fa(e){var t=Math.abs(e);return t>.0031308?(Ia(e)||1)*(1.055*Ra(t,1/2.4)-.055):12.92*e}var Ba=d.unpack,Pa=d.type,La=x,Da=b,ja=f,Ya=Ca;Da.prototype.oklab=function(){return Ya(this._rgb)},La.oklab=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(Da,[null].concat(e,["oklab"])))},ja.format.oklab=Ta,ja.autodetect.push({p:3,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=Ba(e,"oklab"),"array"===Pa(e)&&3===e.length)return"oklab"}});var Ua=d.unpack,Xa=Ca,Qa=ur,Na=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var r=Ua(e,"rgb"),a=r[0],n=r[1],o=r[2],i=Xa(a,n,o),s=i[0],l=i[1],c=i[2];return Qa(s,l,c)},Va=Na,Ja=d.unpack,Ga=wr,Ha=Ta,qa=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];e=Ja(e,"lch");var r=e[0],a=e[1],n=e[2],o=Ga(r,a,n),i=o[0],s=o[1],l=o[2],c=Ha(i,s,l),u=c[0],p=c[1],h=c[2];return[u,p,h,e.length>3?e[3]:1]},Ka=qa,Wa=d.unpack,za=d.type,Za=x,_a=b,$a=f,en=Va;_a.prototype.oklch=function(){return en(this._rgb)},Za.oklch=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return new(Function.prototype.bind.apply(_a,[null].concat(e,["oklch"])))},$a.format.oklch=Ka,$a.autodetect.push({p:3,test:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e=Wa(e,"oklch"),"array"===za(e)&&3===e.length)return"oklch"}});var tn=b,rn=d.type;tn.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===rn(e)?t?(this._rgb[3]=e,this):new tn([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};var an=b;an.prototype.clipped=function(){return this._rgb._clipped||!1};var nn=b,on=Dt;nn.prototype.darken=function(e){void 0===e&&(e=1);var t=this,r=t.lab();return r[0]-=on.Kn*e,new nn(r,"lab").alpha(t.alpha(),!0)},nn.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},nn.prototype.darker=nn.prototype.darken,nn.prototype.brighter=nn.prototype.brighten;var sn=b;sn.prototype.get=function(e){var t=e.split("."),r=t[0],a=t[1],n=this[r]();if(a){var o=r.indexOf(a)-("ok"===r.substr(0,2)?2:0);if(o>-1)return n[o];throw new Error("unknown channel "+a+" in mode "+r)}return n};var ln=b,cn=d.type,un=Math.pow,pn=1e-7,hn=20;ln.prototype.luminance=function(e){if(void 0!==e&&"number"===cn(e)){if(0===e)return new ln([0,0,0,this._rgb[3]],"rgb");if(1===e)return new ln([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),r="rgb",a=hn,n=function(t,o){var i=t.interpolate(o,.5,r),s=i.luminance();return Math.abs(e-s)<pn||!a--?i:s>e?n(t,i):n(i,o)},o=(t>e?n(new ln([0,0,0]),this):n(this,new ln([255,255,255]))).rgb();return new ln(o.concat([this._rgb[3]]))}return dn.apply(void 0,this._rgb.slice(0,3))};var dn=function(e,t,r){return e=fn(e),t=fn(t),r=fn(r),.2126*e+.7152*t+.0722*r},fn=function(e){return e/=255,e<=.03928?e/12.92:un((e+.055)/1.055,2.4)},gn={},vn=b,mn=d.type,yn=gn,An=function(e,t,r){void 0===r&&(r=.5);var a=[],n=arguments.length-3;while(n-- >0)a[n]=arguments[n+3];var o=a[0]||"lrgb";if(yn[o]||a.length||(o=Object.keys(yn)[0]),!yn[o])throw new Error("interpolation mode "+o+" is not defined");return"object"!==mn(e)&&(e=new vn(e)),"object"!==mn(t)&&(t=new vn(t)),yn[o](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))},bn=b,wn=An;bn.prototype.mix=bn.prototype.interpolate=function(e,t){void 0===t&&(t=.5);var r=[],a=arguments.length-2;while(a-- >0)r[a]=arguments[a+2];return wn.apply(void 0,[this,e,t].concat(r))};var xn=b;xn.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new xn([t[0]*r,t[1]*r,t[2]*r,r],"rgb")};var kn=b,Mn=Dt;kn.prototype.saturate=function(e){void 0===e&&(e=1);var t=this,r=t.lch();return r[1]+=Mn.Kn*e,r[1]<0&&(r[1]=0),new kn(r,"lch").alpha(t.alpha(),!0)},kn.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var Cn=b,Sn=d.type;Cn.prototype.set=function(e,t,r){void 0===r&&(r=!1);var a=e.split("."),n=a[0],o=a[1],i=this[n]();if(o){var s=n.indexOf(o)-("ok"===n.substr(0,2)?2:0);if(s>-1){if("string"==Sn(t))switch(t.charAt(0)){case"+":i[s]+=+t;break;case"-":i[s]+=+t;break;case"*":i[s]*=+t.substr(1);break;case"/":i[s]/=+t.substr(1);break;default:i[s]=+t}else{if("number"!==Sn(t))throw new Error("unsupported value for Color.set");i[s]=t}var l=new Cn(i,n);return r?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+o+" in mode "+n)}return i};var En=b,Rn=function(e,t,r){var a=e._rgb,n=t._rgb;return new En(a[0]+r*(n[0]-a[0]),a[1]+r*(n[1]-a[1]),a[2]+r*(n[2]-a[2]),"rgb")};gn.rgb=Rn;var In=b,On=Math.sqrt,Tn=Math.pow,Fn=function(e,t,r){var a=e._rgb,n=a[0],o=a[1],i=a[2],s=t._rgb,l=s[0],c=s[1],u=s[2];return new In(On(Tn(n,2)*(1-r)+Tn(l,2)*r),On(Tn(o,2)*(1-r)+Tn(c,2)*r),On(Tn(i,2)*(1-r)+Tn(u,2)*r),"rgb")};gn.lrgb=Fn;var Bn=b,Pn=function(e,t,r){var a=e.lab(),n=t.lab();return new Bn(a[0]+r*(n[0]-a[0]),a[1]+r*(n[1]-a[1]),a[2]+r*(n[2]-a[2]),"lab")};gn.lab=Pn;var Ln=b,Dn=function(e,t,r,a){var n,o,i,s,l,c,u,p,h,d,f,g,v,m;return"hsl"===a?(i=e.hsl(),s=t.hsl()):"hsv"===a?(i=e.hsv(),s=t.hsv()):"hcg"===a?(i=e.hcg(),s=t.hcg()):"hsi"===a?(i=e.hsi(),s=t.hsi()):"lch"===a||"hcl"===a?(a="hcl",i=e.hcl(),s=t.hcl()):"oklch"===a&&(i=e.oklch().reverse(),s=t.oklch().reverse()),"h"!==a.substr(0,1)&&"oklch"!==a||(n=i,l=n[0],u=n[1],h=n[2],o=s,c=o[0],p=o[1],d=o[2]),isNaN(l)||isNaN(c)?isNaN(l)?isNaN(c)?g=Number.NaN:(g=c,1!=h&&0!=h||"hsv"==a||(f=p)):(g=l,1!=d&&0!=d||"hsv"==a||(f=u)):(m=c>l&&c-l>180?c-(l+360):c<l&&l-c>180?c+360-l:c-l,g=l+r*m),void 0===f&&(f=u+r*(p-u)),v=h+r*(d-h),new Ln("oklch"===a?[v,f,g]:[g,f,v],a)},jn=Dn,Yn=function(e,t,r){return jn(e,t,r,"lch")};gn.lch=Yn,gn.hcl=Yn;var Un=b,Xn=function(e,t,r){var a=e.num(),n=t.num();return new Un(a+r*(n-a),"num")};gn.num=Xn;var Qn=Dn,Nn=function(e,t,r){return Qn(e,t,r,"hcg")};gn.hcg=Nn;var Vn=Dn,Jn=function(e,t,r){return Vn(e,t,r,"hsi")};gn.hsi=Jn;var Gn=Dn,Hn=function(e,t,r){return Gn(e,t,r,"hsl")};gn.hsl=Hn;var qn=Dn,Kn=function(e,t,r){return qn(e,t,r,"hsv")};gn.hsv=Kn;var Wn=b,zn=function(e,t,r){var a=e.oklab(),n=t.oklab();return new Wn(a[0]+r*(n[0]-a[0]),a[1]+r*(n[1]-a[1]),a[2]+r*(n[2]-a[2]),"oklab")};gn.oklab=zn;var Zn=Dn,_n=function(e,t,r){return Zn(e,t,r,"oklch")};gn.oklch=_n;var $n=b,eo=d.clip_rgb,to=Math.pow,ro=Math.sqrt,ao=Math.PI,no=Math.cos,oo=Math.sin,io=Math.atan2,so=function(e,t,r){void 0===t&&(t="lrgb"),void 0===r&&(r=null);var a=e.length;r||(r=Array.from(new Array(a)).map((function(){return 1})));var n=a/r.reduce((function(e,t){return e+t}));if(r.forEach((function(e,t){r[t]*=n})),e=e.map((function(e){return new $n(e)})),"lrgb"===t)return lo(e,r);for(var o=e.shift(),i=o.get(t),s=[],l=0,c=0,u=0;u<i.length;u++)if(i[u]=(i[u]||0)*r[0],s.push(isNaN(i[u])?0:r[0]),"h"===t.charAt(u)&&!isNaN(i[u])){var p=i[u]/180*ao;l+=no(p)*r[0],c+=oo(p)*r[0]}var h=o.alpha()*r[0];e.forEach((function(e,a){var n=e.get(t);h+=e.alpha()*r[a+1];for(var o=0;o<i.length;o++)if(!isNaN(n[o]))if(s[o]+=r[a+1],"h"===t.charAt(o)){var u=n[o]/180*ao;l+=no(u)*r[a+1],c+=oo(u)*r[a+1]}else i[o]+=n[o]*r[a+1]}));for(var d=0;d<i.length;d++)if("h"===t.charAt(d)){var f=io(c/s[d],l/s[d])/ao*180;while(f<0)f+=360;while(f>=360)f-=360;i[d]=f}else i[d]=i[d]/s[d];return h/=a,new $n(i,t).alpha(h>.99999?1:h,!0)},lo=function(e,t){for(var r=e.length,a=[0,0,0,0],n=0;n<e.length;n++){var o=e[n],i=t[n]/r,s=o._rgb;a[0]+=to(s[0],2)*i,a[1]+=to(s[1],2)*i,a[2]+=to(s[2],2)*i,a[3]+=s[3]*i}return a[0]=ro(a[0]),a[1]=ro(a[1]),a[2]=ro(a[2]),a[3]>.9999999&&(a[3]=1),new $n(eo(a))},co=x,uo=d.type,po=Math.pow,ho=function(e){var t="rgb",r=co("#ccc"),a=0,n=[0,1],o=[],i=[0,0],s=!1,l=[],c=!1,u=0,p=1,h=!1,d={},f=!0,g=1,v=function(e){if(e=e||["#fff","#000"],e&&"string"===uo(e)&&co.brewer&&co.brewer[e.toLowerCase()]&&(e=co.brewer[e.toLowerCase()]),"array"===uo(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=co(e[t]);o.length=0;for(var r=0;r<e.length;r++)o.push(r/(e.length-1))}return w(),l=e},m=function(e){if(null!=s){var t=s.length-1,r=0;while(r<t&&e>=s[r])r++;return r-1}return 0},y=function(e){return e},A=function(e){return e},b=function(e,a){var n,c;if(null==a&&(a=!1),isNaN(e)||null===e)return r;if(a)c=e;else if(s&&s.length>2){var h=m(e);c=h/(s.length-2)}else c=p!==u?(e-u)/(p-u):1;c=A(c),a||(c=y(c)),1!==g&&(c=po(c,g)),c=i[0]+c*(1-i[0]-i[1]),c=Math.min(1,Math.max(0,c));var v=Math.floor(1e4*c);if(f&&d[v])n=d[v];else{if("array"===uo(l))for(var b=0;b<o.length;b++){var w=o[b];if(c<=w){n=l[b];break}if(c>=w&&b===o.length-1){n=l[b];break}if(c>w&&c<o[b+1]){c=(c-w)/(o[b+1]-w),n=co.interpolate(l[b],l[b+1],c,t);break}}else"function"===uo(l)&&(n=l(c));f&&(d[v]=n)}return n},w=function(){return d={}};v(e);var x=function(e){var t=co(b(e));return c&&t[c]?t[c]():t};return x.classes=function(e){if(null!=e){if("array"===uo(e))s=e,n=[e[0],e[e.length-1]];else{var t=co.analyze(n);s=0===e?[t.min,t.max]:co.limits(t,"e",e)}return x}return s},x.domain=function(e){if(!arguments.length)return n;u=e[0],p=e[e.length-1],o=[];var t=l.length;if(e.length===t&&u!==p)for(var r=0,a=Array.from(e);r<a.length;r+=1){var i=a[r];o.push((i-u)/(p-u))}else{for(var s=0;s<t;s++)o.push(s/(t-1));if(e.length>2){var c=e.map((function(t,r){return r/(e.length-1)})),h=e.map((function(e){return(e-u)/(p-u)}));h.every((function(e,t){return c[t]===e}))||(A=function(e){if(e<=0||e>=1)return e;var t=0;while(e>=h[t+1])t++;var r=(e-h[t])/(h[t+1]-h[t]),a=c[t]+r*(c[t+1]-c[t]);return a})}}return n=[u,p],x},x.mode=function(e){return arguments.length?(t=e,w(),x):t},x.range=function(e,t){return v(e),x},x.out=function(e){return c=e,x},x.spread=function(e){return arguments.length?(a=e,x):a},x.correctLightness=function(e){return null==e&&(e=!0),h=e,w(),y=h?function(e){var t=b(0,!0).lab()[0],r=b(1,!0).lab()[0],a=t>r,n=b(e,!0).lab()[0],o=t+(r-t)*e,i=n-o,s=0,l=1,c=20;while(Math.abs(i)>.01&&c-- >0)(function(){a&&(i*=-1),i<0?(s=e,e+=.5*(l-e)):(l=e,e+=.5*(s-e)),n=b(e,!0).lab()[0],i=n-o})();return e}:function(e){return e},x},x.padding=function(e){return null!=e?("number"===uo(e)&&(e=[e,e]),i=e,x):i},x.colors=function(t,r){arguments.length<2&&(r="hex");var a=[];if(0===arguments.length)a=l.slice(0);else if(1===t)a=[x(.5)];else if(t>1){var o=n[0],i=n[1]-o;a=fo(0,t,!1).map((function(e){return x(o+e/(t-1)*i)}))}else{e=[];var c=[];if(s&&s.length>2)for(var u=1,p=s.length,h=1<=p;h?u<p:u>p;h?u++:u--)c.push(.5*(s[u-1]+s[u]));else c=n;a=c.map((function(e){return x(e)}))}return co[r]&&(a=a.map((function(e){return e[r]()}))),a},x.cache=function(e){return null!=e?(f=e,x):f},x.gamma=function(e){return null!=e?(g=e,x):g},x.nodata=function(e){return null!=e?(r=co(e),x):r},x};function fo(e,t,r){for(var a=[],n=e<t,o=r?n?t+1:t-1:t,i=e;n?i<o:i>o;n?i++:i--)a.push(i);return a}var go=b,vo=ho,mo=function(e){for(var t=[1,1],r=1;r<e;r++){for(var a=[1],n=1;n<=t.length;n++)a[n]=(t[n]||0)+t[n-1];t=a}return t},yo=function(e){var t,r,a,n,o,i,s;if(e=e.map((function(e){return new go(e)})),2===e.length)t=e.map((function(e){return e.lab()})),o=t[0],i=t[1],n=function(e){var t=[0,1,2].map((function(t){return o[t]+e*(i[t]-o[t])}));return new go(t,"lab")};else if(3===e.length)r=e.map((function(e){return e.lab()})),o=r[0],i=r[1],s=r[2],n=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*o[t]+2*(1-e)*e*i[t]+e*e*s[t]}));return new go(t,"lab")};else if(4===e.length){var l;a=e.map((function(e){return e.lab()})),o=a[0],i=a[1],s=a[2],l=a[3],n=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*i[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]}));return new go(t,"lab")}}else{if(!(e.length>=5))throw new RangeError("No point in running bezier with only one color.");var c,u,p;c=e.map((function(e){return e.lab()})),p=e.length-1,u=mo(p),n=function(e){var t=1-e,r=[0,1,2].map((function(r){return c.reduce((function(a,n,o){return a+u[o]*Math.pow(t,p-o)*Math.pow(e,o)*n[r]}),0)}));return new go(r,"lab")}}return n},Ao=function(e){var t=yo(e);return t.scale=function(){return vo(t)},t},bo=x,wo=function(e,t,r){if(!wo[r])throw new Error("unknown blend mode "+r);return wo[r](e,t)},xo=function(e){return function(t,r){var a=bo(r).rgb(),n=bo(t).rgb();return bo.rgb(e(a,n))}},ko=function(e){return function(t,r){var a=[];return a[0]=e(t[0],r[0]),a[1]=e(t[1],r[1]),a[2]=e(t[2],r[2]),a}},Mo=function(e){return e},Co=function(e,t){return e*t/255},So=function(e,t){return e>t?t:e},Eo=function(e,t){return e>t?e:t},Ro=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},Io=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},Oo=function(e,t){return 255*(1-(1-t/255)/(e/255))},To=function(e,t){return 255===e?255:(e=t/255*255/(1-e/255),e>255?255:e)};wo.normal=xo(ko(Mo)),wo.multiply=xo(ko(Co)),wo.screen=xo(ko(Ro)),wo.overlay=xo(ko(Io)),wo.darken=xo(ko(So)),wo.lighten=xo(ko(Eo)),wo.dodge=xo(ko(To)),wo.burn=xo(ko(Oo));for(var Fo=wo,Bo=d.type,Po=d.clip_rgb,Lo=d.TWOPI,Do=Math.pow,jo=Math.sin,Yo=Math.cos,Uo=x,Xo=function(e,t,r,a,n){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===r&&(r=1),void 0===a&&(a=1),void 0===n&&(n=[0,1]);var o,i=0;"array"===Bo(n)?o=n[1]-n[0]:(o=0,n=[n,n]);var s=function(s){var l=Lo*((e+120)/360+t*s),c=Do(n[0]+o*s,a),u=0!==i?r[0]+s*i:r,p=u*c*(1-c)/2,h=Yo(l),d=jo(l),f=c+p*(-.14861*h+1.78277*d),g=c+p*(-.29227*h-.90649*d),v=c+p*(1.97294*h);return Uo(Po([255*f,255*g,255*v,1]))};return s.start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?a:(a=e,s)},s.hue=function(e){return null==e?r:(r=e,"array"===Bo(r)?(i=r[1]-r[0],0===i&&(r=r[1])):i=0,s)},s.lightness=function(e){return null==e?n:("array"===Bo(e)?(n=e,o=e[1]-e[0]):(n=[e,e],o=0),s)},s.scale=function(){return Uo.scale(s)},s.hue(r),s},Qo=b,No="0123456789abcdef",Vo=Math.floor,Jo=Math.random,Go=function(){for(var e="#",t=0;t<6;t++)e+=No.charAt(Vo(16*Jo()));return new Qo(e,"hex")},Ho=s,qo=Math.log,Ko=Math.pow,Wo=Math.floor,zo=Math.abs,Zo=function(e,t){void 0===t&&(t=null);var r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Ho(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===Ho(e)&&(e=e[t]),void 0===e||null===e||isNaN(e)||(r.values.push(e),r.sum+=e,e<r.min&&(r.min=e),e>r.max&&(r.max=e),r.count+=1)})),r.domain=[r.min,r.max],r.limits=function(e,t){return _o(r,e,t)},r},_o=function(e,t,r){void 0===t&&(t="equal"),void 0===r&&(r=7),"array"==Ho(e)&&(e=Zo(e));var a=e.min,n=e.max,o=e.values.sort((function(e,t){return e-t}));if(1===r)return[a,n];var i=[];if("c"===t.substr(0,1)&&(i.push(a),i.push(n)),"e"===t.substr(0,1)){i.push(a);for(var s=1;s<r;s++)i.push(a+s/r*(n-a));i.push(n)}else if("l"===t.substr(0,1)){if(a<=0)throw new Error("Logarithmic scales are only possible for values > 0");var l=Math.LOG10E*qo(a),c=Math.LOG10E*qo(n);i.push(a);for(var u=1;u<r;u++)i.push(Ko(10,l+u/r*(c-l)));i.push(n)}else if("q"===t.substr(0,1)){i.push(a);for(var p=1;p<r;p++){var h=(o.length-1)*p/r,d=Wo(h);if(d===h)i.push(o[d]);else{var f=h-d;i.push(o[d]*(1-f)+o[d+1]*f)}}i.push(n)}else if("k"===t.substr(0,1)){var g,v=o.length,m=new Array(v),y=new Array(r),A=!0,b=0,w=null;w=[],w.push(a);for(var x=1;x<r;x++)w.push(a+x/r*(n-a));w.push(n);while(A){for(var k=0;k<r;k++)y[k]=0;for(var M=0;M<v;M++)for(var C=o[M],S=Number.MAX_VALUE,E=void 0,R=0;R<r;R++){var I=zo(w[R]-C);I<S&&(S=I,E=R),y[E]++,m[M]=E}for(var O=new Array(r),T=0;T<r;T++)O[T]=null;for(var F=0;F<v;F++)g=m[F],null===O[g]?O[g]=o[F]:O[g]+=o[F];for(var B=0;B<r;B++)O[B]*=1/y[B];A=!1;for(var P=0;P<r;P++)if(O[P]!==w[P]){A=!0;break}w=O,b++,b>200&&(A=!1)}for(var L={},D=0;D<r;D++)L[D]=[];for(var j=0;j<v;j++)g=m[j],L[g].push(o[j]);for(var Y=[],U=0;U<r;U++)Y.push(L[U][0]),Y.push(L[U][L[U].length-1]);Y=Y.sort((function(e,t){return e-t})),i.push(Y[0]);for(var X=1;X<Y.length;X+=2){var Q=Y[X];isNaN(Q)||-1!==i.indexOf(Q)||i.push(Q)}}return i},$o={analyze:Zo,limits:_o},ei=b,ti=function(e,t){e=new ei(e),t=new ei(t);var r=e.luminance(),a=t.luminance();return r>a?(r+.05)/(a+.05):(a+.05)/(r+.05)},ri=b,ai=Math.sqrt,ni=Math.pow,oi=Math.min,ii=Math.max,si=Math.atan2,li=Math.abs,ci=Math.cos,ui=Math.sin,pi=Math.exp,hi=Math.PI,di=function(e,t,r,a,n){void 0===r&&(r=1),void 0===a&&(a=1),void 0===n&&(n=1);var o=function(e){return 360*e/(2*hi)},i=function(e){return 2*hi*e/360};e=new ri(e),t=new ri(t);var s=Array.from(e.lab()),l=s[0],c=s[1],u=s[2],p=Array.from(t.lab()),h=p[0],d=p[1],f=p[2],g=(l+h)/2,v=ai(ni(c,2)+ni(u,2)),m=ai(ni(d,2)+ni(f,2)),y=(v+m)/2,A=.5*(1-ai(ni(y,7)/(ni(y,7)+ni(25,7)))),b=c*(1+A),w=d*(1+A),x=ai(ni(b,2)+ni(u,2)),k=ai(ni(w,2)+ni(f,2)),M=(x+k)/2,C=o(si(u,b)),S=o(si(f,w)),E=C>=0?C:C+360,R=S>=0?S:S+360,I=li(E-R)>180?(E+R+360)/2:(E+R)/2,O=1-.17*ci(i(I-30))+.24*ci(i(2*I))+.32*ci(i(3*I+6))-.2*ci(i(4*I-63)),T=R-E;T=li(T)<=180?T:R<=E?T+360:T-360,T=2*ai(x*k)*ui(i(T)/2);var F=h-l,B=k-x,P=1+.015*ni(g-50,2)/ai(20+ni(g-50,2)),L=1+.045*M,D=1+.015*M*O,j=30*pi(-ni((I-275)/25,2)),Y=2*ai(ni(M,7)/(ni(M,7)+ni(25,7))),U=-Y*ui(2*i(j)),X=ai(ni(F/(r*P),2)+ni(B/(a*L),2)+ni(T/(n*D),2)+U*(B/(a*L))*(T/(n*D)));return ii(0,oi(100,X))},fi=b,gi=function(e,t,r){void 0===r&&(r="lab"),e=new fi(e),t=new fi(t);var a=e.get(r),n=t.get(r),o=0;for(var i in a){var s=(a[i]||0)-(n[i]||0);o+=s*s}return Math.sqrt(o)},vi=b,mi=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(vi,[null].concat(e))),!0}catch(r){return!1}},yi=x,Ai=ho,bi={cool:function(){return Ai([yi.hsl(180,1,.9),yi.hsl(250,.7,.4)])},hot:function(){return Ai(["#000","#f00","#ff0","#fff"]).mode("rgb")}},wi={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},xi=0,ki=Object.keys(wi);xi<ki.length;xi+=1){var Mi=ki[xi];wi[Mi.toLowerCase()]=wi[Mi]}var Ci=wi,Si=x;Si.average=so,Si.bezier=Ao,Si.blend=Fo,Si.cubehelix=Xo,Si.mix=Si.interpolate=An,Si.random=Go,Si.scale=ho,Si.analyze=$o.analyze,Si.contrast=ti,Si.deltaE=di,Si.distance=gi,Si.limits=$o.limits,Si.valid=mi,Si.scales=bi,Si.colors=Yr,Si.brewer=Ci;var Ei=Si;return Ei}))},8955:function(e,t,r){"use strict";r("1648")},"8c20":function(e,t,r){var a=r("0863");function n(e,t){var r,n=0,i=arguments.length;while(++n<i)r=arguments[n],null!=r&&a(r,o,e);return e}function o(e,t){this[t]=e}e.exports=n},9797:function(e,t){function r(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}e.exports=r},"984b":function(e,t,r){var a=r("9797"),n=r("ac07"),o=r("e657");function i(e,t,r){return r=r||a,n(e)&&n(t)?e.length===t.length&&o(e,s(r),t):r(e,t)}function s(e){return function(t,r){return r in this&&e(t,this[r])}}e.exports=i},"993f":function(e,t,r){"use strict";var a=r("88d4"),n=r("8735"),o=r("1c34"),i=r("58db"),s=r("126a"),l=r("ac3c"),c=r("492f"),u=r("c40a"),p=r("3a6d"),h=p("splice"),d=n.TypeError,f=Math.max,g=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var r,a,n,p,h,y,A=l(this),b=s(A),w=o(e,b),x=arguments.length;if(0===x?r=a=0:1===x?(r=0,a=b-w):(r=x-2,a=g(f(i(t),0),b-w)),b+r-a>v)throw d(m);for(n=c(A,a),p=0;p<a;p++)h=w+p,h in A&&u(n,p,A[h]);if(n.length=a,r<a){for(p=w;p<b-a;p++)h=p+a,y=p+r,h in A?A[y]=A[h]:delete A[y];for(p=b;p>b-a+r;p--)delete A[p-1]}else if(r>a)for(p=b-a;p>w;p--)h=p+a-1,y=p+r-1,h in A?A[y]=A[h]:delete A[y];for(p=0;p<r;p++)A[p+w]=arguments[p+2];return A.length=b-a+r,n}})},"9a9d":function(e){e.exports=JSON.parse('{"stop_dist":{"type":"double","value":0.5,"max":4,"min":0,"name":"停障距离","user":"route"},"stop_angle":{"type":"double","value":8,"max":180,"min":0,"name":"停障角度(deg)","user":"route"},"disabled_sensors":{"type":"int","value":[],"valueEnum":{"1":"前激光","2":"后激光","4":"左前激光","7":"右前激光","8":"右后激光","9":"顶激光","-20":"点激光","-1":"前深度相机","-2":"后深度相机"},"name":"禁用传感器","user":"route"},"load_dock_type":{"type":"int","valueEnum":{"404":"导航","406":"盲退","409":"盲进","502":"二维码","503":"二维码带","505":"磁条","506":"深度相机","510":"激光模板","-1":"全局配置"},"value":-1,"name":"上料对接","user":"spot"},"load_dock_sub_type":{"type":"int","value":1,"max":100,"min":0,"name":"上料子类型","user":"spot"},"unload_dock_type":{"type":"int","valueEnum":{"404":"导航","406":"盲退","409":"盲进","502":"二维码","503":"二维码带","505":"磁条","506":"深度相机","510":"激光模板","-1":"全局配置"},"value":-1,"name":"下料对接","user":"spot"},"unload_dock_sub_type":{"type":"int","value":1,"max":100,"min":0,"name":"下料子类型","user":"spot"},"leave_station_dock_type":{"type":"int","valueEnum":{"404":"导航","406":"盲退","409":"盲进","502":"二维码","503":"二维码带","505":"磁条","506":"深度相机","510":"激光模板","-1":"全局配置"},"value":-1,"name":"出站对接","user":"spot"},"leave_station_dock_sub_type":{"type":"int","value":1,"max":100,"min":0,"name":"出站子类型","user":"spot"},"platform_height":{"type":"int","value":-1,"max":20000,"min":-1,"name":"平台高度(mm)","user":"spot"},"offset_x":{"type":"double","value":0,"name":"纠偏x(mm)","user":"spot"},"offset_y":{"type":"double","value":0,"name":"纠偏y(mm)","user":"spot"},"offset_theta":{"type":"double","value":0,"name":"纠偏角度(deg)","user":"spot"},"shelf_posture":{"type":"int","valueEnum":{"0":"不限制","1":"前","2":"后","3":"左","4":"右","5":"平行","6":"垂直"},"name":"货架姿态","user":"route","value":0},"robot_type":{"type":"int","value":0,"max":10,"min":0,"name":"车体模板","user":"route"},"route_shape":{"type":"double","name":["停障尺寸前","停障尺寸后","停障尺寸左","停障尺寸右"],"max":[3,3,3,3],"min":[0,0,0,0],"user":"route"},"is_back":{"type":"boolean","value":false,"name":"是否允许后退","user":"route"},"path_width":{"type":"double","value":100,"name":"路径宽度","user":"route"},"is_relocate_spot":{"type":"boolean","value":false,"name":"是否是重定位点","user":"spot"}}')},"9ba9":function(e,t,r){"use strict";var a=r("8735"),n=r("ce5b"),o=r("092e"),i=r("bf1f"),s=r("6c75"),l=r("4b57"),c=r("79a4"),u=a.Function,p=n([].concat),h=n([].join),d={},f=function(e,t,r){if(!s(d,t)){for(var a=[],n=0;n<t;n++)a[n]="a["+n+"]";d[t]=u("C,a","return new C("+h(a,",")+")")}return d[t](e,r)};e.exports=c?u.bind:function(e){var t=o(this),r=t.prototype,a=l(arguments,1),n=function(){var r=p(a,l(arguments));return this instanceof n?f(t,r.length,r):t.apply(e,r)};return i(r)&&(n.prototype=r),n}},"9bda":function(e,t,r){"use strict";var a=r("88d4"),n=r("8735"),o=r("ce5b"),i=r("4a63"),s=r("ef11"),l=r("ea71"),c=r("e3b8"),u=r("3cb0"),p=r("97dc"),h=r("bf1f"),d=r("9ad2"),f=r("d99e"),g=r("2e1d"),v=r("55f9");e.exports=function(e,t,r){var m=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),A=m?"set":"add",b=n[e],w=b&&b.prototype,x=b,k={},M=function(e){var t=o(w[e]);s(w,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!h(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return y&&!h(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!h(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})},C=i(e,!p(b)||!(y||w.forEach&&!d((function(){(new b).entries().next()}))));if(C)x=r.getConstructor(t,e,m,A),l.enable();else if(i(e,!0)){var S=new x,E=S[A](y?{}:-0,1)!=S,R=d((function(){S.has(1)})),I=f((function(e){new b(e)})),O=!y&&d((function(){var e=new b,t=5;while(t--)e[A](t,t);return!e.has(-0)}));I||(x=t((function(e,t){u(e,w);var r=v(new b,e,x);return void 0!=t&&c(t,r[A],{that:r,AS_ENTRIES:m}),r})),x.prototype=w,w.constructor=x),(R||O)&&(M("delete"),M("has"),m&&M("get")),(O||E)&&M(A),y&&w.clear&&delete w.clear}return k[e]=x,a({global:!0,forced:x!=b},k),g(x,e),y||r.setStrong(x,e,m),x}},a018:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("8fec");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},a632:function(e,t,r){var a=r("008b"),n=r("819f"),o=r("7043");function i(e,t){if(null==e)return a;switch(typeof e){case"function":return"undefined"!==typeof t?function(r,a,n){return e.call(t,r,a,n)}:e;case"object":return function(t){return o(t,e)};case"string":case"number":return n(e)}}e.exports=i},ac07:function(e,t,r){var a=r("7b8c"),n=Array.isArray||function(e){return a(e,"Array")};e.exports=n},afd8:function(e,t,r){var a=r("9797"),n=r("5888"),o=r("ac07"),i=r("6671"),s=r("984b");function l(e,t,r){r=r||a;var c=n(e)&&n(t),u=!c&&o(e)&&o(t);if(!c&&!u)return r(e,t);function p(e,t){return l(e,t,r)}var h=c?i:s;return h(e,t,p)}e.exports=l},b276:function(e,t,r){var a=r("88d4"),n=r("9ad2"),o=r("ac3c"),i=r("df7a"),s=r("5a02"),l=n((function(){i(1)}));a({target:"Object",stat:!0,forced:l,sham:!s},{getPrototypeOf:function(e){return i(o(e))}})},b50a:function(e,t,r){var a=r("9ad2");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bb13:function(e,t,r){"use strict";var a=r("9bda"),n=r("5904");a("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},c159:function(e,t,r){"use strict";function a(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return s}));r("304d"),r("f257"),r("89a8"),r("2478"),r("b110"),r("fe35");function n(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(a=r.next()).done);i=!0)if(o.push(a.value),t&&o.length===t)break}catch(l){s=!0,n=l}finally{try{i||null==r["return"]||r["return"]()}finally{if(s)throw n}}return o}}var o=r("9135");r("8fec");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return a(e)||n(e,t)||Object(o["a"])(e,t)||i()}},c88c:function(e,t,r){"use strict";var a=r("ac3c"),n=r("1c34"),o=r("126a");e.exports=function(e){var t=a(this),r=o(t),i=arguments.length,s=n(i>1?arguments[1]:void 0,r),l=i>2?arguments[2]:void 0,c=void 0===l?r:n(l,r);while(c>s)t[s++]=e;return t}},ca59:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABh0lEQVRYR+2XPyvFURjHP9/XYDZYKAaDDLJQyshCGci/TNiVQnkHTCKiDEYjA4sYTEKpO3gDXsNXj6gb997fOdzbTd2znuc8z+d8n3Oe5xzR5KEmx+d/AtheAgaAfqAduAUegD1JpRxVsxWwfQ/01QiyKmknFSILwPYZMPHpfBK4A96ALmCtbK5XUihSOJIBbE8Dx+FRUsV1tjeATeBC0mhh9PCVYhQ2tk+BKWBM0nm1dbYvgREgSYUcgBegE+iQ9FoD4ACYB2YknRRtMAfAteT/ClSWhk1JWy2A/6mA7SFgGxgs2kHi/A2wLun6u/2PQ2i7G3hKdJxr1iPpuXxRJYB9YAE4kjSXG6GSve1DYBY4kLRYBHAFRAqGK0n2G6DPlIbfa0nDdQOw/QiUJI3XAmskQGpxCkUbokALIN4C0Z7bmnUG4iESANEpq46GHcLUK9kCyFUgXrTLDSrFu5JWiirhV9FITXGO3Y/yXu11Gx0xmlJ8Puox4uOy+L0Tftygenj/i48WwDt2+vwhrwkjtAAAAABJRU5ErkJggg=="},ca71:function(e,t,r){var a=r("88d4"),n=r("8735"),o=r("2e1d");a({global:!0},{Reflect:{}}),o(n.Reflect,"Reflect",!0)},cc0f:function(e,t,r){var a;(function(n){"use strict";function o(e,t){var r=(65535&e)+(65535&t),a=(e>>16)+(t>>16)+(r>>16);return a<<16|65535&r}function i(e,t){return e<<t|e>>>32-t}function s(e,t,r,a,n,s){return o(i(o(o(t,e),o(a,s)),n),r)}function l(e,t,r,a,n,o,i){return s(t&r|~t&a,e,t,n,o,i)}function c(e,t,r,a,n,o,i){return s(t&a|r&~a,e,t,n,o,i)}function u(e,t,r,a,n,o,i){return s(t^r^a,e,t,n,o,i)}function p(e,t,r,a,n,o,i){return s(r^(t|~a),e,t,n,o,i)}function h(e,t){var r,a,n,i,s;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,d=-271733879,f=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)a=h,n=d,i=f,s=g,h=l(h,d,f,g,e[r],7,-680876936),g=l(g,h,d,f,e[r+1],12,-389564586),f=l(f,g,h,d,e[r+2],17,606105819),d=l(d,f,g,h,e[r+3],22,-1044525330),h=l(h,d,f,g,e[r+4],7,-176418897),g=l(g,h,d,f,e[r+5],12,1200080426),f=l(f,g,h,d,e[r+6],17,-1473231341),d=l(d,f,g,h,e[r+7],22,-45705983),h=l(h,d,f,g,e[r+8],7,1770035416),g=l(g,h,d,f,e[r+9],12,-1958414417),f=l(f,g,h,d,e[r+10],17,-42063),d=l(d,f,g,h,e[r+11],22,-1990404162),h=l(h,d,f,g,e[r+12],7,1804603682),g=l(g,h,d,f,e[r+13],12,-40341101),f=l(f,g,h,d,e[r+14],17,-1502002290),d=l(d,f,g,h,e[r+15],22,1236535329),h=c(h,d,f,g,e[r+1],5,-165796510),g=c(g,h,d,f,e[r+6],9,-1069501632),f=c(f,g,h,d,e[r+11],14,643717713),d=c(d,f,g,h,e[r],20,-373897302),h=c(h,d,f,g,e[r+5],5,-701558691),g=c(g,h,d,f,e[r+10],9,38016083),f=c(f,g,h,d,e[r+15],14,-660478335),d=c(d,f,g,h,e[r+4],20,-405537848),h=c(h,d,f,g,e[r+9],5,568446438),g=c(g,h,d,f,e[r+14],9,-1019803690),f=c(f,g,h,d,e[r+3],14,-187363961),d=c(d,f,g,h,e[r+8],20,1163531501),h=c(h,d,f,g,e[r+13],5,-1444681467),g=c(g,h,d,f,e[r+2],9,-51403784),f=c(f,g,h,d,e[r+7],14,1735328473),d=c(d,f,g,h,e[r+12],20,-1926607734),h=u(h,d,f,g,e[r+5],4,-378558),g=u(g,h,d,f,e[r+8],11,-2022574463),f=u(f,g,h,d,e[r+11],16,1839030562),d=u(d,f,g,h,e[r+14],23,-35309556),h=u(h,d,f,g,e[r+1],4,-1530992060),g=u(g,h,d,f,e[r+4],11,1272893353),f=u(f,g,h,d,e[r+7],16,-155497632),d=u(d,f,g,h,e[r+10],23,-1094730640),h=u(h,d,f,g,e[r+13],4,681279174),g=u(g,h,d,f,e[r],11,-358537222),f=u(f,g,h,d,e[r+3],16,-722521979),d=u(d,f,g,h,e[r+6],23,76029189),h=u(h,d,f,g,e[r+9],4,-640364487),g=u(g,h,d,f,e[r+12],11,-421815835),f=u(f,g,h,d,e[r+15],16,530742520),d=u(d,f,g,h,e[r+2],23,-995338651),h=p(h,d,f,g,e[r],6,-198630844),g=p(g,h,d,f,e[r+7],10,1126891415),f=p(f,g,h,d,e[r+14],15,-1416354905),d=p(d,f,g,h,e[r+5],21,-57434055),h=p(h,d,f,g,e[r+12],6,1700485571),g=p(g,h,d,f,e[r+3],10,-1894986606),f=p(f,g,h,d,e[r+10],15,-1051523),d=p(d,f,g,h,e[r+1],21,-2054922799),h=p(h,d,f,g,e[r+8],6,1873313359),g=p(g,h,d,f,e[r+15],10,-30611744),f=p(f,g,h,d,e[r+6],15,-1560198380),d=p(d,f,g,h,e[r+13],21,1309151649),h=p(h,d,f,g,e[r+4],6,-145523070),g=p(g,h,d,f,e[r+11],10,-1120210379),f=p(f,g,h,d,e[r+2],15,718787259),d=p(d,f,g,h,e[r+9],21,-343485551),h=o(h,a),d=o(d,n),f=o(f,i),g=o(g,s);return[h,d,f,g]}function d(e){var t,r="",a=32*e.length;for(t=0;t<a;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function f(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var a=8*e.length;for(t=0;t<a;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function g(e){return d(h(f(e),8*e.length))}function v(e,t){var r,a,n=f(e),o=[],i=[];for(o[15]=i[15]=void 0,n.length>16&&(n=h(n,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^n[r],i[r]=1549556828^n[r];return a=h(o.concat(f(t)),512+8*t.length),d(h(i.concat(a),640))}function m(e){var t,r,a="0123456789abcdef",n="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+=a.charAt(t>>>4&15)+a.charAt(15&t);return n}function y(e){return unescape(encodeURIComponent(e))}function A(e){return g(y(e))}function b(e){return m(A(e))}function w(e,t){return v(y(e),y(t))}function x(e,t){return m(w(e,t))}function k(e,t,r){return t?r?w(t,e):x(t,e):r?A(e):b(e)}a=function(){return k}.call(t,r,t,e),void 0===a||(e.exports=a)})()},dd46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var a={sum:function(e){return e.reduce((function(e,t){return e+t}))}},n=a;t["default"]=n},e657:function(e,t,r){var a=r("a632");function n(e,t,r){t=a(t,r);var n=!0;if(null==e)return n;var o=-1,i=e.length;while(++o<i)if(!t(e[o],o,e)){n=!1;break}return n}e.exports=n},e8d1:function(e,t,r){var a=r("14c7"),n=r("77ea"),o=r("8c20");function i(e){switch(a(e)){case"Object":return s(e);case"Array":return u(e);case"RegExp":return l(e);case"Date":return c(e);default:return e}}function s(e){return n(e)?o({},e):e}function l(e){var t="";return t+=e.multiline?"m":"",t+=e.global?"g":"",t+=e.ignoreCase?"i":"",new RegExp(e.source,t)}function c(e){return new Date(+e)}function u(e){return e.slice()}e.exports=i},e902:function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r.d(t,"a",(function(){return n}))},ea71:function(e,t,r){var a=r("88d4"),n=r("ce5b"),o=r("e314"),i=r("bf1f"),s=r("6c75"),l=r("98fb").f,c=r("a9c5"),u=r("9bfe"),p=r("731f"),h=r("8e0c"),d=r("b50a"),f=!1,g=h("meta"),v=0,m=function(e){l(e,g,{value:{objectID:"O"+v++,weakData:{}}})},y=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,g)){if(!p(e))return"F";if(!t)return"E";m(e)}return e[g].objectID},A=function(e,t){if(!s(e,g)){if(!p(e))return!0;if(!t)return!1;m(e)}return e[g].weakData},b=function(e){return d&&f&&p(e)&&!s(e,g)&&m(e),e},w=function(){x.enable=function(){},f=!0;var e=c.f,t=n([].splice),r={};r[g]=1,e(r).length&&(c.f=function(r){for(var a=e(r),n=0,o=a.length;n<o;n++)if(a[n]===g){t(a,n,1);break}return a},a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},x=e.exports={enable:w,fastKey:y,getWeakData:A,onFreeze:b};o[g]=!0},f375:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var a=s(r("dd46")),n=s(r("6ad8")),o=s(r("afd8")),i=s(r("8236"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,n=e},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(i)throw n}}}}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={count:5,hueMin:0,hueMax:360,chromaMin:0,chromaMax:100,lightMin:0,lightMax:100,quality:50,samples:800},g=function(e,t){for(var r=Number.MAX_SAFE_INTEGER,a=0,n=0;n<e.length;n+=1){var o=e[n],i=Math.sqrt(Math.pow(Math.abs(o[0]-t[0]),2)+Math.pow(Math.abs(o[1]-t[1]),2)+Math.pow(Math.abs(o[2]-t[2]),2));i<r&&(r=i,a=n)}return a},v=function(e,t){var r=i["default"].lab(e),a=r.hcl(),n=r.rgb(),o=i["default"].rgb(n).lab(),s=2;return a[0]>=t.hueMin&&a[0]<=t.hueMax&&a[1]>=t.chromaMin&&a[1]<=t.chromaMax&&a[2]>=t.lightMin&&a[2]<=t.lightMax&&o[0]>=e[0]-s&&o[0]<=e[0]+s&&o[1]>=e[1]-s&&o[1]<=e[1]+s&&o[2]>=e[2]-s&&o[2]<=e[2]+s},m=function(e){var t=e.slice(0),r=[t.shift()];while(t.length>0){for(var a=r[r.length-1],n=0,o=Number.MIN_SAFE_INTEGER,i=0;i<t.length;i+=1){var s=Math.sqrt(Math.pow(Math.abs(a[0]-t[i][0]),2)+Math.pow(Math.abs(a[1]-t[i][1]),2)+Math.pow(Math.abs(a[2]-t[i][2]),2));s>o&&(o=s,n=i)}r.push(t.splice(n,1)[0])}return r},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h({},f,{},e);if(t.count<=0)return[];t.samples<3*t.count&&(t.samples=Math.ceil(3*t.count));var r=[],s=[],c=new Set,u=Math.ceil(Math.cbrt(t.samples)),p=(t.hueMax-t.hueMin)/u,d=(t.chromaMax-t.chromaMin)/u,y=(t.lightMax-t.lightMin)/u;if(p<=0)throw new Error("hueMax must be greater than hueMin!");if(d<=0)throw new Error("chromaMax must be greater than chromaMin!");if(y<=0)throw new Error("lightMax must be greater than lightMin!");for(var A=t.hueMin+p/2;A<=t.hueMax;A+=p)for(var b=t.chromaMin+d/2;b<=t.chromaMax;b+=d)for(var w=t.lightMin+y/2;w<=t.lightMax;w+=y){var x=i["default"].hcl(A,b,w).lab();v(x,t)&&c.add(x.toString())}if(c=Array.from(c),c=c.map((function(e){return e.split(",").map((function(e){return parseFloat(e)}))})),c.length<t.count)throw new Error("Not enough samples to generate palette, increase sample count.");for(var k=Math.floor(c.length/t.count),M=0;M<c.length;M+=k)if(r.push(c[M]),s.push([]),r.length>=t.count)break;for(var C=1;C<=t.quality;C+=1){for(var S=(0,n["default"])(s),E=(0,n["default"])(c),R=0;R<r.length;R+=1){var I=g(E,r[R]);S[R].push(E[I]),E.splice(I,1)}for(var O=0;O<E.length;O+=1){var T=c[O],F=g(r,T);S[F].push(c[O])}for(var B=(0,n["default"])(r),P=0;P<S.length;P+=1){var L,D=S[P],j=D.length,Y=[],U=[],X=[],Q=l(D);try{for(Q.s();!(L=Q.n()).done;){var N=L.value;Y.push(N[0]),U.push(N[1]),X.push(N[2])}}catch(H){Q.e(H)}finally{Q.f()}var V=a["default"].sum(Y)/j,J=a["default"].sum(U)/j,G=a["default"].sum(X)/j;r[P]=[V,J,G]}if((0,o["default"])(B,r))break}return r=m(r),r.map((function(e){return i["default"].lab(e)}))},A=y;t["default"]=A}}]);
//# sourceMappingURL=chunk-64852466.1649302258356.js.map