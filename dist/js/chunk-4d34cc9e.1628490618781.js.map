{"version":3,"sources":["webpack:///./src/views/editor/components/spots/index.js","webpack:///./src/api/traffic.js","webpack:///./node_modules/_file-saver@2.0.5@file-saver/dist/FileSaver.min.js","webpack:///./node_modules/_core-js@3.15.2@core-js/modules/es.set.js","webpack:///./src/views/editor/components/topo/index.vue?8a33","webpack:///src/views/editor/components/topo/index.vue","webpack:///./src/views/editor/components/topo/index.vue?f488","webpack:///./src/views/editor/components/topo/index.vue","webpack:///./src/views/editor/index.vue?91e9","webpack:///src/views/editor/index.vue","webpack:///./src/views/editor/index.vue?9c3a","webpack:///./src/views/editor/index.vue","webpack:///./src/views/editor/components/base/index.js","webpack:///./src/views/editor/utils/find2D.js","webpack:///./src/views/editor/utils/copy.js","webpack:///./src/views/editor/components/topo/index.vue?dca0","webpack:///./src/api/map.js","webpack:///./src/api/monitor.js","webpack:///./node_modules/_core-js@3.15.2@core-js/modules/es.array.flat.js","webpack:///./node_modules/_core-js@3.15.2@core-js/internals/flatten-into-array.js","webpack:///./node_modules/_core-js@3.15.2@core-js/modules/es.array.find-index.js","webpack:///./src/views/editor/const/color.js","webpack:///./src/views/editor/utils/inPath.js","webpack:///./src/views/editor/const/shape.js","webpack:///./src/views/editor/components/lines/index.js"],"names":["SVGSpot","spot","mapIns","id","x","SCALE","ORIGINX","y","ORIGINY","code","type","MapInstance","updateTraffic","data","request","post","getTraffic","get","this","b","a","autoBom","console","warn","test","Blob","c","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","collection","collectionStrong","init","arguments","length","undefined","_vm","_h","$createElement","_c","_self","staticStyle","attrs","staticClass","on","$event","_v","$router","back","options","expandTrigger","handleChange","model","value","callback","$$v","expression","junctions","_l","jun","index","key","style","color","highlightBox","_s","spots","find","s","deleteId","_e","affectsIds","item","deleteAffect","colors","setAffectId","idKeys","deleteBlock","addList","targetResult","scopedSlots","_u","fn","scope","row","domain","label","slot","JSON","stringify","deleteItem","$index","editItem","crossChange","domainVal","props","blkOption","blkVal","addCrossList","targetCrossResult","deleteCrossItem","exportJson","uploadTraffic","staticRenderFns","svgLines","plot","svgSpotsCodes","move","SVGSpots","push","forEach","keys","klen","flen","blen","jlen","fill","stroke","group","path","marker","add","off","v","weight","startX","start","startY","endX","end","endY","width","enable","draw","attr","gx","gy","mx","pageX","my","pageY","clearSelect","component","render","scale","ox","oy","w","lines","instance","WIDTH","HEIGHT","find2D","arr","a0","a1","list","flat","findIndex","count","deepCopy","obj","parse","getMapList","updateMap","deleteMap","getMapDetails","getOnlineAmr","getOnlineAmrById","getAreaMonitor","getAmrTaskInfo","pauseAmr","resumeAmr","getSchedulerMapZip","$","flattenIntoArray","toObject","toLength","toInteger","arraySpeciesCreate","proto","depthArg","O","sourceLen","A","isArray","bind","original","source","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","TypeError","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","forced","callbackfn","COLORS","inPath","point","vs","inside","xi","yi","xj","yj","intersect","SHAPE","SHAPENAME","SVGLine","line","sX","sY","eX","eY"],"mappings":"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","file":"js/chunk-4d34cc9e.1628490618781.js","sourcesContent":["import {MapInstance} from \"../base\";\n\n//2D场景，坐标需要转换为窗口坐标系统\nclass SVGSpot extends MapInstance {\n    constructor(spot) {\n        let mapIns = super();\n        this.id = spot.id;\n        this.x = spot.x* mapIns.SCALE - mapIns.ORIGINX;\n        this.y = mapIns.ORIGINY - spot.y * mapIns.SCALE;\n        this.code = spot.code;\n        this.type = spot.type;\n    }\n    id;\n    x;\n    y;\n    code;\n    type = 0;\n}\n\nexport {SVGSpot}\n","import request from '@/utils/request'\n\n// 更新交管列表\nexport function updateTraffic(data) {\n    return request.post('/traffic/block/update', data)\n}\n\n// ?areaId=2\nexport function getTraffic(data) {\n    return request.get('/traffic/block/find', data)\n}\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"background-image\":\"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJ2LTQiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzIGlkPSJ2LTMiPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuXzAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PHJlY3QgaWQ9InYtNSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0iI0FBQUFBQSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3QgaWQ9InYtNyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuXzApIi8+PC9zdmc+')\"},attrs:{\"id\":\"map-scene\",\"oncontextmenu\":\"return false\"}},[_c('div',{staticClass:\"select-box\"},[_c('el-button',{attrs:{\"type\":_vm.status===1 ? 'info' : '',\"circle\":\"\",\"round\":\"\"},on:{\"click\":function($event){_vm.status=1}}},[_vm._v(\"poly\")]),_c('hr'),_c('el-button',{attrs:{\"type\":_vm.status===2 ? 'info' : '',\"circle\":\"\",\"round\":\"\"},on:{\"click\":function($event){_vm.status=2}}},[_vm._v(\"rect\")])],1),_c('div',{staticClass:\"tool-box\"},[_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":function($event){return _vm.$router.back(-1)}}},[_vm._v(\"返回\")]),_c('h4',{staticStyle:{\"color\":\"#ff000077\"}},[_vm._v(\"未做适配，建议拖动后刷新页面，再选择编辑区域\")]),_c('div',[_c('b',[_vm._v(\"选择地图：\")]),_c('el-cascader',{staticStyle:{\"display\":\"inline-block\",\"width\":\"150px\"},attrs:{\"size\":\"small\",\"options\":_vm.options,\"props\":{ expandTrigger: 'hover' }},on:{\"change\":_vm.handleChange},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_c('div',{staticStyle:{\"margin\":\"20px 0\",\"padding\":\"30px 10px\",\"font-weight\":\"bolder\"}},[(_vm.junctions.length>0)?_c('div',[_c('h5',{staticStyle:{\"background\":\"#eeeeee\",\"margin\":\"0\",\"padding\":\"20px 0\"}},[_vm._v(\"JUNCTIONS 配置\")]),_c('div',{staticStyle:{\"margin\":\"0 auto 20px auto\",\"font-size\":\"14px\",\"cursor\":\"pointer\"}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},_vm._l((_vm.junctions),function(jun,index){return _c('div',{key:jun,staticClass:\"spot-list\",style:({color:'#6CA6CD'}),on:{\"click\":function($event){return _vm.highlightBox(jun)}}},[_vm._v(\" \"+_vm._s(index + 1)+\". \"+_vm._s(_vm.spots.find(function (s) { return s.id == jun }).code)+\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px!important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteId('JUNCTION',jun,index)}}})],1)}),0)],1)]):_vm._e(),(_vm.affectsIds.length>0)?_c('div',[_c('h5',{staticStyle:{\"background\":\"#eeeeee\",\"margin\":\"0\",\"padding\":\"20px 0\"}},[_vm._v(\"AFFECTS 配置\")]),_vm._l((_vm.affectsIds),function(item,index){return _c('div',{key:index,staticStyle:{\"margin\":\"0 0 10px 0\"},on:{\"mouseenter\":function($event){return _vm.highlightBox(item.affectsIds)}}},[_c('el-card',{attrs:{\"shadow\":\"hover\"}},[_c('h5',[_c('i',{staticClass:\"el-icon el-icon-box\"}),_vm._v(\" \"+_vm._s('Affect' + (index + 1))+\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"top\":\"-20px\",\"position\":\"relative\"},attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteAffect(index)}}})],1),(!item.id)?_c('div',[_vm._l((item.affectsIds),function(i,l){return [_c('transition',{key:l,attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"spot-list\",style:({color:_vm.colors[index]}),on:{\"click\":function($event){return _vm.highlightBox(i)}}},[_vm._v(\" \"+_vm._s(l + 1)+\". \"+_vm._s(_vm.spots.find(function (s) { return s.id == i }).code)+\" \"),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"设为目标点\",\"placement\":\"left\"}},[_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px!important\",\"margin-left\":\"20px\"},attrs:{\"type\":\"success\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-check\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.setAffectId(i,index,l)}}})],1),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px!important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteId('AFFECT',i,index,l)}}})],1)])]})],2):_c('div',{staticClass:\"affect-box\",staticStyle:{\"height\":\"auto\"},style:({color:_vm.colors[index]})},[_c('div',{staticClass:\"spot-list base-spot\",on:{\"click\":function($event){return _vm.highlightBox(item.id)}}},[_vm._v(\" \"+_vm._s(_vm.spots.find(function (s) { return s.id == item.id }).code)+\" \")]),_c('div',{staticClass:\"affect-spots\"},_vm._l((item.affectsIds),function(i,l){return _c('div',{key:l,staticClass:\"affect-line\"},[_c('div',{staticClass:\"spot-list affect-spot\",on:{\"click\":function($event){return _vm.highlightBox(i)}}},[_vm._v(_vm._s(_vm.spots.find(function (s) { return s.id == i }).code)+\" \")]),_c('div',{staticClass:\"affect-spot-delete\"},[_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px!important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteId('AFFECT',i,index,l)}}})],1)])}),0)])])],1)})],2):_vm._e(),(_vm.idKeys.length>0)?_c('div',[_c('h5',{staticStyle:{\"background\":\"#eeeeee\",\"margin\":\"0\",\"padding\":\"20px 0\"}},[_vm._v(\"BLOCKS 配置\")]),_vm._l((_vm.idKeys),function(item,index){return _c('div',{key:index,staticStyle:{\"margin\":\"0 0 10px 0\"},on:{\"mouseenter\":function($event){return _vm.highlightBox(item)}}},[_c('el-card',{attrs:{\"shadow\":\"hover\"}},[_c('h5',[_c('i',{staticClass:\"el-icon el-icon-box\"}),_vm._v(\" \"+_vm._s('Block' + (index + 1))+\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"top\":\"-20px\",\"position\":\"relative\"},attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteBlock(index)}}})],1),_vm._l((item),function(i,l){return [_c('transition',{key:l,attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"spot-list\",style:({color:_vm.colors[index]}),on:{\"click\":function($event){return _vm.highlightBox(i)}}},[_vm._v(\" \"+_vm._s(l + 1)+\". \"+_vm._s(_vm.spots.find(function (s) { return s.id == i }).code)+\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px!important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteId('BLOCK',i,index,l)}}})],1)])]})],2)],1)})],2):_vm._e()]),_c('div',{staticStyle:{\"margin-top\":\"50px\"}},[(_vm.value.length>0)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"plain\":\"\"},on:{\"click\":_vm.addList}},[_vm._v(\"添加到列表 \")]):_vm._e()],1),_c('div',{staticStyle:{\"margin\":\"30px auto 50px\"}},[_c('h5',{staticStyle:{\"text-align\":\"left\"}},[_vm._v(\"地图交管配置\")]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"border\":\"\",\"data\":_vm.targetResult}},[_c('el-table-column',{attrs:{\"prop\":\"domain\",\"label\":\"DOMAIN\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.options.find(function (a) { return a.value === scope.row.domain; }).label)+\" \")]}}])}),_c('el-table-column',{attrs:{\"width\":\"60px\",\"prop\":\"blocks\",\"label\":\"BLK\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"placement\":\"left\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((scope.row.blocks),function(b,i){return _c('p',{key:i},[_vm._v(_vm._s(JSON.stringify(b)))])}),0),_c('el-button',{staticStyle:{\"width\":\"20px\",\"padding\":\"3px!important\"},attrs:{\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-more\",\"circle\":\"\"}})],1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"编辑\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"padding\":\"3px!important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(scope.$index)}}}),_c('el-button',{staticStyle:{\"margin-left\":\"5px\",\"padding\":\"3px!important\"},attrs:{\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.editItem(scope.$index)}}})]}}])})],1)],1),_c('div',{staticStyle:{\"margin-top\":\"50px\",\"text-align\":\"left\"}},[_c('h5',[_vm._v(\"跨地图交管配置\")]),_c('div',{},[_c('div',{staticStyle:{\"margin\":\"5px\"}},[_c('b',{staticStyle:{\"display\":\"inline-block\",\"width\":\"80px\"}},[_vm._v(\"domain: \")]),_c('el-select',{attrs:{\"size\":\"mini\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.crossChange},model:{value:(_vm.domainVal),callback:function ($$v) {_vm.domainVal=$$v},expression:\"domainVal\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('div',{staticStyle:{\"margin\":\"5px\"}},[_c('b',{staticStyle:{\"display\":\"inline-block\",\"width\":\"80px\"}},[_vm._v(\"blk: \")]),_c('el-cascader',{attrs:{\"show-all-levels\":false,\"props\":_vm.props,\"options\":_vm.blkOption,\"size\":\"mini\",\"collapse-tags\":\"\"},model:{value:(_vm.blkVal),callback:function ($$v) {_vm.blkVal=$$v},expression:\"blkVal\"}})],1)]),_c('div',{staticStyle:{\"margin\":\"10px\",\"text-align\":\"center\"}},[(_vm.domainVal)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"plain\":\"\"},on:{\"click\":_vm.addCrossList}},[_vm._v(\"添加到列表 \")]):_vm._e()],1),_c('p'),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"border\":\"\",\"data\":_vm.targetCrossResult}},[_c('el-table-column',{attrs:{\"prop\":\"domain\",\"label\":\"DOMAIN\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.options.find(function (a) { return a.value === scope.row.domain; }).label)+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"blocks\",\"label\":\"BLK\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"placement\":\"left\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((scope.row.blocks),function(b,i){return _c('p',{key:i},[_vm._v(_vm._s(JSON.stringify(b)))])}),0),_c('el-button',{staticStyle:{\"width\":\"20px\",\"padding\":\"3px!important\"},attrs:{\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-more\",\"circle\":\"\"}})],1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"编辑\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"padding\":\"3px!important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteCrossItem(scope.$index)}}})]}}])})],1)],1),_c('div',{staticStyle:{\"margin-top\":\"50px\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":_vm.exportJson}},[_vm._v(\"生成配置\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":_vm.uploadTraffic}},[_vm._v(\"上传同步\")])],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div id=\"map-scene\" oncontextmenu=\"return false\"\n             style=\"background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJ2LTQiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzIGlkPSJ2LTMiPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuXzAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PHJlY3QgaWQ9InYtNSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0iI0FBQUFBQSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3QgaWQ9InYtNyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuXzApIi8+PC9zdmc+');\">\n\n            <div class=\"select-box\">\n                <el-button :type=\"status===1 ? 'info' : ''\" circle @click=\"status=1\" round>poly</el-button>\n                <hr>\n                <el-button :type=\"status===2 ? 'info' : ''\" circle @click=\"status=2\" round>rect</el-button>\n            </div>\n\n            <div class=\"tool-box\">\n\n<!--                <div style=\"margin-bottom:30px\">-->\n<!--                    <el-popover placement=\"right\" width=\"300\" trigger=\"hover\">-->\n<!--                        <div style=\"font-size:12px;text-align:left\">-->\n<!--                            <h5>支持</h5>-->\n<!--                            <ul style=\"line-height: 25px\">-->\n<!--                                <li>选择一个点表示 <em>junctions</em></li>-->\n<!--                                <li>选择多个点表示 <em>block</em></li>-->\n<!--                                <li><em>block</em> 允许重合的公共点位存在 颜色用 <span-->\n<!--                                    style=\"display: inline-block;width:10px;height:10px;background:#333333;border-radius: 10px;\"></span>-->\n<!--                                    表示-->\n<!--                                </li>-->\n<!--                                &lt;!&ndash;                <li><em>block</em> 新增点位操作需要选择当前 <em>block</em> 中的至少一个点和 <em>待配置点</em></li>&ndash;&gt;-->\n<!--                                <li>绝对路径导入 <em>blockConfig.json</em></li>-->\n<!--                                <li>导出 <em>blockConfig.json</em> 文件</li>-->\n<!--                                <li>导入的数据必须满足校验条件：<em>junctions</em> 和 <em>block</em> 独立 ，横纵向之间也不能存在重复点位</li>-->\n<!--                                <li><em>junctions</em> 和 <em>待配置点</em> 的合并策略(全部转为 <em>junctions</em>)</li>-->\n<!--                                <li>禁止 <em>blocks</em> 与 <em>blocks</em> 或者 <em>junctions</em> 的合并</li>-->\n<!--                                <li style=\"text-decoration: underline\"><em>affects</em> 在选择多个点位后，还需要选定目标点</li>-->\n<!--                            </ul>-->\n<!--                        </div>-->\n<!--                        <el-button slot=\"reference\" icon=\"el-icon-finished\" type=\"primary\" size=\"mini\"-->\n<!--                                   circle></el-button>-->\n<!--                    </el-popover>-->\n<!--                    <h3>地图编辑管理</h3>-->\n<!--                    <p style=\"font-size:12px;\">-->\n<!--                        {{ fileName ? fileName : '请选择文件' }}-->\n<!--                        <input id=\"fileElement\" style=\"display: none\" @change=\"readConfFile\" type=\"file\">-->\n<!--                        <el-button @click=\"importJson\" size=\"mini\" type=\"primary\">选择上传</el-button>-->\n<!--                    </p>-->\n<!--                </div>-->\n                <el-button @click=\"$router.back(-1)\" plain>返回</el-button>\n                <h4 style=\"color:#ff000077\">未做适配，建议拖动后刷新页面，再选择编辑区域</h4>\n                <div>\n                    <b>选择地图：</b>\n                    <el-cascader\n                        style=\"display: inline-block;width:150px\"\n                        size=\"small\"\n                        v-model=\"value\"\n                        :options=\"options\"\n                        :props=\"{ expandTrigger: 'hover' }\"\n                        @change=\"handleChange\"></el-cascader>\n                </div>\n<!--                <div style=\"margin:20px 0;padding:20px 10px;font-weight:bolder;border:1px solid #ccc;text-align:left\">-->\n<!--                    当前配置类型：-->\n<!--                    <el-select v-model=\"typeVal\" size=\"mini\">-->\n<!--                        <el-option-->\n<!--                            v-for=\"item in types\"-->\n<!--                            :key=\"item.value\"-->\n<!--                            :label=\"item.label\"-->\n<!--                            :value=\"item.value\">-->\n<!--                        </el-option>-->\n<!--                    </el-select>-->\n<!--                </div>-->\n                <div style=\"margin:20px 0;padding:30px 10px;font-weight:bolder;\">\n                    <div v-if=\"junctions.length>0\">\n                        <h5 style=\"background:#eeeeee;margin:0;padding:20px 0\">JUNCTIONS 配置</h5>\n                        <div style=\"margin:0 auto 20px auto;font-size:14px;cursor:pointer\">\n                            <el-card shadow=\"never\">\n                                <div v-for=\"(jun,index) in junctions\" :key=\"jun\" class=\"spot-list\"\n                                     @click=\"highlightBox(jun)\" :style=\"{color:'#6CA6CD'}\">\n                                    {{ index + 1 }}. {{\n                                        spots.find(s => {\n                                            return s.id == jun\n                                        }).code\n                                    }}\n                                    <el-button @click=\"deleteId('JUNCTION',jun,index)\" type=\"danger\"\n                                               style=\"float:right;padding:3px!important;\" plain size=\"mini\"\n                                               icon=\"el-icon-delete\"\n                                               circle></el-button>\n                                </div>\n                            </el-card>\n                        </div>\n                    </div>\n                    <div v-if=\"affectsIds.length>0\">\n                        <h5 style=\"background:#eeeeee;margin:0;padding:20px 0\">AFFECTS 配置</h5>\n                        <div @mouseenter=\"highlightBox(item.affectsIds)\" v-for=\"(item,index) in affectsIds\" :key=\"index\"\n                             style=\"margin:0 0 10px 0\">\n\n                            <el-card shadow=\"hover\">\n                                <h5>\n                                    <i class=\"el-icon el-icon-box\"> </i>\n                                    {{ 'Affect' + (index + 1) }}\n                                    <el-button @click=\"deleteAffect(index)\" size=\"mini\" icon=\"el-icon-delete\"\n                                               type=\"danger\"\n                                               style=\"float:right;top:-20px;position:relative\"></el-button>\n                                </h5>\n                                <div v-if=\"!item.id\">\n                                    <template v-for=\"(i,l) in item.affectsIds\">\n                                        <transition name=\"fade\" :key=\"l\">\n                                            <div class=\"spot-list\" @click=\"highlightBox(i)\"\n                                                 :style=\"{color:colors[index]}\">\n                                                {{ l + 1 }}. {{\n                                                    spots.find(s => {\n                                                        return s.id == i\n                                                    }).code\n                                                }}\n                                                <el-tooltip class=\"item\" effect=\"dark\" content=\"设为目标点\" placement=\"left\">\n                                                    <el-button @click=\"setAffectId(i,index,l)\" type=\"success\"\n                                                               style=\"float:right;padding:3px!important;margin-left:20px\"\n                                                               plain size=\"mini\"\n                                                               icon=\"el-icon-check\" circle></el-button>\n                                                </el-tooltip>\n\n                                                <el-button @click=\"deleteId('AFFECT',i,index,l)\" type=\"danger\"\n                                                           style=\"float:right;padding:3px!important;\" plain size=\"mini\"\n                                                           icon=\"el-icon-delete\" circle></el-button>\n                                            </div>\n                                        </transition>\n                                    </template>\n                                </div>\n\n                                <div v-else class=\"affect-box\" style=\"height:auto\" :style=\"{color:colors[index]}\">\n                                    <div class=\"spot-list base-spot\" @click=\"highlightBox(item.id)\">\n                                        {{\n                                            spots.find(s => {\n                                                return s.id == item.id\n                                            }).code\n                                        }}\n                                    </div>\n                                    <div class=\"affect-spots\">\n                                        <div class=\"affect-line\" v-for=\"(i,l) in item.affectsIds\" :key=\"l\">\n                                            <div class=\"spot-list affect-spot\" @click=\"highlightBox(i)\">{{\n                                                    spots.find(s => {\n                                                        return s.id == i\n                                                    }).code\n                                                }}\n                                            </div>\n                                            <div class=\"affect-spot-delete\">\n                                                <el-button @click=\"deleteId('AFFECT',i,index,l)\" type=\"danger\"\n                                                           style=\"float:right;padding:3px!important;\" plain size=\"mini\"\n                                                           icon=\"el-icon-delete\" circle></el-button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </el-card>\n                        </div>\n                    </div>\n                    <div v-if=\"idKeys.length>0\">\n                        <h5 style=\"background:#eeeeee;margin:0;padding:20px 0\">BLOCKS 配置</h5>\n                        <div @mouseenter=\"highlightBox(item)\" v-for=\"(item,index) in idKeys\" :key=\"index\"\n                             style=\"margin:0 0 10px 0\">\n                            <el-card shadow=\"hover\">\n                                <h5>\n                                    <i class=\"el-icon el-icon-box\"> </i>\n                                    {{ 'Block' + (index + 1) }}\n                                    <el-button @click=\"deleteBlock(index)\" size=\"mini\" icon=\"el-icon-delete\"\n                                               type=\"danger\"\n                                               style=\"float:right;top:-20px;position:relative\"></el-button>\n                                </h5>\n                                <template v-for=\"(i,l) in item\">\n                                    <transition name=\"fade\" :key=\"l\">\n                                        <div class=\"spot-list\" @click=\"highlightBox(i)\" :style=\"{color:colors[index]}\">\n                                            {{ l + 1 }}. {{\n                                                spots.find(s => {\n                                                    return s.id == i\n                                                }).code\n                                            }}\n                                            <el-button @click=\"deleteId('BLOCK',i,index,l)\" type=\"danger\"\n                                                       style=\"float:right;padding:3px!important;\" plain size=\"mini\"\n                                                       icon=\"el-icon-delete\" circle></el-button>\n                                        </div>\n                                    </transition>\n                                </template>\n                            </el-card>\n                        </div>\n                    </div>\n                </div>\n\n\n                <div style=\"margin-top:50px\">\n\n                    <!--          <el-button @click=\"addList\" size=\"mini\" v-if=\"junctions.length>0 || idKeys.length>0\" type=\"primary\"-->\n                    <el-button @click=\"addList\" size=\"mini\" v-if=\"value.length>0\" type=\"primary\"\n                               icon=\"el-icon-plus\"\n                               plain>添加到列表\n                    </el-button>\n                </div>\n                <div style=\"margin: 30px auto 50px;\">\n                    <h5 style=\"text-align:left\">地图交管配置</h5>\n                    <el-table\n                        size=\"mini\"\n                        border\n                        :data=\"targetResult\"\n                        style=\"width: 100%\">\n                        <el-table-column\n                            prop=\"domain\"\n                            label=\"DOMAIN\">\n                            <template slot-scope=\"scope\">\n                                {{ options.find(a => a.value === scope.row.domain).label }}\n                            </template>\n                        </el-table-column>\n                        <!--                        <el-table-column-->\n                        <!--                            width=\"60px\"-->\n                        <!--                            prop=\"junctions\"-->\n                        <!--                            label=\"JUN\">-->\n                        <!--                            <template slot-scope=\"scope\">-->\n                        <!--                                <el-tooltip placement=\"left\">-->\n                        <!--                                    <div slot=\"content\">-->\n                        <!--                                        <p>{{ scope.row.junctions }}</p>-->\n                        <!--                                    </div>-->\n                        <!--                                    <el-button style=\"width:20px;padding:3px!important;\" plain size=\"mini\"-->\n                        <!--                                               icon=\"el-icon-more\"-->\n                        <!--                                               circle></el-button>-->\n                        <!--                                </el-tooltip>-->\n                        <!--                            </template>-->\n                        <!--                        </el-table-column>-->\n                        <!--                        <el-table-column-->\n                        <!--                            width=\"60px\"-->\n                        <!--                            prop=\"affects\"-->\n                        <!--                            label=\"AFT\">-->\n                        <!--                            <template slot-scope=\"scope\">-->\n                        <!--                                <el-tooltip placement=\"left\">-->\n                        <!--                                    <div slot=\"content\">-->\n                        <!--                                        <p :key=\"i\" v-for=\"(a,i) in scope.row.affects\">{{ JSON.stringify(a) }}</p>-->\n                        <!--                                    </div>-->\n                        <!--                                    <el-button style=\"width:20px;padding:3px!important;\" plain size=\"mini\"-->\n                        <!--                                               icon=\"el-icon-more\"-->\n                        <!--                                               circle></el-button>-->\n                        <!--                                </el-tooltip>-->\n                        <!--                            </template>-->\n                        <!--                        </el-table-column>-->\n                        <el-table-column\n                            width=\"60px\"\n                            prop=\"blocks\"\n                            label=\"BLK\">\n                            <template slot-scope=\"scope\">\n                                <el-tooltip placement=\"left\">\n                                    <div slot=\"content\">\n                                        <p v-for=\"(b,i) in scope.row.blocks\" :key=\"i\">{{ JSON.stringify(b) }}</p>\n                                    </div>\n                                    <el-button style=\"width:20px;padding:3px!important;\" plain size=\"mini\"\n                                               icon=\"el-icon-more\"\n                                               circle></el-button>\n                                </el-tooltip>\n                            </template>\n                        </el-table-column>\n                        <el-table-column\n                            label=\"编辑\">\n                            <template slot-scope=\"scope\">\n                                <el-button @click=\"deleteItem(scope.$index)\" type=\"danger\"\n                                           style=\"padding:3px!important;\" plain\n                                           size=\"mini\" icon=\"el-icon-delete\" circle></el-button>\n                                <el-button @click=\"editItem(scope.$index)\"\n                                           style=\"margin-left:5px;padding:3px!important;\" plain\n                                           size=\"mini\" icon=\"el-icon-edit\" circle></el-button>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </div>\n                <div style=\"margin-top:50px;text-align:left\">\n                    <h5>跨地图交管配置</h5>\n\n                    <div style=\"\">\n                        <div style=\"margin:5px;\">\n                            <b style=\"display:inline-block;width:80px;\">domain: </b>\n                            <el-select v-model=\"domainVal\" @change=\"crossChange\" size=\"mini\"\n                                       placeholder=\"请选择\">\n                                <el-option\n                                    v-for=\"item in options\"\n                                    :key=\"item.value\"\n                                    :label=\"item.label\"\n                                    :value=\"item.value\">\n                                </el-option>\n                            </el-select>\n                        </div>\n                        <!--            <div style=\"margin:5px;\">-->\n                        <!--              <b style=\"display:inline-block;width:80px;\">jun: </b>-->\n                        <!--              <el-cascader :show-all-levels=\"false\" v-model=\"junVal\" :props=\"props\"-->\n                        <!--                           :options=\"junOption\"-->\n                        <!--                           size=\"mini\" collapse-tags></el-cascader>-->\n                        <!--            </div>-->\n                        <div style=\"margin:5px;\">\n                            <b style=\"display:inline-block;width:80px;\">blk: </b>\n                            <el-cascader :show-all-levels=\"false\" v-model=\"blkVal\" :props=\"props\"\n                                         :options=\"blkOption\"\n                                         size=\"mini\" collapse-tags></el-cascader>\n                        </div>\n                    </div>\n\n                    <div style=\"margin:10px;text-align: center\">\n                        <el-button @click=\"addCrossList\" v-if=\"domainVal\" size=\"mini\" type=\"primary\" icon=\"el-icon-plus\"\n                                   plain>添加到列表\n                        </el-button>\n                    </div>\n                    <p></p>\n                    <el-table\n                        size=\"mini\"\n                        border\n                        :data=\"targetCrossResult\"\n                        style=\"width: 100%\">\n                        <el-table-column\n                            prop=\"domain\"\n                            label=\"DOMAIN\">\n                            <template slot-scope=\"scope\">\n                                {{ options.find(a => a.value === scope.row.domain).label }}\n                            </template>\n                        </el-table-column>\n                        <!--            <el-table-column-->\n                        <!--              prop=\"junctions\"-->\n                        <!--              label=\"JUN\">-->\n                        <!--              <template slot-scope=\"scope\">-->\n                        <!--                <el-tooltip placement=\"left\">-->\n                        <!--                  <div slot=\"content\">-->\n                        <!--                    <p>{{ scope.row.junctions }}</p>-->\n                        <!--                  </div>-->\n                        <!--                  <el-button style=\"width:20px;padding:3px!important;\" plain size=\"mini\" icon=\"el-icon-more\"-->\n                        <!--                             circle></el-button>-->\n                        <!--                </el-tooltip>-->\n                        <!--              </template>-->\n                        <!--            </el-table-column>-->\n                        <el-table-column\n                            prop=\"blocks\"\n                            label=\"BLK\">\n                            <template slot-scope=\"scope\">\n                                <el-tooltip placement=\"left\">\n                                    <div slot=\"content\">\n                                        <p :key=\"i\" v-for=\"(b,i) in scope.row.blocks\">{{ JSON.stringify(b) }}</p>\n                                    </div>\n                                    <el-button style=\"width:20px;padding:3px!important;\" plain size=\"mini\"\n                                               icon=\"el-icon-more\"\n                                               circle></el-button>\n                                </el-tooltip>\n                            </template>\n                        </el-table-column>\n                        <el-table-column\n                            label=\"编辑\">\n                            <template slot-scope=\"scope\">\n                                <el-button @click=\"deleteCrossItem(scope.$index)\" type=\"danger\"\n                                           style=\"padding:3px!important;\" plain\n                                           size=\"mini\" icon=\"el-icon-delete\" circle></el-button>\n\n                                <!--                <el-button @click=\"editCrossItem(scope.$index)\" style=\"margin-left:5px;padding:3px!important;\" plain-->\n                                <!--                           size=\"mini\" icon=\"el-icon-edit\" circle> </el-button>-->\n                            </template>\n                        </el-table-column>\n                    </el-table>\n\n                </div>\n                <div style=\"margin-top:50px\">\n                    <el-button size=\"small\" @click=\"exportJson\" type=\"danger\">生成配置</el-button>\n                    <el-button size=\"small\" @click=\"uploadTraffic\" type=\"success\">上传同步</el-button>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n<script>\n\nimport SVG from 'svg.js';\n// import {request} from \"../../api/request\";\nimport {MapInstance} from \"../base\";\nimport {SVGLine} from '../lines';\nimport {SVGSpot} from '../spots';\nimport deepCopy from \"../../utils/copy\";\nimport inPath from \"../../utils/inPath\";\nimport COLORS from \"../../const/color\";\nimport {SHAPE, SHAPENAME} from \"../../const/shape\";\nimport find2D from \"../../utils/find2D\";\nimport FileSaver from 'file-saver';\nimport {getMapDetails} from \"../../../../api/map\";\nimport {getAreaMonitor} from \"../../../../api/monitor\";\nimport {getTraffic, updateTraffic} from \"../../../../api/traffic\";\n// import {uploadTrafficData} from \"../../../../../api/editor\";\n\nexport default {\n    data() {\n        return {\n            value: [],\n            options: [],\n            typeVal: 0,\n            types: [{value: 0, label: 'JUNCTIONS / BLOCKS'}, {value: 1, label: 'AFFECTS'}], //junctions affects blocks\n            affectsIds: [], //二位数组\n            draw: null,\n            group: null,\n            resultIdx: undefined, //编辑的索引值\n            targetResult: [],\n            targetResultKey: [], //存放对应的 domainID-mapId 用于判断targetResult中是否已存在对应的数据  更新 or 替换\n            targetCrossResult: [],\n            //blocks 定义具体的junction和block，保证每个元素相互之间不能有相同的子元素\n            junctions: [],//\n            idKeys: [],//blocks  spots ids后续会导出对应的json文件\n            spots: undefined, //DOM中对应的SVGSpot对象，后续添加UI交互\n            SVGSpots: undefined,\n            fileName: '', //configJson URL\n            junOption: [],\n            blkOption: [],\n            domainVal: '',\n            junVal: [],\n            blkVal: [],\n            props: {\n                multiple: true,\n                lazy: true,\n                lazyLoad(node, resolve) {\n                    const {level, value} = node;\n                    if (level === 1) {\n                        getMapDetails({mapId: value}).then(res => {\n                            const {Vertex} = res['data'];\n                            let spots = Vertex.map((v) => v['vertexPo']);\n                            const nodes = spots.map(s => ({\n                                value: s.id,\n                                label: s.code,\n                                leaf: level >= 1\n                            }));\n                            resolve(nodes);\n                        })\n                    }\n                }\n            },\n            status: 2,\n            gx: 0,\n            gy: 0,\n            rectEnable: false,\n            rectGroup: null,\n            areaId:\"\",  //当前选中地图的所属区域\n        }\n    },\n    computed: {\n        colors() {\n            return COLORS\n        },\n    },\n    created() {\n        // if(this.$)\n        const {mode} = this.$route.query;\n        if (mode === 'simple') {\n            this.simpleMode = true\n        }\n        getAreaMonitor().then(res => {\n            console.log(res)\n            this.options = res.data.map(item => ({\n                value: item['areaPo'].id,\n                label: item['areaPo'].name,\n                children: item['topologyMapPos'].length > 0 && item['topologyMapPos'].map((map) => ({\n                    value: map['id'],\n                    label: map['name']\n                }))\n            }))\n        })\n    },\n    methods: {\n        crossChange(val) {\n            this.junVal = [];\n            this.blkVal = [];\n            this.junOption = this.options.find(d => d.value === val)['children'];\n            this.blkOption = this.options.find(d => d.value === val)['children'];\n        },\n        // lazyLoad(node, resolve) {\n        //     const {level, value} = node;\n        //     console.log(value)\n        //     if (level === 1) {\n        //         // request.get(\"/mapManagement/getMapDetailByMapId?mapId=\" + value).then(res => {\n        //         //     let nodes = res.mapInfo.spots.map(s => ({\n        //         //         value: s.id,\n        //         //         label: s.code,\n        //         //         leaf: level >= 1,\n        //         //         options: []\n        //         //     }));\n        //         //     resolve(nodes);\n        //         resolve(1)\n        //         // })\n        //     }\n        // },\n        editCrossItem() {\n            // idx\n            // let { domain, junMaps, junctions, blkMaps, blocks } = this.targetCrossResult[idx];\n            // this.domainVal = domain;\n            // this.junOption = this.options.find(d => d.value === domain)['children'];\n            // this.blkOption = this.options.find(d => d.value === domain)['children'];\n            // this.junVal = junMaps.map((j,i) => ([j,junctions[i]]));\n            // this.blkVal = blkMaps.map((b,i) => ([b,blocks[i]]));\n            // console.log(this.junVal,this.blkVal)\n            // this.deleteCrossItem(idx);\n        },\n        deleteCrossItem(val) {\n            this.targetCrossResult.splice(val, 1);\n        },\n        addCrossList() {\n\n            if (this.domainVal) {\n                this.targetCrossResult.push({\n                    domain: this.domainVal,\n                    junMaps: this.junVal.map(j => j[0]),\n                    junctions: this.junVal.map(j => j[1]),\n                    blkMaps: this.blkVal.map(b => b[0]),\n                    blocks: [{\n                        name: \"crossBlocks\" + this.targetCrossResult.length,\n                        ids: this.blkVal.map(b => b[1])\n                    }],\n                    blkVal: this.blkVal,\n                });\n                this.domainVal = '';\n                this.junVal = [];\n                this.blkVal = [];\n                this.junOption = [];\n                this.blkOption = [];\n\n            } else {\n                this.$message({\n                    type: 'info',\n                    message: 'domain 为空'\n                });\n            }\n        },\n        deleteItem(idx) {\n            this.$confirm('确认删除这项配置吗 ?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                this.targetResultKey.splice(idx, 1);\n                this.targetResult.splice(idx, 1);\n                this.$message({\n                    type: 'success',\n                    message: '删除成功!'\n                });\n\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消'\n                });\n            });\n\n        },\n        editItem(idx) {\n            this.resultIdx = idx;\n            this.value = this.targetResultKey[idx].split('-').map(id => Number(id));\n            this.handleChange(this.value);\n        },\n        addList() {\n            let k = this.value.join('-');\n            //需要做校验 保证 affects 格式正确\n            let flag = false;\n            this.affectsIds.forEach(v => {\n                if (!v.id) {\n                    flag = true\n                }\n            });\n            if (flag) {\n                this.$message.error('affects 需要指定目标点');\n                return\n            }\n            let result = deepCopy({\n                domain: this.value[0],\n                map: this.value[1],\n                junctions: this.junctions,\n                affects: this.affectsIds,\n                blocks: this.idKeys.map((ids, index) => {\n                    return {\n                        \"name\": \"block\" + (index + 1),\n                        \"ids\": ids\n                    }\n                })\n            });\n            if (this.targetResultKey.find(t => t === k)) {\n                this.$confirm('是否更新当前数据?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.targetResult.splice(this.targetResultKey.findIndex(t => t === k), 1, result);\n                    this.$message({\n                        type: 'success',\n                        message: '更新成功!'\n                    });\n\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消'\n                    });\n                });\n            } else {\n                this.targetResultKey.push(k);\n                this.targetResult.push(result)\n            }\n\n        },\n        format2Front(data) {\n            console.log(this.value, data)\n            // 将数据拆分为是否跨地图两类\n            const one = [];\n            const more = []; // 跨地图\n\n            data.forEach(d => {\n                // MAP ID\n                if (new Set(d['ids'].map(v => v[0])).size === 1) {\n                    const mapId = d['ids'][0][0];\n                    const r = one.find(o => o.map === mapId);\n                    if (r) {\n                        r['blocks'].push({\n                            \"name\": d['name'],\n                            \"ids\": d['ids'].map(v => v[1])\n                        })\n                    } else {\n                        one.push({\n                            \"domain\": this.value[0],\n                            \"map\": mapId,\n                            \"junctions\": [],\n                            \"affects\": [],\n                            \"blocks\": [\n                                {\n                                    \"name\": d['name'],\n                                    \"ids\": d['ids'].map(v => v[1])\n                                }\n                            ]\n                        })\n                    }\n\n                } else {\n                    more.push({\n                        \"domain\": this.value[0],\n                        \"junMaps\": [],\n                        \"junctions\": [],\n                        \"blkMaps\": d['ids'].map(v => v[0]),\n                        \"blocks\": [\n                            {\n                                \"name\": d['name'],\n                                \"ids\": d['ids'].map(v => v[1])\n                            }\n                        ],\n                        \"blkVal\": d['ids']\n                    })\n                }\n            })\n            const res = one.concat(more);\n            return res;\n        },\n        handleChange(val) {\n            this.areaId = val[0]\n            let _vm = this;\n            Promise.resolve(val[1] && this.loadData(val[1])).then(() => {\n                let idx = _vm.targetResultKey.findIndex(k => k === _vm.value.join('-'));\n                if (_vm.SVGSpots && _vm.spots && idx > -1) {\n                    let result = _vm.targetResult[idx];\n                    _vm.junctions = result['junctions'] || [];\n                    _vm.idKeys = result['blocks'].map(ele => ele['ids']) || [];\n                    _vm.affectsIds = result['affects'] || [];\n                }\n                _vm.affectsIds.forEach((v, index) => {\n                    if (v.id) {\n                        _vm.SVGSpots[v.id].animate(500).scale(2).fill(COLORS[index % COLORS.length]).animate(500).scale(1);\n                    }\n                    v['affectsIds'].forEach(id => {\n                        _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[index % COLORS.length]).animate(500).scale(1);\n                    })\n                });\n                _vm.junctions.forEach(id => {\n                    _vm.SVGSpots[id].fill('#FFFFFF').stroke({\n                        width: 2,\n                        color: '#6CA6CD'\n                    }).animate(500).scale(2).animate(500).scale(1);\n                });\n                _vm.idKeys.forEach((ids, index) => {\n                    ids.forEach(id => {\n                        let arr = this.idKeys.flat(1);\n                        let pubIds = arr.filter(i => {\n                            return i === id\n                        });\n                        if (pubIds.length > 1) {\n                            this.SVGSpots[id].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n                        } else {\n                            if (pubIds.length === 1) {\n                                let i = find2D(pubIds[0], this.idKeys);\n                                this.SVGSpots[pubIds[0]].animate(500).scale(2).fill(COLORS[i[0] % COLORS.length]).animate(500).scale(1);\n                            } else {\n                                _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[index % COLORS.length]).animate(500).scale(1);\n                            }\n                        }\n                    })\n                });\n                // load blocks\n                getTraffic({areaId: val[0]}).then(r => {\n                    const content = this.format2Front(r['data'] ? r['data']['blocks'] : []);\n                    this.targetResultKey = [];\n                    this.targetResult = [];\n                    this.targetCrossResult = [];\n                    //重新导入要重置点位样式\n                    try {\n                        content.forEach(ele => {\n                            if (ele['map']) {\n                                this.targetResult.push(ele);\n                                this.targetResultKey.push(ele['domain'] + '-' + ele['map']);\n                            } else {\n                                this.targetCrossResult.push(ele);\n                            }\n                        });\n                        this.targetCrossResult = deepCopy(this.targetCrossResult);\n                        // this.idKeys = [];\n                        this.junctions = [];\n                        this.affectsIds = [];\n                    } catch (err) {\n                        this.$message.error(\"配置文件有误，请核对点位\");\n                    } finally {\n                        document.getElementById('fileElement').value = '';\n                    }\n                })\n            })\n        },\n        readConfFile(e) {\n            let file = e.target.files[0];\n            this.fileName = file.name;\n            if (file.type === 'application/json') {\n                let f = new Blob([file], {type: 'application/json'});\n                let reader = new FileReader();\n                reader.onload = () => {\n                    let content = JSON.parse(reader.result);//内容就在这里\n                    this.targetResultKey = [];\n                    this.targetResult = [];\n                    this.targetCrossResult = [];\n                    //重新导入要重置点位样式\n                    try {\n                        content.forEach(ele => {\n                            if (ele['map']) {\n                                this.targetResult.push(ele);\n                                this.targetResultKey.push(ele['domain'] + '-' + ele['map']);\n                            } else {\n                                this.targetCrossResult.push(ele);\n                            }\n                        });\n                        this.targetCrossResult = deepCopy(this.targetCrossResult);\n                        this.idKeys = [];\n                        this.junctions = [];\n                        this.affectsIds = [];\n                    } catch (err) {\n                        this.$message.error(\"配置文件有误，请核对点位\");\n                    } finally {\n                        document.getElementById('fileElement').value = '';\n                    }\n                };\n                reader.readAsText(f);\n            } else {\n                this.$message.error('文件类型有误');\n            }\n        },\n        highlightBox(arg) {\n            if (arg instanceof Array) {\n                arg.forEach(i => {\n                    this.SVGSpots[i].animate(500).scale(2).animate(500).scale(1);\n                })\n            } else {\n                this.SVGSpots[arg].animate(500).scale(2).animate(500).scale(1);\n            }\n        },\n        importJson() {\n            document.getElementById('fileElement').click();\n        },\n        deleteBlock(index) {\n            let target = this.idKeys.splice(index, 1);\n            target[0].forEach(id => {\n                let arr = this.idKeys.flat(1);\n                let pubIds = arr.filter(i => {\n                    return i === id\n                });\n                if (pubIds.length > 1) {\n                    this.SVGSpots[id].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n                } else {\n                    if (pubIds.length === 1) {\n                        let i = find2D(pubIds[0], this.idKeys);\n                        this.SVGSpots[pubIds[0]].animate(500).scale(2).fill(COLORS[i[0] % COLORS.length]).animate(500).scale(1);\n                    } else {\n                        this.SVGSpots[id].animate(500).scale(2).fill('#6CA6CD').animate(500).scale(1);\n                    }\n                }\n            });\n        },\n        deleteAffect(index) {\n            let target = this.affectsIds.splice(index, 1);\n            if (target[0]['id']) {\n                this.SVGSpots[target[0]['id']].fill('#6CA6CD').stroke({\n                    width: 2,\n                    color: '#FFFFFF'\n                });\n            }\n            target.forEach(v => {\n                v['affectsIds'].forEach(id => {\n                    this.SVGSpots[id].fill('#6CA6CD').stroke({\n                        width: 2,\n                        color: '#FFFFFF'\n                    });\n                })\n            })\n        },\n        setAffectId(id, index, eleIndex) {\n            this.affectsIds[index]['affectsIds'].splice(eleIndex, 1);\n            this.affectsIds[index]['id'] = id;\n        },\n        deleteId(type, id, index, eleIndex) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (type === 'BLOCK') {\n                //删除idIndex  重置blocks样式 并更新blocks\n\n                // before 2020-3-23\n                // let idIndex = find2D(id, this.idKeys);\n                // this.idKeys[idIndex[0]].splice(idIndex[1], 1);\n                // this.SVGSpots[id].animate(500).scale(2).fill('#6CA6CD').animate(500).scale(1);\n                // if (this.idKeys[idIndex[0]].length === 0) {\n                //     this.idKeys.splice(idIndex[0], 1);\n                // }\n                // after 2020-3-23\n                let idIndex = [index, eleIndex];\n                this.idKeys[idIndex[0]].splice(idIndex[1], 1);\n                this.SVGSpots[id].animate(500).scale(2).fill('#6CA6CD').animate(500).scale(1);\n                if (this.idKeys[idIndex[0]].length === 0) {\n                    this.idKeys.splice(idIndex[0], 1);\n                }\n                // 如果删除的是 公共点，则其他 Block or  Blocks 依旧存在，需要显示默认颜色\n                // 需要判断剩余是否依然是公共点 即 多个 Block\n                let arr = this.idKeys.flat(1);\n                let pubIds = arr.filter(i => {\n                    return i === id\n                });\n                if (pubIds.length > 1) {\n                    pubIds.forEach(pid => {\n                        this.SVGSpots[pid].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n                    })\n                } else {\n                    if (pubIds.length === 1) {\n                        let i = find2D(pubIds[0], this.idKeys);\n                        this.SVGSpots[pubIds[0]].animate(500).scale(2).fill(COLORS[i[0] % COLORS.length]).animate(500).scale(1);\n                    } else {\n                        this.SVGSpots[id].animate(500).scale(2).fill('#6CA6CD').animate(500).scale(1);\n                    }\n                }\n            }\n            if (type === 'JUNCTION') {\n                //删除连接点\n                this.junctions.splice(this.junctions.findIndex(jun => {\n                    return jun == id\n                }), 1);\n                this.SVGSpots[id].fill('#6CA6CD').stroke({\n                    width: 2,\n                    color: '#FFFFFF'\n                })\n            }\n            if (type === 'AFFECT') {\n                this.SVGSpots[id].fill('#6CA6CD').stroke({\n                    width: 2,\n                    color: '#FFFFFF'\n                });\n                this.affectsIds[index]['affectsIds'].splice(eleIndex, 1);\n                if (this.affectsIds[index]['affectsIds'].length < 1) {\n                    this.SVGSpots[this.affectsIds[index]['id']].fill('#6CA6CD').stroke({\n                        width: 2,\n                        color: '#FFFFFF'\n                    });\n                    this.affectsIds.splice(index, 1);\n                }\n            }\n        },\n        formatCrossData() {\n            return this.targetCrossResult.map(r => ({\n                domain: r.domain,\n                // junMaps: r.junVal.map(j => j[0]),\n                junctions: r.junctions,\n                // blkMaps: r.blkVal.map(id => id[0]),\n                blocks: r.blocks,\n            }));\n        },\n        /**\n         * 严格限定数据格式，避免后台报错\n         * 1、全量配置修改，被使用到的地图必须配置，即便为空也要保证字段匹配，跨地图的配置必须默认\n         * 2、\n         */\n        strictJsonData(data) {\n            let dataCopy = deepCopy(data);\n            data.forEach(ele => {\n                // if (ele.hasOwnProperty('blkMaps')) {\n                let mapArr = Array.from(new Set(ele['blkMaps']));\n                mapArr.forEach(id => {\n                    if (!dataCopy.find(v => v['map'] === id)) {\n                        dataCopy.push({\n                            domain: ele.domain,\n                            map: id,\n                            junctions: [],\n                            blocks: []\n                        })\n                    }\n                })\n                // }\n            });\n            return dataCopy\n        },\n        exportJson() {\n            let blob = new Blob([JSON.stringify(this.strictJsonData(this.targetResult.concat(this.targetCrossResult)))], {type: \"application/json;charset=utf-8\"});\n            FileSaver.saveAs(blob, this.fileName);\n        },\n        uploadTraffic() {\n            if(!this.areaId) return this.$message.warning(\"请先选择地图\")\n            const d = this.strictJsonData(this.targetResult.concat(this.targetCrossResult));\n            const result = {\n                area: this.areaId,\n                blocks: []\n            }\n            d.forEach(v => {\n                result['blocks'].push(...v['blocks'])\n            })\n            updateTraffic(result).then(r => {\n                if (r.state) {\n                    this.$message.success('更新成功')\n                }\n            })\n            // uploadTrafficData(this.strictJsonData(this.targetResult.concat(this.targetCrossResult))).then(res => {\n            //     if (res) {\n            //         this.$message.success('上传成功');\n            //         this.simpleModeConf = null\n            //     } else {\n            //         this.$message.error('上传失败');\n            //     }\n            // })\n        },\n        async loadData(mapId) {\n            let _vm = this;\n            _vm.group.clear();\n            _vm.SVGSpots = undefined;\n            _vm.spots = undefined;\n            _vm.junctions = [];\n            _vm.idKeys = [];\n            _vm.affectsIds = [];\n\n\n            // let queryString = require('query-string');\n            // let mapId = queryString.parse(location.search).mapId;\n            // let mapId = _vm.$route.params.id;\n            // let mapData = await request.get(\"/mapManagement/getMapDetailByMapId?mapId=\" + mapId);\n            let mapData = await getMapDetails({mapId});\n            const {Edge, Vertex, topologyMap} = mapData['data'];\n            let spots = Vertex.map((v) => v['vertexPo']);\n            _vm.spots = spots;\n            const tmpMapper = {};\n            spots.forEach(s => {\n                tmpMapper[s['code']] = s;\n            });\n            const lines = Edge.map(v => {\n                const start = tmpMapper[v['edgePo']['source']];\n                const end = tmpMapper[v['edgePo']['target']];\n                return {\n                    id: v['edgePo']['id'],\n                    weight: 1,\n                    startX: start['x'],\n                    startY: start['y'],\n                    endX: end['x'],\n                    endY: end['y']\n                }\n            });\n            let mapIns = new MapInstance(20, topologyMap.originX, topologyMap.originY, topologyMap.weight, topologyMap.height, spots, lines);\n\n            //创建组\n            // let group = draw.group();\n            let draw = _vm.draw;\n            let group = _vm.group;\n            let gx = 0, gy = mapIns.HEIGHT;\n            group.move(gx, gy);\n            let mx = 0, my = 0;\n            //enable 鼠标右键 拖拽 缩放 使能\n            let enable = false;\n            let cos = [];\n            // 正在操作的区域\n            let polyline = group.polyline(cos).fill('none').stroke({\n                color: '#f06',\n                width: 2,\n                linecap: 'round',\n                linejoin: 'round',\n                dasharray: '5,5'\n            });\n            //当前绘制的线段\n            let line = group.line([0, 0, 0, 0]).stroke({\n                width: 1,\n                color: '#f06',\n                dasharray: '5,5'\n            });\n            //开始绘制的起点\n            let start = group.circle(6).fill('transparent');\n\n            //地图点位  存放绘制的对象元素 key -> id\n            // let svgSpots = {};\n            _vm.SVGSpots = {};\n            let svgSpotsCodes = {};\n            //地图路径  存放绘制的对象元素 key -> id\n            let svgLines = {};\n\n            //图标说明\n            SHAPE.forEach((s, index) => {\n                draw.polygon(s).fill('#6CA6CD').stroke({\n                    width: 2,\n                    color: '#FFFFFF'\n                }).move(index * 70, 20).scale(1.2);\n                let icon = draw.text(SHAPENAME[index]).font({fill: '#8F8F8F', size: 12});\n                icon.move(index * 70 + icon.length() / 2, 20);\n            });\n\n            init();\n\n            function init() {\n                lines.forEach(l => {\n                    let _l = new SVGLine(l);\n                    let d = 'M ' + _l.sX + ' ' + _l.sY + 'L ' + (_l.sX + _l.eX) / 2 + ' ' + (_l.sY + _l.eY) / 2 + ' L ' + _l.eX + ' ' + _l.eY;\n                    svgLines[_l.id] = group.path(d).stroke({\n                        width: 3,\n                        color: \"#5B5B5B\",\n                        opacity: 0.5\n                    });\n                    svgLines[_l.id].marker('mid', 6, 6, function (add) {\n                        add.path('M-2 1 L-2 5 L4 3 L-2 1').fill('#8B7B8B');\n                    });\n                });\n                spots.forEach(s => {\n                    let _s = new SVGSpot(s);\n                    let c = group.text(_s.code + ` (${_s.id}) `).font({fill: '#8F8F8F', size: 10});\n                    c.move(_s.x - c.length() / 2, _s.y - 30);\n                    svgSpotsCodes[_s.id] = c;\n                    //加载不同类型的点位\n                    SHAPE[_s.type] ?\n                        _vm.SVGSpots[_s.id] = group.polygon(SHAPE[_s.type]).fill('#6CA6CD').stroke({\n                            width: 2,\n                            color: '#FFFFFF'\n                        }).move(_s.x - 5, _s.y - 5)\n                        :\n                        _vm.SVGSpots[_s.id] = group.circle(10).fill('#6CA6CD').stroke({\n                            width: 2,\n                            color: '#FFFFFF'\n                        }).move(_s.x - 5, _s.y - 5);\n                    c.off();\n                    c.on('mouseover', () => {\n                        c.animate(300).attr({'font-size': 14})\n                    }).on('mouseout', () => {\n                        c.animate(300).attr({'font-size': 10})\n                    })\n                });\n            }\n\n            draw.off();\n            draw.on('mousedown', (e) => {\n                mx = e.pageX;\n                my = e.pageY;\n                if (e.button === 2) {\n                    //鼠标右键  移动拖拽\n                    enable = true;\n                    draw.attr({cursor: 'move'});\n                }\n                if (e.button === 0) {\n                    //鼠标左键  选择区域\n                    if (this.status === 1) {\n                        draw.attr({cursor: 'crosshair'});\n                        if (cos.length === 0) {\n                            //开始点\n                            start.move(mx - gx - 3, my - gy - 3).fill('#f06');\n                        }\n                        cos.push([mx - gx, my - gy]);\n                        if (cos.length > 1) {\n                            //缩放操作后，判断逻辑需改善\n                            if (Math.abs(cos[0][0] + gx - mx) < 10 && Math.abs(cos[0][1] + gy - my) < 10) {\n                                //首尾重合\n                                cos[cos.length - 1] = cos[0];\n                                //转化为和点线统一坐标系下的坐标\n                                let newSpots = deepCopy(cos.map(v => {\n                                    return [(v[0] + mapIns.ORIGINX) / mapIns.SCALE, (mapIns.ORIGINY - v[1]) / mapIns.SCALE]\n                                }));\n                                rerender(newSpots);\n                                //清空点和线\n                                clearSelect();\n                            } else {\n                                polyline.plot(cos);\n                            }\n                        } else {\n                            polyline.plot(cos);\n                        }\n                    }\n                    if (this.status === 2) {\n                        this.rectEnable = true;\n                        this.gx = e.pageX;\n                        this.gy = e.pageY;\n                    }\n                }\n            });\n            draw.on('mouseup', (e) => {\n                if (e.button === 2) {\n                    draw.attr({cursor: 'default'});\n                    enable = false;\n                }\n                if (e.button === 0) {\n                    if (this.status === 2 && this.rectEnable) {\n                        draw.attr({cursor: 'default'});\n                        this.rectEnable = false;\n                        this.rectGroup && this.rectGroup.remove();\n                        cos = [[this.gx - gx, this.gy - gy], [e.pageX - gx, this.gy - gy], [e.pageX - gx, e.pageY - gy], [this.gx - gx, e.pageY - gy]];\n                        //转化为和点线统一坐标系下的坐标\n                        let newSpots = deepCopy(cos.map(v => {\n                            return [(v[0] + mapIns.ORIGINX) / mapIns.SCALE, (mapIns.ORIGINY - v[1]) / mapIns.SCALE]\n                        }));\n                        rerender(newSpots);\n                        //清空点和线\n                        clearSelect();\n                    }\n                }\n\n            });\n            draw.on('mousemove', (e) => {\n                if (enable) {\n                    // 拖拽  缩放\n                    gx += (e.pageX - mx);\n                    gy += (e.pageY - my);\n                    mx = e.pageX;\n                    my = e.pageY;\n                    group.move(gx, gy);\n                } else {\n                    if (this.status === 1) {\n                        //绘制\n                        let x = e.pageX;\n                        let y = e.pageY;\n                        let len = cos.length - 1;\n                        if (len >= 0) {\n                            line.plot(cos[len][0], cos[len][1], x - gx, y - gy);\n                        }\n                    }\n                    if (this.status === 2) {\n                        if (this.rectEnable) {\n                            this.rectGroup && this.rectGroup.remove();\n                            this.rectGroup = this.draw.group();\n                            let rect;\n                            const x = (e.pageX - this.gx),\n                                y = (e.pageY - this.gy);\n                            if (x < 0 && y < 0) {\n                                rect = this.rectGroup.rect(Math.abs(x), Math.abs(y)).move(x, y);\n                            } else if (x < 0 && y > 0) {\n                                rect = this.rectGroup.rect(Math.abs(x), Math.abs(y)).move(x, 0);\n                            } else if (x > 0 && y < 0) {\n                                rect = this.rectGroup.rect(Math.abs(x), Math.abs(y)).move(0, y);\n                            } else {\n                                rect = this.rectGroup.rect(Math.abs(x), Math.abs(y)).move(0, 0);\n                            }\n\n                            rect = this.rectGroup.move(this.gx, this.gy);\n                            rect.fill('rgba(0,0,0,.05)').stroke({\n                                width: 1,\n                                color: '#f06',\n                                dasharray: '5,5'\n                            });\n                        }\n\n                    }\n                }\n\n            });\n            draw.on('mouseleave', () => {\n                enable = false;\n            });\n            draw.on('mousewheel', handlerMouseWheel);\n            draw.on('DOMMouseScroll', handlerMouseWheel);\n\n            function handlerMouseWheel(e) {\n                //清空点和线\n                clearSelect();\n                draw.attr({cursor: 'default'});\n                cos = [];\n\n                const _x = e.pageX - gx,\n                    _y = e.pageY - gy;\n\n                const x1 = (_x + mapIns.ORIGINX) / mapIns.SCALE,\n                    y1 = (mapIns.ORIGINY - _y) / mapIns.SCALE;\n\n                let step = e.wheelDelta ? ((e.wheelDelta) / 30) : (-e.detail * 2);\n                step > 0 ? step = 10 : step = -10;\n                mapIns.SCALE += step;\n                if (mapIns.SCALE < 10) {\n                    mapIns.SCALE = 10\n                }\n                render();\n\n                // scale 改变后 相对坐标转 _x _y 绝对坐标\n                const x2 = x1 * mapIns.SCALE - mapIns.ORIGINX;\n                const y2 = mapIns.ORIGINY - y1 * mapIns.SCALE;\n\n                console.log(_x, _y, x2, y2)\n                gx -= (x2 - _x);\n                gy -= (y2 - _y);\n                group.move(gx, gy);\n            }\n\n            document.addEventListener('keydown', (e) => {\n                if ((e.keyCode === 27 || e.key.toUpperCase() === \"ESCAPE\") && cos.length > 0) {\n                    clearSelect();\n                }\n            });\n\n\n            function clearSelect() {\n                //清空当前选择\n                cos = [];\n                polyline.plot(cos);\n                line.plot([0, 0, 0, 0]);\n                start.fill('transparent');\n            }\n\n            function addJunctions(ids) {\n                _vm.junctions.push(...ids);\n                //去重\n                _vm.junctions = Array.from(new Set(_vm.junctions));\n                ids.forEach(id => {\n                    _vm.SVGSpots[id].fill('#FFFFFF').stroke({\n                        width: 2,\n                        color: '#6CA6CD'\n                    }).animate(500).scale(2).animate(500).scale(1);\n                })\n            }\n\n            function rerender(polygon) {\n                if (polygon.length < 4) {\n                    return\n                }\n                //只需要重新渲染有效点\n                let newBlock = [];\n                let keys = [];\n                // _vm.SVGSpots 使用 全局变量 svgSpots 代替会出现？？\n                for (let i in _vm.SVGSpots) {\n                    if (inPath([_vm.SVGSpots[i].x(), _vm.SVGSpots[i].y()], polygon.map(v => {\n                        return [v[0] * mapIns.SCALE - mapIns.ORIGINX, mapIns.ORIGINY - v[1] * mapIns.SCALE]\n                    }))) {\n                        newBlock.push(_vm.SVGSpots[i]);\n                        keys.push(Number(i));\n                    }\n                }\n                if (keys.length < 1) {\n                    return\n                }\n                console.log(newBlock, keys);\n                if (_vm.typeVal === 1) {\n                    //添加 affects 逻辑\n                    _vm.affectsIds.push({\n                        id: 0,\n                        affectsIds: keys\n                    });\n                    _vm.affectsIds.forEach((v, index) => {\n                        v['affectsIds'].forEach(id => {\n                            _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[index % COLORS.length]).animate(500).scale(1);\n                        });\n                    });\n                    // _vm.SVGSpots[bIds[0]].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n                    // freeIds.forEach(id => {\n                    //     _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[_vm.idKeys.length % COLORS.length]).animate(500).scale(1);\n                    // });\n                    // _vm.affectsIds.push();\n                } else {\n                    //早期 junctions 和 blocks 逻辑\n\n                    //首先将点位分类 待配置点 block 和 junctions 主逻辑使用 id\n                    // console.log(newBlock, keys);\n                    let bIds = [], jIds = [], freeIds = [];\n                    keys.forEach(k => {\n                        if (_vm.junctions.includes(k)) {\n                            jIds.push(k);\n                            return;\n                        }\n                        if (_vm.idKeys.flat(1).includes(k)) {\n                            bIds.push(k);\n                            return;\n                        }\n                        freeIds.push(k);\n                    });\n                    //排列组合的情况共有 3(1种点) + 3(2种点) + 1(包含3种点) 种 抛弃其中的几种\n                    let klen = keys.length, blen = bIds.length, jlen = jIds.length, flen = freeIds.length;\n                    if (klen === flen) {\n                        //全是 待分配点\n                        if (flen === 1) {\n                            //一个 默认为 junctions\n                            addJunctions(freeIds);\n                        } else {\n                            //多个则默认成 block\n                            newBlock.forEach(nb => {\n                                nb.animate(500).scale(2).fill(COLORS[_vm.idKeys.length % COLORS.length]).animate(500).scale(1);\n                            });\n                            _vm.idKeys.push(keys);\n                        }\n                    }\n                    if (klen === jlen) {\n                        //全是 junctions 点 不执行操作\n                    }\n                    if (klen === blen) {\n                        //全是 block 点 不执行操作 ? 或者合并 block\n                        // TODO\n                    }\n                    if (flen > 0 && blen > 0 && jlen === 0) {\n                        //待配置点 和 block 的组合 =》待配置点全部合并到 ? 几个 block ？\n                        // 思考： 如何找出二位数组中的所有包含元素的位置\n                        // TODO\n                        if (blen === 1) {\n                            //只有一个 bIds 则自动将 freeIds 添加到 block 中\n                            // 2020-3-23之前的旧逻辑\n\n                            // let pos = find2D(...bIds, _vm.idKeys);\n                            // freeIds.forEach(id => {\n                            //   _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[pos[0] % COLORS.length]).animate(500).scale(1);\n                            // });\n                            // _vm.idKeys[pos[0]].push(...freeIds);\n\n                            // 2020-3-23后的新逻辑 允许 公共点 存在 颜色默认 黑色\n                            _vm.SVGSpots[bIds[0]].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n                            freeIds.forEach(id => {\n                                _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[_vm.idKeys.length % COLORS.length]).animate(500).scale(1);\n                            });\n                            _vm.idKeys.push(freeIds.concat(bIds[0]));\n\n                        } else {\n                            let blockPos = [];\n                            bIds.forEach(id => {\n                                blockPos.push(find2D(id, _vm.idKeys)[0])\n                            });\n                            // 去重\n                            let blockSet = Array.from(new Set(blockPos));\n                            if (blockSet.length === 1) {\n                                //bIds 均属于一个 block\n                                // 2020-3-23之前的旧逻辑\n                                // freeIds.forEach(id => {\n                                //     _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[blockSet[0] % COLORS.length]).animate(500).scale(1);\n                                // });\n                                // _vm.idKeys[blockSet[0]].push(...freeIds);\n\n                                // 2020-3-23后的新逻辑 允许 公共点 存在 颜色默认 黑色\n                                bIds.forEach(bid => {\n                                    _vm.SVGSpots[bid].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n                                });\n                                freeIds.forEach(id => {\n                                    _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[_vm.idKeys.length % COLORS.length]).animate(500).scale(1);\n                                });\n                                _vm.idKeys.push(freeIds.concat(...bIds));\n                                // _vm.SVGSpots[bIds[0]].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n                                // freeIds.forEach(id => {\n                                //     _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[_vm.idKeys.length % COLORS.length]).animate(500).scale(1);\n                                // });\n                                // _vm.idKeys.push(freeIds.concat(bIds[0]));\n                            } else {\n                                //bIds 属于多个 block\n                                _vm.$message({\n                                    type: 'warning',\n                                    message: `${blockSet.map((b, index) => 'Block' + (index + 1)).join(', ')} 之间禁止合并`\n                                });\n                            }\n                        }\n                    }\n                    if (flen > 0 && jlen > 0 && blen === 0) {\n                        // 待配置点 和 junctions 的组合 =》待配置点全部转为 junctions\n                        addJunctions(freeIds);\n                    }\n                    if (jlen > 0 && blen > 0 && flen >= 0) {\n                        //不存在待配置点 保持现有不变\n                    }\n                }\n            }\n\n            function render() {\n                lines.forEach(l => {\n                    let _l = new SVGLine(l);\n                    // (_l.id === 1) && console.log(_l)\n                    let d = 'M ' + _l.sX + ' ' + _l.sY + 'L ' + (_l.sX + _l.eX) / 2 + ' ' + (_l.sY + _l.eY) / 2 + ' L ' + _l.eX + ' ' + _l.eY;\n                    svgLines[_l.id].plot(d);\n                });\n                spots.forEach(s => {\n                    let _s = new SVGSpot(s);\n                    svgSpotsCodes[_s.id].move(_s.x - svgSpotsCodes[_s.id].length() / 2, _s.y - 30);\n                    _vm.SVGSpots[_s.id].move(_s.x - 5, _s.y - 5);\n                });\n            }\n        },\n\n    },\n\n    mounted() {\n        // if (!this.simpleMode) {\n            this.draw = SVG('map-scene').size(window.innerWidth, window.innerHeight);\n            this.group = this.draw.group();\n            // this.value[1] && this.loadData(this.value[1]);\n            // this.loadData(3);\n        // }\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n#map-scene {\n    position: relative;\n    width: calc(100vw - 400px);\n    height: 100vh;\n    user-select: none;\n\n    .select-box {\n        width: 70px;\n        height: 120px;\n        text-align: center;\n        padding: 10px;\n        border: 1px solid #666666;\n        position: absolute;\n        top: 0;\n        right: 20px;\n        bottom: 0;\n    }\n\n    .active {\n        background: #333333;\n    }\n\n\n    .tool-box {\n        box-sizing: border-box;\n        position: absolute;\n        top: 0;\n        right: -400px;\n        bottom: 0;\n        color: #737373;\n        text-align: center;\n        width: 410px;\n        min-height: 100vh;\n        padding: 20px 20px 50px 20px;\n        border-radius: 3px;\n        box-shadow: 0 -2px 5px #737373;\n        background-color: #fff;\n        overflow-y: auto;\n\n        .spot-list {\n            margin: 5px 20px;\n            padding: 2px 5px;\n            font-size: 13px;\n            text-align: left;\n            transition: color .3s;\n            height: 20px;\n            line-height: 20px;\n\n            &:hover {\n                color: #333333 !important;\n                transition: color .3s;\n            }\n        }\n    }\n}\n\n.fade-enter-active, .fade-leave-active {\n    transition: opacity 1s;\n}\n\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */\n{\n    opacity: 0;\n}\n\n.affect-box {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .base-spot {\n        min-width: 100px;\n        margin: 0 !important;\n    }\n\n    .affect-spots {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: flex-start;\n\n        .affect-line {\n            display: flex;\n            justify-content: space-between;\n            margin: 2px 0;\n\n            .affect-spot {\n                min-width: 100px;\n                margin: 0 !important;\n            }\n\n            .affect-spot-delete {\n                min-width: 50px;\n            }\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3a9cb272&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3a9cb272&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a9cb272\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Topo')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Topo />\n  </div>\n</template>\n\n<script>\n    import Topo from './components/topo'\n\n\n    export default {\n        name: 'trafficEditor',\n        components: {\n            Topo,\n        },\n        data() {\n            return {\n                mode: undefined\n            }\n        },\n        created() {\n            this.mode = this.$route.query.mode;\n        },\n        mounted() {\n\n        }\n    }\n</script>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=22a6fae4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","//地图的大小  缩放比例  相关坐标系的建立\n\nclass MapInstance {\n    constructor(scale,ox,oy,w,h,spots,lines){\n        if(!MapInstance.instance){\n            this.SCALE = scale;\n            this.ORIGINX = ox * scale;\n            this.ORIGINY = oy * scale;\n            this.WIDTH = w * scale;\n            this.HEIGHT = h * scale;\n            this.spots = spots;\n            this.lines = lines;\n            MapInstance.instance = this;\n        }else{\n            return MapInstance.instance\n        }\n    }\n\n}\nexport {MapInstance}\n\n","/**\n *\n * @param target 目标id的位置 a0 是 arr 中的索引  a1是元素中的内部索引\n * @param arr  原数组\n * @returns {[number, number]}\n */\nexport default function find2D(target, arr) {\n    //二维数组  元素的子元素互斥的  保证flat后长度不变\n    let list = arr.flat(1);\n    let index = list.findIndex(l => {\n        return l === target\n    });\n    let count = 0;\n    let a0, a1;\n    index++;\n    for (let i = 0; i < arr.length; i++) {\n        count += arr[i].length;\n        if (index <= count) {\n            //首次超过，跳出循环\n            a0 = i;\n            a1 = arr[i].length - (count - index) - 1;\n            break\n        }\n    }\n    return [a0, a1]\n}\n","export default function deepCopy(obj){\n    return JSON.parse(JSON.stringify(obj))\n}\n","export * from \"-!../../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3a9cb272&lang=scss&scoped=true&\"","import request from '@/utils/request'\n\n// 获取地图列表\nexport function getMapList(data) {\n  return request.get('/map/mapList', data)\n}\n\n// 修改地图\nexport function updateMap(data) {\n  return request.post('/map/updateMap', data)\n}\n\n// 删除地图\nexport function deleteMap(id) {\n  return request.post('/map/delete/' + id)\n}\n\n// 获取地图详情\nexport function getMapDetails(data) {\n  return request.get('/map/getMapDetailById', data)\n}","import request from '@/utils/request'\n\n// 获取在线小车列表\nexport function getOnlineAmr(data) {\n  return request.get('/amr/onlineAmr', data)\n}\n\n// 获取单个在线小车详情\nexport function getOnlineAmrById(data) {\n  return request.get('/amr/getOnlineAmrById', data)\n}\n\n// 获取 区域-地图 列表\nexport function getAreaMonitor() {\n  return request.post('/area/monitor')\n}\n\n// 获取小车任务详情\nexport function getAmrTaskInfo(data) {\n  return request.get('/amr/getAmrTaskById', data)\n}\n\n// 暂停小车\nexport function pauseAmr(data) {\n  return request.post('/amr/taskCommand/pause/' + data.id)\n}\n\n// 恢复小车\nexport function resumeAmr(data) {\n  return request.post('/amr/taskCommand/resume/' + data.id)\n}\n\n// 根据小车id和地图name获取地图包\nexport function getSchedulerMapZip(data) {\n  return request.get('map/loadMapFileByAmr', data, \"blob\");\n}","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","const COLORS = [\n    \"#FF8C00\",\n    \"#FF6EB4\",\n    \"#C71585\",\n    \"#FF3030\",\n    \"#CD661D\",\n    \"#9F79EE\",\n    \"#B22222\",\n    \"#9A32CD\",\n    \"#8B4513\",\n    \"#8B0000\",\n    \"#836FFF\",\n    \"#7D26CD\",\n    \"#76EEC6\",\n    \"#8B5F65\",\n    \"#3CB371\",\n    \"#00B2EE\"\n];\nexport default COLORS","export default function inPath(point, vs) {\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n\n    let x = point[0], y = point[1];\n\n    let inside = false;\n    for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n        let xi = vs[i][0], yi = vs[i][1];\n        let xj = vs[j][0], yj = vs[j][1];\n\n        let intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n\n    return inside;\n}\n","const SHAPE = [\n    '',\n    '',\n    '-5,5 3,5 3,3 5,3 5,-3 3,-3 3,-5 -5,-5 -5,5',//充电\n    '-5,-5 5,-5 5,0 3,5 -3,5 -5,0 -5,-5',//休息\n    '-3,-5 3,-5 3,1 5,1 5,5 -5,5 -5,1 -3,1 -3,-5',//码头\n    '-3,5 3,5 3,2 5,2 5,-2 3,-2 3,-5 -3,-5 -3,-2 -5,-2 -5,2 -3,2 -3,5',//辊筒\n]\nconst SHAPENAME = [\n    '',\n    '',\n    '充电桩',\n    '休息点',\n    '码头点',\n    '辊筒点',\n]\nexport { SHAPE,SHAPENAME }\n","import {MapInstance} from \"../base\";\n\n//2D场景，坐标需要转换为窗口坐标系统\nclass SVGLine extends MapInstance {\n    constructor(line) {\n        let mapIns = super();\n        this.sX = line.startX * mapIns.SCALE - mapIns.ORIGINX;\n        this.sY = mapIns.ORIGINY - line.startY * mapIns.SCALE;\n        this.eX = line.endX * mapIns.SCALE - mapIns.ORIGINX;\n        this.eY = mapIns.ORIGINY - line.endY * mapIns.SCALE;\n        this.id = line.id;\n        this.weight = line.weight;\n    }\n    id;\n    sX;\n    sY;\n    eX;\n    eY;\n    weight;\n\n}\n\nexport {SVGLine}"],"sourceRoot":""}