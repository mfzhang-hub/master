(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04f27818"],{"0115":function(t,e,a){"use strict";a.d(e,"f",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return d})),a.d(e,"d",(function(){return c})),a.d(e,"g",(function(){return u}));var i=a("b775");function n(){return i["a"].get("/chargePile/model/findAll")}function r(t){return i["a"].post("/chargePile/page",t)}function s(t){return i["a"].post("/chargePile/add",t)}function o(t){var e=t.id,a=t.enable;return i["a"].get("/chargePile/enable?id="+e+"&state="+a)}function d(t){var e=t.id,a=t.modelId;return i["a"].get("chargePile/bindModel?id="+e+"&modelId="+a)}function c(t){return i["a"].get("/chargePile/delete?id="+t)}function u(t){return i["a"].get("/map/getMapVertexes/"+t)}},"0aa6":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return d}));var i=a("b775"),n=a("5f87");function r(t){return t||(t={}),t.userId=Object(n["d"])(),i["a"].get("/group/list",t)}function s(t){return i["a"].post("/group/addOrUpdate",t)}function o(t){return i["a"].post("/group/addOrUpdate",t)}function d(t){return i["a"].delete("/group/delete/"+t)}},2840:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return s}));var i=a("b775");function n(t){return i["a"].post("/area/list",t)}function r(t){return i["a"].post("/area/update",t)}function s(t){return i["a"].post("/area/delete/"+t)}},"2b7d":function(t,e,a){},"41c2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isStartEdit?a("span",[a("i",{staticClass:"el-icon-check check",on:{click:t.checkEdit}}),a("i",{staticClass:"el-icon-close close",on:{click:t.closeEdit}})]):a("span",[a("i",{staticClass:"el-icon-edit edit",on:{click:t.startEdit}})])},n=[],r=a("22e1"),s=(a("2621"),{props:["isEdit","data"],data:function(){return{oldDataCopy:""}},computed:{editData:{get:function(){return this.data},set:function(t){this.$emit("update:data",t)}},isStartEdit:{get:function(){return this.isEdit},set:function(t){this.$emit("update:isEdit",t)}}},methods:{startEdit:function(){this.$emit("closeAll"),this.isStartEdit=!0,"object"===Object(r["a"])(this.editData)?this.oldDataCopy=JSON.parse(JSON.stringify(this.editData)):this.oldDataCopy=this.editData,this.$emit("open")},closeEdit:function(){this.isStartEdit=!1,this.editData=this.oldDataCopy},checkEdit:function(){Array.isArray(this.editData)?this.editData.join(",")!==this.oldDataCopy.join(",")?this.$emit("checkEdit",this.editData):this.isStartEdit=!1:this.editData!==this.oldDataCopy?this.$emit("checkEdit",this.editData):this.isStartEdit=!1}}}),o=s,d=(a("4991"),a("4ac2")),c=Object(d["a"])(o,i,n,!1,null,"15c6001f",null);e["default"]=c.exports},4991:function(t,e,a){"use strict";a("fa4f")},7661:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return o}));var i=a("b775");function n(t){return i["a"].get("/map/mapList",t)}function r(t){return i["a"].post("/map/updateMap",t)}function s(t){return i["a"].post("/map/delete/"+t)}function o(t){return i["a"].get("/map/getMapDetailById",t)}},8964:function(t,e){function a(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id="8964"},a006:function(t,e,a){"use strict";a("2b7d")},fa4f:function(t,e,a){},fbb2:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"g",(function(){return o})),a.d(e,"f",(function(){return d})),a.d(e,"b",(function(){return c})),a.d(e,"c",(function(){return u})),a.d(e,"h",(function(){return l})),a.d(e,"j",(function(){return f})),a.d(e,"k",(function(){return m})),a.d(e,"i",(function(){return h})),a.d(e,"l",(function(){return p}));var i=a("b775");function n(t){return i["a"].post("/amr/getAmrPageList",t)}function r(){return i["a"].get("/amr/listAmrType")}function s(t){return i["a"].post("/amr/register",t)}function o(t){return i["a"].post("/amr/editorAmr",t)}function d(t){return i["a"].get("/amr/enable",t)}function c(t){return i["a"].post("/amr/deleteAmr/"+t)}function u(t){return i["a"].get("/amr/getDetailAmr",t)}function l(t){return i["a"].get("/amr/updateArea",t)}function f(t){return i["a"].get("/amr/updateGroup",t)}function m(t){return i["a"].get("chargeConf/update/amrAdaptation",t)}function h(t){return i["a"].get("chargeConf/update/amrBind",t)}function p(t){return i["a"].get("rest/update/amrBind",t)}},fed2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"amrDetails-container"},[a("div",{staticClass:"left"},[a("div",{staticClass:"basic"},[t.backPage?a("el-page-header",{attrs:{content:t.amrInfo.amrPo.name},on:{back:t.goBack}}):t._e(),a("div",{ref:"imageParent",staticClass:"image"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"imgUrl"}],attrs:{src:t.imgUrl,id:"imageChild"}})])],1),t._m(0)]),a("div",{staticClass:"right"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{style:{height:t.innerHeight-151+"px"},attrs:{name:"1",label:"设备配置"}},[a("div",{staticClass:"edit-item"},[a("span",[t._v("绑定区域: ")]),t.isEditArea?a("el-select",{attrs:{placeholder:"请选择工作区域",filterable:""},model:{value:t.amrInfo.amrPo.areaId,callback:function(e){t.$set(t.amrInfo.amrPo,"areaId","string"===typeof e?e.trim():e)},expression:"amrInfo.amrPo.areaId"}},t._l(t.domainList,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:Number(e)}})})),1):a("span",[t._v(t._s(t.domainList[t.amrInfo.amrPo.areaId]))]),a("edit-icon",{attrs:{isEdit:t.isEditArea,data:t.amrInfo.amrPo.areaId},on:{"update:isEdit":function(e){t.isEditArea=e},"update:is-edit":function(e){t.isEditArea=e},"update:data":function(e){return t.$set(t.amrInfo.amrPo,"areaId",e)},checkEdit:t.updateVehicleArea,closeAll:t.closeAll}})],1),a("div",{staticClass:"edit-item"},[a("span",[t._v("分组: ")]),t.isEditGroup?a("el-select",{attrs:{placeholder:"请选择分组",filterable:"",clearable:""},model:{value:t.amrInfo.amrPo.groupId,callback:function(e){t.$set(t.amrInfo.amrPo,"groupId","string"===typeof e?e.trim():e)},expression:"amrInfo.amrPo.groupId"}},t._l(t.groupList,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:Number(e)}})})),1):a("span",[t._v(t._s(t.groupList[t.amrInfo.amrPo.groupId]||"-- 未绑定 --"))]),a("edit-icon",{attrs:{isEdit:t.isEditGroup,data:t.amrInfo.amrPo.groupId},on:{"update:isEdit":function(e){t.isEditGroup=e},"update:is-edit":function(e){t.isEditGroup=e},"update:data":function(e){return t.$set(t.amrInfo.amrPo,"groupId",e)},checkEdit:t.updateVehicleGroup,open:t.getGroupList,closeAll:t.closeAll}})],1),a("div",{staticClass:"edit-item"},[a("span",[t._v("充电桩类型: ")]),t.isEditModel?a("el-select",{attrs:{placeholder:"请选择充电桩类型",filterable:"",clearable:"",multiple:"","collapse-tags":""},model:{value:t.amrInfo.modelIds,callback:function(e){t.$set(t.amrInfo,"modelIds","string"===typeof e?e.trim():e)},expression:"amrInfo.modelIds"}},t._l(t.modelList,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:Number(e)}})})),1):a("span",[t._v(t._s(t.amrInfo.modelNames))]),a("edit-icon",{attrs:{isEdit:t.isEditModel,data:t.amrInfo.modelIds},on:{"update:isEdit":function(e){t.isEditModel=e},"update:is-edit":function(e){t.isEditModel=e},"update:data":function(e){return t.$set(t.amrInfo,"modelIds",e)},checkEdit:t.updateVehicleModel,closeAll:t.closeAll}})],1),a("div",{staticClass:"edit-item"},[a("span",[t._v("绑定充电桩: ")]),t.isEditCharge?a("el-select",{attrs:{placeholder:"请选择充电桩",filterable:"",clearable:""},model:{value:t.amrInfo.charge,callback:function(e){t.$set(t.amrInfo,"charge","string"===typeof e?e.trim():e)},expression:"amrInfo.charge"}},t._l(t.chargePileList,(function(e,i){return a("el-option",{key:i,attrs:{label:t.mapList[e.mapId].name+"/"+e.name,value:Number(i)}})})),1):a("span",[t._v(t._s(t.amrInfo.chargePilePo?t.mapList[t.amrInfo.chargePilePo.mapId].name+"/"+t.amrInfo.chargePilePo.name:"-- 未绑定 --"))]),a("edit-icon",{attrs:{isEdit:t.isEditCharge,data:t.amrInfo.charge},on:{"update:isEdit":function(e){t.isEditCharge=e},"update:is-edit":function(e){t.isEditCharge=e},"update:data":function(e){return t.$set(t.amrInfo,"charge",e)},open:t.getChargePileList,checkEdit:t.updateVehicleCharge,closeAll:t.closeAll}})],1),a("div",{staticClass:"edit-item"},[a("span",[t._v("是否启用: ")]),t.isEditEnable?a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.amrInfo.amrPo.enable,callback:function(e){t.$set(t.amrInfo.amrPo,"enable","string"===typeof e?e.trim():e)},expression:"amrInfo.amrPo.enable"}}):a("span",[t._v(t._s(t.amrInfo.amrPo.enable?"已启用":"未启用"))]),a("edit-icon",{attrs:{isEdit:t.isEditEnable,data:t.amrInfo.amrPo.enable},on:{"update:isEdit":function(e){t.isEditEnable=e},"update:is-edit":function(e){t.isEditEnable=e},"update:data":function(e){return t.$set(t.amrInfo.amrPo,"enable",e)},checkEdit:t.updateVehicleEnable,closeAll:t.closeAll}})],1),a("div",{staticClass:"edit-item"},[a("span",[t._v("休息点位: ")]),t.isEditRest?a("el-select",{attrs:{placeholder:"请选择休息点",filterable:"",clearable:""},model:{value:t.amrInfo.rest,callback:function(e){t.$set(t.amrInfo,"rest","string"===typeof e?e.trim():e)},expression:"amrInfo.rest"}},t._l(t.restList,(function(e,i){return a("el-option",{key:i,attrs:{label:t.mapList[e.mapId].name+"/"+e.name,value:Number(i)}})})),1):a("span",[t._v(t._s(t.amrInfo.bindRestVertex?t.amrInfo.bindRestVertex.code:"-- 未绑定 --"))])],1)]),a("el-tab-pane",{style:{height:t.innerHeight-151+"px"},attrs:{name:"2",label:"占用点位"}},[t._v(" 占用点位。。。 ")])],1)],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"function"},[a("div",{staticClass:"title"},[t._v("常用功能")])])}],r=(a("6afd"),a("f5bd"),a("79fd"),a("45af"),a("2621"),a("fbb2")),s=a("0aa6"),o=a("0115"),d=a("2840"),c=a("7661"),u=a("41c2"),l=a("a68a"),f={props:["innerHeight"],components:{EditIcon:u["default"]},data:function(){return{backPage:"",vehicleId:0,loading:!1,amrInfo:{amrPo:{},amrTypePo:{},bindRestVertex:"",chargePileModelPo:[],chargePilePo:"",modelIds:[],modelNames:"",charge:"",rest:""},imgUrl:"",activeName:"1",typeOptions:{},domainList:{},mapList:{},groupList:{},modelList:{},chargePileList:{},restList:{},isEditArea:!1,isEditGroup:!1,isEditModel:!1,isEditCharge:!1,isEditEnable:!1,isEditRest:!1}},mounted:function(){var t=this;this.vehicleId=this.$route.params.id,this.backPage=this.$route.query.backPage,Object(d["c"])().then((function(e){e.state&&e.data.data&&e.data.data.forEach((function(e){t.$set(t.domainList,e.id,e.name)}))})),Object(o["f"])().then((function(e){e.state&&e.data&&e.data.forEach((function(e){t.$set(t.modelList,e.id,e.description)}))})),Object(c["c"])().then((function(e){e.state&&e.data.data&&e.data.data.forEach((function(e){t.$set(t.mapList,e.id,e)}))})),this.getGroupList(),this.getVehicleDetail()},methods:{getVehicleDetail:function(){var t=this,e=function(){t.loading=!0,Object(r["c"])({id:t.vehicleId}).then((function(e){if(e.state){var i=e.data,n=i.chargePileModelPo,r=i.chargePilePo,s=i.bindRestVertex,o=[],d="",c="",u="";n&&n.length>0?n.forEach((function(t){o.push(t.id),d+=t.description})):d="-- 未绑定 --",r&&(c=r.id),s&&(u=s.id),e.data.modelIds=o,e.data.modelNames=d,e.data.charge=c,e.data.rest=u,t.amrInfo=e.data;try{t.imgUrl=a("8964")("./111".concat(e.data.amrTypePo.name,".png"))}catch(l){t.imgUrl=""}t.loading=!1}}))};this.typeOptions[1]?e():Object(r["e"])().then((function(a){a.state&&a.data&&a.data.forEach((function(e){t.$set(t.typeOptions,e.id,e.name)})),e()}))},onResize:function(){var t=this;this.$nextTick((function(){document.getElementById("imageChild").style.maxWidth=t.$refs.imageParent.offsetWidth-80+"px",document.getElementById("imageChild").style.maxHeight=t.$refs.imageParent.offsetHeight-50+"px"}))},getGroupList:function(){var t=this;this.groupList={},Object(s["c"])({areaId:this.amrInfo.amrPo.areaId}).then((function(e){e.state&&e.data&&e.data.forEach((function(e){t.$set(t.groupList,e.id,e.groupName)}))}))},getChargePileList:function(){var t=this;if(this.chargePileList={},this.amrInfo.modelIds.length>0){var e={chargeModelIds:this.amrInfo.modelIds,areaId:this.amrInfo.amrPo.areaId};Object(o["e"])(e).then((function(e){e.state&&e.data.data&&e.data.data.forEach((function(e){t.$set(t.chargePileList,e.id,e)}))}))}},updateVehicleArea:function(t){var e=this,a={id:this.vehicleId,areaId:t};Object(r["h"])(a).then((function(t){t.state&&(l["Message"].success("设备区域修改成功"),e.isEditArea=!1,e.getVehicleDetail())}))},updateVehicleGroup:function(t){var e=this,a={id:this.vehicleId,groupId:t};Object(r["j"])(a).then((function(t){t.state&&(l["Message"].success("设备分组修改成功"),e.isEditGroup=!1,e.getVehicleDetail())}))},updateVehicleEnable:function(t){var e=this,a=1===t?"启用":"禁用",i={id:this.vehicleId,enable:t};Object(r["f"])(i).then((function(t){t.state&&(e.$message.success("设备".concat(a,"成功")),e.isEditEnable=!1,e.getVehicleDetail())}))},updateVehicleModel:function(t){var e=this,a={amrId:this.vehicleId,adaptation:""};t.length>0&&(a.adaptation=t.join(",")),Object(r["k"])(a).then((function(t){t.state&&(e.$message.success("设备充电桩类型修改成功"),e.isEditModel=!1,e.getVehicleDetail())}))},updateVehicleCharge:function(t){var e=this,a={amrId:this.vehicleId};t&&(a.chargePileId=t),Object(r["i"])(a).then((function(t){t.state&&(e.$message.success("设备充电桩修改成功"),e.isEditCharge=!1,e.getVehicleDetail())}))},updateVehicleRest:function(t){var e=this,a={amrId:this.vehicleId};t&&(a.restId=t),Object(r["l"])(a).then((function(t){t.state&&(e.$message.success("设备休息点修改成功"),e.isEditRest=!1,e.getVehicleDetail())}))},closeAll:function(){this.isEditArea=!1,this.isEditGroup=!1,this.isEditModel=!1,this.isEditCharge=!1,this.isEditEnable=!1,this.isEditRest=!1},goBack:function(){this.$router.push(this.backPage)}}},m=f,h=(a("a006"),a("4ac2")),p=Object(h["a"])(m,i,n,!1,null,"a63f9a86",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-04f27818.a3cd4512.js.map