(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39dbb237","chunk-f3d6acd4","chunk-177019b2","chunk-7e26b974","chunk-ae178a6a","chunk-106f8caa","chunk-2d0c93b4"],{"0007":function(e,a,t){"use strict";t("ab02")},"0115":function(e,a,t){"use strict";t.d(a,"h",(function(){return o})),t.d(a,"g",(function(){return i})),t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return c})),t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return l})),t.d(a,"e",(function(){return d})),t.d(a,"f",(function(){return m}));var n=t("b775");function o(){return n["a"].get("/chargePile/model/findAll")}function i(e){return n["a"].post("/chargePile/page",e)}function r(e){return n["a"].post("/chargePile/add",e)}function c(e){var a=e.id,t=e.enable;return n["a"].get("/chargePile/enable?id="+a+"&state="+t)}function s(e){var a=e.id,t=e.modelId;return n["a"].get("chargePile/bindModel?id="+a+"&modelId="+t)}function l(e){return n["a"].get("/chargePile/delete?id="+e)}function d(e){return n["a"].get("/chargeConf/bind/find?amrId="+e)}function m(e){return n["a"].get("chargeConf/model/adaptation?amrId="+e)}},"01c0":function(e,a,t){"use strict";t("aa2d")},"0212":function(e,a,t){},"0aa6":function(e,a,t){"use strict";t.d(a,"c",(function(){return o})),t.d(a,"a",(function(){return i})),t.d(a,"d",(function(){return r})),t.d(a,"b",(function(){return c}));var n=t("b775");function o(e){return n["a"].get("/group/list",e)}function i(e){return n["a"].post("/group/add",e)}function r(e){return n["a"].post("/group/update",e)}function c(e){return n["a"].get("/group/delete",e)}},"0b3f":function(e,a,t){},"0c01":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.isWmsUserArea?t("user-rcs-wms",{ref:"childrenRouter",attrs:{innerHeightMinusFilter:e.innerHeightMinusFilter},on:{watchFilterHeight:e.watchFilterHeight}}):t("user-rcs",{ref:"childrenRouter",attrs:{innerHeightMinusFilter:e.innerHeightMinusFilter},on:{watchFilterHeight:e.watchFilterHeight}})},o=[],i=t("b534"),r=t("7e98"),c=t("4360"),s={components:{UserRcs:i["default"],UserRcsWms:r["default"]},props:["innerHeightMinusFilter"],data:function(){return{isWmsUserArea:!1}},mounted:function(){this.isWmsUserArea=c["a"].getters.permissions.indexOf("account/user/updateUserStorageAreas")>-1},methods:{watchFilterHeight:function(){this.$emit("watchFilterHeight")}}},l=s,d=t("4ac2"),m=Object(d["a"])(l,n,o,!1,null,null,null);a["default"]=m.exports},"0f8a":function(e,a,t){"use strict";t.d(a,"d",(function(){return n})),t.d(a,"a",(function(){return o})),t.d(a,"e",(function(){return i})),t.d(a,"c",(function(){return r})),t.d(a,"b",(function(){return c}));var n={"-5":"低",0:"正常",5:"高"},o={0:"普通搬运",1:"拣货",2:"消毒"},i={0:"未执行",1:"正在执行",2:"已完成",3:"已取消",4:"异常"},r={0:"#e6a23c",1:"#77e640",2:"#66b1ff",3:"#909399",4:"#ec3b64",5:"#e13bec",6:"#e13bec"},c={0:{status:0,name:"空容器",color:"#409eff"},1:{status:1,name:"即将满",color:"#E6A23C"},2:{status:2,name:"满容器",color:"#67C23A"},3:{status:3,name:"即将空",color:"#909399"}}},1525:function(e,a,t){},"1aaf":function(e,a,t){"use strict";t("45c9")},"1b51":function(e,a,t){"use strict";t("af10")},2017:function(e,a,t){"use strict";t("b2b7")},"26fc":function(e,a,t){e.exports=t.p+"static/img/404_cloud.0f4bc32b.png"},2840:function(e,a,t){"use strict";t.d(a,"c",(function(){return o})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return r}));var n=t("b775");function o(e){return n["a"].post("/area/list",e)}function i(e){return n["a"].post("/area/update",e)}function r(e){return n["a"].post("/area/delete/"+e)}},2955:function(e,a,t){"use strict";t("affb")},"29a0":function(e,a,t){"use strict";t("1525")},"2d5aa":function(e,a,t){"use strict";t("eef3")},"2da3":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"addtask-container"},[t("el-dialog",{attrs:{title:"创建调度任务",visible:e.dialogAddTaskVisible,"close-on-click-modal":!1,fullscreen:e.fullscreen,width:"90%",top:"30px"},on:{close:e.handleClose,opened:e.initMapView}},[t("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[e.isNeedBack?t("el-page-header",{attrs:{content:"创建任务"},on:{back:e.goBack}}):t("span",[e._v("创建任务")]),e._v(" "),t("a",{staticStyle:{"margin-right":"30px"},on:{click:e.setFullScreen}},[t("i",{staticClass:"el-icon-full-screen"})])],1),e._v(" "),t("el-container",[t("el-aside",{staticClass:"aside-container",attrs:{width:"40%"}},[t("div",[t("div",[t("span",{staticClass:"searchlabel"},[e._v("区域")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},on:{change:e.domainChange},model:{value:e.domainId,callback:function(a){e.domainId="string"===typeof a?a.trim():a},expression:"domainId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("地图")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},on:{change:e.mapChange},model:{value:e.mapId,callback:function(a){e.mapId="string"===typeof a?a.trim():a},expression:"mapId"}},e._l(e.mapList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:e.domainId===a.areaId,expression:"domainId === value.areaId"}],key:n,attrs:{label:a.name,value:Number(n)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("分组")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.groupId,callback:function(a){e.groupId="string"===typeof a?a.trim():a},expression:"groupId"}},e._l(e.groupList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:e.domainId===a.areaId,expression:"domainId === value.areaId"}],key:n,attrs:{label:a.name,value:Number(n)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("AMR")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.agvId,callback:function(a){e.agvId="string"===typeof a?a.trim():a},expression:"agvId"}},e._l(e.vehicles,(function(a){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:a.areaId===e.domainId,expression:"item.areaId === domainId"}],key:a.amrId,attrs:{label:a.name,value:a.amrId}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("任务名")]),e._v(" "),t("el-input",{staticClass:"name-input",attrs:{placeholder:"请输入任务名称",clearable:"",size:"mini",maxlength:"20"},model:{value:e.taskName,callback:function(a){e.taskName="string"===typeof a?a.trim():a},expression:"taskName"}})],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("任务链")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:"",clearable:""},on:{change:e.selectTaskChainChange},model:{value:e.selectTaskChain,callback:function(a){e.selectTaskChain="string"===typeof a?a.trim():a},expression:"selectTaskChain"}},e._l(e.taskChains,(function(e,a){return t("el-option",{key:a,attrs:{label:e.taskChainTemplatePo.name,value:Number(a)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("优先级")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.selectPriority,callback:function(a){e.selectPriority="string"===typeof a?a.trim():a},expression:"selectPriority"}},e._l(e.taskPriorityEnum,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1)]),e._v(" "),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"cardheader",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("任务详情")]),e._v(" "),t("div",[t("el-tooltip",{attrs:{content:e.showTable?"切换到任务排序":"切换到表格",placement:"top"}},[t("el-button",{attrs:{icon:e.showTable?"el-icon-sort":"el-icon-menu",size:"mini",circle:""},on:{click:function(a){e.showTable=!e.showTable}}})],1),e._v(" "),t("el-tooltip",{attrs:{content:"添加子任务",placement:"top"}},[t("el-button",{attrs:{icon:"el-icon-plus",size:"mini",circle:""},on:{click:e.handleAdd}})],1)],1)]),e._v(" "),t("div",[e.showTable?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":"id","header-cell-style":{background:"#eee"},"highlight-current-row":"",height:"400px"},on:{"current-change":e.handleCurrentChange}},[t("el-table-column",{attrs:{align:"center",label:"类型","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{attrs:{size:"mini",filterable:""},on:{change:function(t){return e.handleSelectChange(a)}},model:{value:a.row.type,callback:function(t){e.$set(a.row,"type","string"===typeof t?t.trim():t)},expression:"scope.row.type"}},e._l(e.actionList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)]}}],null,!1,3234180962)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"地图"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                  "+e._s(e.mapList[a.row.mapId]&&e.mapList[a.row.mapId].name)+"\n                ")]}}],null,!1,3036228724)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"目标点","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{content:a.row.point,placement:"top",disabled:!a.row.point}},[t("el-select",{attrs:{size:"mini",filterable:""},on:{change:function(t){return e.changePoint(a.row)}},model:{value:a.row.point,callback:function(t){e.$set(a.row,"point","string"===typeof t?t.trim():t)},expression:"scope.row.point"}},e._l(e.mapInfo.mapPoints,(function(e,a){return t("el-option",{key:a,attrs:{label:e.vertexPo.code,value:e.vertexPo.code}})})),1)],1)]}}],null,!1,2670937074)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"参数",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-dialog",{attrs:{title:"修改参数",visible:e.isParamsDialog,modal:!1,"append-to-body":!0,width:"600px"},on:{"update:visible":function(a){e.isParamsDialog=a}}},[t("el-form",{attrs:{"label-width":"55px"}},[t("div",{staticClass:"paramsJSON-head"},[t("el-button",{attrs:{type:"success"},on:{click:e.addParamsJSON}},[e._v("增加键值对")]),e._v(" "),t("el-button",{attrs:{type:"danger"},on:{click:e.deleteAllParamsJSON}},[e._v("清空键值对")])],1),e._v(" "),e._l(e.paramsJSON,(function(a,n){return t("div",{key:n,staticClass:"paramsJSON-item"},[t("el-form-item",{attrs:{label:"key"}},[t("el-input",{attrs:{clearable:""},model:{value:a.key,callback:function(t){e.$set(a,"key","string"===typeof t?t.trim():t)},expression:"item.key"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"value"}},[t("el-input",{attrs:{clearable:""},model:{value:a.value,callback:function(t){e.$set(a,"value","string"===typeof t?t.trim():t)},expression:"item.value"}})],1),e._v(" "),t("div",{staticClass:"deleteAParamsJSON"},[t("el-button",{attrs:{type:"warning",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteAParamsJSON(n)}}})],1)],1)})),e._v(" "),t("div",{staticClass:"paramsJSON-footer"},[t("el-button",{on:{click:function(a){e.isParamsDialog=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeParams(a)}}},[e._v("确 定")])],1)],2)],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getParams(a.row)}}},[e._v("参数")])]}}],null,!1,1724124653)}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"deleteButton",attrs:{size:"mini",icon:"el-icon-close",circle:""},on:{click:function(t){return e.handleDelete(t,a)}}})]}}],null,!1,1068453665)})],1):t("div",{staticClass:"draggable"},[t("draggable",e._b({model:{value:e.list,callback:function(a){e.list=a},expression:"list"}},"draggable",{animation:200},!1),e._l(e.list,(function(a,n){return t("div",{key:n,staticClass:"draggable-item"},[t("div",[e._v("任务"+e._s(n+1))]),e._v(" "),t("div",[e._v(e._s(e.actionList[a.type]))]),e._v(" "),t("div",[e._v("\n                    "+e._s(e.mapList[a.mapId]&&e.mapList[a.mapId].name)+"\n                  ")]),e._v(" "),t("div",[e._v(e._s(a.point))]),e._v(" "),t("div",[e._v(e._s(a.extend))])])})),0)],1)],1),e._v(" "),t("div",{staticClass:"button-container"},[t("el-button",{staticClass:"commitButton",attrs:{type:"primary"},on:{click:e.commitOrder}},[e._v("确 定")])],1)])],1),e._v(" "),t("el-main",{class:[e.fullscreen?"drawtaskmap-fullscreen":""],attrs:{id:"drawtaskmap"}})],1)],1)],1)},o=[],i=(t("9f60"),t("94f0"),t("0c84"),t("2843"),t("a450"),t("4057"),t("00f2"),t("e680"),t("1bc7"),t("7661")),r=t("ca39"),c=t("fbb2"),s=t("4f6d"),l=t("4e37"),d=t("a68a"),m=t("3335"),u=t.n(m);function p(e,a){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=h(e))||a&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==t.return||t.return()}finally{if(c)throw i}}}}function h(e,a){if(e){if("string"===typeof e)return g(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(e,a):void 0}}function g(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}var f={components:{Sortable:l["a"],draggable:u.a},props:["dialogAddTaskVisible","taskPriorityEnum","actionList","domainList","mapList","groupList"],data:function(){return{mapInfo:{mapPoints:[],mapRoutes:[]},list:[],tableLoading:!1,vehicles:[],taskChains:{},canvas:null,rowId:0,agvId:"",mapId:"",domainId:"",taskName:"",selectTaskChain:"",groupId:"",oldMapId:"",selectPriority:0,mapGroup:{line:"",point:"",pointText:""},curIndex:-1,curId:null,fullscreen:!1,isParamsDialog:!1,paramsJSON:[{key:"",value:""}],row:{},showTable:!0,isNeedBack:!1}},watch:{mapId:{handler:function(e,a){this.oldMapId=a}}},methods:{getMap:function(){var e=this;return new Promise((function(a,t){e.mapInfo={mapPoints:[],mapRoutes:[]},Object(i["b"])({mapId:e.mapId}).then((function(n){var o=n.state,i=n.data;o&&(i?(e.mapInfo={mapPoints:i.Vertex,mapRoutes:i.Edge},a()):t("地图数据为空"))}))}))},createMapView:function(){var e=this;this.getMap().then((function(){e.drawMapView()})).catch((function(e){d["Message"].error(e)}))},initMapView:function(){var e=this;if(Object(r["c"])().then((function(a){a.state&&a.data.list&&a.data.list.forEach((function(a){e.$set(e.taskChains,a.taskChainTemplatePo.id,a)}))})),!this.oldTaskChain){var a=this.$route.query,t=a.vehicleId,n=a.mapId;this.isNeedBack=t||n;var o=this.mapList[Number(n)];if(n&&o)this.mapId=Number(n),this.domainId=o.areaId;else if(this.mapList){var i=null,c=Number(localStorage.getItem("mapid"));c&&(i=this.mapList[c]),i?(this.domainId=i.areaId,this.mapId=c):(this.getMapIdByDomain(),localStorage.setItem("mapid",this.mapId))}this.mapChange(),t&&o&&(this.agvId=Number(t))}},getMapIdByDomain:function(e){for(var a in this.mapId="",this.mapList){var t=this.mapList[a];if(t.areaId===e||void 0===e){this.domainId=t.areaId,this.mapId=Number(a);break}}this.mapChange()},drawMapView:function(){var e=this.$svg.get("taskmap");e&&e.remove();var a=document.getElementById("drawtaskmap").clientWidth-10,t=document.getElementById("drawtaskmap").clientHeight,n=this.mapInfo.mapPoints.map((function(e){var a=e.vertexPo;return a.x})),o=this.mapInfo.mapPoints.map((function(e){var a=e.vertexPo;return a.y})),i=Math.min.apply(null,n),r=Math.min.apply(null,o),c=Math.max.apply(null,n),s=Math.max.apply(null,o),l=new this.$svg.Matrix(1,0,0,-1,.5,.5),d=Math.floor(a/(c-i)),m=Math.floor(t/(s-r)),u=d<m?d:m;this.canvas=this.$svg("drawtaskmap").id("taskmap").size(a,t).viewbox(i,r,c-i,s-r).transform(l).panZoom({zoomMin:u/3*2,zoomMax:300*u,zoomFactor:u/5}),this.mapGroup.line=this.canvas.group(),this.mapGroup.point=this.canvas.group(),this.mapGroup.pointText=this.canvas.group(),this.drawMapPoint(u),this.drawMapRoute(u),this.canvas.zoom(this.canvas.zoom()-.24),this.setSort()},drawMapPoint:function(e){var a,t=this,n=p(this.mapInfo.mapPoints);try{var o=function(){var n=a.value.vertexPo,o="#0067b8";switch(n.type){case 128:o="#cd6600";break;case 0:o="#0067b8";break;default:o="#47fa65";break}var i=t.canvas.circle(2/e).id("ADD"+n.code).center(n.x,n.y).fill(o).on("click",(function(){t.setPoint(n.code)}));t.mapGroup.point.add(i),t.mapGroup.pointText.add(t.canvas.text(n.code).font({size:1.5/e}).attr("transform","").scale(-1,1,n.x,n.y).rotate(180,n.x,n.y).center(n.x,n.y+2/e))};for(n.s();!(a=n.n()).done;)o()}catch(i){n.e(i)}finally{n.f()}},drawMapRoute:function(e){var a,t=p(this.mapInfo.mapRoutes);try{for(t.s();!(a=t.n()).done;){var n=a.value.edgePo,o=this.$svg.get("ADD"+n.source),i=this.$svg.get("ADD"+n.target);this.mapGroup.line.add(this.canvas.line(o.cx(),o.cy(),i.cx(),i.cy()).stroke("rgb(188, 194, 196)").stroke({width:.4/e}))}}catch(r){t.e(r)}finally{t.f()}},handleClose:function(){this.list=[],this.selectTaskChain="",this.domainId="",this.taskName="",this.rowId=0,this.curIndex=-1,this.$emit("update:dialogAddTaskVisible",!1)},handleAdd:function(){this.rowId=this.list[this.list.length-1]?this.list[this.list.length-1].id+1:0;var e={id:this.rowId++,type:"",mapId:"",point:""};this.list.push(e)},setSort:function(){var e=this,a=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];l["a"].create(a,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(a){var t=e.list.splice(a.oldIndex,1)[0];e.list.splice(a.newIndex,0,t),a.oldIndex===e.curIndex?e.curIndex=a.newIndex:e.$refs.dragTable.setCurrentRow(t)}})},setPoint:function(e){if(-1===this.curIndex||0===this.list.length)return d["Message"].warning("请先选择要编辑的任务！");var a=this.list[this.curIndex];if(""===a.type)return d["Message"].warning("请先选择任务类型！");a.point=e,a.mapId=this.mapId,this.removePointClass(),this.addPointClass("ADD"+e)},removePointClass:function(){if(this.curId){var e=this.$svg.get(this.curId);e&&e.removeClass("selectedPoint"),this.curId=null}},addPointClass:function(e){var a=this.$svg.get(e);a&&a.addClass("selectedPoint"),this.curId=e},handleDelete:function(e,a){var t=a.$index;a.row;this.list.splice(t,1),this.curIndex=-1,this.removePointClass(),e.stopPropagation()},handleCurrentChange:function(e){this.curIndex=this.list.indexOf(e);var a=0;""!==e.point&&(a=e.point),this.removePointClass(),this.addPointClass("ADD"+a)},handleSelectChange:function(e){e.$index;var a=e.row;this.$refs.dragTable.setCurrentRow(a)},domainChange:function(){this.canvas&&this.canvas.clear(),this.getMapIdByDomain(this.domainId),this.list=[],this.groupId="",this.agvId="",this.selectTaskChain=""},mapChange:function(){var e=this;this.canvas&&this.canvas.clear(),this.mapId?(Object(c["e"])({areaId:this.domainId}).then((function(a){a.state&&(e.vehicles=a.data.data)})),this.createMapView()):this.mapInfo={mapPoints:[],mapRoutes:[]}},selectTaskChainChange:function(){var e=this;this.list=[];var a=this.taskChains[this.selectTaskChain];this.selectTaskChain&&a&&a.taskTemplatePos.forEach((function(a,t){e.list.push({id:a.id,type:a.action,mapId:a.mapId,point:a.endPointCode,sequence:t,extend:a.extend||""})}))},changePoint:function(e){e.mapId=this.mapId},commitOrder:function(e){var a=this;if(!this.domainId)return d["Message"].warning("请选择区域");if(0===this.list.length)return d["Message"].warning("请添加子任务");var t=this.list.filter((function(e){return""===e.type||""===e.point}));if(t.length>0)return d["Message"].warning("任务类型和目标点不能为空，请先编辑完整再提交");var n={taskChain:{areaId:this.domainId,priority:this.selectPriority,name:this.taskName,groupId:this.groupId},tasks:this.list.map((function(e,t){var n={action:e.type,mapId:Number(a.mapId),endPointCode:e.point,sequence:t};return e.extend&&(n.extend=e.extend),n}))};this.agvId&&(n.taskChain.amrId=this.agvId),this.$confirm("将提交任务，是否确定？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.listLoading=!0,Object(s["a"])(n).then((function(t){a.listLoading=!1,t.state&&(d["Message"].success("提交成功"),a.$emit("getTaskList"),a.isNeedBack?(a.list=[],a.selectTaskChain="",a.taskName="",a.curIndex=-1):a.handleClose(),e.stopPropagation())})).catch((function(){a.listLoading=!1}))})).catch((function(){}))},setFullScreen:function(){var e=this;this.fullscreen=!this.fullscreen,this.$nextTick((function(){e.drawMapView()}))},changeParams:function(){var e={},a=0;this.paramsJSON.forEach((function(t){""!==t.key&&(e[t.key]=t.value,a++)})),this.row.extend=a?JSON.stringify(e):"",this.isParamsDialog=!1},addParamsJSON:function(){this.paramsJSON.push({key:"",value:""})},deleteAllParamsJSON:function(){this.paramsJSON=[{key:"",value:""}]},deleteAParamsJSON:function(e){this.paramsJSON.splice(e,1),0===this.paramsJSON.length&&(this.paramsJSON=[{key:"",value:""}])},getParams:function(e){this.row=e;var a=e.extend;if(a)for(var t in a=JSON.parse(a),this.paramsJSON=[],a)this.paramsJSON.push({key:t,value:a[t]});else this.deleteAllParamsJSON();this.isParamsDialog=!0},goBack:function(){this.$router.push("/")}}},v=f,b=(t("68da"),t("9207"),t("01c0"),t("4ac2")),_=Object(b["a"])(v,n,o,!1,null,"a69f13f4",null);a["default"]=_.exports},"2dab":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"chargeTime-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择小车",clearable:"",filterable:""},on:{change:e.getChargeTimeList},model:{value:e.amrId,callback:function(a){e.amrId="string"===typeof a?a.trim():a},expression:"amrId"}},e._l(e.vehicleList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargeTime/add",expression:"'config/chargeTime/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增强制充电时间")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{label:"小车名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.vehicleList[a.row.amrId]||"---")+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"forceChargeStartTime",label:"开始时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"forceChargeEndTime",label:"结束时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"是否启用",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargeTime/update",expression:"'config/chargeTime/update'"}],attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.toggleEnable(a.row)}},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable","string"===typeof t?t.trim():t)},expression:"scope.row.enable"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!config/chargeTime/update",expression:"'!config/chargeTime/update'"}]},[e._v(e._s(1===a.row.enable?"已启用":"未启用"))])]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargeTime/update",expression:"'config/chargeTime/update'"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditDialog(a.row)}}}),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargeTime/delete",expression:"'config/chargeTime/delete'"}],attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteChargeTime(a.row)}}})]:void 0}}],null,!0)})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getChargeTimeList}}),e._v(" "),t("el-dialog",{attrs:{title:e.isEdit?"编辑强制充电时间配置":"新增强制充电时间配置",visible:e.isDialog,width:"370px"},on:{"update:visible":function(a){e.isDialog=a},close:e.closeDialog}},[t("el-form",{ref:"chargeTimeForm",attrs:{"label-width":"90px",model:e.chargeTimeForm,rules:e.chargeTimeRules}},[t("el-form-item",{attrs:{label:"小车: ",prop:"amrId"}},[t("el-select",{attrs:{placeholder:"请选择小车",clearable:"",filterable:""},model:{value:e.chargeTimeForm.amrId,callback:function(a){e.$set(e.chargeTimeForm,"amrId","string"===typeof a?a.trim():a)},expression:"chargeTimeForm.amrId"}},e._l(e.vehicleList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间: ",prop:"forceChargeStartTime"}},[t("el-time-picker",{attrs:{"picker-options":{format:"HH:mm"},"value-format":"HH:mm",clearable:!1},on:{change:e.handleTimeRange},model:{value:e.chargeTimeForm.forceChargeStartTime,callback:function(a){e.$set(e.chargeTimeForm,"forceChargeStartTime","string"===typeof a?a.trim():a)},expression:"chargeTimeForm.forceChargeStartTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"结束时间: ",prop:"forceChargeEndTime"}},[t("el-time-picker",{attrs:{"picker-options":{format:"HH:mm",start:e.chargeTimeForm.forceChargeStartTime},"value-format":"HH:mm",clearable:!1},on:{change:e.handleTimeRange},model:{value:e.chargeTimeForm.forceChargeEndTime,callback:function(a){e.$set(e.chargeTimeForm,"forceChargeEndTime","string"===typeof a?a.trim():a)},expression:"chargeTimeForm.forceChargeEndTime"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("b775"));function r(e){return i["a"].post("/amrTimeChargeConfig/list",e)}function c(e){return i["a"].post("/amrTimeChargeConfig/add",e)}function s(e){return i["a"].post("/amrTimeChargeConfig/update",e)}function l(e){var a=e.id,t=e.uuid;return i["a"].delete("/amrTimeChargeConfig/delete/".concat(a,"/").concat(t))}var d=t("fbb2"),m=t("a68a"),u=t("333d"),p={name:"chargeTime",props:["innerHeightMinusFilter"],components:{Pagination:u["a"]},data:function(){var e=[{required:!0,trigger:"blur",message:"请选择时间"},{message:"只能是时间格式",pattern:/^[:\d]+$/,trigger:["blur","change"]}];return{tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,vehicleList:{},amrId:null,isDialog:!1,isEdit:!1,chargeTimeForm:{amrId:"",forceChargeStartTime:"00:00",forceChargeEndTime:"00:00"},chargeTimeRules:{amrId:[{required:!0,trigger:"change",message:"请选择小车"}],forceChargeStartTime:e,forceChargeEndTime:e}}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),Object(d["e"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.vehicleList,a.amrId,a.name)}))})),this.getChargeTimeList()},methods:{getChargeTimeList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};this.amrId&&(a.amrId=this.amrId),this.tableLoading=!0,r(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.list||[],e.total=a.data.total||0)}))},openAddDialog:function(){var e=this;this.isEdit=!1,this.chargeTimeForm={amrId:"",forceChargeStartTime:"00:00",forceChargeEndTime:"00:00",enable:1},this.isDialog=!0,this.$nextTick((function(){e.$refs.chargeTimeForm.clearValidate()}))},closeDialog:function(){this.$refs.chargeTimeForm.clearValidate(),this.isDialog=!1},openEditDialog:function(e){this.isEdit=!0,this.chargeTimeForm=JSON.parse(JSON.stringify(e)),this.isDialog=!0},saveEdit:function(){var e=this;this.$refs.chargeTimeForm.validate((function(a){a&&(e.isEdit?s(e.chargeTimeForm).then((function(a){a.state&&(m["Message"].success("强制充电时间配置修改成功"),e.isDialog=!1,e.getChargeTimeList())})):c(e.chargeTimeForm).then((function(a){a.state&&(m["Message"].success("强制充电时间配置增加成功"),e.isDialog=!1,e.getChargeTimeList())})))}))},toggleEnable:function(e){var a=this,t=e.enable?"启用":"禁用",n=function(){e.enable=0===e.enable?1:0};m["MessageBox"].confirm("确定".concat(t,"强制充电时间?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s(e).then((function(e){e.state?(m["Message"].success("强制充电时间".concat(t,"成功")),a.getChargeTimeList()):n()})).catch((function(){n()}))})).catch((function(){n()}))},deleteChargeTime:function(e){var a=this;m["MessageBox"].confirm("确定删除该强制充电时间配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l({id:e.id,uuid:e.uuid}).then((function(e){e.state&&(m["Message"].success("强制充电时间配置删除成功"),a.getChargeTimeList())}))})).catch((function(){}))},handleTimeRange:function(){this.chargeTimeForm.forceChargeEndTime<this.chargeTimeForm.forceChargeStartTime&&(this.chargeTimeForm.forceChargeEndTime=this.chargeTimeForm.forceChargeStartTime)}}},h=p,g=t("4ac2"),f=Object(g["a"])(h,n,o,!1,null,null,null);a["default"]=f.exports},"2e78":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"battery-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container filter-container-flex filter-container-spaceBetween"},[t("div",{staticClass:"filter-left"},[t("div",{staticClass:"statistics"},[t("div",{staticClass:"battery-num"},[t("i",{staticClass:"icon iconfont icon-tongji"}),e._v(" "),t("div",{staticClass:"info"},[t("div",{staticClass:"num"},[e._v(e._s(e.total))]),e._v(" "),t("div",{staticClass:"text"},[e._v("电池总数")])])]),e._v(" "),t("div",{staticClass:"battery-num"},[t("i",{staticClass:"icon iconfont icon-tongji1"}),e._v(" "),t("div",{staticClass:"info"},[t("div",{staticClass:"num"},[e._v(e._s(e.onLineBatteryNum))]),e._v(" "),t("div",{staticClass:"text"},[e._v("在线数")])])])]),e._v(" "),t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择分组",clearable:"",filterable:""},on:{change:e.getBatteryList},model:{value:e.groupFilter,callback:function(a){e.groupFilter="string"===typeof a?a.trim():a},expression:"groupFilter"}},e._l(e.groupList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:Number(a)}})})),1),e._v(" "),t("el-input",{staticClass:"filter-input-two",attrs:{placeholder:"请输入电池编号/电池序列号",clearable:""},on:{change:e.getBatteryList},model:{value:e.inputFilter,callback:function(a){e.inputFilter="string"===typeof a?a.trim():a},expression:"inputFilter"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:e.getBatteryList}},[e._v("搜索")])],1)],2)],1),e._v(" "),t("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-download"},on:{click:e.exportBatteryInfo}},[e._v("导出")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-258,"header-cell-style":{background:"#eee"},"highlight-current-row":"","tooltip-effect":"dark"}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"amrId",label:"ID",sortable:"",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(a){return e.toElectricityChange(n)}}},[e._v("电池趋势")])]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getBatteryList}})],1)},o=[],i=(t("a450"),t("1bc7"),t("333d")),r=t("4856"),c=t("2840"),s=t("0aa6"),l=t("1ed8"),d=t.n(l),m=t("a68a"),u={name:"battery",props:["innerHeightMinusFilter"],components:{Pagination:i["a"]},data:function(){return{tableList:[],tableLoading:!0,currentPage:1,pageSize:10,total:0,onLineBatteryNum:0,groupFilter:"",domainIdFilter:"",inputFilter:"",domainList:{},groupList:{}}},methods:{mountedFun:function(){var e=this;this.$emit("watchFilterHeight"),Object(c["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),Object(s["c"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.groupList,a.id,a.name)}))})),this.getBatteryList()},getBatteryList:function(){var e=this;this.tableLoading=!0;var a={currentPage:this.currentPage,pageSize:this.pageSize};this.inputFilter&&(a.name=this.inputFilter),this.domainIdFilter&&(a.areaId=this.domainIdFilter),Object(r["b"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0)})),Object(r["c"])({domianIds:a.domainIdFilter}).then((function(a){e.onLineBatteryNum=a.data.length||0}))},exportBatteryInfo:function(){var e={};if(!(this.dateTime&&this.dateTime.length>0))return m["Message"].warning("请先选择时间区间");e.startTime=formatTime(this.dateTime[0]),e.endTime=formatTime(this.dateTime[1]),this.taskType&&(e.taskType=this.taskType),Object(r["a"])(e).then((function(e){e&&(d()(e,(new Date).getTime()+".xlsx"),m["Message"].success("导出成功"))}))},toElectricityChange:function(e){console.log(e)}}},p=u,h=(t("3c97"),t("4ac2")),g=Object(h["a"])(p,n,o,!1,null,"664a3f52",null);a["default"]=g.exports},"312c":function(e,a,t){"use strict";t("9d76")},"333d":function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(a){e.currentPage=a},"update:current-page":function(a){e.currentPage=a},"update:pageSize":function(a){e.pageSize=a},"update:page-size":function(a){e.pageSize=a},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},o=[],i=(t("e680"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,15,20,25]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.currentPage=1,this.$emit("pagination",{page:1,limit:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize})}},watch:{total:function(){1!==this.currentPage&&(this.currentPage=1,this.$emit("pagination",{page:1,limit:this.pageSize}))}}}),r=i,c=(t("1aaf"),t("4ac2")),s=Object(c["a"])(r,n,o,!1,null,"039a47fc",null);a["a"]=s.exports},"375c":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mapDetails-container"},[t("div",{staticClass:"content-box step-main"},[t("el-steps",{staticStyle:{transform:"scale(1.3)"},attrs:{active:e.step,"align-center":""}},[t("el-step",{attrs:{title:"上传地图"}},[t("v-icon",{attrs:{slot:"icon",name:"arrow-alt-circle-up"},slot:"icon"})],1),e._v(" "),t("el-step",{attrs:{title:"地图启用"}},[t("v-icon",{attrs:{slot:"icon",name:"play-circle"},slot:"icon"})],1),e._v(" "),t("el-step",{attrs:{title:"完成"}},[t("v-icon",{attrs:{slot:"icon",name:"check-circle"},slot:"icon"})],1)],1),e._v(" "),t("div",{staticClass:"step-title"},[e.backPage?t("el-page-header",{attrs:{content:e.topologyMap.alias||e.topologyMap.name},on:{back:e.goBack}}):t("span",[e._v(e._s(e.topologyMap.alias||e.topologyMap.name))])],1)],1),e._v(" "),t("div",{staticClass:"spot-map-main"},[t("div",{staticClass:"content-box spot-main"},[t("div",{staticClass:"spot-filter"},[t("el-input",{attrs:{placeholder:"ID/编号/别名",clearable:""},model:{value:e.spotFilter,callback:function(a){e.spotFilter="string"===typeof a?a.trim():a},expression:"spotFilter"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("工位点")])])],1),e._v(" "),t("el-table",{attrs:{data:e.spots,height:e.innerHeight-288,"header-cell-style":{background:"#eee"},"highlight-current-row":"",stripe:""}},[t("el-table-column",{attrs:{align:"center",label:"ID",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            "+e._s(a.row.vertexPo.id)+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"编号"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            "+e._s(a.row.vertexPo.code)+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"别名"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            "+e._s(a.row.vertexPo.alias||"---")+"\n          ")]}}])})],1)],1),e._v(" "),t("div",{staticClass:"content-box map-main",style:{height:e.innerHeight-228+"px"}},[t("div",{staticClass:"header"},[t("span",{staticClass:"title"},[e._v(e._s(e.topologyMap.alias||e.topologyMap.name))]),e._v(" "),t("span",{staticClass:"buttons"},[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/update",expression:"'map/update'"}],staticClass:"switch",attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.toggleEnable()}},model:{value:e.topologyMap.enable,callback:function(a){e.$set(e.topologyMap,"enable","string"===typeof a?a.trim():a)},expression:"topologyMap.enable"}}),e._v(" "),t("a",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/download",expression:"'map/download'"}],style:{marginRight:"10px"},attrs:{href:e.topologyMap.mapFileUrl&&("development"===e.nodeEnv?"/api/":"/")+e.topologyMap.mapFileUrl.replace(/\\/g,"/")}},[t("el-button",{attrs:{size:"mini",type:"primary",plain:""}},[e._v("下载")])],1),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/update",expression:"'map/update'"}],attrs:{size:"mini",type:"warning",plain:""},on:{click:function(a){return e.openEditDialog()}}},[e._v("修改")]),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/delete",expression:"'map/delete'"}],attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){return e.deleteMap()}}},[e._v("删除")])],1)]),e._v(" "),t("div",{staticClass:"detail"},[t("div",[e._v("地图ID: "+e._s(e.topologyMap.id))]),e._v(" "),t("div",[e._v("\n          大小:\n          "+e._s(e.topologyMap.fileSize&&Math.floor(1e3*e.topologyMap.fileSize)+"KB")+"\n        ")]),e._v(" "),t("div",[e._v("更新时间: "+e._s(e._f("dateTime")(e.topologyMap.updateTime)))]),e._v(" "),t("div",[e._v("区域名称: "+e._s(e.area.name))])]),e._v(" "),t("div",{ref:"imageParent",staticClass:"image"},[t("img",{attrs:{src:e.pngSrc,id:"imageChild"}})])])]),e._v(" "),t("el-dialog",{attrs:{title:"编辑地图",visible:e.isDialog,width:"410px",center:""},on:{"update:visible":function(a){e.isDialog=a},close:e.closeDialog}},[t("el-form",{ref:"mapForm",attrs:{"label-width":"85px",model:e.mapForm,rules:e.mapRules}},[t("el-form-item",{attrs:{label:"地图别名: "}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入地图别名"},model:{value:e.mapForm.alias,callback:function(a){e.$set(e.mapForm,"alias","string"===typeof a?a.trim():a)},expression:"mapForm.alias"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"工作区域: ",prop:"areaId"}},[t("el-select",{attrs:{placeholder:"请选择区域",clearable:"",filterable:""},model:{value:e.mapForm.areaId,callback:function(a){e.$set(e.mapForm,"areaId","string"===typeof a?a.trim():a)},expression:"mapForm.areaId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"楼层: ",prop:"floor"}},[t("el-input-number",{attrs:{precision:0,step:1,"controls-position":"right"},model:{value:e.mapForm.floor,callback:function(a){e.$set(e.mapForm,"floor",e._n(a))},expression:"mapForm.floor"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"转弯角度: ",prop:"determineTurningAngle"}},[t("el-input-number",{attrs:{precision:2,step:1,"controls-position":"right"},model:{value:e.mapForm.determineTurningAngle,callback:function(a){e.$set(e.mapForm,"determineTurningAngle",e._n(a))},expression:"mapForm.determineTurningAngle"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("8dee"),t("a450"),t("1bc7"),t("7661")),r=t("2840"),c=t("a68a"),s={name:"mapDetails",props:["innerHeight"],data:function(){return{loading:!0,spotFilter:"",Edge:[],Vertex:[],area:{},topologyMap:{},step:1,pngSrc:"",mapForm:{alias:"",reaId:"",floor:"",determineTurningAngle:""},isDialog:!1,mapRules:{areaName:[{required:!0,trigger:"change",message:"请选择工作区域"}],areaId:[{required:!0,trigger:"change",message:"请选择工作区域"}],floor:[{message:"楼层应为数字",pattern:/^[-.\d]+$/,trigger:"blur"}],determineTurningAngle:[{message:"转弯角度应为数字",pattern:/^[-.\d]+$/,trigger:"blur"}]},domainList:{},backPage:"",nodeEnv:"production"}},computed:{spots:function(){var e=this;return this.Vertex.filter((function(a){var t=a.vertexPo,n=e.spotFilter.toLowerCase();return(String(t.id).indexOf(n)>-1||t.alias.toLowerCase().indexOf(n)>-1||t.code.toLowerCase().indexOf(n)>-1)&&0!==t.type}))}},mounted:function(){var e=this;this.getMapDetailById(),this.onResize(),Object(r["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),this.backPage=this.$route.query.backPage},methods:{onResize:function(){var e=this;this.$nextTick((function(){document.getElementById("imageChild").style.maxWidth=e.$refs.imageParent.offsetWidth-80+"px",document.getElementById("imageChild").style.maxHeight=e.$refs.imageParent.offsetHeight-50+"px"}))},getMapDetailById:function(){var e=this;this.loading=!0,Object(i["b"])({mapId:this.$route.params.id}).then((function(a){if(e.loading=!1,a.state){var t=a.data,n=t.Edge,o=t.Vertex,i=t.area,r=t.topologyMap;e.Edge=n,e.Vertex=o,e.area=i,e.topologyMap=r,e.step=r.enable?3:1,e.pngSrc=""+r.backgroundImgUrl.replace(/\\/g,"/")}}))},toggleEnable:function(){var e=this,a=1===this.topologyMap.enable?"启用":"禁用",t=function(){e.topologyMap.enable=1===e.topologyMap.enable?0:1};this.$confirm("确定".concat(a).concat(this.topologyMap.alias||this.topologyMap.name,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["d"])(e.topologyMap).then((function(n){n.state?(e.$message.success("地图".concat(a,"成功")),e.getMapDetailById()):t()}))})).catch((function(){t()}))},openEditDialog:function(){this.mapForm=JSON.parse(JSON.stringify(this.topologyMap)),this.isDialog=!0},closeDialog:function(){this.$refs.mapForm.clearValidate(),this.isDialog=!1},saveEdit:function(){var e=this;this.$refs.mapForm.validate((function(a){a&&Object(i["d"])(e.mapForm).then((function(a){a.state&&(c["Message"].success("地图修改成功"),e.isDialog=!1,e.getMapDetailById())}))}))},deleteMap:function(){var e=this;if(this.topologyMap.enable)return c["Message"].warning("请先禁用该地图");c["MessageBox"].confirm("确定删除地图: ".concat(this.topologyMap.alias||this.topologyMap.name,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])(e.topologyMap.id).then((function(a){a.state&&(c["Message"].success("地图删除成功"),e.$router.push("/map/index"))}))})).catch((function(){}))},goBack:function(){this.$router.push(this.backPage)}}},l=s,d=(t("e05e"),t("4ac2")),m=Object(d["a"])(l,n,o,!1,null,"1c5a27aa",null);a["default"]=m.exports},"3a75":function(e,a,t){},"3aad":function(e,a,t){"use strict";t("8b3f")},"3c97":function(e,a,t){"use strict";t("ef37")},"45c9":function(e,a,t){},48360:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"callCenter-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container flex-between"},[t("div",{staticClass:"status-main"},e._l(e.locationStatusList,(function(a,n){return t("div",{key:n,staticClass:"status-item",style:{backgroundColor:a.color}},[t("p",[e._v(e._s(a.name))]),e._v(" "),t("p",[e._v(e._s(e.totalList[Number(n)])+"%")])])})),0),e._v(" "),t("div",[t("el-radio",{attrs:{label:""},model:{value:e.locationFilter,callback:function(a){e.locationFilter=a},expression:"locationFilter"}},[e._v("全部库位")]),e._v(" "),t("el-radio",{attrs:{label:"1"},model:{value:e.locationFilter,callback:function(a){e.locationFilter=a},expression:"locationFilter"}},[e._v("满容器库位")]),e._v(" "),t("el-radio",{attrs:{label:"2"},model:{value:e.locationFilter,callback:function(a){e.locationFilter=a},expression:"locationFilter"}},[e._v("空容器库位")])],1)]),e._v(" "),t("div",{staticClass:"table-container",style:{maxHeight:e.innerHeightMinusFilter-(e.canSendOrder?170:100)+"px"}},[t("el-collapse",{staticClass:"table-main",model:{value:e.activeNames,callback:function(a){e.activeNames=a},expression:"activeNames"}},e._l(e.areaList,(function(a,n){var o=a.storageCode,i=a.areaCode,r=a.wmsColumnPos,c=a.areaId,s=a.locations;return t("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:s&&s.length>0,expression:"locations && locations.length > 0"}],key:n,attrs:{name:c}},[t("template",{slot:"title"},[t("el-tooltip",{attrs:{effect:"dark",content:"仓库 - 区域",placement:"top"}},[t("span",{staticClass:"collapse-title"},[e._v(e._s(o+" - "+i))])])],1),e._v(" "),t("div",{staticClass:"column-container"},e._l(r,(function(a,n){var o=a.columnCode,i=a.wmsLocationPos;return t("div",{directives:[{name:"show",rawName:"v-show",value:i&&i.length>0,expression:"wmsLocationPos && wmsLocationPos.length > 0"}],key:n,staticClass:"column-items"},[t("el-tooltip",{attrs:{effect:"dark",content:"栏位: "+o,placement:"top"}},[t("div",{staticClass:"column-main location-item"},[t("div",[e._v(e._s(o))])])]),e._v(" "),e._l(i,(function(a,n){return t("el-tooltip",{key:n,attrs:{effect:"dark",placement:"top"}},[t("span",{attrs:{slot:"content"},slot:"content"},[e._v("\n                库位(名称/位置): "+e._s(a.code)+"/"+e._s(a.columnIndex)+"\n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.vertexCode,expression:"!item.vertexCode"}]},[t("br"),e._v("无绑定点位")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.locationFilter||"1"===e.locationFilter&&e.startAllowList.indexOf(a.status)>-1||"2"===e.locationFilter&&e.endAllowList.indexOf(a.status)>-1,expression:"\n                  !locationFilter ||\n                  (locationFilter === '1' &&\n                    startAllowList.indexOf(item.status) > -1) ||\n                  (locationFilter === '2' &&\n                    endAllowList.indexOf(item.status) > -1)\n                "}],staticClass:"location-item",class:a.vertexCode?"location-"+a.id===e.orderForm.start||"location-"+a.id===e.orderForm.end?"location-item-choosed":"":"location-item-noPoint",style:{backgroundColor:e.locationStatusList[a.status].color},on:{click:function(){e.canSendOrder&&e.clickLocation("location-"+a.id)},dblclick:function(){e.canResetStatus&&e.dblclickLocation(a)}}},[t("div",[e._v("\n                  "+e._s(a.code)+"\n                ")])])])}))],2)})),0)],2)})),1)],1),e._v(" "),e.canSendOrder?t("div",{staticClass:"main-footer"},[t("el-form",{attrs:{inline:!0,model:e.orderForm,"label-width":"80px"}},[t("el-form-item",{staticClass:"AGV",attrs:{label:"AGV任务"}}),e._v(" "),t("el-form-item",{staticClass:"orderForm",attrs:{label:"起点"}},[t("el-select",{attrs:{placeholder:"起点",filterable:"",clearable:""},model:{value:e.orderForm.start,callback:function(a){e.$set(e.orderForm,"start","string"===typeof a?a.trim():a)},expression:"orderForm.start"}},e._l(e.areaList,(function(a){var n=a.areaCode,o=a.areaId,i=a.locations;return t("el-option-group",{key:"area-"+o,attrs:{label:n}},e._l(i||[],(function(a){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:a.id!==e.orderForm.end&&e.startAllowList.indexOf(a.status)>-1,expression:"\n                item.id !== orderForm.end &&\n                startAllowList.indexOf(item.status) > -1\n              "}],key:"location-"+a.id,staticClass:"select-group-option",attrs:{label:n+"/"+a.code,value:"location-"+a.id}})})),1)})),1)],1),e._v(" "),t("el-form-item",{staticClass:"orderForm",attrs:{label:"终点"}},[t("el-select",{attrs:{placeholder:"终点",filterable:"",clearable:""},model:{value:e.orderForm.end,callback:function(a){e.$set(e.orderForm,"end","string"===typeof a?a.trim():a)},expression:"orderForm.end"}},e._l(e.areaList,(function(a){var n=a.areaCode,o=a.areaId,i=a.locations;return t("el-option-group",{key:"area-"+o,attrs:{label:n}},e._l(i||[],(function(a){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:a.id!==e.orderForm.start&&e.endAllowList.indexOf(a.status)>-1,expression:"\n                item.id !== orderForm.start &&\n                endAllowList.indexOf(item.status) > -1\n              "}],key:"location-"+a.id,staticClass:"select-group-option",attrs:{label:n+"/"+a.code,value:"location-"+a.id}})})),1)})),1)],1),e._v(" "),t("el-form-item",[t("el-button",{staticClass:"send-order-btn",attrs:{type:"success"},on:{click:e.handleSendOrder}},[e._v("任务下发")])],1)],1),e._v(" "),t("div",{staticClass:"showOrderList-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.isOrderDialog=!e.isOrderDialog}}},[e._v(e._s(e.isOrderDialog?"取消查看":"查看任务列表"))])],1)],1):e._e(),e._v(" "),t("el-dialog",{attrs:{title:"库位状态编辑",visible:e.locationDialog,width:"400px"},on:{"update:visible":function(a){e.locationDialog=a},close:e.closeLocationDialog}},[t("el-form",{ref:"locationForm",attrs:{"label-width":"80px",model:e.locationForm,rules:e.locationRules}},[t("el-form-item",{attrs:{label:"编号:",prop:"code"}},[t("el-input",{attrs:{disabled:""},model:{value:e.locationForm.code,callback:function(a){e.$set(e.locationForm,"code","string"===typeof a?a.trim():a)},expression:"locationForm.code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"库位状态",prop:"status"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.locationForm.status,callback:function(a){e.$set(e.locationForm,"status","string"===typeof a?a.trim():a)},expression:"locationForm.status"}},e._l(e.locationStatusList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:e.startAllowList.concat(e.endAllowList).indexOf(a.status)>-1,expression:"\n              [...startAllowList, ...endAllowList].indexOf(value.status) > -1\n            "}],key:n,attrs:{label:a.name,value:a.status}})})),1)],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeLocationDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.updateLocationStatus}},[e._v("确 定")])],1)],1),e._v(" "),t("el-drawer",{staticClass:"callCenter-drawer",attrs:{visible:e.isOrderDialog,direction:"ltr",modal:!1,title:"仓库任务列表",size:"100%"},on:{"update:visible":function(a){e.isOrderDialog=a}}},[t("order-list",{attrs:{isOrderDialog:e.isOrderDialog}})],1)],1)},o=[],i=t("4bcf"),r=(t("e5b4"),t("e680"),t("fc02"),t("7978f")),c=(t("3441"),t("1bc7"),t("0c84"),t("3e38"),t("bbfa")),s=t("a68a"),l=t("333d"),d=t("7c98"),m=t.n(d),u=t("0f8a"),p=t("f3f9"),h=t("4360"),g={name:"callCenter",props:["innerHeightMinusFilter"],components:{Pagination:l["a"],orderList:p["default"]},data:function(){return{areaList:{},locationTimer:0,locationList:new Map,orderForm:{start:"",end:""},clickTimer:0,locationDialog:!1,locationForm:{id:"",code:"",status:""},locationRules:{status:[{required:!0,trigger:"change",message:"请选择库位状态"}]},locationStatusList:u["b"],startAllowList:[2],endAllowList:[0],activeNames:[],locationFilter:"",totalList:[],canSendOrder:!0,canResetStatus:!0,isOrderDialog:!1}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),this.getLocationList(!0),this.locationTimer&&clearInterval(this.locationTimer),this.locationTimer=setInterval((function(){e.getLocationList()}),1e3),this.canSendOrder=h["a"].getters.permissions.indexOf("wms/callCenter/sendOrder")>-1,this.canResetStatus=h["a"].getters.permissions.indexOf("wms/callCenter/resetStatus")>-1},beforeDestroy:function(){this.locationTimer&&clearInterval(this.locationTimer)},methods:{getLocationList:function(e){var a=this;Object(c["c"])().then((function(t){var n=[0,0,0,0];a.locationList.clear(),a.areaList={},t.state&&t.data&&t.data.forEach((function(t){!0===e&&a.activeNames.push(t.areaId);var o=[];t.wmsColumnPos.forEach((function(e){e.wmsLocationPos.sort((function(e,a){return a.columnIndex-e.columnIndex})),e.wmsLocationPos.forEach((function(e){a.locationList.set(e.id,e),n[e.status]++,o.push(e)}))})),t.locations=o,a.$set(a.areaList,t.areaId,t)})),a.locationList.size>0?n.forEach((function(e,t){a.totalList[t]=m.a.round(e/a.locationList.size*100)})):a.totalList=[0,0,0,0],a.checkPlatfromAllow()}))},checkPlatfromAllow:function(){var e=this,a=this.orderForm,t=a.start,n=a.end;if(t){var o=t.split("-"),i=Object(r["a"])(o,2),c=i[0],l=i[1];if(l=Number(l),"area"===c){var d=this.areaList[l];d?d.locations.find((function(a){var t=a.status;return e.startAllowList.indexOf(t)>-1}))||(s["Message"].warning("请选择存在满容器库位的区域作为起点"),this.orderForm.start=""):(s["Message"].warning("起点区域已不存在, 请重新选择"),this.orderForm.start="")}else{var m=this.locationList.get(l);m?-1===this.startAllowList.indexOf(m.status)?(s["Message"].warning("请选择满容器的库位作为起点"),this.orderForm.start=""):m.vertexCode||(s["Message"].warning("起点库位没有绑定点位, 请重新选择"),this.orderForm.start=""):(s["Message"].warning("起点库位已不存在, 请重新选择"),this.orderForm.start="")}}if(n){var u=n.split("-"),p=Object(r["a"])(u,2),h=p[0],g=p[1];if(g=Number(g),"area"===h){var f=this.areaList[g];f?f.locations.find((function(a){var t=a.status;return e.endAllowList.indexOf(t)>-1}))||(s["Message"].warning("请选择存在空容器库位的区域作为终点"),this.orderForm.end=""):(s["Message"].warning("终点区域已不存在, 请重新选择"),this.orderForm.end="")}else{var v=this.locationList.get(g);v?-1===this.endAllowList.indexOf(v.status)?(s["Message"].warning("请选择空容器的库位作为终点"),this.orderForm.end=""):v.vertexCode||(s["Message"].warning("终点库位没有绑定点位, 请重新选择"),this.orderForm.end=""):(s["Message"].warning("终点库位已不存在, 请重新选择"),this.orderForm.end="")}}},clickLocation:function(e){var a=this,t=e.split("-"),n=Object(r["a"])(t,1),o=n[0],i="area"===o?0:300;this.clickTimer&&clearTimeout(this.clickTimer),this.clickTimer=setTimeout((function(){var t=a.orderForm,n=t.start,o=t.end;n&&e===n?a.orderForm.start="":o&&e===o?a.orderForm.end="":n?o?(a.orderForm.start=e,a.orderForm.end=""):a.orderForm.end=e:a.orderForm.start=e,a.checkPlatfromAllow(),a.orderForm.start&&a.orderForm.end&&a.handleSendOrder()}),i)},dblclickLocation:function(e){if(this.clickTimer&&clearTimeout(this.clickTimer),-1===[].concat(Object(i["a"])(this.startAllowList),Object(i["a"])(this.endAllowList)).indexOf(e.status))return s["Message"].warning("库位处于执行任务中, 不允许修改状态");this.locationForm=JSON.parse(JSON.stringify(e)),this.locationDialog=!0},handleSendOrder:function(){var e=this,a=this.orderForm,t=a.start,n=a.end;if(t&&n){var o=function(a,t){return"area"===a?"区域:".concat(e.areaList[t].areaCode):"库位:".concat(e.locationList.get(t).code)},i=t.split("-"),l=Object(r["a"])(i,2),d=l[0],m=l[1],u=n.split("-"),p=Object(r["a"])(u,2),h=p[0],g=p[1];m=Number(m),g=Number(g);var f="是否呼叫AGV从 ".concat(o(d,m)," 搬运至 ").concat(o(h,g)," ?");s["MessageBox"].confirm(f,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=function(e,a){switch(e+a){case"locationlocation":return 0;case"arealocation":return 1;case"locationarea":return 2;case"areaarea":return 3}},t=a(d,h);0===t?e.sendOrder([e.locationList.get(m),e.locationList.get(g)]):Object(c["d"])({startId:m,endId:g,type:t}).then((function(a){a.state&&e.sendOrder(a.data)}))})).catch((function(){}))}else s["Message"].warning("请先选择库位或区域")},sendOrder:function(e){var a=this;Object(c["f"])(e).then((function(e){e.state&&(s["Message"].success("任务下发成功"),a.getLocationList(),a.orderForm={start:"",end:""})}))},closeLocationDialog:function(){this.$refs.locationForm.clearValidate(),this.locationDialog=!1},updateLocationStatus:function(){var e=this;this.$refs.locationForm.validate((function(a){a&&Object(c["g"])(e.locationForm).then((function(a){a.state&&(s["Message"].success("状态更改成功"),e.locationDialog=!1,e.getLocationList())}))}))}}},f=g,v=(t("7e1f"),t("c9a1"),t("4ac2")),b=Object(v["a"])(f,n,o,!1,null,"f73e8c16",null);a["default"]=b.exports},4856:function(e,a,t){"use strict";t.d(a,"b",(function(){return o})),t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){return r}));var n=t("b775");function o(e){return n["a"].get("/amr/getAmrPageList",e)}function i(){return n["a"].post("/amr/onlineAmr")}function r(){return n["a"].get("/amr/realtimeInfo")}},"4b3b":function(e,a,t){var n={"./404/404":"efd7","./404/404.vue":"efd7","./404/notRole":"a1fb","./404/notRole.vue":"a1fb","./404/redirect":"57ea","./404/redirect.vue":"57ea","./account/components/user-rcs":"b534","./account/components/user-rcs-wms":"7e98","./account/components/user-rcs-wms.vue":"7e98","./account/components/user-rcs.vue":"b534","./account/group":"78b8","./account/group.vue":"78b8","./account/role":"d6c6","./account/role.vue":"d6c6","./account/user":"0c01","./account/user.vue":"0c01","./analyze/battery":"a64c","./analyze/battery.vue":"a64c","./analyze/components/batteryAbnormal":"98033","./analyze/components/batteryAbnormal.vue":"98033","./analyze/components/batteryManagement":"2e78","./analyze/components/batteryManagement.vue":"2e78","./analyze/components/chargeCount":"7ad1","./analyze/components/chargeCount.vue":"7ad1","./analyze/components/electricChange":"c937","./analyze/components/electricChange.vue":"c937","./config/area":"71c2","./config/area.vue":"71c2","./config/chargeLevel":"5d77","./config/chargeLevel.vue":"5d77","./config/chargePile":"5d9d","./config/chargePile.vue":"5d9d","./config/chargeTime":"2dab","./config/chargeTime.vue":"2dab","./device/amr":"d61a","./device/amr.vue":"d61a","./device/detail":"fed2","./device/detail.vue":"fed2","./login":"9ed6","./login/":"9ed6","./login/index":"9ed6","./login/index.vue":"9ed6","./map":"8d76","./map/":"8d76","./map/detail":"375c","./map/detail.vue":"375c","./map/index":"8d76","./map/index.vue":"8d76","./monitor":"b3e2","./monitor/":"b3e2","./monitor/index":"b3e2","./monitor/index.vue":"b3e2","./task/components/AddTask":"2da3","./task/components/AddTask.vue":"2da3","./task/components/AddTaskChain":"6e6f","./task/components/AddTaskChain.vue":"6e6f","./task/list":"93dc","./task/list.vue":"93dc","./task/model":"f5e8","./task/model.vue":"f5e8","./task/plan":"b302","./task/plan.vue":"b302","./wms/callCenter":"48360","./wms/callCenter.vue":"48360","./wms/components/order":"f3f9","./wms/components/order.vue":"f3f9","./wms/location":"fea1","./wms/location.vue":"fea1","./wms/storage":"f89c","./wms/storage.vue":"f89c"};function o(e){var a=i(e);return t(a)}function i(e){var a=n[e];if(!(a+1)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id="4b3b"},5525:function(e,a,t){},"57ea":function(e,a,t){"use strict";t.r(a);t("8dee");var n,o,i={created:function(){var e=this.$route,a=e.params,t=e.query,n=a.path;this.$router.replace({path:"/"+n,query:t})},render:function(e){return e()}},r=i,c=t("4ac2"),s=Object(c["a"])(r,n,o,!1,null,null,null);a["default"]=s.exports},"5a7e":function(e,a,t){"use strict";t("f87b")},"5c74":function(e,a,t){"use strict";t("7fe1")},"5d77":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"chargeGear-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择小车",clearable:"",filterable:""},on:{change:e.getChargeGearList},model:{value:e.amrId,callback:function(a){e.amrId="string"===typeof a?a.trim():a},expression:"amrId"}},e._l(e.amrList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargeLevel/add",expression:"'config/chargeLevel/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增充电档位")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{label:"小车名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.amrList[a.row.amrId]||"---")+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"充电桩名称",align:"center","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.chargePileList[a.row.chargePileId]||"---")+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"level1",label:"一档",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"level2",label:"二档",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"level3",label:"三档",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargeLevel/update",expression:"'config/chargeLevel/update'"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditDialog(a.row)}}}),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargeLevel/delete",expression:"'config/chargeLevel/delete'"}],attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteChargeGear(a.row)}}})]:void 0}}],null,!0)})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getChargeGearList}}),e._v(" "),t("el-dialog",{attrs:{title:e.isEdit?"编辑充电档位配置":"新增充电档位配置",visible:e.isDialog,width:"400px"},on:{"update:visible":function(a){e.isDialog=a},close:e.closeDialog}},[t("el-form",{ref:"chargeGearForm",attrs:{"label-width":"70px",model:e.chargeGearForm,rules:e.chargeGearRules}},[t("el-form-item",{attrs:{label:"小车: ",prop:"amrId"}},[t("el-select",{attrs:{placeholder:"请选择小车",clearable:"",filterable:"",disabled:e.isEdit},model:{value:e.chargeGearForm.amrId,callback:function(a){e.$set(e.chargeGearForm,"amrId","string"===typeof a?a.trim():a)},expression:"chargeGearForm.amrId"}},e._l(e.amrList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"充电桩: ",prop:"chargePileId"}},[t("el-select",{attrs:{placeholder:"请选择充电桩",clearable:"",filterable:""},model:{value:e.chargeGearForm.chargePileId,callback:function(a){e.$set(e.chargeGearForm,"chargePileId","string"===typeof a?a.trim():a)},expression:"chargeGearForm.chargePileId"}},e._l(e.chargePileList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"一档: ",prop:"level1"}},[t("el-input-number",{attrs:{min:10,max:99,precision:1,step:1,"controls-position":"right"},on:{change:e.handleLevelRange},model:{value:e.chargeGearForm.level1,callback:function(a){e.$set(e.chargeGearForm,"level1",e._n(a))},expression:"chargeGearForm.level1"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"二档: ",prop:"level2"}},[t("el-input-number",{attrs:{min:e.chargeGearForm.level1,max:99,precision:1,step:1,"controls-position":"right"},on:{change:e.handleLevelRange},model:{value:e.chargeGearForm.level2,callback:function(a){e.$set(e.chargeGearForm,"level2",e._n(a))},expression:"chargeGearForm.level2"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"三档: ",prop:"level3"}},[t("el-input-number",{attrs:{min:e.chargeGearForm.level2,max:99,precision:1,step:1,"controls-position":"right"},model:{value:e.chargeGearForm.level3,callback:function(a){e.$set(e.chargeGearForm,"level3",e._n(a))},expression:"chargeGearForm.level3"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("b775"));function r(e){return i["a"].post("/amrChargeConfig/list",e)}function c(e){return i["a"].post("/amrChargeConfig/add",e)}function s(e){return i["a"].post("/amrChargeConfig/update",e)}function l(e){var a=e.id,t=e.uuid;return i["a"].delete("/amrChargeConfig/delete/".concat(a,"/").concat(t))}var d=t("fbb2"),m=t("0115"),u=t("a68a"),p=t("333d"),h={name:"chargeGear",props:["innerHeightMinusFilter"],components:{Pagination:p["a"]},data:function(){var e=[{required:!0,trigger:"blur",message:"请输入数字"},{message:"只能是数字格式",pattern:/^[-\d.]+$/,trigger:["blur","change"]}];return{tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,chargePileList:{},amrList:{},amrId:null,isDialog:!1,isEdit:!1,chargeGearForm:{amrId:"",chargePileId:"",level1:10,level2:10,level3:10},chargeGearRules:{amrId:[{required:!0,trigger:"change",message:"请选择小车"}],chargePileId:[{required:!0,trigger:"change",message:"请选择充电桩"}],level1:e,level2:e,level3:e}}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),Object(d["e"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.amrList,a.amrId,a.name)}))})),Object(m["g"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.chargePileList,a.id,a.name)}))})),this.getChargeGearList()},methods:{getChargeGearList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};this.amrId&&(a.amrId=this.amrId),this.tableLoading=!0,r(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.list||[],e.total=a.data.total||0)}))},openAddDialog:function(){var e=this;this.isEdit=!1,this.chargeGearForm={amrId:"",chargePileId:"",level1:10,level2:10,level3:10},this.isDialog=!0,this.$nextTick((function(){e.$refs.chargeGearForm.clearValidate()}))},closeDialog:function(){this.$refs.chargeGearForm.clearValidate(),this.isDialog=!1},openEditDialog:function(e){this.isEdit=!0,this.chargeGearForm=JSON.parse(JSON.stringify(e)),this.isDialog=!0},saveEdit:function(){var e=this;this.$refs.chargeGearForm.validate((function(a){a&&(e.isEdit?s(e.chargeGearForm).then((function(a){a.state&&(u["Message"].success("充电档位配置修改成功"),e.isDialog=!1,e.getChargeGearList())})):c(e.chargeGearForm).then((function(a){a.state&&(u["Message"].success("充电档位配置增加成功"),e.isDialog=!1,e.getChargeGearList())})))}))},deleteChargeGear:function(e){var a=this;u["MessageBox"].confirm("确定删除该充电档位配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l({id:e.id,uuid:e.uuid}).then((function(e){e.state&&(u["Message"].success("充电档位配置删除成功"),a.getChargeGearList())}))})).catch((function(){}))},handleLevelRange:function(){this.chargeGearForm.level2<this.chargeGearForm.level1&&(this.chargeGearForm.level2=this.chargeGearForm.level1),this.chargeGearForm.level3<this.chargeGearForm.level2&&(this.chargeGearForm.level3=this.chargeGearForm.level2)}}},g=h,f=t("4ac2"),v=Object(f["a"])(g,n,o,!1,null,null,null);a["default"]=v.exports},"5d9d":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"chargePile-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择地图",filterable:"",clearable:""},on:{change:e.getList},model:{value:e.listQuery.mapId,callback:function(a){e.$set(e.listQuery,"mapId","string"===typeof a?a.trim():a)},expression:"listQuery.mapId"}},e._l(e.domainList,(function(a,n){return t("el-option-group",{key:"area-"+n,attrs:{label:a.name}},e._l(a.topologyMapPos||[],(function(e){return t("el-option",{key:"map-"+e.id,staticClass:"select-group-option",attrs:{label:a.name+"/"+e.name,value:Number(e.id)}})})),1)})),1),e._v(" "),t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择类型",filterable:"",clearable:"",multiple:"","collapse-tags":""},on:{change:e.getList},model:{value:e.listQuery.chargeModelIds,callback:function(a){e.$set(e.listQuery,"chargeModelIds","string"===typeof a?a.trim():a)},expression:"listQuery.chargeModelIds"}},e._l(e.modelList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("查询")]),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargePile/add",expression:"'config/chargePile/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("新增充电桩")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.list,"highlight-current-row":"","header-cell-style":{background:"#eee"},height:e.innerHeightMinusFilter-203}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.modelList[a.row.chargeModelId])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否占用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.occupy?"是":"否")+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"区域名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.mapList[a.row.mapId]&&e.domainList[e.mapList[a.row.mapId].areaId]&&e.domainList[e.mapList[a.row.mapId].areaId].name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"地图名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.mapList[a.row.mapId]&&e.mapList[a.row.mapId].name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否启用",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargePile/update",expression:"'config/chargePile/update'"}],on:{change:function(t){return e.switchBtn(a.row.id,a.row)}},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable","string"===typeof t?t.trim():t)},expression:"scope.row.enable"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!config/chargePile/update",expression:"'!config/chargePile/update'"}]},[e._v(e._s(a.row.enable?"已启用":"未启用"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","min-width":"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargePile/update",expression:"'config/chargePile/update'"}],attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(n)}}}),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/chargePile/delete",expression:"'config/chargePile/delete'"}],attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(n)}}})]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(a){return e.$set(e.listQuery,"currentPage",a)},"update:limit":function(a){return e.$set(e.listQuery,"pageSize",a)},pagination:e.getList}}),e._v(" "),t("el-dialog",{attrs:{title:"create"===e.dialogStatus?"增加充电桩":"修改充电桩",visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[t("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-width":"100px",width:"400px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"充电桩名称",clearable:"",disabled:"create"!==e.dialogStatus},model:{value:e.temp.name,callback:function(a){e.$set(e.temp,"name","string"===typeof a?a.trim():a)},expression:"temp.name"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"create"===e.dialogStatus,expression:"dialogStatus === 'create'"}],attrs:{label:"所在区域",prop:"areaId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:e.changeAreaId},model:{value:e.temp.areaId,callback:function(a){e.$set(e.temp,"areaId","string"===typeof a?a.trim():a)},expression:"temp.areaId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"create"===e.dialogStatus,expression:"dialogStatus === 'create'"}],attrs:{label:"所在地图",prop:"mapId"}},[t("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:function(a){return e.getChargePoints(e.temp.mapId)}},model:{value:e.temp.mapId,callback:function(a){e.$set(e.temp,"mapId","string"===typeof a?a.trim():a)},expression:"temp.mapId"}},e._l(e.mapList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:e.temp.areaId===a.areaId,expression:"temp.areaId === value.areaId"}],key:n,attrs:{label:a.name,value:Number(n)}})})),1)],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"create"===e.dialogStatus,expression:"dialogStatus === 'create'"}],attrs:{label:"绑定点位",prop:"vertexId"}},[t("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.vertexId,callback:function(a){e.$set(e.temp,"vertexId","string"===typeof a?a.trim():a)},expression:"temp.vertexId"}},e._l(e.chargePoints,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:Number(e.value)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"充电桩类型",prop:"chargeModelId"}},[t("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.chargeModelId,callback:function(a){e.$set(e.temp,"chargeModelId","string"===typeof a?a.trim():a)},expression:"temp.chargeModelId"}},e._l(e.modelList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{width:"100px"},on:{click:function(a){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{staticStyle:{width:"100px","margin-left":"30px"},attrs:{type:"primary"},on:{click:function(a){"create"===e.dialogStatus?e.registerCharge():e.updateVehicle()}}},[e._v("确 认")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("0c84"),t("3e38"),t("7cf8")),r=t("2840"),c=t("7661"),s=t("0115"),l=t("333d"),d={name:"chargePile",props:["innerHeightMinusFilter"],components:{Pagination:l["a"]},data:function(){return{list:[],total:0,tableLoading:!0,dialogFormVisible:!1,dialogStatus:"",listQuery:{currentPage:1,pageSize:10,mapId:"",chargeModelIds:[]},temp:{id:null,name:"",areaId:"",mapId:"",vertexId:"",chargeModelId:""},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],mapId:[{required:!0,message:"地图不能为空",trigger:"change"}],vertexId:[{required:!0,message:"点位不能为空",trigger:"change"}],chargeModelId:[{required:!0,message:"类型不能为空",trigger:"change"}]},modelList:{},domainList:{},mapList:{},chargePoints:[],chargePointMap:new Map}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),Object(s["h"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.modelList,a.id,a.description)}))})),Object(r["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a)}))})),Object(c["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.mapList,a.id,a)}))})),this.getList()},methods:{getList:function(){var e=this,a=this.listQuery,t=a.currentPage,n=a.pageSize,o=a.mapId,i=a.chargeModelIds,r={currentPage:t,pageSize:n};o&&(r.mapId=o),i.length>0&&(r.chargeModelIds=i),this.tableLoading=!0,Object(s["g"])(r).then((function(a){e.tableLoading=!1,a.state&&(e.list=a.data.data||[],e.total=a.data.total||0)}))},changeAreaId:function(){this.temp.mapId="",this.temp.vertexId="",this.chargePoints=[]},getChargePoints:function(e){var a=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&(this.temp.vertexId=""),this.chargePointMap.get(e))this.chargePoints=this.chargePointMap.get(e);else{var n=[];Object(i["c"])(e).then((function(t){0===t.code&&(t.vertexes.filter((function(e){return 2===e.vertexPo.type})).forEach((function(e){return n.push({label:e.vertexPo.code,value:e.vertexPo.id,vertexPo:e.vertexPo})})),a.chargePointMap.set(e,n),a.chargePoints=n)}))}},switchBtn:function(e,a){var t=this,n=function(){a.enable=!a.enable};this.$confirm("确定".concat(a.enable?"启用":"禁用","充电桩?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])({id:e,enable:a.enable}).then((function(e){e.state?(t.$message.success(e.errMsg),t.getList()):n()})).catch((function(){n()}))})).catch((function(){n()}))},resetTemp:function(){this.temp={id:null,name:"",areaId:"",mapId:"",vertexId:"",chargeModelId:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()})),this.chargePoints=[]},handleUpdate:function(e){var a=this;this.temp=JSON.parse(JSON.stringify(e)),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){a.$refs["dataForm"].clearValidate()}))},handleDelete:function(e){var a=this;this.$confirm("确定删除充电桩: "+e.name+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["d"])(e.id).then((function(e){e.state&&(a.$message.success("充电桩删除成功"),a.getList())}))})).catch((function(){}))},registerCharge:function(){var e=this;this.$refs["dataForm"].validate((function(a){if(a){e.tableLoading=!0;var t=JSON.parse(JSON.stringify(e.temp)),n=e.chargePointMap.get(t.mapId).filter((function(e){return e.value===t.vertexId}))[0].vertexPo,o=n.x,i=n.y;t.x=o,t.y=i,delete t.id,t.enable=!0,Object(s["a"])(t).then((function(a){e.tableLoading=!1,a.state&&(e.$message.success("充电桩新增成功！"),e.getList(),e.resetTemp(),e.$nextTick((function(){e.$refs["dataForm"].clearValidate(),e.dialogFormVisible=!1})))}))}}))},updateVehicle:function(){var e=this;this.$refs["dataForm"].validate((function(a){a&&(e.tableLoading=!0,Object(s["c"])({id:e.temp.id,modelId:e.temp.chargeModelId}).then((function(a){e.tableLoading=!1,a.state&&(e.$message.success("充电桩修改成功！"),e.getList(),e.resetTemp(),e.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))),e.dialogFormVisible=!1})))}))}}},m=d,u=t("4ac2"),p=Object(u["a"])(m,n,o,!1,null,null,null);a["default"]=p.exports},6297:function(e,a,t){"use strict";t("0212")},"68da":function(e,a,t){"use strict";t("f997")},"6e6f":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"addTask-container"},[t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogAddTaskVisible,"close-on-click-modal":!1,fullscreen:e.fullscreen,width:"90%",top:"30px"},on:{close:e.handleClose,opened:e.initMapView}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("span",[e._v(e._s(e.dialogTitle))]),e._v(" "),t("a",{staticStyle:{float:"right","margin-right":"30px"},on:{click:e.setFullScreen}},[t("i",{staticClass:"el-icon-full-screen"})])]),e._v(" "),t("el-container",[t("el-aside",{staticClass:"aside-container",attrs:{width:"40%"}},[t("div",[t("div",[t("span",{staticClass:"searchlabel"},[e._v("区域")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},on:{change:e.domainChange},model:{value:e.domainId,callback:function(a){e.domainId="string"===typeof a?a.trim():a},expression:"domainId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("地图")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},on:{change:e.mapChange},model:{value:e.mapId,callback:function(a){e.mapId="string"===typeof a?a.trim():a},expression:"mapId"}},e._l(e.mapList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:e.domainId===a.areaId,expression:"domainId === value.areaId"}],key:n,attrs:{label:a.name,value:Number(n)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("分组")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.groupId,callback:function(a){e.groupId="string"===typeof a?a.trim():a},expression:"groupId"}},e._l(e.groupList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:e.domainId===a.areaId,expression:"domainId === value.areaId"}],key:n,attrs:{label:a.name,value:Number(n)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("AMR")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:"",clearable:""},model:{value:e.agvId,callback:function(a){e.agvId="string"===typeof a?a.trim():a},expression:"agvId"}},e._l(e.vehicles,(function(a){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:a.areaId===e.domainId,expression:"item.areaId === domainId"}],key:a.amrId,attrs:{label:a.name,value:a.amrId}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("任务链名")]),e._v(" "),t("el-input",{staticClass:"name-input",attrs:{placeholder:"请输入任务链名称",clearable:"",size:"mini",maxlength:"20"},model:{value:e.taskName,callback:function(a){e.taskName="string"===typeof a?a.trim():a},expression:"taskName"}})],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("复制任务链")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:"",clearable:""},on:{change:e.selectTaskChainChange},model:{value:e.selectTaskChain,callback:function(a){e.selectTaskChain="string"===typeof a?a.trim():a},expression:"selectTaskChain"}},e._l(e.taskChains,(function(e,a){return t("el-option",{key:a,attrs:{label:e.taskChainTemplatePo.name,value:Number(a)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("优先级")]),e._v(" "),t("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.selectPriority,callback:function(a){e.selectPriority="string"===typeof a?a.trim():a},expression:"selectPriority"}},e._l(e.taskPriorityEnum,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"searchlabel"},[e._v("允许重复下发")]),e._v(" "),t("el-switch",{model:{value:e.repeatFlag,callback:function(a){e.repeatFlag="string"===typeof a?a.trim():a},expression:"repeatFlag"}})],1)]),e._v(" "),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"cardheader",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("任务详情")]),e._v(" "),t("div",[t("el-tooltip",{attrs:{content:e.showTable?"切换到任务排序":"切换到表格",placement:"top"}},[t("el-button",{attrs:{icon:e.showTable?"el-icon-sort":"el-icon-menu",size:"mini",circle:""},on:{click:function(a){e.showTable=!e.showTable}}})],1),e._v(" "),t("el-tooltip",{attrs:{content:"添加子任务",placement:"top"}},[t("el-button",{attrs:{icon:"el-icon-plus",size:"mini",circle:""},on:{click:e.handleAdd}})],1)],1)]),e._v(" "),t("div",[e.showTable?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":"id","header-cell-style":{background:"#eee"},"highlight-current-row":"",height:"400px"},on:{"current-change":e.handleCurrentChange}},[t("el-table-column",{attrs:{align:"center",label:"类型","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{attrs:{size:"mini",filterable:""},on:{change:function(t){return e.handleSelectChange(a)}},model:{value:a.row.type,callback:function(t){e.$set(a.row,"type","string"===typeof t?t.trim():t)},expression:"scope.row.type"}},e._l(e.actionList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)]}}],null,!1,3234180962)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"地图"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                  "+e._s(e.mapList[a.row.mapId]&&e.mapList[a.row.mapId].name)+"\n                ")]}}],null,!1,3036228724)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"目标点","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{content:a.row.point,placement:"top",disabled:!a.row.point}},[t("el-select",{attrs:{size:"mini",filterable:""},on:{change:function(t){return e.changePoint(a.row)}},model:{value:a.row.point,callback:function(t){e.$set(a.row,"point","string"===typeof t?t.trim():t)},expression:"scope.row.point"}},e._l(e.mapInfo.mapPoints,(function(e,a){return t("el-option",{key:a,attrs:{label:e.vertexPo.code,value:e.vertexPo.code}})})),1)],1)]}}],null,!1,2670937074)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"参数",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-dialog",{attrs:{title:"修改参数",visible:e.isParamsDialog,modal:!1,"append-to-body":!0,width:"600px"},on:{"update:visible":function(a){e.isParamsDialog=a}}},[t("el-form",{attrs:{"label-width":"55px"}},[t("div",{staticClass:"paramsJSON-head"},[t("el-button",{attrs:{type:"success"},on:{click:e.addParamsJSON}},[e._v("增加键值对")]),e._v(" "),t("el-button",{attrs:{type:"danger"},on:{click:e.deleteAllParamsJSON}},[e._v("清空键值对")])],1),e._v(" "),e._l(e.paramsJSON,(function(a,n){return t("div",{key:n,staticClass:"paramsJSON-item"},[t("el-form-item",{attrs:{label:"key"}},[t("el-input",{attrs:{clearable:""},model:{value:a.key,callback:function(t){e.$set(a,"key","string"===typeof t?t.trim():t)},expression:"item.key"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"value"}},[t("el-input",{attrs:{clearable:""},model:{value:a.value,callback:function(t){e.$set(a,"value","string"===typeof t?t.trim():t)},expression:"item.value"}})],1),e._v(" "),t("div",{staticClass:"deleteAParamsJSON"},[t("el-button",{attrs:{type:"warning",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteAParamsJSON(n)}}})],1)],1)})),e._v(" "),t("div",{staticClass:"paramsJSON-footer"},[t("el-button",{on:{click:function(a){e.isParamsDialog=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeParams(a)}}},[e._v("确 定")])],1)],2)],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getParams(a.row)}}},[e._v("参数")])]}}],null,!1,1724124653)}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"deleteButton",attrs:{size:"mini",icon:"el-icon-close",circle:""},on:{click:function(t){return e.handleDelete(t,a)}}})]}}],null,!1,1068453665)})],1):t("div",{staticClass:"draggable"},[t("draggable",e._b({model:{value:e.list,callback:function(a){e.list=a},expression:"list"}},"draggable",{animation:200},!1),e._l(e.list,(function(a,n){return t("div",{key:n,staticClass:"draggable-item"},[t("div",[e._v("任务"+e._s(n+1))]),e._v(" "),t("div",[e._v(e._s(e.actionList[a.type]))]),e._v(" "),t("div",[e._v("\n                    "+e._s(e.mapList[a.mapId]&&e.mapList[a.mapId].name)+"\n                  ")]),e._v(" "),t("div",[e._v(e._s(a.point))]),e._v(" "),t("div",[e._v(e._s(a.extend))])])})),0)],1)],1),e._v(" "),t("div",{staticClass:"button-container"},[t("el-button",{staticClass:"commitButton",attrs:{type:"primary"},on:{click:e.commitOrder}},[e._v("确 定")])],1)])],1),e._v(" "),t("el-main",{class:[e.fullscreen?"drawtaskmap-fullscreen":""],attrs:{id:"drawtaskmap"}})],1)],1)],1)},o=[],i=(t("9f60"),t("94f0"),t("0c84"),t("2843"),t("4057"),t("a450"),t("00f2"),t("e680"),t("1bc7"),t("7661")),r=t("fbb2"),c=t("ca39"),s=t("4e37"),l=t("a68a"),d=t("3335"),m=t.n(d);function u(e,a){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=p(e))||a&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==t.return||t.return()}finally{if(c)throw i}}}}function p(e,a){if(e){if("string"===typeof e)return h(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,a):void 0}}function h(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}var g={components:{Sortable:s["a"],draggable:m.a},props:["tableList","dialogAddTaskVisible","viewMapId","taskPriorityEnum","actionList","domainList","mapList","groupList","isEdit","oldTaskChain"],data:function(){return{mapInfo:{mapPoints:[],mapRoutes:[]},list:[],tableLoading:!1,vehicles:[],taskChains:{},canvas:null,rowId:0,agvId:"",mapId:"",domainId:"",taskName:"",repeatFlag:!1,groupId:"",selectTaskChain:"",oldMapId:"",selectPriority:0,mapGroup:{line:"",point:"",pointText:""},curIndex:-1,curId:null,fullscreen:!1,isParamsDialog:!1,paramsJSON:[{key:"",value:""}],row:{},taskChainId:"",dialogTitle:"",showTable:!0}},watch:{mapId:{handler:function(e,a){this.oldMapId=a}},dialogAddTaskVisible:{handler:function(e){var a=this;e&&(this.taskChains={},this.tableList.forEach((function(e){a.$set(a.taskChains,e.taskChainTemplatePo.id,e)})),this.dialogTitle=this.isEdit?"编辑任务链":"创建任务链",this.oldTaskChain&&(this.selectTaskChain=this.oldTaskChain,this.selectTaskChainChange()))}}},methods:{getMap:function(){var e=this;return new Promise((function(a,t){e.mapInfo={mapPoints:[],mapRoutes:[]},Object(i["b"])({mapId:e.mapId}).then((function(n){var o=n.state,i=n.data;o&&(i?(e.mapInfo={mapPoints:i.Vertex,mapRoutes:i.Edge},a()):t("地图数据为空"))}))}))},createMapView:function(){var e=this;this.getMap().then((function(){e.drawMapView()})).catch((function(e){l["Message"].error(e)}))},initMapView:function(){var e=this;if(Object(c["c"])().then((function(a){a.state&&a.data.list&&a.data.list.forEach((function(a){e.taskChains[a.taskChainTemplatePo.id]=a}))})),!this.oldTaskChain){var a=this.$route.query,t=a.vehicleId,n=a.mapId;if(n)this.mapId=Number(n),this.domainId=this.mapList[this.mapId].areaId;else if(this.mapList){var o=null,i=Number(localStorage.getItem("mapid"));i&&(o=this.mapList[i]),o?(this.domainId=o.areaId,this.mapId=i):(this.getMapIdByDomain(),localStorage.setItem("mapid",this.mapId))}this.mapChange(),t&&(this.agvId=Number(t))}},getMapIdByDomain:function(e){for(var a in this.mapId="",this.mapList){var t=this.mapList[a];if(t.areaId===e||void 0===e){this.domainId=t.areaId,this.mapId=Number(a);break}}this.mapChange()},drawMapView:function(){var e=this.$svg.get("taskmap");e&&e.remove();var a=document.getElementById("drawtaskmap").clientWidth-10,t=document.getElementById("drawtaskmap").clientHeight,n=this.mapInfo.mapPoints.map((function(e){var a=e.vertexPo;return a.x})),o=this.mapInfo.mapPoints.map((function(e){var a=e.vertexPo;return a.y})),i=Math.min.apply(null,n),r=Math.min.apply(null,o),c=Math.max.apply(null,n),s=Math.max.apply(null,o),l=new this.$svg.Matrix(1,0,0,-1,.5,.5),d=Math.floor(a/(c-i)),m=Math.floor(t/(s-r)),u=d<m?d:m;this.canvas=this.$svg("drawtaskmap").id("taskmap").size(a,t).viewbox(i,r,c-i,s-r).transform(l).panZoom({zoomMin:u/3*2,zoomMax:300*u,zoomFactor:u/5}),this.mapGroup.line=this.canvas.group(),this.mapGroup.point=this.canvas.group(),this.mapGroup.pointText=this.canvas.group(),this.drawMapPoint(u),this.drawMapRoute(u),this.canvas.zoom(this.canvas.zoom()-.24),this.setSort()},drawMapPoint:function(e){var a,t=this,n=u(this.mapInfo.mapPoints);try{var o=function(){var n=a.value.vertexPo,o="#0067b8";switch(n.type){case 128:o="#cd6600";break;case 0:o="#0067b8";break;default:o="#47fa65";break}var i=t.canvas.circle(2/e).id("ADD"+n.code).center(n.x,n.y).fill(o).on("click",(function(){t.setPoint(n.code)}));t.mapGroup.point.add(i),t.mapGroup.pointText.add(t.canvas.text(n.code).font({size:1.5/e}).attr("transform","").scale(-1,1,n.x,n.y).rotate(180,n.x,n.y).center(n.x,n.y+2/e))};for(n.s();!(a=n.n()).done;)o()}catch(i){n.e(i)}finally{n.f()}},drawMapRoute:function(e){var a,t=u(this.mapInfo.mapRoutes);try{for(t.s();!(a=t.n()).done;){var n=a.value.edgePo,o=this.$svg.get("ADD"+n.source),i=this.$svg.get("ADD"+n.target);this.mapGroup.line.add(this.canvas.line(o.cx(),o.cy(),i.cx(),i.cy()).stroke("rgb(188, 194, 196)").stroke({width:.4/e}))}}catch(r){t.e(r)}finally{t.f()}},handleClose:function(){this.list=[],this.selectTaskChain="",this.domainId="",this.taskName="",this.rowId=0,this.curIndex=-1,this.removePointClass(),this.$emit("update:dialogAddTaskVisible",!1)},handleAdd:function(){this.rowId=this.list[this.list.length-1]?this.list[this.list.length-1].id+1:0;var e={id:this.rowId++,type:"",mapId:"",point:"",extend:""};this.list.push(e)},setSort:function(){var e=this,a=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];s["a"].create(a,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(a){var t=e.list.splice(a.oldIndex,1)[0];e.list.splice(a.newIndex,0,t),a.oldIndex===e.curIndex?e.curIndex=a.newIndex:e.$refs.dragTable.setCurrentRow(t)}})},setPoint:function(e){if(-1===this.curIndex||0===this.list.length)return l["Message"].warning("请先选择要编辑的任务！");var a=this.list[this.curIndex];if(""===a.type)return l["Message"].warning("请先选择任务类型！");a.point=e,a.mapId=this.mapId,this.removePointClass(),this.addPointClass("ADD"+e)},removePointClass:function(){if(this.curId){var e=this.$svg.get(this.curId);e&&e.removeClass("selectedPoint"),this.curId=null}},addPointClass:function(e){var a=this.$svg.get(e);a&&a.addClass("selectedPoint"),this.curId=e},handleDelete:function(e,a){var t=a.$index;a.row;this.list.splice(t,1),this.curIndex=-1,this.removePointClass(),e.stopPropagation()},handleCurrentChange:function(e){this.curIndex=this.list.indexOf(e);var a=0;""!==e.point&&(a=e.point),this.removePointClass(),this.addPointClass("ADD"+a)},handleSelectChange:function(e){e.$index;var a=e.row;this.$refs.dragTable.setCurrentRow(a)},domainChange:function(){this.canvas&&this.canvas.clear(),this.getMapIdByDomain(this.domainId),this.list=[],this.groupId="",this.agvId="",this.selectTaskChain=""},mapChange:function(){var e=this;this.mapId?(Object(r["e"])({areaId:this.domainId}).then((function(a){a.state&&(e.vehicles=a.data.data)})),this.createMapView()):(this.mapInfo={mapPoints:[],mapRoutes:[]},this.canvas&&this.canvas.clear())},selectTaskChainChange:function(){var e=this;if(this.list=[],this.selectTaskChain&&this.taskChains[this.selectTaskChain]){var a=this.taskChains[this.selectTaskChain],t=a.taskChainTemplatePo,n=a.taskTemplatePos;this.domainId=t.areaId,this.selectPriority=t.priority,this.taskName=t.name,this.repeatFlag=t.repeatFlag,this.groupId=t.groupId,this.taskChainId=t.id,this.agvId=t.amrId,this.mapId=n[0].mapId,this.mapChange(),n.forEach((function(a,t){e.list.push({id:a.id,type:a.action,mapId:a.mapId,point:a.endPointCode,sequence:t,extend:a.extend})}))}},changePoint:function(e){e.mapId=this.mapId},commitOrder:function(e){var a=this;if(!this.domainId)return l["Message"].warning("请选择区域");if(!this.taskName)return l["Message"].warning("请输入任务链名称");if(0===this.list.length)return l["Message"].warning("请添加子任务");var t=this.list.filter((function(e){return""===e.type||""===e.point}));if(t.length>0)return l["Message"].warning("任务类型和目标点不能为空，请先编辑完整再提交");var n={taskChainTemplatePo:{areaId:this.domainId,priority:this.selectPriority,name:this.taskName,repeatFlag:this.repeatFlag},taskTemplatePos:this.list.map((function(e,t){var n={action:e.type,mapId:Number(e.mapId),endPointCode:e.point,sequence:t,taskChainTemplateId:a.taskChainId};return e.extend&&(n.extend=e.extend),n}))};this.agvId&&(n.taskChainTemplatePo.amrId=this.agvId),this.groupId&&(n.taskChainTemplatePo.groupId=this.groupId),this.isEdit?(n.taskChainTemplatePo.id=this.taskChainId,Object(c["e"])(n).then((function(t){a.listLoading=!1,t.state&&(l["Message"].success("任务链编辑成功"),a.$emit("getTaskChainList"),a.handleClose(),e.stopPropagation())})).catch((function(){a.listLoading=!1}))):(this.listLoading=!0,Object(c["a"])(n).then((function(t){a.listLoading=!1,t.state&&(l["Message"].success("任务链添加成功"),a.$emit("getTaskChainList"),a.handleClose(),e.stopPropagation())})).catch((function(){a.listLoading=!1})))},setFullScreen:function(){var e=this;this.fullscreen=!this.fullscreen,this.$nextTick((function(){e.drawMapView()}))},changeParams:function(){var e={},a=0;this.paramsJSON.forEach((function(t){""!==t.key&&(e[t.key]=t.value,a++)})),this.row.extend=a?JSON.stringify(e):"",this.isParamsDialog=!1},addParamsJSON:function(){this.paramsJSON.push({key:"",value:""})},deleteAllParamsJSON:function(){this.paramsJSON=[{key:"",value:""}]},deleteAParamsJSON:function(e){this.paramsJSON.splice(e,1),0===this.paramsJSON.length&&(this.paramsJSON=[{key:"",value:""}])},getParams:function(e){this.row=e;var a=e.extend;if(a)for(var t in a=JSON.parse(a),this.paramsJSON=[],a)this.paramsJSON.push({key:t,value:a[t]});else this.deleteAllParamsJSON();this.isParamsDialog=!0}}},f=g,v=(t("838a"),t("4ac2")),b=Object(v["a"])(f,n,o,!1,null,"a802c39c",null);a["default"]=b.exports},"71c2":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"domain-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入区域名",clearable:""},on:{change:e.getDomainList},model:{value:e.domainName,callback:function(a){e.domainName="string"===typeof a?a.trim():a},expression:"domainName"}},[t("template",{slot:"append"},[t("el-button",{staticClass:"append-btn",attrs:{type:"primary"},on:{click:e.getDomainList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/area/add",expression:"'config/area/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增工作区域")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""},on:{"expand-change":e.getDomainInfo}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return e.showExpand?t("el-card",{},[t("p",[t("span",[e._v("地图("+e._s(a.row.mapNum||0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.editDomain))])]),e._v(" "),t("p",[t("span",[e._v("设备("+e._s(a.row.vehicleNum||0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.vehicleNames))])])]):e._e()}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"address",label:"地址",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/area/update",expression:"'config/area/update'"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditDialog(a.row)}}}),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"config/area/delete",expression:"'config/area/delete'"}],attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteDomain(a.row)}}})]:void 0}}],null,!0)})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getDomainList}}),e._v(" "),t("el-dialog",{attrs:{title:e.isEdit?"编辑工作区域":"新增工作区域",visible:e.isDialog,width:"440px"},on:{"update:visible":function(a){e.isDialog=a},close:e.closeDialog}},[t("el-form",{ref:"domainForm",attrs:{"label-width":"70px",model:e.domainForm,rules:e.domainRules}},[t("el-form-item",{attrs:{label:"区域名: ",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入区域名",clearable:""},model:{value:e.domainForm.name,callback:function(a){e.$set(e.domainForm,"name","string"===typeof a?a.trim():a)},expression:"domainForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"地址: "}},[t("el-form-item",{staticStyle:{display:"inline-block",width:"100px","margin-bottom":"10px"},attrs:{prop:"province"}},[t("el-select",{attrs:{placeholder:"省",filterable:""},on:{change:e.changeProvince},model:{value:e.domainForm.province,callback:function(a){e.$set(e.domainForm,"province",a)},expression:"domainForm.province"}},e._l(e.provinceList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.name}})})),1)],1),e._v(" "),t("el-form-item",{staticStyle:{display:"inline-block",width:"100px"},attrs:{prop:"city"}},[t("el-select",{attrs:{placeholder:"市",filterable:""},on:{change:e.changeCity},model:{value:e.domainForm.city,callback:function(a){e.$set(e.domainForm,"city",a)},expression:"domainForm.city"}},e._l(e.cityList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.name}})})),1)],1),e._v(" "),t("el-form-item",{staticStyle:{display:"inline-block",width:"100px"},attrs:{prop:"area"}},[t("el-select",{attrs:{placeholder:"区",filterable:""},on:{change:e.changeArea},model:{value:e.domainForm.area,callback:function(a){e.$set(e.domainForm,"area",a)},expression:"domainForm.area"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.name}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{prop:"address"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入地址"},model:{value:e.domainForm.address,callback:function(a){e.$set(e.domainForm,"address","string"===typeof a?a.trim():a)},expression:"domainForm.address"}})],1)],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("2840")),r=t("a68a"),c=t("333d"),s=(t("e5b4"),[{code:"110000",name:"北京市",cityList:[{code:"110000",name:"北京市",areaList:[{code:"110101",name:"东城区"},{code:"110102",name:"西城区"},{code:"110105",name:"朝阳区"},{code:"110106",name:"丰台区"},{code:"110107",name:"石景山区"},{code:"110108",name:"海淀区"},{code:"110109",name:"门头沟区"},{code:"110111",name:"房山区"},{code:"110112",name:"通州区"},{code:"110113",name:"顺义区"},{code:"110114",name:"昌平区"},{code:"110115",name:"大兴区"},{code:"110116",name:"怀柔区"},{code:"110117",name:"平谷区"},{code:"110118",name:"密云区"},{code:"110119",name:"延庆区"}]}]},{code:"120000",name:"天津市",cityList:[{code:"120000",name:"天津市",areaList:[{code:"120101",name:"和平区"},{code:"120102",name:"河东区"},{code:"120103",name:"河西区"},{code:"120104",name:"南开区"},{code:"120105",name:"河北区"},{code:"120106",name:"红桥区"},{code:"120110",name:"东丽区"},{code:"120111",name:"西青区"},{code:"120112",name:"津南区"},{code:"120113",name:"北辰区"},{code:"120114",name:"武清区"},{code:"120115",name:"宝坻区"},{code:"120116",name:"滨海新区"},{code:"120117",name:"宁河区"},{code:"120118",name:"静海区"},{code:"120119",name:"蓟州区"}]}]},{code:"130000",name:"河北省",cityList:[{code:"130100",name:"石家庄市",areaList:[{code:"130102",name:"长安区"},{code:"130104",name:"桥西区"},{code:"130105",name:"新华区"},{code:"130107",name:"井陉矿区"},{code:"130108",name:"裕华区"},{code:"130109",name:"藁城区"},{code:"130110",name:"鹿泉区"},{code:"130111",name:"栾城区"},{code:"130121",name:"井陉县"},{code:"130123",name:"正定县"},{code:"130125",name:"行唐县"},{code:"130126",name:"灵寿县"},{code:"130127",name:"高邑县"},{code:"130128",name:"深泽县"},{code:"130129",name:"赞皇县"},{code:"130130",name:"无极县"},{code:"130131",name:"平山县"},{code:"130132",name:"元氏县"},{code:"130133",name:"赵县"},{code:"130181",name:"辛集市"},{code:"130183",name:"晋州市"},{code:"130184",name:"新乐市"}]},{code:"130200",name:"唐山市",areaList:[{code:"130202",name:"路南区"},{code:"130203",name:"路北区"},{code:"130204",name:"古冶区"},{code:"130205",name:"开平区"},{code:"130207",name:"丰南区"},{code:"130208",name:"丰润区"},{code:"130209",name:"曹妃甸区"},{code:"130224",name:"滦南县"},{code:"130225",name:"乐亭县"},{code:"130227",name:"迁西县"},{code:"130229",name:"玉田县"},{code:"130281",name:"遵化市"},{code:"130283",name:"迁安市"},{code:"130284",name:"滦州市"}]},{code:"130300",name:"秦皇岛市",areaList:[{code:"130302",name:"海港区"},{code:"130303",name:"山海关区"},{code:"130304",name:"北戴河区"},{code:"130306",name:"抚宁区"},{code:"130321",name:"青龙满族自治县"},{code:"130322",name:"昌黎县"},{code:"130324",name:"卢龙县"}]},{code:"130400",name:"邯郸市",areaList:[{code:"130402",name:"邯山区"},{code:"130403",name:"丛台区"},{code:"130404",name:"复兴区"},{code:"130406",name:"峰峰矿区"},{code:"130407",name:"肥乡区"},{code:"130408",name:"永年区"},{code:"130423",name:"临漳县"},{code:"130424",name:"成安县"},{code:"130425",name:"大名县"},{code:"130426",name:"涉县"},{code:"130427",name:"磁县"},{code:"130430",name:"邱县"},{code:"130431",name:"鸡泽县"},{code:"130432",name:"广平县"},{code:"130433",name:"馆陶县"},{code:"130434",name:"魏县"},{code:"130435",name:"曲周县"},{code:"130481",name:"武安市"}]},{code:"130500",name:"邢台市",areaList:[{code:"130502",name:"桥东区"},{code:"130503",name:"桥西区"},{code:"130521",name:"邢台县"},{code:"130522",name:"临城县"},{code:"130523",name:"内丘县"},{code:"130524",name:"柏乡县"},{code:"130525",name:"隆尧县"},{code:"130526",name:"任县"},{code:"130527",name:"南和县"},{code:"130528",name:"宁晋县"},{code:"130529",name:"巨鹿县"},{code:"130530",name:"新河县"},{code:"130531",name:"广宗县"},{code:"130532",name:"平乡县"},{code:"130533",name:"威县"},{code:"130534",name:"清河县"},{code:"130535",name:"临西县"},{code:"130581",name:"南宫市"},{code:"130582",name:"沙河市"}]},{code:"130600",name:"保定市",areaList:[{code:"130602",name:"竞秀区"},{code:"130606",name:"莲池区"},{code:"130607",name:"满城区"},{code:"130608",name:"清苑区"},{code:"130609",name:"徐水区"},{code:"130623",name:"涞水县"},{code:"130624",name:"阜平县"},{code:"130626",name:"定兴县"},{code:"130627",name:"唐县"},{code:"130628",name:"高阳县"},{code:"130629",name:"容城县"},{code:"130630",name:"涞源县"},{code:"130631",name:"望都县"},{code:"130632",name:"安新县"},{code:"130633",name:"易县"},{code:"130634",name:"曲阳县"},{code:"130635",name:"蠡县"},{code:"130636",name:"顺平县"},{code:"130637",name:"博野县"},{code:"130638",name:"雄县"},{code:"130681",name:"涿州市"},{code:"130682",name:"定州市"},{code:"130683",name:"安国市"},{code:"130684",name:"高碑店市"}]},{code:"130700",name:"张家口市",areaList:[{code:"130702",name:"桥东区"},{code:"130703",name:"桥西区"},{code:"130705",name:"宣化区"},{code:"130706",name:"下花园区"},{code:"130708",name:"万全区"},{code:"130709",name:"崇礼区"},{code:"130722",name:"张北县"},{code:"130723",name:"康保县"},{code:"130724",name:"沽源县"},{code:"130725",name:"尚义县"},{code:"130726",name:"蔚县"},{code:"130727",name:"阳原县"},{code:"130728",name:"怀安县"},{code:"130730",name:"怀来县"},{code:"130731",name:"涿鹿县"},{code:"130732",name:"赤城县"}]},{code:"130800",name:"承德市",areaList:[{code:"130802",name:"双桥区"},{code:"130803",name:"双滦区"},{code:"130804",name:"鹰手营子矿区"},{code:"130821",name:"承德县"},{code:"130822",name:"兴隆县"},{code:"130824",name:"滦平县"},{code:"130825",name:"隆化县"},{code:"130826",name:"丰宁满族自治县"},{code:"130827",name:"宽城满族自治县"},{code:"130828",name:"围场满族蒙古族自治县"},{code:"130881",name:"平泉市"}]},{code:"130900",name:"沧州市",areaList:[{code:"130902",name:"新华区"},{code:"130903",name:"运河区"},{code:"130921",name:"沧县"},{code:"130922",name:"青县"},{code:"130923",name:"东光县"},{code:"130924",name:"海兴县"},{code:"130925",name:"盐山县"},{code:"130926",name:"肃宁县"},{code:"130927",name:"南皮县"},{code:"130928",name:"吴桥县"},{code:"130929",name:"献县"},{code:"130930",name:"孟村回族自治县"},{code:"130981",name:"泊头市"},{code:"130982",name:"任丘市"},{code:"130983",name:"黄骅市"},{code:"130984",name:"河间市"}]},{code:"131000",name:"廊坊市",areaList:[{code:"131002",name:"安次区"},{code:"131003",name:"广阳区"},{code:"131022",name:"固安县"},{code:"131023",name:"永清县"},{code:"131024",name:"香河县"},{code:"131025",name:"大城县"},{code:"131026",name:"文安县"},{code:"131028",name:"大厂回族自治县"},{code:"131081",name:"霸州市"},{code:"131082",name:"三河市"}]},{code:"131100",name:"衡水市",areaList:[{code:"131102",name:"桃城区"},{code:"131103",name:"冀州区"},{code:"131121",name:"枣强县"},{code:"131122",name:"武邑县"},{code:"131123",name:"武强县"},{code:"131124",name:"饶阳县"},{code:"131125",name:"安平县"},{code:"131126",name:"故城县"},{code:"131127",name:"景县"},{code:"131128",name:"阜城县"},{code:"131182",name:"深州市"}]}]},{code:"140000",name:"山西省",cityList:[{code:"140100",name:"太原市",areaList:[{code:"140105",name:"小店区"},{code:"140106",name:"迎泽区"},{code:"140107",name:"杏花岭区"},{code:"140108",name:"尖草坪区"},{code:"140109",name:"万柏林区"},{code:"140110",name:"晋源区"},{code:"140121",name:"清徐县"},{code:"140122",name:"阳曲县"},{code:"140123",name:"娄烦县"},{code:"140181",name:"古交市"}]},{code:"140200",name:"大同市",areaList:[{code:"140212",name:"新荣区"},{code:"140213",name:"平城区"},{code:"140214",name:"云冈区"},{code:"140215",name:"云州区"},{code:"140221",name:"阳高县"},{code:"140222",name:"天镇县"},{code:"140223",name:"广灵县"},{code:"140224",name:"灵丘县"},{code:"140225",name:"浑源县"},{code:"140226",name:"左云县"}]},{code:"140300",name:"阳泉市",areaList:[{code:"140302",name:"城区"},{code:"140303",name:"矿区"},{code:"140311",name:"郊区"},{code:"140321",name:"平定县"},{code:"140322",name:"盂县"}]},{code:"140400",name:"长治市",areaList:[{code:"140403",name:"潞州区"},{code:"140404",name:"上党区"},{code:"140405",name:"屯留区"},{code:"140406",name:"潞城区"},{code:"140423",name:"襄垣县"},{code:"140425",name:"平顺县"},{code:"140426",name:"黎城县"},{code:"140427",name:"壶关县"},{code:"140428",name:"长子县"},{code:"140429",name:"武乡县"},{code:"140430",name:"沁县"},{code:"140431",name:"沁源县"}]},{code:"140500",name:"晋城市",areaList:[{code:"140502",name:"城区"},{code:"140521",name:"沁水县"},{code:"140522",name:"阳城县"},{code:"140524",name:"陵川县"},{code:"140525",name:"泽州县"},{code:"140581",name:"高平市"}]},{code:"140600",name:"朔州市",areaList:[{code:"140602",name:"朔城区"},{code:"140603",name:"平鲁区"},{code:"140621",name:"山阴县"},{code:"140622",name:"应县"},{code:"140623",name:"右玉县"},{code:"140681",name:"怀仁市"}]},{code:"140700",name:"晋中市",areaList:[{code:"140702",name:"榆次区"},{code:"140721",name:"榆社县"},{code:"140722",name:"左权县"},{code:"140723",name:"和顺县"},{code:"140724",name:"昔阳县"},{code:"140725",name:"寿阳县"},{code:"140726",name:"太谷县"},{code:"140727",name:"祁县"},{code:"140728",name:"平遥县"},{code:"140729",name:"灵石县"},{code:"140781",name:"介休市"}]},{code:"140800",name:"运城市",areaList:[{code:"140802",name:"盐湖区"},{code:"140821",name:"临猗县"},{code:"140822",name:"万荣县"},{code:"140823",name:"闻喜县"},{code:"140824",name:"稷山县"},{code:"140825",name:"新绛县"},{code:"140826",name:"绛县"},{code:"140827",name:"垣曲县"},{code:"140828",name:"夏县"},{code:"140829",name:"平陆县"},{code:"140830",name:"芮城县"},{code:"140881",name:"永济市"},{code:"140882",name:"河津市"}]},{code:"140900",name:"忻州市",areaList:[{code:"140902",name:"忻府区"},{code:"140921",name:"定襄县"},{code:"140922",name:"五台县"},{code:"140923",name:"代县"},{code:"140924",name:"繁峙县"},{code:"140925",name:"宁武县"},{code:"140926",name:"静乐县"},{code:"140927",name:"神池县"},{code:"140928",name:"五寨县"},{code:"140929",name:"岢岚县"},{code:"140930",name:"河曲县"},{code:"140931",name:"保德县"},{code:"140932",name:"偏关县"},{code:"140981",name:"原平市"}]},{code:"141000",name:"临汾市",areaList:[{code:"141002",name:"尧都区"},{code:"141021",name:"曲沃县"},{code:"141022",name:"翼城县"},{code:"141023",name:"襄汾县"},{code:"141024",name:"洪洞县"},{code:"141025",name:"古县"},{code:"141026",name:"安泽县"},{code:"141027",name:"浮山县"},{code:"141028",name:"吉县"},{code:"141029",name:"乡宁县"},{code:"141030",name:"大宁县"},{code:"141031",name:"隰县"},{code:"141032",name:"永和县"},{code:"141033",name:"蒲县"},{code:"141034",name:"汾西县"},{code:"141081",name:"侯马市"},{code:"141082",name:"霍州市"}]},{code:"141100",name:"吕梁市",areaList:[{code:"141102",name:"离石区"},{code:"141121",name:"文水县"},{code:"141122",name:"交城县"},{code:"141123",name:"兴县"},{code:"141124",name:"临县"},{code:"141125",name:"柳林县"},{code:"141126",name:"石楼县"},{code:"141127",name:"岚县"},{code:"141128",name:"方山县"},{code:"141129",name:"中阳县"},{code:"141130",name:"交口县"},{code:"141181",name:"孝义市"},{code:"141182",name:"汾阳市"}]}]},{code:"150000",name:"内蒙古自治区",cityList:[{code:"150100",name:"呼和浩特市",areaList:[{code:"150102",name:"新城区"},{code:"150103",name:"回民区"},{code:"150104",name:"玉泉区"},{code:"150105",name:"赛罕区"},{code:"150121",name:"土默特左旗"},{code:"150122",name:"托克托县"},{code:"150123",name:"和林格尔县"},{code:"150124",name:"清水河县"},{code:"150125",name:"武川县"}]},{code:"150200",name:"包头市",areaList:[{code:"150202",name:"东河区"},{code:"150203",name:"昆都仑区"},{code:"150204",name:"青山区"},{code:"150205",name:"石拐区"},{code:"150206",name:"白云鄂博矿区"},{code:"150207",name:"九原区"},{code:"150221",name:"土默特右旗"},{code:"150222",name:"固阳县"},{code:"150223",name:"达尔罕茂明安联合旗"}]},{code:"150300",name:"乌海市",areaList:[{code:"150302",name:"海勃湾区"},{code:"150303",name:"海南区"},{code:"150304",name:"乌达区"}]},{code:"150400",name:"赤峰市",areaList:[{code:"150402",name:"红山区"},{code:"150403",name:"元宝山区"},{code:"150404",name:"松山区"},{code:"150421",name:"阿鲁科尔沁旗"},{code:"150422",name:"巴林左旗"},{code:"150423",name:"巴林右旗"},{code:"150424",name:"林西县"},{code:"150425",name:"克什克腾旗"},{code:"150426",name:"翁牛特旗"},{code:"150428",name:"喀喇沁旗"},{code:"150429",name:"宁城县"},{code:"150430",name:"敖汉旗"}]},{code:"150500",name:"通辽市",areaList:[{code:"150502",name:"科尔沁区"},{code:"150521",name:"科尔沁左翼中旗"},{code:"150522",name:"科尔沁左翼后旗"},{code:"150523",name:"开鲁县"},{code:"150524",name:"库伦旗"},{code:"150525",name:"奈曼旗"},{code:"150526",name:"扎鲁特旗"},{code:"150581",name:"霍林郭勒市"}]},{code:"150600",name:"鄂尔多斯市",areaList:[{code:"150602",name:"东胜区"},{code:"150603",name:"康巴什区"},{code:"150621",name:"达拉特旗"},{code:"150622",name:"准格尔旗"},{code:"150623",name:"鄂托克前旗"},{code:"150624",name:"鄂托克旗"},{code:"150625",name:"杭锦旗"},{code:"150626",name:"乌审旗"},{code:"150627",name:"伊金霍洛旗"}]},{code:"150700",name:"呼伦贝尔市",areaList:[{code:"150702",name:"海拉尔区"},{code:"150703",name:"扎赉诺尔区"},{code:"150721",name:"阿荣旗"},{code:"150722",name:"莫力达瓦达斡尔族自治旗"},{code:"150723",name:"鄂伦春自治旗"},{code:"150724",name:"鄂温克族自治旗"},{code:"150725",name:"陈巴尔虎旗"},{code:"150726",name:"新巴尔虎左旗"},{code:"150727",name:"新巴尔虎右旗"},{code:"150781",name:"满洲里市"},{code:"150782",name:"牙克石市"},{code:"150783",name:"扎兰屯市"},{code:"150784",name:"额尔古纳市"},{code:"150785",name:"根河市"}]},{code:"150800",name:"巴彦淖尔市",areaList:[{code:"150802",name:"临河区"},{code:"150821",name:"五原县"},{code:"150822",name:"磴口县"},{code:"150823",name:"乌拉特前旗"},{code:"150824",name:"乌拉特中旗"},{code:"150825",name:"乌拉特后旗"},{code:"150826",name:"杭锦后旗"}]},{code:"150900",name:"乌兰察布市",areaList:[{code:"150902",name:"集宁区"},{code:"150921",name:"卓资县"},{code:"150922",name:"化德县"},{code:"150923",name:"商都县"},{code:"150924",name:"兴和县"},{code:"150925",name:"凉城县"},{code:"150926",name:"察哈尔右翼前旗"},{code:"150927",name:"察哈尔右翼中旗"},{code:"150928",name:"察哈尔右翼后旗"},{code:"150929",name:"四子王旗"},{code:"150981",name:"丰镇市"}]},{code:"152200",name:"兴安盟",areaList:[{code:"152201",name:"乌兰浩特市"},{code:"152202",name:"阿尔山市"},{code:"152221",name:"科尔沁右翼前旗"},{code:"152222",name:"科尔沁右翼中旗"},{code:"152223",name:"扎赉特旗"},{code:"152224",name:"突泉县"}]},{code:"152500",name:"锡林郭勒盟",areaList:[{code:"152501",name:"二连浩特市"},{code:"152502",name:"锡林浩特市"},{code:"152522",name:"阿巴嘎旗"},{code:"152523",name:"苏尼特左旗"},{code:"152524",name:"苏尼特右旗"},{code:"152525",name:"东乌珠穆沁旗"},{code:"152526",name:"西乌珠穆沁旗"},{code:"152527",name:"太仆寺旗"},{code:"152528",name:"镶黄旗"},{code:"152529",name:"正镶白旗"},{code:"152530",name:"正蓝旗"},{code:"152531",name:"多伦县"}]},{code:"152900",name:"阿拉善盟",areaList:[{code:"152921",name:"阿拉善左旗"},{code:"152922",name:"阿拉善右旗"},{code:"152923",name:"额济纳旗"}]}]},{code:"210000",name:"辽宁省",cityList:[{code:"210100",name:"沈阳市",areaList:[{code:"210102",name:"和平区"},{code:"210103",name:"沈河区"},{code:"210104",name:"大东区"},{code:"210105",name:"皇姑区"},{code:"210106",name:"铁西区"},{code:"210111",name:"苏家屯区"},{code:"210112",name:"浑南区"},{code:"210113",name:"沈北新区"},{code:"210114",name:"于洪区"},{code:"210115",name:"辽中区"},{code:"210123",name:"康平县"},{code:"210124",name:"法库县"},{code:"210181",name:"新民市"}]},{code:"210200",name:"大连市",areaList:[{code:"210202",name:"中山区"},{code:"210203",name:"西岗区"},{code:"210204",name:"沙河口区"},{code:"210211",name:"甘井子区"},{code:"210212",name:"旅顺口区"},{code:"210213",name:"金州区"},{code:"210214",name:"普兰店区"},{code:"210224",name:"长海县"},{code:"210281",name:"瓦房店市"},{code:"210283",name:"庄河市"}]},{code:"210300",name:"鞍山市",areaList:[{code:"210302",name:"铁东区"},{code:"210303",name:"铁西区"},{code:"210304",name:"立山区"},{code:"210311",name:"千山区"},{code:"210321",name:"台安县"},{code:"210323",name:"岫岩满族自治县"},{code:"210381",name:"海城市"}]},{code:"210400",name:"抚顺市",areaList:[{code:"210402",name:"新抚区"},{code:"210403",name:"东洲区"},{code:"210404",name:"望花区"},{code:"210411",name:"顺城区"},{code:"210421",name:"抚顺县"},{code:"210422",name:"新宾满族自治县"},{code:"210423",name:"清原满族自治县"}]},{code:"210500",name:"本溪市",areaList:[{code:"210502",name:"平山区"},{code:"210503",name:"溪湖区"},{code:"210504",name:"明山区"},{code:"210505",name:"南芬区"},{code:"210521",name:"本溪满族自治县"},{code:"210522",name:"桓仁满族自治县"}]},{code:"210600",name:"丹东市",areaList:[{code:"210602",name:"元宝区"},{code:"210603",name:"振兴区"},{code:"210604",name:"振安区"},{code:"210624",name:"宽甸满族自治县"},{code:"210681",name:"东港市"},{code:"210682",name:"凤城市"}]},{code:"210700",name:"锦州市",areaList:[{code:"210702",name:"古塔区"},{code:"210703",name:"凌河区"},{code:"210711",name:"太和区"},{code:"210726",name:"黑山县"},{code:"210727",name:"义县"},{code:"210781",name:"凌海市"},{code:"210782",name:"北镇市"}]},{code:"210800",name:"营口市",areaList:[{code:"210802",name:"站前区"},{code:"210803",name:"西市区"},{code:"210804",name:"鲅鱼圈区"},{code:"210811",name:"老边区"},{code:"210881",name:"盖州市"},{code:"210882",name:"大石桥市"}]},{code:"210900",name:"阜新市",areaList:[{code:"210902",name:"海州区"},{code:"210903",name:"新邱区"},{code:"210904",name:"太平区"},{code:"210905",name:"清河门区"},{code:"210911",name:"细河区"},{code:"210921",name:"阜新蒙古族自治县"},{code:"210922",name:"彰武县"}]},{code:"211000",name:"辽阳市",areaList:[{code:"211002",name:"白塔区"},{code:"211003",name:"文圣区"},{code:"211004",name:"宏伟区"},{code:"211005",name:"弓长岭区"},{code:"211011",name:"太子河区"},{code:"211021",name:"辽阳县"},{code:"211081",name:"灯塔市"}]},{code:"211100",name:"盘锦市",areaList:[{code:"211102",name:"双台子区"},{code:"211103",name:"兴隆台区"},{code:"211104",name:"大洼区"},{code:"211122",name:"盘山县"}]},{code:"211200",name:"铁岭市",areaList:[{code:"211202",name:"银州区"},{code:"211204",name:"清河区"},{code:"211221",name:"铁岭县"},{code:"211223",name:"西丰县"},{code:"211224",name:"昌图县"},{code:"211281",name:"调兵山市"},{code:"211282",name:"开原市"}]},{code:"211300",name:"朝阳市",areaList:[{code:"211302",name:"双塔区"},{code:"211303",name:"龙城区"},{code:"211321",name:"朝阳县"},{code:"211322",name:"建平县"},{code:"211324",name:"喀喇沁左翼蒙古族自治县"},{code:"211381",name:"北票市"},{code:"211382",name:"凌源市"}]},{code:"211400",name:"葫芦岛市",areaList:[{code:"211402",name:"连山区"},{code:"211403",name:"龙港区"},{code:"211404",name:"南票区"},{code:"211421",name:"绥中县"},{code:"211422",name:"建昌县"},{code:"211481",name:"兴城市"}]}]},{code:"220000",name:"吉林省",cityList:[{code:"220100",name:"长春市",areaList:[{code:"220102",name:"南关区"},{code:"220103",name:"宽城区"},{code:"220104",name:"朝阳区"},{code:"220105",name:"二道区"},{code:"220106",name:"绿园区"},{code:"220112",name:"双阳区"},{code:"220113",name:"九台区"},{code:"220122",name:"农安县"},{code:"220182",name:"榆树市"},{code:"220183",name:"德惠市"}]},{code:"220200",name:"吉林市",areaList:[{code:"220202",name:"昌邑区"},{code:"220203",name:"龙潭区"},{code:"220204",name:"船营区"},{code:"220211",name:"丰满区"},{code:"220221",name:"永吉县"},{code:"220281",name:"蛟河市"},{code:"220282",name:"桦甸市"},{code:"220283",name:"舒兰市"},{code:"220284",name:"磐石市"}]},{code:"220300",name:"四平市",areaList:[{code:"220302",name:"铁西区"},{code:"220303",name:"铁东区"},{code:"220322",name:"梨树县"},{code:"220323",name:"伊通满族自治县"},{code:"220381",name:"公主岭市"},{code:"220382",name:"双辽市"}]},{code:"220400",name:"辽源市",areaList:[{code:"220402",name:"龙山区"},{code:"220403",name:"西安区"},{code:"220421",name:"东丰县"},{code:"220422",name:"东辽县"}]},{code:"220500",name:"通化市",areaList:[{code:"220502",name:"东昌区"},{code:"220503",name:"二道江区"},{code:"220521",name:"通化县"},{code:"220523",name:"辉南县"},{code:"220524",name:"柳河县"},{code:"220581",name:"梅河口市"},{code:"220582",name:"集安市"}]},{code:"220600",name:"白山市",areaList:[{code:"220602",name:"浑江区"},{code:"220605",name:"江源区"},{code:"220621",name:"抚松县"},{code:"220622",name:"靖宇县"},{code:"220623",name:"长白朝鲜族自治县"},{code:"220681",name:"临江市"}]},{code:"220700",name:"松原市",areaList:[{code:"220702",name:"宁江区"},{code:"220721",name:"前郭尔罗斯蒙古族自治县"},{code:"220722",name:"长岭县"},{code:"220723",name:"乾安县"},{code:"220781",name:"扶余市"}]},{code:"220800",name:"白城市",areaList:[{code:"220802",name:"洮北区"},{code:"220821",name:"镇赉县"},{code:"220822",name:"通榆县"},{code:"220881",name:"洮南市"},{code:"220882",name:"大安市"}]},{code:"222400",name:"延边朝鲜族自治州",areaList:[{code:"222401",name:"延吉市"},{code:"222402",name:"图们市"},{code:"222403",name:"敦化市"},{code:"222404",name:"珲春市"},{code:"222405",name:"龙井市"},{code:"222406",name:"和龙市"},{code:"222424",name:"汪清县"},{code:"222426",name:"安图县"}]}]},{code:"230000",name:"黑龙江省",cityList:[{code:"230100",name:"哈尔滨市",areaList:[{code:"230102",name:"道里区"},{code:"230103",name:"南岗区"},{code:"230104",name:"道外区"},{code:"230108",name:"平房区"},{code:"230109",name:"松北区"},{code:"230110",name:"香坊区"},{code:"230111",name:"呼兰区"},{code:"230112",name:"阿城区"},{code:"230113",name:"双城区"},{code:"230123",name:"依兰县"},{code:"230124",name:"方正县"},{code:"230125",name:"宾县"},{code:"230126",name:"巴彦县"},{code:"230127",name:"木兰县"},{code:"230128",name:"通河县"},{code:"230129",name:"延寿县"},{code:"230183",name:"尚志市"},{code:"230184",name:"五常市"}]},{code:"230200",name:"齐齐哈尔市",areaList:[{code:"230202",name:"龙沙区"},{code:"230203",name:"建华区"},{code:"230204",name:"铁锋区"},{code:"230205",name:"昂昂溪区"},{code:"230206",name:"富拉尔基区"},{code:"230207",name:"碾子山区"},{code:"230208",name:"梅里斯达斡尔族区"},{code:"230221",name:"龙江县"},{code:"230223",name:"依安县"},{code:"230224",name:"泰来县"},{code:"230225",name:"甘南县"},{code:"230227",name:"富裕县"},{code:"230229",name:"克山县"},{code:"230230",name:"克东县"},{code:"230231",name:"拜泉县"},{code:"230281",name:"讷河市"}]},{code:"230300",name:"鸡西市",areaList:[{code:"230302",name:"鸡冠区"},{code:"230303",name:"恒山区"},{code:"230304",name:"滴道区"},{code:"230305",name:"梨树区"},{code:"230306",name:"城子河区"},{code:"230307",name:"麻山区"},{code:"230321",name:"鸡东县"},{code:"230381",name:"虎林市"},{code:"230382",name:"密山市"}]},{code:"230400",name:"鹤岗市",areaList:[{code:"230402",name:"向阳区"},{code:"230403",name:"工农区"},{code:"230404",name:"南山区"},{code:"230405",name:"兴安区"},{code:"230406",name:"东山区"},{code:"230407",name:"兴山区"},{code:"230421",name:"萝北县"},{code:"230422",name:"绥滨县"}]},{code:"230500",name:"双鸭山市",areaList:[{code:"230502",name:"尖山区"},{code:"230503",name:"岭东区"},{code:"230505",name:"四方台区"},{code:"230506",name:"宝山区"},{code:"230521",name:"集贤县"},{code:"230522",name:"友谊县"},{code:"230523",name:"宝清县"},{code:"230524",name:"饶河县"}]},{code:"230600",name:"大庆市",areaList:[{code:"230602",name:"萨尔图区"},{code:"230603",name:"龙凤区"},{code:"230604",name:"让胡路区"},{code:"230605",name:"红岗区"},{code:"230606",name:"大同区"},{code:"230621",name:"肇州县"},{code:"230622",name:"肇源县"},{code:"230623",name:"林甸县"},{code:"230624",name:"杜尔伯特蒙古族自治县"}]},{code:"230700",name:"伊春市",areaList:[{code:"230702",name:"伊春区"},{code:"230703",name:"南岔区"},{code:"230704",name:"友好区"},{code:"230705",name:"西林区"},{code:"230706",name:"翠峦区"},{code:"230707",name:"新青区"},{code:"230708",name:"美溪区"},{code:"230709",name:"金山屯区"},{code:"230710",name:"五营区"},{code:"230711",name:"乌马河区"},{code:"230712",name:"汤旺河区"},{code:"230713",name:"带岭区"},{code:"230714",name:"乌伊岭区"},{code:"230715",name:"红星区"},{code:"230716",name:"上甘岭区"},{code:"230722",name:"嘉荫县"},{code:"230781",name:"铁力市"}]},{code:"230800",name:"佳木斯市",areaList:[{code:"230803",name:"向阳区"},{code:"230804",name:"前进区"},{code:"230805",name:"东风区"},{code:"230811",name:"郊区"},{code:"230822",name:"桦南县"},{code:"230826",name:"桦川县"},{code:"230828",name:"汤原县"},{code:"230881",name:"同江市"},{code:"230882",name:"富锦市"},{code:"230883",name:"抚远市"}]},{code:"230900",name:"七台河市",areaList:[{code:"230902",name:"新兴区"},{code:"230903",name:"桃山区"},{code:"230904",name:"茄子河区"},{code:"230921",name:"勃利县"}]},{code:"231000",name:"牡丹江市",areaList:[{code:"231002",name:"东安区"},{code:"231003",name:"阳明区"},{code:"231004",name:"爱民区"},{code:"231005",name:"西安区"},{code:"231025",name:"林口县"},{code:"231081",name:"绥芬河市"},{code:"231083",name:"海林市"},{code:"231084",name:"宁安市"},{code:"231085",name:"穆棱市"},{code:"231086",name:"东宁市"}]},{code:"231100",name:"黑河市",areaList:[{code:"231102",name:"爱辉区"},{code:"231121",name:"嫩江县"},{code:"231123",name:"逊克县"},{code:"231124",name:"孙吴县"},{code:"231181",name:"北安市"},{code:"231182",name:"五大连池市"}]},{code:"231200",name:"绥化市",areaList:[{code:"231202",name:"北林区"},{code:"231221",name:"望奎县"},{code:"231222",name:"兰西县"},{code:"231223",name:"青冈县"},{code:"231224",name:"庆安县"},{code:"231225",name:"明水县"},{code:"231226",name:"绥棱县"},{code:"231281",name:"安达市"},{code:"231282",name:"肇东市"},{code:"231283",name:"海伦市"}]},{code:"232700",name:"大兴安岭地区",areaList:[{code:"232701",name:"漠河市"},{code:"232721",name:"呼玛县"},{code:"232722",name:"塔河县"}]}]},{code:"310000",name:"上海市",cityList:[{code:"310000",name:"上海市",areaList:[{code:"310101",name:"黄浦区"},{code:"310104",name:"徐汇区"},{code:"310105",name:"长宁区"},{code:"310106",name:"静安区"},{code:"310107",name:"普陀区"},{code:"310109",name:"虹口区"},{code:"310110",name:"杨浦区"},{code:"310112",name:"闵行区"},{code:"310113",name:"宝山区"},{code:"310114",name:"嘉定区"},{code:"310115",name:"浦东新区"},{code:"310116",name:"金山区"},{code:"310117",name:"松江区"},{code:"310118",name:"青浦区"},{code:"310120",name:"奉贤区"},{code:"310151",name:"崇明区"}]}]},{code:"320000",name:"江苏省",cityList:[{code:"320100",name:"南京市",areaList:[{code:"320102",name:"玄武区"},{code:"320104",name:"秦淮区"},{code:"320105",name:"建邺区"},{code:"320106",name:"鼓楼区"},{code:"320111",name:"浦口区"},{code:"320113",name:"栖霞区"},{code:"320114",name:"雨花台区"},{code:"320115",name:"江宁区"},{code:"320116",name:"六合区"},{code:"320117",name:"溧水区"},{code:"320118",name:"高淳区"}]},{code:"320200",name:"无锡市",areaList:[{code:"320205",name:"锡山区"},{code:"320206",name:"惠山区"},{code:"320211",name:"滨湖区"},{code:"320213",name:"梁溪区"},{code:"320214",name:"新吴区"},{code:"320281",name:"江阴市"},{code:"320282",name:"宜兴市"}]},{code:"320300",name:"徐州市",areaList:[{code:"320302",name:"鼓楼区"},{code:"320303",name:"云龙区"},{code:"320305",name:"贾汪区"},{code:"320311",name:"泉山区"},{code:"320312",name:"铜山区"},{code:"320321",name:"丰县"},{code:"320322",name:"沛县"},{code:"320324",name:"睢宁县"},{code:"320381",name:"新沂市"},{code:"320382",name:"邳州市"}]},{code:"320400",name:"常州市",areaList:[{code:"320402",name:"天宁区"},{code:"320404",name:"钟楼区"},{code:"320411",name:"新北区"},{code:"320412",name:"武进区"},{code:"320413",name:"金坛区"},{code:"320481",name:"溧阳市"}]},{code:"320500",name:"苏州市",areaList:[{code:"320505",name:"虎丘区"},{code:"320506",name:"吴中区"},{code:"320507",name:"相城区"},{code:"320508",name:"姑苏区"},{code:"320509",name:"吴江区"},{code:"320581",name:"常熟市"},{code:"320582",name:"张家港市"},{code:"320583",name:"昆山市"},{code:"320585",name:"太仓市"}]},{code:"320600",name:"南通市",areaList:[{code:"320602",name:"崇川区"},{code:"320611",name:"港闸区"},{code:"320612",name:"通州区"},{code:"320623",name:"如东县"},{code:"320681",name:"启东市"},{code:"320682",name:"如皋市"},{code:"320684",name:"海门市"},{code:"320685",name:"海安市"}]},{code:"320700",name:"连云港市",areaList:[{code:"320703",name:"连云区"},{code:"320706",name:"海州区"},{code:"320707",name:"赣榆区"},{code:"320722",name:"东海县"},{code:"320723",name:"灌云县"},{code:"320724",name:"灌南县"}]},{code:"320800",name:"淮安市",areaList:[{code:"320803",name:"淮安区"},{code:"320804",name:"淮阴区"},{code:"320812",name:"清江浦区"},{code:"320813",name:"洪泽区"},{code:"320826",name:"涟水县"},{code:"320830",name:"盱眙县"},{code:"320831",name:"金湖县"}]},{code:"320900",name:"盐城市",areaList:[{code:"320902",name:"亭湖区"},{code:"320903",name:"盐都区"},{code:"320904",name:"大丰区"},{code:"320921",name:"响水县"},{code:"320922",name:"滨海县"},{code:"320923",name:"阜宁县"},{code:"320924",name:"射阳县"},{code:"320925",name:"建湖县"},{code:"320981",name:"东台市"}]},{code:"321000",name:"扬州市",areaList:[{code:"321002",name:"广陵区"},{code:"321003",name:"邗江区"},{code:"321012",name:"江都区"},{code:"321023",name:"宝应县"},{code:"321081",name:"仪征市"},{code:"321084",name:"高邮市"}]},{code:"321100",name:"镇江市",areaList:[{code:"321102",name:"京口区"},{code:"321111",name:"润州区"},{code:"321112",name:"丹徒区"},{code:"321181",name:"丹阳市"},{code:"321182",name:"扬中市"},{code:"321183",name:"句容市"}]},{code:"321200",name:"泰州市",areaList:[{code:"321202",name:"海陵区"},{code:"321203",name:"高港区"},{code:"321204",name:"姜堰区"},{code:"321281",name:"兴化市"},{code:"321282",name:"靖江市"},{code:"321283",name:"泰兴市"}]},{code:"321300",name:"宿迁市",areaList:[{code:"321302",name:"宿城区"},{code:"321311",name:"宿豫区"},{code:"321322",name:"沭阳县"},{code:"321323",name:"泗阳县"},{code:"321324",name:"泗洪县"}]}]},{code:"330000",name:"浙江省",cityList:[{code:"330100",name:"杭州市",areaList:[{code:"330102",name:"上城区"},{code:"330103",name:"下城区"},{code:"330104",name:"江干区"},{code:"330105",name:"拱墅区"},{code:"330106",name:"西湖区"},{code:"330108",name:"滨江区"},{code:"330109",name:"萧山区"},{code:"330110",name:"余杭区"},{code:"330111",name:"富阳区"},{code:"330112",name:"临安区"},{code:"330122",name:"桐庐县"},{code:"330127",name:"淳安县"},{code:"330182",name:"建德市"}]},{code:"330200",name:"宁波市",areaList:[{code:"330203",name:"海曙区"},{code:"330205",name:"江北区"},{code:"330206",name:"北仑区"},{code:"330211",name:"镇海区"},{code:"330212",name:"鄞州区"},{code:"330213",name:"奉化区"},{code:"330225",name:"象山县"},{code:"330226",name:"宁海县"},{code:"330281",name:"余姚市"},{code:"330282",name:"慈溪市"}]},{code:"330300",name:"温州市",areaList:[{code:"330302",name:"鹿城区"},{code:"330303",name:"龙湾区"},{code:"330304",name:"瓯海区"},{code:"330305",name:"洞头区"},{code:"330324",name:"永嘉县"},{code:"330326",name:"平阳县"},{code:"330327",name:"苍南县"},{code:"330328",name:"文成县"},{code:"330329",name:"泰顺县"},{code:"330381",name:"瑞安市"},{code:"330382",name:"乐清市"}]},{code:"330400",name:"嘉兴市",areaList:[{code:"330402",name:"南湖区"},{code:"330411",name:"秀洲区"},{code:"330421",name:"嘉善县"},{code:"330424",name:"海盐县"},{code:"330481",name:"海宁市"},{code:"330482",name:"平湖市"},{code:"330483",name:"桐乡市"}]},{code:"330500",name:"湖州市",areaList:[{code:"330502",name:"吴兴区"},{code:"330503",name:"南浔区"},{code:"330521",name:"德清县"},{code:"330522",name:"长兴县"},{code:"330523",name:"安吉县"}]},{code:"330600",name:"绍兴市",areaList:[{code:"330602",name:"越城区"},{code:"330603",name:"柯桥区"},{code:"330604",name:"上虞区"},{code:"330624",name:"新昌县"},{code:"330681",name:"诸暨市"},{code:"330683",name:"嵊州市"}]},{code:"330700",name:"金华市",areaList:[{code:"330702",name:"婺城区"},{code:"330703",name:"金东区"},{code:"330723",name:"武义县"},{code:"330726",name:"浦江县"},{code:"330727",name:"磐安县"},{code:"330781",name:"兰溪市"},{code:"330782",name:"义乌市"},{code:"330783",name:"东阳市"},{code:"330784",name:"永康市"}]},{code:"330800",name:"衢州市",areaList:[{code:"330802",name:"柯城区"},{code:"330803",name:"衢江区"},{code:"330822",name:"常山县"},{code:"330824",name:"开化县"},{code:"330825",name:"龙游县"},{code:"330881",name:"江山市"}]},{code:"330900",name:"舟山市",areaList:[{code:"330902",name:"定海区"},{code:"330903",name:"普陀区"},{code:"330921",name:"岱山县"},{code:"330922",name:"嵊泗县"}]},{code:"331000",name:"台州市",areaList:[{code:"331002",name:"椒江区"},{code:"331003",name:"黄岩区"},{code:"331004",name:"路桥区"},{code:"331022",name:"三门县"},{code:"331023",name:"天台县"},{code:"331024",name:"仙居县"},{code:"331081",name:"温岭市"},{code:"331082",name:"临海市"},{code:"331083",name:"玉环市"}]},{code:"331100",name:"丽水市",areaList:[{code:"331102",name:"莲都区"},{code:"331121",name:"青田县"},{code:"331122",name:"缙云县"},{code:"331123",name:"遂昌县"},{code:"331124",name:"松阳县"},{code:"331125",name:"云和县"},{code:"331126",name:"庆元县"},{code:"331127",name:"景宁畲族自治县"},{code:"331181",name:"龙泉市"}]}]},{code:"340000",name:"安徽省",cityList:[{code:"340100",name:"合肥市",areaList:[{code:"340102",name:"瑶海区"},{code:"340103",name:"庐阳区"},{code:"340104",name:"蜀山区"},{code:"340111",name:"包河区"},{code:"340121",name:"长丰县"},{code:"340122",name:"肥东县"},{code:"340123",name:"肥西县"},{code:"340124",name:"庐江县"},{code:"340181",name:"巢湖市"}]},{code:"340200",name:"芜湖市",areaList:[{code:"340202",name:"镜湖区"},{code:"340203",name:"弋江区"},{code:"340207",name:"鸠江区"},{code:"340208",name:"三山区"},{code:"340221",name:"芜湖县"},{code:"340222",name:"繁昌县"},{code:"340223",name:"南陵县"},{code:"340225",name:"无为县"}]},{code:"340300",name:"蚌埠市",areaList:[{code:"340302",name:"龙子湖区"},{code:"340303",name:"蚌山区"},{code:"340304",name:"禹会区"},{code:"340311",name:"淮上区"},{code:"340321",name:"怀远县"},{code:"340322",name:"五河县"},{code:"340323",name:"固镇县"}]},{code:"340400",name:"淮南市",areaList:[{code:"340402",name:"大通区"},{code:"340403",name:"田家庵区"},{code:"340404",name:"谢家集区"},{code:"340405",name:"八公山区"},{code:"340406",name:"潘集区"},{code:"340421",name:"凤台县"},{code:"340422",name:"寿县"}]},{code:"340500",name:"马鞍山市",areaList:[{code:"340503",name:"花山区"},{code:"340504",name:"雨山区"},{code:"340506",name:"博望区"},{code:"340521",name:"当涂县"},{code:"340522",name:"含山县"},{code:"340523",name:"和县"}]},{code:"340600",name:"淮北市",areaList:[{code:"340602",name:"杜集区"},{code:"340603",name:"相山区"},{code:"340604",name:"烈山区"},{code:"340621",name:"濉溪县"}]},{code:"340700",name:"铜陵市",areaList:[{code:"340705",name:"铜官区"},{code:"340706",name:"义安区"},{code:"340711",name:"郊区"},{code:"340722",name:"枞阳县"}]},{code:"340800",name:"安庆市",areaList:[{code:"340802",name:"迎江区"},{code:"340803",name:"大观区"},{code:"340811",name:"宜秀区"},{code:"340822",name:"怀宁县"},{code:"340824",name:"潜山县"},{code:"340825",name:"太湖县"},{code:"340826",name:"宿松县"},{code:"340827",name:"望江县"},{code:"340828",name:"岳西县"},{code:"340881",name:"桐城市"}]},{code:"341000",name:"黄山市",areaList:[{code:"341002",name:"屯溪区"},{code:"341003",name:"黄山区"},{code:"341004",name:"徽州区"},{code:"341021",name:"歙县"},{code:"341022",name:"休宁县"},{code:"341023",name:"黟县"},{code:"341024",name:"祁门县"}]},{code:"341100",name:"滁州市",areaList:[{code:"341102",name:"琅琊区"},{code:"341103",name:"南谯区"},{code:"341122",name:"来安县"},{code:"341124",name:"全椒县"},{code:"341125",name:"定远县"},{code:"341126",name:"凤阳县"},{code:"341181",name:"天长市"},{code:"341182",name:"明光市"}]},{code:"341200",name:"阜阳市",areaList:[{code:"341202",name:"颍州区"},{code:"341203",name:"颍东区"},{code:"341204",name:"颍泉区"},{code:"341221",name:"临泉县"},{code:"341222",name:"太和县"},{code:"341225",name:"阜南县"},{code:"341226",name:"颍上县"},{code:"341282",name:"界首市"}]},{code:"341300",name:"宿州市",areaList:[{code:"341302",name:"埇桥区"},{code:"341321",name:"砀山县"},{code:"341322",name:"萧县"},{code:"341323",name:"灵璧县"},{code:"341324",name:"泗县"}]},{code:"341500",name:"六安市",areaList:[{code:"341502",name:"金安区"},{code:"341503",name:"裕安区"},{code:"341504",name:"叶集区"},{code:"341522",name:"霍邱县"},{code:"341523",name:"舒城县"},{code:"341524",name:"金寨县"},{code:"341525",name:"霍山县"}]},{code:"341600",name:"亳州市",areaList:[{code:"341602",name:"谯城区"},{code:"341621",name:"涡阳县"},{code:"341622",name:"蒙城县"},{code:"341623",name:"利辛县"}]},{code:"341700",name:"池州市",areaList:[{code:"341702",name:"贵池区"},{code:"341721",name:"东至县"},{code:"341722",name:"石台县"},{code:"341723",name:"青阳县"}]},{code:"341800",name:"宣城市",areaList:[{code:"341802",name:"宣州区"},{code:"341821",name:"郎溪县"},{code:"341822",name:"广德县"},{code:"341823",name:"泾县"},{code:"341824",name:"绩溪县"},{code:"341825",name:"旌德县"},{code:"341881",name:"宁国市"}]}]},{code:"350000",name:"福建省",cityList:[{code:"350100",name:"福州市",areaList:[{code:"350102",name:"鼓楼区"},{code:"350103",name:"台江区"},{code:"350104",name:"仓山区"},{code:"350105",name:"马尾区"},{code:"350111",name:"晋安区"},{code:"350112",name:"长乐区"},{code:"350121",name:"闽侯县"},{code:"350122",name:"连江县"},{code:"350123",name:"罗源县"},{code:"350124",name:"闽清县"},{code:"350125",name:"永泰县"},{code:"350128",name:"平潭县"},{code:"350181",name:"福清市"}]},{code:"350200",name:"厦门市",areaList:[{code:"350203",name:"思明区"},{code:"350205",name:"海沧区"},{code:"350206",name:"湖里区"},{code:"350211",name:"集美区"},{code:"350212",name:"同安区"},{code:"350213",name:"翔安区"}]},{code:"350300",name:"莆田市",areaList:[{code:"350302",name:"城厢区"},{code:"350303",name:"涵江区"},{code:"350304",name:"荔城区"},{code:"350305",name:"秀屿区"},{code:"350322",name:"仙游县"}]},{code:"350400",name:"三明市",areaList:[{code:"350402",name:"梅列区"},{code:"350403",name:"三元区"},{code:"350421",name:"明溪县"},{code:"350423",name:"清流县"},{code:"350424",name:"宁化县"},{code:"350425",name:"大田县"},{code:"350426",name:"尤溪县"},{code:"350427",name:"沙县"},{code:"350428",name:"将乐县"},{code:"350429",name:"泰宁县"},{code:"350430",name:"建宁县"},{code:"350481",name:"永安市"}]},{code:"350500",name:"泉州市",areaList:[{code:"350502",name:"鲤城区"},{code:"350503",name:"丰泽区"},{code:"350504",name:"洛江区"},{code:"350505",name:"泉港区"},{code:"350521",name:"惠安县"},{code:"350524",name:"安溪县"},{code:"350525",name:"永春县"},{code:"350526",name:"德化县"},{code:"350527",name:"金门县"},{code:"350581",name:"石狮市"},{code:"350582",name:"晋江市"},{code:"350583",name:"南安市"}]},{code:"350600",name:"漳州市",areaList:[{code:"350602",name:"芗城区"},{code:"350603",name:"龙文区"},{code:"350622",name:"云霄县"},{code:"350623",name:"漳浦县"},{code:"350624",name:"诏安县"},{code:"350625",name:"长泰县"},{code:"350626",name:"东山县"},{code:"350627",name:"南靖县"},{code:"350628",name:"平和县"},{code:"350629",name:"华安县"},{code:"350681",name:"龙海市"}]},{code:"350700",name:"南平市",areaList:[{code:"350702",name:"延平区"},{code:"350703",name:"建阳区"},{code:"350721",name:"顺昌县"},{code:"350722",name:"浦城县"},{code:"350723",name:"光泽县"},{code:"350724",name:"松溪县"},{code:"350725",name:"政和县"},{code:"350781",name:"邵武市"},{code:"350782",name:"武夷山市"},{code:"350783",name:"建瓯市"}]},{code:"350800",name:"龙岩市",areaList:[{code:"350802",name:"新罗区"},{code:"350803",name:"永定区"},{code:"350821",name:"长汀县"},{code:"350823",name:"上杭县"},{code:"350824",name:"武平县"},{code:"350825",name:"连城县"},{code:"350881",name:"漳平市"}]},{code:"350900",name:"宁德市",areaList:[{code:"350902",name:"蕉城区"},{code:"350921",name:"霞浦县"},{code:"350922",name:"古田县"},{code:"350923",name:"屏南县"},{code:"350924",name:"寿宁县"},{code:"350925",name:"周宁县"},{code:"350926",name:"柘荣县"},{code:"350981",name:"福安市"},{code:"350982",name:"福鼎市"}]}]},{code:"360000",name:"江西省",cityList:[{code:"360100",name:"南昌市",areaList:[{code:"360102",name:"东湖区"},{code:"360103",name:"西湖区"},{code:"360104",name:"青云谱区"},{code:"360105",name:"湾里区"},{code:"360111",name:"青山湖区"},{code:"360112",name:"新建区"},{code:"360121",name:"南昌县"},{code:"360123",name:"安义县"},{code:"360124",name:"进贤县"}]},{code:"360200",name:"景德镇市",areaList:[{code:"360202",name:"昌江区"},{code:"360203",name:"珠山区"},{code:"360222",name:"浮梁县"},{code:"360281",name:"乐平市"}]},{code:"360300",name:"萍乡市",areaList:[{code:"360302",name:"安源区"},{code:"360313",name:"湘东区"},{code:"360321",name:"莲花县"},{code:"360322",name:"上栗县"},{code:"360323",name:"芦溪县"}]},{code:"360400",name:"九江市",areaList:[{code:"360402",name:"濂溪区"},{code:"360403",name:"浔阳区"},{code:"360404",name:"柴桑区"},{code:"360423",name:"武宁县"},{code:"360424",name:"修水县"},{code:"360425",name:"永修县"},{code:"360426",name:"德安县"},{code:"360428",name:"都昌县"},{code:"360429",name:"湖口县"},{code:"360430",name:"彭泽县"},{code:"360481",name:"瑞昌市"},{code:"360482",name:"共青城市"},{code:"360483",name:"庐山市"}]},{code:"360500",name:"新余市",areaList:[{code:"360502",name:"渝水区"},{code:"360521",name:"分宜县"}]},{code:"360600",name:"鹰潭市",areaList:[{code:"360602",name:"月湖区"},{code:"360603",name:"余江区"},{code:"360681",name:"贵溪市"}]},{code:"360700",name:"赣州市",areaList:[{code:"360702",name:"章贡区"},{code:"360703",name:"南康区"},{code:"360704",name:"赣县区"},{code:"360722",name:"信丰县"},{code:"360723",name:"大余县"},{code:"360724",name:"上犹县"},{code:"360725",name:"崇义县"},{code:"360726",name:"安远县"},{code:"360727",name:"龙南县"},{code:"360728",name:"定南县"},{code:"360729",name:"全南县"},{code:"360730",name:"宁都县"},{code:"360731",name:"于都县"},{code:"360732",name:"兴国县"},{code:"360733",name:"会昌县"},{code:"360734",name:"寻乌县"},{code:"360735",name:"石城县"},{code:"360781",name:"瑞金市"}]},{code:"360800",name:"吉安市",areaList:[{code:"360802",name:"吉州区"},{code:"360803",name:"青原区"},{code:"360821",name:"吉安县"},{code:"360822",name:"吉水县"},{code:"360823",name:"峡江县"},{code:"360824",name:"新干县"},{code:"360825",name:"永丰县"},{code:"360826",name:"泰和县"},{code:"360827",name:"遂川县"},{code:"360828",name:"万安县"},{code:"360829",name:"安福县"},{code:"360830",name:"永新县"},{code:"360881",name:"井冈山市"}]},{code:"360900",name:"宜春市",areaList:[{code:"360902",name:"袁州区"},{code:"360921",name:"奉新县"},{code:"360922",name:"万载县"},{code:"360923",name:"上高县"},{code:"360924",name:"宜丰县"},{code:"360925",name:"靖安县"},{code:"360926",name:"铜鼓县"},{code:"360981",name:"丰城市"},{code:"360982",name:"樟树市"},{code:"360983",name:"高安市"}]},{code:"361000",name:"抚州市",areaList:[{code:"361002",name:"临川区"},{code:"361003",name:"东乡区"},{code:"361021",name:"南城县"},{code:"361022",name:"黎川县"},{code:"361023",name:"南丰县"},{code:"361024",name:"崇仁县"},{code:"361025",name:"乐安县"},{code:"361026",name:"宜黄县"},{code:"361027",name:"金溪县"},{code:"361028",name:"资溪县"},{code:"361030",name:"广昌县"}]},{code:"361100",name:"上饶市",areaList:[{code:"361102",name:"信州区"},{code:"361103",name:"广丰区"},{code:"361121",name:"上饶县"},{code:"361123",name:"玉山县"},{code:"361124",name:"铅山县"},{code:"361125",name:"横峰县"},{code:"361126",name:"弋阳县"},{code:"361127",name:"余干县"},{code:"361128",name:"鄱阳县"},{code:"361129",name:"万年县"},{code:"361130",name:"婺源县"},{code:"361181",name:"德兴市"}]}]},{code:"370000",name:"山东省",cityList:[{code:"370100",name:"济南市",areaList:[{code:"370102",name:"历下区"},{code:"370103",name:"市中区"},{code:"370104",name:"槐荫区"},{code:"370105",name:"天桥区"},{code:"370112",name:"历城区"},{code:"370113",name:"长清区"},{code:"370114",name:"章丘区"},{code:"370115",name:"济阳区"},{code:"370124",name:"平阴县"},{code:"370126",name:"商河县"}]},{code:"370200",name:"青岛市",areaList:[{code:"370202",name:"市南区"},{code:"370203",name:"市北区"},{code:"370211",name:"黄岛区"},{code:"370212",name:"崂山区"},{code:"370213",name:"李沧区"},{code:"370214",name:"城阳区"},{code:"370215",name:"即墨区"},{code:"370281",name:"胶州市"},{code:"370283",name:"平度市"},{code:"370285",name:"莱西市"}]},{code:"370300",name:"淄博市",areaList:[{code:"370302",name:"淄川区"},{code:"370303",name:"张店区"},{code:"370304",name:"博山区"},{code:"370305",name:"临淄区"},{code:"370306",name:"周村区"},{code:"370321",name:"桓台县"},{code:"370322",name:"高青县"},{code:"370323",name:"沂源县"}]},{code:"370400",name:"枣庄市",areaList:[{code:"370402",name:"市中区"},{code:"370403",name:"薛城区"},{code:"370404",name:"峄城区"},{code:"370405",name:"台儿庄区"},{code:"370406",name:"山亭区"},{code:"370481",name:"滕州市"}]},{code:"370500",name:"东营市",areaList:[{code:"370502",name:"东营区"},{code:"370503",name:"河口区"},{code:"370505",name:"垦利区"},{code:"370522",name:"利津县"},{code:"370523",name:"广饶县"}]},{code:"370600",name:"烟台市",areaList:[{code:"370602",name:"芝罘区"},{code:"370611",name:"福山区"},{code:"370612",name:"牟平区"},{code:"370613",name:"莱山区"},{code:"370634",name:"长岛县"},{code:"370681",name:"龙口市"},{code:"370682",name:"莱阳市"},{code:"370683",name:"莱州市"},{code:"370684",name:"蓬莱市"},{code:"370685",name:"招远市"},{code:"370686",name:"栖霞市"},{code:"370687",name:"海阳市"}]},{code:"370700",name:"潍坊市",areaList:[{code:"370702",name:"潍城区"},{code:"370703",name:"寒亭区"},{code:"370704",name:"坊子区"},{code:"370705",name:"奎文区"},{code:"370724",name:"临朐县"},{code:"370725",name:"昌乐县"},{code:"370781",name:"青州市"},{code:"370782",name:"诸城市"},{code:"370783",name:"寿光市"},{code:"370784",name:"安丘市"},{code:"370785",name:"高密市"},{code:"370786",name:"昌邑市"}]},{code:"370800",name:"济宁市",areaList:[{code:"370811",name:"任城区"},{code:"370812",name:"兖州区"},{code:"370826",name:"微山县"},{code:"370827",name:"鱼台县"},{code:"370828",name:"金乡县"},{code:"370829",name:"嘉祥县"},{code:"370830",name:"汶上县"},{code:"370831",name:"泗水县"},{code:"370832",name:"梁山县"},{code:"370881",name:"曲阜市"},{code:"370883",name:"邹城市"}]},{code:"370900",name:"泰安市",areaList:[{code:"370902",name:"泰山区"},{code:"370911",name:"岱岳区"},{code:"370921",name:"宁阳县"},{code:"370923",name:"东平县"},{code:"370982",name:"新泰市"},{code:"370983",name:"肥城市"}]},{code:"371000",name:"威海市",areaList:[{code:"371002",name:"环翠区"},{code:"371003",name:"文登区"},{code:"371082",name:"荣成市"},{code:"371083",name:"乳山市"}]},{code:"371100",name:"日照市",areaList:[{code:"371102",name:"东港区"},{code:"371103",name:"岚山区"},{code:"371121",name:"五莲县"},{code:"371122",name:"莒县"}]},{code:"371200",name:"莱芜市",areaList:[{code:"371202",name:"莱城区"},{code:"371203",name:"钢城区"}]},{code:"371300",name:"临沂市",areaList:[{code:"371302",name:"兰山区"},{code:"371311",name:"罗庄区"},{code:"371312",name:"河东区"},{code:"371321",name:"沂南县"},{code:"371322",name:"郯城县"},{code:"371323",name:"沂水县"},{code:"371324",name:"兰陵县"},{code:"371325",name:"费县"},{code:"371326",name:"平邑县"},{code:"371327",name:"莒南县"},{code:"371328",name:"蒙阴县"},{code:"371329",name:"临沭县"}]},{code:"371400",name:"德州市",areaList:[{code:"371402",name:"德城区"},{code:"371403",name:"陵城区"},{code:"371422",name:"宁津县"},{code:"371423",name:"庆云县"},{code:"371424",name:"临邑县"},{code:"371425",name:"齐河县"},{code:"371426",name:"平原县"},{code:"371427",name:"夏津县"},{code:"371428",name:"武城县"},{code:"371481",name:"乐陵市"},{code:"371482",name:"禹城市"}]},{code:"371500",name:"聊城市",areaList:[{code:"371502",name:"东昌府区"},{code:"371521",name:"阳谷县"},{code:"371522",name:"莘县"},{code:"371523",name:"茌平县"},{code:"371524",name:"东阿县"},{code:"371525",name:"冠县"},{code:"371526",name:"高唐县"},{code:"371581",name:"临清市"}]},{code:"371600",name:"滨州市",areaList:[{code:"371602",name:"滨城区"},{code:"371603",name:"沾化区"},{code:"371621",name:"惠民县"},{code:"371622",name:"阳信县"},{code:"371623",name:"无棣县"},{code:"371625",name:"博兴县"},{code:"371681",name:"邹平市"}]},{code:"371700",name:"菏泽市",areaList:[{code:"371702",name:"牡丹区"},{code:"371703",name:"定陶区"},{code:"371721",name:"曹县"},{code:"371722",name:"单县"},{code:"371723",name:"成武县"},{code:"371724",name:"巨野县"},{code:"371725",name:"郓城县"},{code:"371726",name:"鄄城县"},{code:"371728",name:"东明县"}]}]},{code:"410000",name:"河南省",cityList:[{code:"410100",name:"郑州市",areaList:[{code:"410102",name:"中原区"},{code:"410103",name:"二七区"},{code:"410104",name:"管城回族区"},{code:"410105",name:"金水区"},{code:"410106",name:"上街区"},{code:"410108",name:"惠济区"},{code:"410122",name:"中牟县"},{code:"410181",name:"巩义市"},{code:"410182",name:"荥阳市"},{code:"410183",name:"新密市"},{code:"410184",name:"新郑市"},{code:"410185",name:"登封市"}]},{code:"410200",name:"开封市",areaList:[{code:"410202",name:"龙亭区"},{code:"410203",name:"顺河回族区"},{code:"410204",name:"鼓楼区"},{code:"410205",name:"禹王台区"},{code:"410212",name:"祥符区"},{code:"410221",name:"杞县"},{code:"410222",name:"通许县"},{code:"410223",name:"尉氏县"},{code:"410225",name:"兰考县"}]},{code:"410300",name:"洛阳市",areaList:[{code:"410302",name:"老城区"},{code:"410303",name:"西工区"},{code:"410304",name:"瀍河回族区"},{code:"410305",name:"涧西区"},{code:"410306",name:"吉利区"},{code:"410311",name:"洛龙区"},{code:"410322",name:"孟津县"},{code:"410323",name:"新安县"},{code:"410324",name:"栾川县"},{code:"410325",name:"嵩县"},{code:"410326",name:"汝阳县"},{code:"410327",name:"宜阳县"},{code:"410328",name:"洛宁县"},{code:"410329",name:"伊川县"},{code:"410381",name:"偃师市"}]},{code:"410400",name:"平顶山市",areaList:[{code:"410402",name:"新华区"},{code:"410403",name:"卫东区"},{code:"410404",name:"石龙区"},{code:"410411",name:"湛河区"},{code:"410421",name:"宝丰县"},{code:"410422",name:"叶县"},{code:"410423",name:"鲁山县"},{code:"410425",name:"郏县"},{code:"410481",name:"舞钢市"},{code:"410482",name:"汝州市"}]},{code:"410500",name:"安阳市",areaList:[{code:"410502",name:"文峰区"},{code:"410503",name:"北关区"},{code:"410505",name:"殷都区"},{code:"410506",name:"龙安区"},{code:"410522",name:"安阳县"},{code:"410523",name:"汤阴县"},{code:"410526",name:"滑县"},{code:"410527",name:"内黄县"},{code:"410581",name:"林州市"}]},{code:"410600",name:"鹤壁市",areaList:[{code:"410602",name:"鹤山区"},{code:"410603",name:"山城区"},{code:"410611",name:"淇滨区"},{code:"410621",name:"浚县"},{code:"410622",name:"淇县"}]},{code:"410700",name:"新乡市",areaList:[{code:"410702",name:"红旗区"},{code:"410703",name:"卫滨区"},{code:"410704",name:"凤泉区"},{code:"410711",name:"牧野区"},{code:"410721",name:"新乡县"},{code:"410724",name:"获嘉县"},{code:"410725",name:"原阳县"},{code:"410726",name:"延津县"},{code:"410727",name:"封丘县"},{code:"410728",name:"长垣县"},{code:"410781",name:"卫辉市"},{code:"410782",name:"辉县市"}]},{code:"410800",name:"焦作市",areaList:[{code:"410802",name:"解放区"},{code:"410803",name:"中站区"},{code:"410804",name:"马村区"},{code:"410811",name:"山阳区"},{code:"410821",name:"修武县"},{code:"410822",name:"博爱县"},{code:"410823",name:"武陟县"},{code:"410825",name:"温县"},{code:"410882",name:"沁阳市"},{code:"410883",name:"孟州市"}]},{code:"410900",name:"濮阳市",areaList:[{code:"410902",name:"华龙区"},{code:"410922",name:"清丰县"},{code:"410923",name:"南乐县"},{code:"410926",name:"范县"},{code:"410927",name:"台前县"},{code:"410928",name:"濮阳县"}]},{code:"411000",name:"许昌市",areaList:[{code:"411002",name:"魏都区"},{code:"411003",name:"建安区"},{code:"411024",name:"鄢陵县"},{code:"411025",name:"襄城县"},{code:"411081",name:"禹州市"},{code:"411082",name:"长葛市"}]},{code:"411100",name:"漯河市",areaList:[{code:"411102",name:"源汇区"},{code:"411103",name:"郾城区"},{code:"411104",name:"召陵区"},{code:"411121",name:"舞阳县"},{code:"411122",name:"临颍县"}]},{code:"411200",name:"三门峡市",areaList:[{code:"411202",name:"湖滨区"},{code:"411203",name:"陕州区"},{code:"411221",name:"渑池县"},{code:"411224",name:"卢氏县"},{code:"411281",name:"义马市"},{code:"411282",name:"灵宝市"}]},{code:"411300",name:"南阳市",areaList:[{code:"411302",name:"宛城区"},{code:"411303",name:"卧龙区"},{code:"411321",name:"南召县"},{code:"411322",name:"方城县"},{code:"411323",name:"西峡县"},{code:"411324",name:"镇平县"},{code:"411325",name:"内乡县"},{code:"411326",name:"淅川县"},{code:"411327",name:"社旗县"},{code:"411328",name:"唐河县"},{code:"411329",name:"新野县"},{code:"411330",name:"桐柏县"},{code:"411381",name:"邓州市"}]},{code:"411400",name:"商丘市",areaList:[{code:"411402",name:"梁园区"},{code:"411403",name:"睢阳区"},{code:"411421",name:"民权县"},{code:"411422",name:"睢县"},{code:"411423",name:"宁陵县"},{code:"411424",name:"柘城县"},{code:"411425",name:"虞城县"},{code:"411426",name:"夏邑县"},{code:"411481",name:"永城市"}]},{code:"411500",name:"信阳市",areaList:[{code:"411502",name:"浉河区"},{code:"411503",name:"平桥区"},{code:"411521",name:"罗山县"},{code:"411522",name:"光山县"},{code:"411523",name:"新县"},{code:"411524",name:"商城县"},{code:"411525",name:"固始县"},{code:"411526",name:"潢川县"},{code:"411527",name:"淮滨县"},{code:"411528",name:"息县"}]},{code:"411600",name:"周口市",areaList:[{code:"411602",name:"川汇区"},{code:"411621",name:"扶沟县"},{code:"411622",name:"西华县"},{code:"411623",name:"商水县"},{code:"411624",name:"沈丘县"},{code:"411625",name:"郸城县"},{code:"411626",name:"淮阳县"},{code:"411627",name:"太康县"},{code:"411628",name:"鹿邑县"},{code:"411681",name:"项城市"}]},{code:"411700",name:"驻马店市",areaList:[{code:"411702",name:"驿城区"},{code:"411721",name:"西平县"},{code:"411722",name:"上蔡县"},{code:"411723",name:"平舆县"},{code:"411724",name:"正阳县"},{code:"411725",name:"确山县"},{code:"411726",name:"泌阳县"},{code:"411727",name:"汝南县"},{code:"411728",name:"遂平县"},{code:"411729",name:"新蔡县"}]}]},{code:"420000",name:"湖北省",cityList:[{code:"420100",name:"武汉市",areaList:[{code:"420102",name:"江岸区"},{code:"420103",name:"江汉区"},{code:"420104",name:"硚口区"},{code:"420105",name:"汉阳区"},{code:"420106",name:"武昌区"},{code:"420107",name:"青山区"},{code:"420111",name:"洪山区"},{code:"420112",name:"东西湖区"},{code:"420113",name:"汉南区"},{code:"420114",name:"蔡甸区"},{code:"420115",name:"江夏区"},{code:"420116",name:"黄陂区"},{code:"420117",name:"新洲区"}]},{code:"420200",name:"黄石市",areaList:[{code:"420202",name:"黄石港区"},{code:"420203",name:"西塞山区"},{code:"420204",name:"下陆区"},{code:"420205",name:"铁山区"},{code:"420222",name:"阳新县"},{code:"420281",name:"大冶市"}]},{code:"420300",name:"十堰市",areaList:[{code:"420302",name:"茅箭区"},{code:"420303",name:"张湾区"},{code:"420304",name:"郧阳区"},{code:"420322",name:"郧西县"},{code:"420323",name:"竹山县"},{code:"420324",name:"竹溪县"},{code:"420325",name:"房县"},{code:"420381",name:"丹江口市"}]},{code:"420500",name:"宜昌市",areaList:[{code:"420502",name:"西陵区"},{code:"420503",name:"伍家岗区"},{code:"420504",name:"点军区"},{code:"420505",name:"猇亭区"},{code:"420506",name:"夷陵区"},{code:"420525",name:"远安县"},{code:"420526",name:"兴山县"},{code:"420527",name:"秭归县"},{code:"420528",name:"长阳土家族自治县"},{code:"420529",name:"五峰土家族自治县"},{code:"420581",name:"宜都市"},{code:"420582",name:"当阳市"},{code:"420583",name:"枝江市"}]},{code:"420600",name:"襄阳市",areaList:[{code:"420602",name:"襄城区"},{code:"420606",name:"樊城区"},{code:"420607",name:"襄州区"},{code:"420624",name:"南漳县"},{code:"420625",name:"谷城县"},{code:"420626",name:"保康县"},{code:"420682",name:"老河口市"},{code:"420683",name:"枣阳市"},{code:"420684",name:"宜城市"}]},{code:"420700",name:"鄂州市",areaList:[{code:"420702",name:"梁子湖区"},{code:"420703",name:"华容区"},{code:"420704",name:"鄂城区"}]},{code:"420800",name:"荆门市",areaList:[{code:"420802",name:"东宝区"},{code:"420804",name:"掇刀区"},{code:"420822",name:"沙洋县"},{code:"420881",name:"钟祥市"},{code:"420882",name:"京山市"}]},{code:"420900",name:"孝感市",areaList:[{code:"420902",name:"孝南区"},{code:"420921",name:"孝昌县"},{code:"420922",name:"大悟县"},{code:"420923",name:"云梦县"},{code:"420981",name:"应城市"},{code:"420982",name:"安陆市"},{code:"420984",name:"汉川市"}]},{code:"421000",name:"荆州市",areaList:[{code:"421002",name:"沙市区"},{code:"421003",name:"荆州区"},{code:"421022",name:"公安县"},{code:"421023",name:"监利县"},{code:"421024",name:"江陵县"},{code:"421081",name:"石首市"},{code:"421083",name:"洪湖市"},{code:"421087",name:"松滋市"}]},{code:"421100",name:"黄冈市",areaList:[{code:"421102",name:"黄州区"},{code:"421121",name:"团风县"},{code:"421122",name:"红安县"},{code:"421123",name:"罗田县"},{code:"421124",name:"英山县"},{code:"421125",name:"浠水县"},{code:"421126",name:"蕲春县"},{code:"421127",name:"黄梅县"},{code:"421181",name:"麻城市"},{code:"421182",name:"武穴市"}]},{code:"421200",name:"咸宁市",areaList:[{code:"421202",name:"咸安区"},{code:"421221",name:"嘉鱼县"},{code:"421222",name:"通城县"},{code:"421223",name:"崇阳县"},{code:"421224",name:"通山县"},{code:"421281",name:"赤壁市"}]},{code:"421300",name:"随州市",areaList:[{code:"421303",name:"曾都区"},{code:"421321",name:"随县"},{code:"421381",name:"广水市"}]},{code:"422800",name:"恩施土家族苗族自治州",areaList:[{code:"422801",name:"恩施市"},{code:"422802",name:"利川市"},{code:"422822",name:"建始县"},{code:"422823",name:"巴东县"},{code:"422825",name:"宣恩县"},{code:"422826",name:"咸丰县"},{code:"422827",name:"来凤县"},{code:"422828",name:"鹤峰县"}]}]},{code:"430000",name:"湖南省",cityList:[{code:"430100",name:"长沙市",areaList:[{code:"430102",name:"芙蓉区"},{code:"430103",name:"天心区"},{code:"430104",name:"岳麓区"},{code:"430105",name:"开福区"},{code:"430111",name:"雨花区"},{code:"430112",name:"望城区"},{code:"430121",name:"长沙县"},{code:"430181",name:"浏阳市"},{code:"430182",name:"宁乡市"}]},{code:"430200",name:"株洲市",areaList:[{code:"430202",name:"荷塘区"},{code:"430203",name:"芦淞区"},{code:"430204",name:"石峰区"},{code:"430211",name:"天元区"},{code:"430212",name:"渌口区"},{code:"430223",name:"攸县"},{code:"430224",name:"茶陵县"},{code:"430225",name:"炎陵县"},{code:"430281",name:"醴陵市"}]},{code:"430300",name:"湘潭市",areaList:[{code:"430302",name:"雨湖区"},{code:"430304",name:"岳塘区"},{code:"430321",name:"湘潭县"},{code:"430381",name:"湘乡市"},{code:"430382",name:"韶山市"}]},{code:"430400",name:"衡阳市",areaList:[{code:"430405",name:"珠晖区"},{code:"430406",name:"雁峰区"},{code:"430407",name:"石鼓区"},{code:"430408",name:"蒸湘区"},{code:"430412",name:"南岳区"},{code:"430421",name:"衡阳县"},{code:"430422",name:"衡南县"},{code:"430423",name:"衡山县"},{code:"430424",name:"衡东县"},{code:"430426",name:"祁东县"},{code:"430481",name:"耒阳市"},{code:"430482",name:"常宁市"}]},{code:"430500",name:"邵阳市",areaList:[{code:"430502",name:"双清区"},{code:"430503",name:"大祥区"},{code:"430511",name:"北塔区"},{code:"430521",name:"邵东县"},{code:"430522",name:"新邵县"},{code:"430523",name:"邵阳县"},{code:"430524",name:"隆回县"},{code:"430525",name:"洞口县"},{code:"430527",name:"绥宁县"},{code:"430528",name:"新宁县"},{code:"430529",name:"城步苗族自治县"},{code:"430581",name:"武冈市"}]},{code:"430600",name:"岳阳市",areaList:[{code:"430602",name:"岳阳楼区"},{code:"430603",name:"云溪区"},{code:"430611",name:"君山区"},{code:"430621",name:"岳阳县"},{code:"430623",name:"华容县"},{code:"430624",name:"湘阴县"},{code:"430626",name:"平江县"},{code:"430681",name:"汨罗市"},{code:"430682",name:"临湘市"}]},{code:"430700",name:"常德市",areaList:[{code:"430702",name:"武陵区"},{code:"430703",name:"鼎城区"},{code:"430721",name:"安乡县"},{code:"430722",name:"汉寿县"},{code:"430723",name:"澧县"},{code:"430724",name:"临澧县"},{code:"430725",name:"桃源县"},{code:"430726",name:"石门县"},{code:"430781",name:"津市市"}]},{code:"430800",name:"张家界市",areaList:[{code:"430802",name:"永定区"},{code:"430811",name:"武陵源区"},{code:"430821",name:"慈利县"},{code:"430822",name:"桑植县"}]},{code:"430900",name:"益阳市",areaList:[{code:"430902",name:"资阳区"},{code:"430903",name:"赫山区"},{code:"430921",name:"南县"},{code:"430922",name:"桃江县"},{code:"430923",name:"安化县"},{code:"430981",name:"沅江市"}]},{code:"431000",name:"郴州市",areaList:[{code:"431002",name:"北湖区"},{code:"431003",name:"苏仙区"},{code:"431021",name:"桂阳县"},{code:"431022",name:"宜章县"},{code:"431023",name:"永兴县"},{code:"431024",name:"嘉禾县"},{code:"431025",name:"临武县"},{code:"431026",name:"汝城县"},{code:"431027",name:"桂东县"},{code:"431028",name:"安仁县"},{code:"431081",name:"资兴市"}]},{code:"431100",name:"永州市",areaList:[{code:"431102",name:"零陵区"},{code:"431103",name:"冷水滩区"},{code:"431121",name:"祁阳县"},{code:"431122",name:"东安县"},{code:"431123",name:"双牌县"},{code:"431124",name:"道县"},{code:"431125",name:"江永县"},{code:"431126",name:"宁远县"},{code:"431127",name:"蓝山县"},{code:"431128",name:"新田县"},{code:"431129",name:"江华瑶族自治县"}]},{code:"431200",name:"怀化市",areaList:[{code:"431202",name:"鹤城区"},{code:"431221",name:"中方县"},{code:"431222",name:"沅陵县"},{code:"431223",name:"辰溪县"},{code:"431224",name:"溆浦县"},{code:"431225",name:"会同县"},{code:"431226",name:"麻阳苗族自治县"},{code:"431227",name:"新晃侗族自治县"},{code:"431228",name:"芷江侗族自治县"},{code:"431229",name:"靖州苗族侗族自治县"},{code:"431230",name:"通道侗族自治县"},{code:"431281",name:"洪江市"}]},{code:"431300",name:"娄底市",areaList:[{code:"431302",name:"娄星区"},{code:"431321",name:"双峰县"},{code:"431322",name:"新化县"},{code:"431381",name:"冷水江市"},{code:"431382",name:"涟源市"}]},{code:"433100",name:"湘西土家族苗族自治州",areaList:[{code:"433101",name:"吉首市"},{code:"433122",name:"泸溪县"},{code:"433123",name:"凤凰县"},{code:"433124",name:"花垣县"},{code:"433125",name:"保靖县"},{code:"433126",name:"古丈县"},{code:"433127",name:"永顺县"},{code:"433130",name:"龙山县"}]}]},{code:"440000",name:"广东省",cityList:[{code:"440100",name:"广州市",areaList:[{code:"440103",name:"荔湾区"},{code:"440104",name:"越秀区"},{code:"440105",name:"海珠区"},{code:"440106",name:"天河区"},{code:"440111",name:"白云区"},{code:"440112",name:"黄埔区"},{code:"440113",name:"番禺区"},{code:"440114",name:"花都区"},{code:"440115",name:"南沙区"},{code:"440117",name:"从化区"},{code:"440118",name:"增城区"}]},{code:"440200",name:"韶关市",areaList:[{code:"440203",name:"武江区"},{code:"440204",name:"浈江区"},{code:"440205",name:"曲江区"},{code:"440222",name:"始兴县"},{code:"440224",name:"仁化县"},{code:"440229",name:"翁源县"},{code:"440232",name:"乳源瑶族自治县"},{code:"440233",name:"新丰县"},{code:"440281",name:"乐昌市"},{code:"440282",name:"南雄市"}]},{code:"440300",name:"深圳市",areaList:[{code:"440303",name:"罗湖区"},{code:"440304",name:"福田区"},{code:"440305",name:"南山区"},{code:"440306",name:"宝安区"},{code:"440307",name:"龙岗区"},{code:"440308",name:"盐田区"},{code:"440309",name:"龙华区"},{code:"440310",name:"坪山区"},{code:"440311",name:"光明区"}]},{code:"440400",name:"珠海市",areaList:[{code:"440402",name:"香洲区"},{code:"440403",name:"斗门区"},{code:"440404",name:"金湾区"}]},{code:"440500",name:"汕头市",areaList:[{code:"440507",name:"龙湖区"},{code:"440511",name:"金平区"},{code:"440512",name:"濠江区"},{code:"440513",name:"潮阳区"},{code:"440514",name:"潮南区"},{code:"440515",name:"澄海区"},{code:"440523",name:"南澳县"}]},{code:"440600",name:"佛山市",areaList:[{code:"440604",name:"禅城区"},{code:"440605",name:"南海区"},{code:"440606",name:"顺德区"},{code:"440607",name:"三水区"},{code:"440608",name:"高明区"}]},{code:"440700",name:"江门市",areaList:[{code:"440703",name:"蓬江区"},{code:"440704",name:"江海区"},{code:"440705",name:"新会区"},{code:"440781",name:"台山市"},{code:"440783",name:"开平市"},{code:"440784",name:"鹤山市"},{code:"440785",name:"恩平市"}]},{code:"440800",name:"湛江市",areaList:[{code:"440802",name:"赤坎区"},{code:"440803",name:"霞山区"},{code:"440804",name:"坡头区"},{code:"440811",name:"麻章区"},{code:"440823",name:"遂溪县"},{code:"440825",name:"徐闻县"},{code:"440881",name:"廉江市"},{code:"440882",name:"雷州市"},{code:"440883",name:"吴川市"}]},{code:"440900",name:"茂名市",areaList:[{code:"440902",name:"茂南区"},{code:"440904",name:"电白区"},{code:"440981",name:"高州市"},{code:"440982",name:"化州市"},{code:"440983",name:"信宜市"}]},{code:"441200",name:"肇庆市",areaList:[{code:"441202",name:"端州区"},{code:"441203",name:"鼎湖区"},{code:"441204",name:"高要区"},{code:"441223",name:"广宁县"},{code:"441224",name:"怀集县"},{code:"441225",name:"封开县"},{code:"441226",name:"德庆县"},{code:"441284",name:"四会市"}]},{code:"441300",name:"惠州市",areaList:[{code:"441302",name:"惠城区"},{code:"441303",name:"惠阳区"},{code:"441322",name:"博罗县"},{code:"441323",name:"惠东县"},{code:"441324",name:"龙门县"}]},{code:"441400",name:"梅州市",areaList:[{code:"441402",name:"梅江区"},{code:"441403",name:"梅县区"},{code:"441422",name:"大埔县"},{code:"441423",name:"丰顺县"},{code:"441424",name:"五华县"},{code:"441426",name:"平远县"},{code:"441427",name:"蕉岭县"},{code:"441481",name:"兴宁市"}]},{code:"441500",name:"汕尾市",areaList:[{code:"441502",name:"城区"},{code:"441521",name:"海丰县"},{code:"441523",name:"陆河县"},{code:"441581",name:"陆丰市"}]},{code:"441600",name:"河源市",areaList:[{code:"441602",name:"源城区"},{code:"441621",name:"紫金县"},{code:"441622",name:"龙川县"},{code:"441623",name:"连平县"},{code:"441624",name:"和平县"},{code:"441625",name:"东源县"}]},{code:"441700",name:"阳江市",areaList:[{code:"441702",name:"江城区"},{code:"441704",name:"阳东区"},{code:"441721",name:"阳西县"},{code:"441781",name:"阳春市"}]},{code:"441800",name:"清远市",areaList:[{code:"441802",name:"清城区"},{code:"441803",name:"清新区"},{code:"441821",name:"佛冈县"},{code:"441823",name:"阳山县"},{code:"441825",name:"连山壮族瑶族自治县"},{code:"441826",name:"连南瑶族自治县"},{code:"441881",name:"英德市"},{code:"441882",name:"连州市"}]},{code:"441900",name:"东莞市",areaList:[]},{code:"442000",name:"中山市",areaList:[]},{code:"445100",name:"潮州市",areaList:[{code:"445102",name:"湘桥区"},{code:"445103",name:"潮安区"},{code:"445122",name:"饶平县"}]},{code:"445200",name:"揭阳市",areaList:[{code:"445202",name:"榕城区"},{code:"445203",name:"揭东区"},{code:"445222",name:"揭西县"},{code:"445224",name:"惠来县"},{code:"445281",name:"普宁市"}]},{code:"445300",name:"云浮市",areaList:[{code:"445302",name:"云城区"},{code:"445303",name:"云安区"},{code:"445321",name:"新兴县"},{code:"445322",name:"郁南县"},{code:"445381",name:"罗定市"}]}]},{code:"450000",name:"广西壮族自治区",cityList:[{code:"450100",name:"南宁市",areaList:[{code:"450102",name:"兴宁区"},{code:"450103",name:"青秀区"},{code:"450105",name:"江南区"},{code:"450107",name:"西乡塘区"},{code:"450108",name:"良庆区"},{code:"450109",name:"邕宁区"},{code:"450110",name:"武鸣区"},{code:"450123",name:"隆安县"},{code:"450124",name:"马山县"},{code:"450125",name:"上林县"},{code:"450126",name:"宾阳县"},{code:"450127",name:"横县"}]},{code:"450200",name:"柳州市",areaList:[{code:"450202",name:"城中区"},{code:"450203",name:"鱼峰区"},{code:"450204",name:"柳南区"},{code:"450205",name:"柳北区"},{code:"450206",name:"柳江区"},{code:"450222",name:"柳城县"},{code:"450223",name:"鹿寨县"},{code:"450224",name:"融安县"},{code:"450225",name:"融水苗族自治县"},{code:"450226",name:"三江侗族自治县"}]},{code:"450300",name:"桂林市",areaList:[{code:"450302",name:"秀峰区"},{code:"450303",name:"叠彩区"},{code:"450304",name:"象山区"},{code:"450305",name:"七星区"},{code:"450311",name:"雁山区"},{code:"450312",name:"临桂区"},{code:"450321",name:"阳朔县"},{code:"450323",name:"灵川县"},{code:"450324",name:"全州县"},{code:"450325",name:"兴安县"},{code:"450326",name:"永福县"},{code:"450327",name:"灌阳县"},{code:"450328",name:"龙胜各族自治县"},{code:"450329",name:"资源县"},{code:"450330",name:"平乐县"},{code:"450381",name:"荔浦市"},{code:"450332",name:"恭城瑶族自治县"}]},{code:"450400",name:"梧州市",areaList:[{code:"450403",name:"万秀区"},{code:"450405",name:"长洲区"},{code:"450406",name:"龙圩区"},{code:"450421",name:"苍梧县"},{code:"450422",name:"藤县"},{code:"450423",name:"蒙山县"},{code:"450481",name:"岑溪市"}]},{code:"450500",name:"北海市",areaList:[{code:"450502",name:"海城区"},{code:"450503",name:"银海区"},{code:"450512",name:"铁山港区"},{code:"450521",name:"合浦县"}]},{code:"450600",name:"防城港市",areaList:[{code:"450602",name:"港口区"},{code:"450603",name:"防城区"},{code:"450621",name:"上思县"},{code:"450681",name:"东兴市"}]},{code:"450700",name:"钦州市",areaList:[{code:"450702",name:"钦南区"},{code:"450703",name:"钦北区"},{code:"450721",name:"灵山县"},{code:"450722",name:"浦北县"}]},{code:"450800",name:"贵港市",areaList:[{code:"450802",name:"港北区"},{code:"450803",name:"港南区"},{code:"450804",name:"覃塘区"},{code:"450821",name:"平南县"},{code:"450881",name:"桂平市"}]},{code:"450900",name:"玉林市",areaList:[{code:"450902",name:"玉州区"},{code:"450903",name:"福绵区"},{code:"450921",name:"容县"},{code:"450922",name:"陆川县"},{code:"450923",name:"博白县"},{code:"450924",name:"兴业县"},{code:"450981",name:"北流市"}]},{code:"451000",name:"百色市",areaList:[{code:"451002",name:"右江区"},{code:"451021",name:"田阳县"},{code:"451022",name:"田东县"},{code:"451023",name:"平果县"},{code:"451024",name:"德保县"},{code:"451026",name:"那坡县"},{code:"451027",name:"凌云县"},{code:"451028",name:"乐业县"},{code:"451029",name:"田林县"},{code:"451030",name:"西林县"},{code:"451031",name:"隆林各族自治县"},{code:"451081",name:"靖西市"}]},{code:"451100",name:"贺州市",areaList:[{code:"451102",name:"八步区"},{code:"451103",name:"平桂区"},{code:"451121",name:"昭平县"},{code:"451122",name:"钟山县"},{code:"451123",name:"富川瑶族自治县"}]},{code:"451200",name:"河池市",areaList:[{code:"451202",name:"金城江区"},{code:"451203",name:"宜州区"},{code:"451221",name:"南丹县"},{code:"451222",name:"天峨县"},{code:"451223",name:"凤山县"},{code:"451224",name:"东兰县"},{code:"451225",name:"罗城仫佬族自治县"},{code:"451226",name:"环江毛南族自治县"},{code:"451227",name:"巴马瑶族自治县"},{code:"451228",name:"都安瑶族自治县"},{code:"451229",name:"大化瑶族自治县"}]},{code:"451300",name:"来宾市",areaList:[{code:"451302",name:"兴宾区"},{code:"451321",name:"忻城县"},{code:"451322",name:"象州县"},{code:"451323",name:"武宣县"},{code:"451324",name:"金秀瑶族自治县"},{code:"451381",name:"合山市"}]},{code:"451400",name:"崇左市",areaList:[{code:"451402",name:"江州区"},{code:"451421",name:"扶绥县"},{code:"451422",name:"宁明县"},{code:"451423",name:"龙州县"},{code:"451424",name:"大新县"},{code:"451425",name:"天等县"},{code:"451481",name:"凭祥市"}]}]},{code:"460000",name:"海南省",cityList:[{code:"460100",name:"海口市",areaList:[{code:"460105",name:"秀英区"},{code:"460106",name:"龙华区"},{code:"460107",name:"琼山区"},{code:"460108",name:"美兰区"}]},{code:"460200",name:"三亚市",areaList:[{code:"460202",name:"海棠区"},{code:"460203",name:"吉阳区"},{code:"460204",name:"天涯区"},{code:"460205",name:"崖州区"}]},{code:"460300",name:"三沙市",areaList:[]},{code:"460400",name:"儋州市",areaList:[]}]},{code:"500000",name:"重庆市",cityList:[{code:"500000",name:"重庆市",areaList:[{code:"500101",name:"万州区"},{code:"500102",name:"涪陵区"},{code:"500103",name:"渝中区"},{code:"500104",name:"大渡口区"},{code:"500105",name:"江北区"},{code:"500106",name:"沙坪坝区"},{code:"500107",name:"九龙坡区"},{code:"500108",name:"南岸区"},{code:"500109",name:"北碚区"},{code:"500110",name:"綦江区"},{code:"500111",name:"大足区"},{code:"500112",name:"渝北区"},{code:"500113",name:"巴南区"},{code:"500114",name:"黔江区"},{code:"500115",name:"长寿区"},{code:"500116",name:"江津区"},{code:"500117",name:"合川区"},{code:"500118",name:"永川区"},{code:"500119",name:"南川区"},{code:"500120",name:"璧山区"},{code:"500151",name:"铜梁区"},{code:"500152",name:"潼南区"},{code:"500153",name:"荣昌区"},{code:"500154",name:"开州区"},{code:"500155",name:"梁平区"},{code:"500156",name:"武隆区"},{code:"500229",name:"城口县"},{code:"500230",name:"丰都县"},{code:"500231",name:"垫江县"},{code:"500233",name:"忠县"},{code:"500235",name:"云阳县"},{code:"500236",name:"奉节县"},{code:"500237",name:"巫山县"},{code:"500238",name:"巫溪县"},{code:"500240",name:"石柱土家族自治县"},{code:"500241",name:"秀山土家族苗族自治县"},{code:"500242",name:"酉阳土家族苗族自治县"},{code:"500243",name:"彭水苗族土家族自治县"}]}]},{code:"510000",name:"四川省",cityList:[{code:"510100",name:"成都市",areaList:[{code:"510104",name:"锦江区"},{code:"510105",name:"青羊区"},{code:"510106",name:"金牛区"},{code:"510107",name:"武侯区"},{code:"510108",name:"成华区"},{code:"510112",name:"龙泉驿区"},{code:"510113",name:"青白江区"},{code:"510114",name:"新都区"},{code:"510115",name:"温江区"},{code:"510116",name:"双流区"},{code:"510117",name:"郫都区"},{code:"510121",name:"金堂县"},{code:"510129",name:"大邑县"},{code:"510131",name:"蒲江县"},{code:"510132",name:"新津县"},{code:"510181",name:"都江堰市"},{code:"510182",name:"彭州市"},{code:"510183",name:"邛崃市"},{code:"510184",name:"崇州市"},{code:"510185",name:"简阳市"}]},{code:"510300",name:"自贡市",areaList:[{code:"510302",name:"自流井区"},{code:"510303",name:"贡井区"},{code:"510304",name:"大安区"},{code:"510311",name:"沿滩区"},{code:"510321",name:"荣县"},{code:"510322",name:"富顺县"}]},{code:"510400",name:"攀枝花市",areaList:[{code:"510402",name:"东区"},{code:"510403",name:"西区"},{code:"510411",name:"仁和区"},{code:"510421",name:"米易县"},{code:"510422",name:"盐边县"}]},{code:"510500",name:"泸州市",areaList:[{code:"510502",name:"江阳区"},{code:"510503",name:"纳溪区"},{code:"510504",name:"龙马潭区"},{code:"510521",name:"泸县"},{code:"510522",name:"合江县"},{code:"510524",name:"叙永县"},{code:"510525",name:"古蔺县"}]},{code:"510600",name:"德阳市",areaList:[{code:"510603",name:"旌阳区"},{code:"510604",name:"罗江区"},{code:"510623",name:"中江县"},{code:"510681",name:"广汉市"},{code:"510682",name:"什邡市"},{code:"510683",name:"绵竹市"}]},{code:"510700",name:"绵阳市",areaList:[{code:"510703",name:"涪城区"},{code:"510704",name:"游仙区"},{code:"510705",name:"安州区"},{code:"510722",name:"三台县"},{code:"510723",name:"盐亭县"},{code:"510725",name:"梓潼县"},{code:"510726",name:"北川羌族自治县"},{code:"510727",name:"平武县"},{code:"510781",name:"江油市"}]},{code:"510800",name:"广元市",areaList:[{code:"510802",name:"利州区"},{code:"510811",name:"昭化区"},{code:"510812",name:"朝天区"},{code:"510821",name:"旺苍县"},{code:"510822",name:"青川县"},{code:"510823",name:"剑阁县"},{code:"510824",name:"苍溪县"}]},{code:"510900",name:"遂宁市",areaList:[{code:"510903",name:"船山区"},{code:"510904",name:"安居区"},{code:"510921",name:"蓬溪县"},{code:"510922",name:"射洪县"},{code:"510923",name:"大英县"}]},{code:"511000",name:"内江市",areaList:[{code:"511002",name:"市中区"},{code:"511011",name:"东兴区"},{code:"511024",name:"威远县"},{code:"511025",name:"资中县"},{code:"511083",name:"隆昌市"}]},{code:"511100",name:"乐山市",areaList:[{code:"511102",name:"市中区"},{code:"511111",name:"沙湾区"},{code:"511112",name:"五通桥区"},{code:"511113",name:"金口河区"},{code:"511123",name:"犍为县"},{code:"511124",name:"井研县"},{code:"511126",name:"夹江县"},{code:"511129",name:"沐川县"},{code:"511132",name:"峨边彝族自治县"},{code:"511133",name:"马边彝族自治县"},{code:"511181",name:"峨眉山市"}]},{code:"511300",name:"南充市",areaList:[{code:"511302",name:"顺庆区"},{code:"511303",name:"高坪区"},{code:"511304",name:"嘉陵区"},{code:"511321",name:"南部县"},{code:"511322",name:"营山县"},{code:"511323",name:"蓬安县"},{code:"511324",name:"仪陇县"},{code:"511325",name:"西充县"},{code:"511381",name:"阆中市"}]},{code:"511400",name:"眉山市",areaList:[{code:"511402",name:"东坡区"},{code:"511403",name:"彭山区"},{code:"511421",name:"仁寿县"},{code:"511423",name:"洪雅县"},{code:"511424",name:"丹棱县"},{code:"511425",name:"青神县"}]},{code:"511500",name:"宜宾市",areaList:[{code:"511502",name:"翠屏区"},{code:"511503",name:"南溪区"},{code:"511504",name:"叙州区"},{code:"511523",name:"江安县"},{code:"511524",name:"长宁县"},{code:"511525",name:"高县"},{code:"511526",name:"珙县"},{code:"511527",name:"筠连县"},{code:"511528",name:"兴文县"},{code:"511529",name:"屏山县"}]},{code:"511600",name:"广安市",areaList:[{code:"511602",name:"广安区"},{code:"511603",name:"前锋区"},{code:"511621",name:"岳池县"},{code:"511622",name:"武胜县"},{code:"511623",name:"邻水县"},{code:"511681",name:"华蓥市"}]},{code:"511700",name:"达州市",areaList:[{code:"511702",name:"通川区"},{code:"511703",name:"达川区"},{code:"511722",name:"宣汉县"},{code:"511723",name:"开江县"},{code:"511724",name:"大竹县"},{code:"511725",name:"渠县"},{code:"511781",name:"万源市"}]},{code:"511800",name:"雅安市",areaList:[{code:"511802",name:"雨城区"},{code:"511803",name:"名山区"},{code:"511822",name:"荥经县"},{code:"511823",name:"汉源县"},{code:"511824",name:"石棉县"},{code:"511825",name:"天全县"},{code:"511826",name:"芦山县"},{code:"511827",name:"宝兴县"}]},{code:"511900",name:"巴中市",areaList:[{code:"511902",name:"巴州区"},{code:"511903",name:"恩阳区"},{code:"511921",name:"通江县"},{code:"511922",name:"南江县"},{code:"511923",name:"平昌县"}]},{code:"512000",name:"资阳市",areaList:[{code:"512002",name:"雁江区"},{code:"512021",name:"安岳县"},{code:"512022",name:"乐至县"}]},{code:"513200",name:"阿坝藏族羌族自治州",areaList:[{code:"513201",name:"马尔康市"},{code:"513221",name:"汶川县"},{code:"513222",name:"理县"},{code:"513223",name:"茂县"},{code:"513224",name:"松潘县"},{code:"513225",name:"九寨沟县"},{code:"513226",name:"金川县"},{code:"513227",name:"小金县"},{code:"513228",name:"黑水县"},{code:"513230",name:"壤塘县"},{code:"513231",name:"阿坝县"},{code:"513232",name:"若尔盖县"},{code:"513233",name:"红原县"}]},{code:"513300",name:"甘孜藏族自治州",areaList:[{code:"513301",name:"康定市"},{code:"513322",name:"泸定县"},{code:"513323",name:"丹巴县"},{code:"513324",name:"九龙县"},{code:"513325",name:"雅江县"},{code:"513326",name:"道孚县"},{code:"513327",name:"炉霍县"},{code:"513328",name:"甘孜县"},{code:"513329",name:"新龙县"},{code:"513330",name:"德格县"},{code:"513331",name:"白玉县"},{code:"513332",name:"石渠县"},{code:"513333",name:"色达县"},{code:"513334",name:"理塘县"},{code:"513335",name:"巴塘县"},{code:"513336",name:"乡城县"},{code:"513337",name:"稻城县"},{code:"513338",name:"得荣县"}]},{code:"513400",name:"凉山彝族自治州",areaList:[{code:"513401",name:"西昌市"},{code:"513422",name:"木里藏族自治县"},{code:"513423",name:"盐源县"},{code:"513424",name:"德昌县"},{code:"513425",name:"会理县"},{code:"513426",name:"会东县"},{code:"513427",name:"宁南县"},{code:"513428",name:"普格县"},{code:"513429",name:"布拖县"},{code:"513430",name:"金阳县"},{code:"513431",name:"昭觉县"},{code:"513432",name:"喜德县"},{code:"513433",name:"冕宁县"},{code:"513434",name:"越西县"},{code:"513435",name:"甘洛县"},{code:"513436",name:"美姑县"},{code:"513437",name:"雷波县"}]}]},{code:"520000",name:"贵州省",cityList:[{code:"520100",name:"贵阳市",areaList:[{code:"520102",name:"南明区"},{code:"520103",name:"云岩区"},{code:"520111",name:"花溪区"},{code:"520112",name:"乌当区"},{code:"520113",name:"白云区"},{code:"520115",name:"观山湖区"},{code:"520121",name:"开阳县"},{code:"520122",name:"息烽县"},{code:"520123",name:"修文县"},{code:"520181",name:"清镇市"}]},{code:"520200",name:"六盘水市",areaList:[{code:"520201",name:"钟山区"},{code:"520203",name:"六枝特区"},{code:"520221",name:"水城县"},{code:"520281",name:"盘州市"}]},{code:"520300",name:"遵义市",areaList:[{code:"520302",name:"红花岗区"},{code:"520303",name:"汇川区"},{code:"520304",name:"播州区"},{code:"520322",name:"桐梓县"},{code:"520323",name:"绥阳县"},{code:"520324",name:"正安县"},{code:"520325",name:"道真仡佬族苗族自治县"},{code:"520326",name:"务川仡佬族苗族自治县"},{code:"520327",name:"凤冈县"},{code:"520328",name:"湄潭县"},{code:"520329",name:"余庆县"},{code:"520330",name:"习水县"},{code:"520381",name:"赤水市"},{code:"520382",name:"仁怀市"}]},{code:"520400",name:"安顺市",areaList:[{code:"520402",name:"西秀区"},{code:"520403",name:"平坝区"},{code:"520422",name:"普定县"},{code:"520423",name:"镇宁布依族苗族自治县"},{code:"520424",name:"关岭布依族苗族自治县"},{code:"520425",name:"紫云苗族布依族自治县"}]},{code:"520500",name:"毕节市",areaList:[{code:"520502",name:"七星关区"},{code:"520521",name:"大方县"},{code:"520522",name:"黔西县"},{code:"520523",name:"金沙县"},{code:"520524",name:"织金县"},{code:"520525",name:"纳雍县"},{code:"520526",name:"威宁彝族回族苗族自治县"},{code:"520527",name:"赫章县"}]},{code:"520600",name:"铜仁市",areaList:[{code:"520602",name:"碧江区"},{code:"520603",name:"万山区"},{code:"520621",name:"江口县"},{code:"520622",name:"玉屏侗族自治县"},{code:"520623",name:"石阡县"},{code:"520624",name:"思南县"},{code:"520625",name:"印江土家族苗族自治县"},{code:"520626",name:"德江县"},{code:"520627",name:"沿河土家族自治县"},{code:"520628",name:"松桃苗族自治县"}]},{code:"522300",name:"黔西南布依族苗族自治州",areaList:[{code:"522301",name:"兴义市"},{code:"522302",name:"兴仁市"},{code:"522323",name:"普安县"},{code:"522324",name:"晴隆县"},{code:"522325",name:"贞丰县"},{code:"522326",name:"望谟县"},{code:"522327",name:"册亨县"},{code:"522328",name:"安龙县"}]},{code:"522600",name:"黔东南苗族侗族自治州",areaList:[{code:"522601",name:"凯里市"},{code:"522622",name:"黄平县"},{code:"522623",name:"施秉县"},{code:"522624",name:"三穗县"},{code:"522625",name:"镇远县"},{code:"522626",name:"岑巩县"},{code:"522627",name:"天柱县"},{code:"522628",name:"锦屏县"},{code:"522629",name:"剑河县"},{code:"522630",name:"台江县"},{code:"522631",name:"黎平县"},{code:"522632",name:"榕江县"},{code:"522633",name:"从江县"},{code:"522634",name:"雷山县"},{code:"522635",name:"麻江县"},{code:"522636",name:"丹寨县"}]},{code:"522700",name:"黔南布依族苗族自治州",areaList:[{code:"522701",name:"都匀市"},{code:"522702",name:"福泉市"},{code:"522722",name:"荔波县"},{code:"522723",name:"贵定县"},{code:"522725",name:"瓮安县"},{code:"522726",name:"独山县"},{code:"522727",name:"平塘县"},{code:"522728",name:"罗甸县"},{code:"522729",name:"长顺县"},{code:"522730",name:"龙里县"},{code:"522731",name:"惠水县"},{code:"522732",name:"三都水族自治县"}]}]},{code:"530000",name:"云南省",cityList:[{code:"530100",name:"昆明市",areaList:[{code:"530102",name:"五华区"},{code:"530103",name:"盘龙区"},{code:"530111",name:"官渡区"},{code:"530112",name:"西山区"},{code:"530113",name:"东川区"},{code:"530114",name:"呈贡区"},{code:"530115",name:"晋宁区"},{code:"530124",name:"富民县"},{code:"530125",name:"宜良县"},{code:"530126",name:"石林彝族自治县"},{code:"530127",name:"嵩明县"},{code:"530128",name:"禄劝彝族苗族自治县"},{code:"530129",name:"寻甸回族彝族自治县"},{code:"530181",name:"安宁市"}]},{code:"530300",name:"曲靖市",areaList:[{code:"530302",name:"麒麟区"},{code:"530303",name:"沾益区"},{code:"530304",name:"马龙区"},{code:"530322",name:"陆良县"},{code:"530323",name:"师宗县"},{code:"530324",name:"罗平县"},{code:"530325",name:"富源县"},{code:"530326",name:"会泽县"},{code:"530381",name:"宣威市"}]},{code:"530400",name:"玉溪市",areaList:[{code:"530402",name:"红塔区"},{code:"530403",name:"江川区"},{code:"530422",name:"澄江县"},{code:"530423",name:"通海县"},{code:"530424",name:"华宁县"},{code:"530425",name:"易门县"},{code:"530426",name:"峨山彝族自治县"},{code:"530427",name:"新平彝族傣族自治县"},{code:"530428",name:"元江哈尼族彝族傣族自治县"}]},{code:"530500",name:"保山市",areaList:[{code:"530502",name:"隆阳区"},{code:"530521",name:"施甸县"},{code:"530523",name:"龙陵县"},{code:"530524",name:"昌宁县"},{code:"530581",name:"腾冲市"}]},{code:"530600",name:"昭通市",areaList:[{code:"530602",name:"昭阳区"},{code:"530621",name:"鲁甸县"},{code:"530622",name:"巧家县"},{code:"530623",name:"盐津县"},{code:"530624",name:"大关县"},{code:"530625",name:"永善县"},{code:"530626",name:"绥江县"},{code:"530627",name:"镇雄县"},{code:"530628",name:"彝良县"},{code:"530629",name:"威信县"},{code:"530681",name:"水富市"}]},{code:"530700",name:"丽江市",areaList:[{code:"530702",name:"古城区"},{code:"530721",name:"玉龙纳西族自治县"},{code:"530722",name:"永胜县"},{code:"530723",name:"华坪县"},{code:"530724",name:"宁蒗彝族自治县"}]},{code:"530800",name:"普洱市",areaList:[{code:"530802",name:"思茅区"},{code:"530821",name:"宁洱哈尼族彝族自治县"},{code:"530822",name:"墨江哈尼族自治县"},{code:"530823",name:"景东彝族自治县"},{code:"530824",name:"景谷傣族彝族自治县"},{code:"530825",name:"镇沅彝族哈尼族拉祜族自治县"},{code:"530826",name:"江城哈尼族彝族自治县"},{code:"530827",name:"孟连傣族拉祜族佤族自治县"},{code:"530828",name:"澜沧拉祜族自治县"},{code:"530829",name:"西盟佤族自治县"}]},{code:"530900",name:"临沧市",areaList:[{code:"530902",name:"临翔区"},{code:"530921",name:"凤庆县"},{code:"530922",name:"云县"},{code:"530923",name:"永德县"},{code:"530924",name:"镇康县"},{code:"530925",name:"双江拉祜族佤族布朗族傣族自治县"},{code:"530926",name:"耿马傣族佤族自治县"},{code:"530927",name:"沧源佤族自治县"}]},{code:"532300",name:"楚雄彝族自治州",areaList:[{code:"532301",name:"楚雄市"},{code:"532322",name:"双柏县"},{code:"532323",name:"牟定县"},{code:"532324",name:"南华县"},{code:"532325",name:"姚安县"},{code:"532326",name:"大姚县"},{code:"532327",name:"永仁县"},{code:"532328",name:"元谋县"},{code:"532329",name:"武定县"},{code:"532331",name:"禄丰县"}]},{code:"532500",name:"红河哈尼族彝族自治州",areaList:[{code:"532501",name:"个旧市"},{code:"532502",name:"开远市"},{code:"532503",name:"蒙自市"},{code:"532504",name:"弥勒市"},{code:"532523",name:"屏边苗族自治县"},{code:"532524",name:"建水县"},{code:"532525",name:"石屏县"},{code:"532527",name:"泸西县"},{code:"532528",name:"元阳县"},{code:"532529",name:"红河县"},{code:"532530",name:"金平苗族瑶族傣族自治县"},{code:"532531",name:"绿春县"},{code:"532532",name:"河口瑶族自治县"}]},{code:"532600",name:"文山壮族苗族自治州",areaList:[{code:"532601",name:"文山市"},{code:"532622",name:"砚山县"},{code:"532623",name:"西畴县"},{code:"532624",name:"麻栗坡县"},{code:"532625",name:"马关县"},{code:"532626",name:"丘北县"},{code:"532627",name:"广南县"},{code:"532628",name:"富宁县"}]},{code:"532800",name:"西双版纳傣族自治州",areaList:[{code:"532801",name:"景洪市"},{code:"532822",name:"勐海县"},{code:"532823",name:"勐腊县"}]},{code:"532900",name:"大理白族自治州",areaList:[{code:"532901",name:"大理市"},{code:"532922",name:"漾濞彝族自治县"},{code:"532923",name:"祥云县"},{code:"532924",name:"宾川县"},{code:"532925",name:"弥渡县"},{code:"532926",name:"南涧彝族自治县"},{code:"532927",name:"巍山彝族回族自治县"},{code:"532928",name:"永平县"},{code:"532929",name:"云龙县"},{code:"532930",name:"洱源县"},{code:"532931",name:"剑川县"},{code:"532932",name:"鹤庆县"}]},{code:"533100",name:"德宏傣族景颇族自治州",areaList:[{code:"533102",name:"瑞丽市"},{code:"533103",name:"芒市"},{code:"533122",name:"梁河县"},{code:"533123",name:"盈江县"},{code:"533124",name:"陇川县"}]},{code:"533300",name:"怒江傈僳族自治州",areaList:[{code:"533301",name:"泸水市"},{code:"533323",name:"福贡县"},{code:"533324",name:"贡山独龙族怒族自治县"},{code:"533325",name:"兰坪白族普米族自治县"}]},{code:"533400",name:"迪庆藏族自治州",areaList:[{code:"533401",name:"香格里拉市"},{code:"533422",name:"德钦县"},{code:"533423",name:"维西傈僳族自治县"}]}]},{code:"540000",name:"西藏自治区",cityList:[{code:"540100",name:"拉萨市",areaList:[{code:"540102",name:"城关区"},{code:"540103",name:"堆龙德庆区"},{code:"540104",name:"达孜区"},{code:"540121",name:"林周县"},{code:"540122",name:"当雄县"},{code:"540123",name:"尼木县"},{code:"540124",name:"曲水县"},{code:"540127",name:"墨竹工卡县"}]},{code:"540200",name:"日喀则市",areaList:[{code:"540202",name:"桑珠孜区"},{code:"540221",name:"南木林县"},{code:"540222",name:"江孜县"},{code:"540223",name:"定日县"},{code:"540224",name:"萨迦县"},{code:"540225",name:"拉孜县"},{code:"540226",name:"昂仁县"},{code:"540227",name:"谢通门县"},{code:"540228",name:"白朗县"},{code:"540229",name:"仁布县"},{code:"540230",name:"康马县"},{code:"540231",name:"定结县"},{code:"540232",name:"仲巴县"},{code:"540233",name:"亚东县"},{code:"540234",name:"吉隆县"},{code:"540235",name:"聂拉木县"},{code:"540236",name:"萨嘎县"},{code:"540237",name:"岗巴县"}]},{code:"540300",name:"昌都市",areaList:[{code:"540302",name:"卡若区"},{code:"540321",name:"江达县"},{code:"540322",name:"贡觉县"},{code:"540323",name:"类乌齐县"},{code:"540324",name:"丁青县"},{code:"540325",name:"察雅县"},{code:"540326",name:"八宿县"},{code:"540327",name:"左贡县"},{code:"540328",name:"芒康县"},{code:"540329",name:"洛隆县"},{code:"540330",name:"边坝县"}]},{code:"540400",name:"林芝市",areaList:[{code:"540402",name:"巴宜区"},{code:"540421",name:"工布江达县"},{code:"540422",name:"米林县"},{code:"540423",name:"墨脱县"},{code:"540424",name:"波密县"},{code:"540425",name:"察隅县"},{code:"540426",name:"朗县"}]},{code:"540500",name:"山南市",areaList:[{code:"540502",name:"乃东区"},{code:"540521",name:"扎囊县"},{code:"540522",name:"贡嘎县"},{code:"540523",name:"桑日县"},{code:"540524",name:"琼结县"},{code:"540525",name:"曲松县"},{code:"540526",name:"措美县"},{code:"540527",name:"洛扎县"},{code:"540528",name:"加查县"},{code:"540529",name:"隆子县"},{code:"540530",name:"错那县"},{code:"540531",name:"浪卡子县"}]},{code:"540600",name:"那曲市",areaList:[{code:"540602",name:"色尼区"},{code:"540621",name:"嘉黎县"},{code:"540622",name:"比如县"},{code:"540623",name:"聂荣县"},{code:"540624",name:"安多县"},{code:"540625",name:"申扎县"},{code:"540626",name:"索县"},{code:"540627",name:"班戈县"},{code:"540628",name:"巴青县"},{code:"540629",name:"尼玛县"},{code:"540630",name:"双湖县"}]},{code:"542500",name:"阿里地区",areaList:[{code:"542521",name:"普兰县"},{code:"542522",name:"札达县"},{code:"542523",name:"噶尔县"},{code:"542524",name:"日土县"},{code:"542525",name:"革吉县"},{code:"542526",name:"改则县"},{code:"542527",name:"措勤县"}]}]},{code:"610000",name:"陕西省",cityList:[{code:"610100",name:"西安市",areaList:[{code:"610102",name:"新城区"},{code:"610103",name:"碑林区"},{code:"610104",name:"莲湖区"},{code:"610111",name:"灞桥区"},{code:"610112",name:"未央区"},{code:"610113",name:"雁塔区"},{code:"610114",name:"阎良区"},{code:"610115",name:"临潼区"},{code:"610116",name:"长安区"},{code:"610117",name:"高陵区"},{code:"610118",name:"鄠邑区"},{code:"610122",name:"蓝田县"},{code:"610124",name:"周至县"}]},{code:"610200",name:"铜川市",areaList:[{code:"610202",name:"王益区"},{code:"610203",name:"印台区"},{code:"610204",name:"耀州区"},{code:"610222",name:"宜君县"}]},{code:"610300",name:"宝鸡市",areaList:[{code:"610302",name:"渭滨区"},{code:"610303",name:"金台区"},{code:"610304",name:"陈仓区"},{code:"610322",name:"凤翔县"},{code:"610323",name:"岐山县"},{code:"610324",name:"扶风县"},{code:"610326",name:"眉县"},{code:"610327",name:"陇县"},{code:"610328",name:"千阳县"},{code:"610329",name:"麟游县"},{code:"610330",name:"凤县"},{code:"610331",name:"太白县"}]},{code:"610400",name:"咸阳市",areaList:[{code:"610402",name:"秦都区"},{code:"610403",name:"杨陵区"},{code:"610404",name:"渭城区"},{code:"610422",name:"三原县"},{code:"610423",name:"泾阳县"},{code:"610424",name:"乾县"},{code:"610425",name:"礼泉县"},{code:"610426",name:"永寿县"},{code:"610428",name:"长武县"},{code:"610429",name:"旬邑县"},{code:"610430",name:"淳化县"},{code:"610431",name:"武功县"},{code:"610481",name:"兴平市"},{code:"610482",name:"彬州市"}]},{code:"610500",name:"渭南市",areaList:[{code:"610502",name:"临渭区"},{code:"610503",name:"华州区"},{code:"610522",name:"潼关县"},{code:"610523",name:"大荔县"},{code:"610524",name:"合阳县"},{code:"610525",name:"澄城县"},{code:"610526",name:"蒲城县"},{code:"610527",name:"白水县"},{code:"610528",name:"富平县"},{code:"610581",name:"韩城市"},{code:"610582",name:"华阴市"}]},{code:"610600",name:"延安市",areaList:[{code:"610602",name:"宝塔区"},{code:"610603",name:"安塞区"},{code:"610621",name:"延长县"},{code:"610622",name:"延川县"},{code:"610623",name:"子长县"},{code:"610625",name:"志丹县"},{code:"610626",name:"吴起县"},{code:"610627",name:"甘泉县"},{code:"610628",name:"富县"},{code:"610629",name:"洛川县"},{code:"610630",name:"宜川县"},{code:"610631",name:"黄龙县"},{code:"610632",name:"黄陵县"}]},{code:"610700",name:"汉中市",areaList:[{code:"610702",name:"汉台区"},{code:"610703",name:"南郑区"},{code:"610722",name:"城固县"},{code:"610723",name:"洋县"},{code:"610724",name:"西乡县"},{code:"610725",name:"勉县"},{code:"610726",name:"宁强县"},{code:"610727",name:"略阳县"},{code:"610728",name:"镇巴县"},{code:"610729",name:"留坝县"},{code:"610730",name:"佛坪县"}]},{code:"610800",name:"榆林市",areaList:[{code:"610802",name:"榆阳区"},{code:"610803",name:"横山区"},{code:"610822",name:"府谷县"},{code:"610824",name:"靖边县"},{code:"610825",name:"定边县"},{code:"610826",name:"绥德县"},{code:"610827",name:"米脂县"},{code:"610828",name:"佳县"},{code:"610829",name:"吴堡县"},{code:"610830",name:"清涧县"},{code:"610831",name:"子洲县"},{code:"610881",name:"神木市"}]},{code:"610900",name:"安康市",areaList:[{code:"610902",name:"汉滨区"},{code:"610921",name:"汉阴县"},{code:"610922",name:"石泉县"},{code:"610923",name:"宁陕县"},{code:"610924",name:"紫阳县"},{code:"610925",name:"岚皋县"},{code:"610926",name:"平利县"},{code:"610927",name:"镇坪县"},{code:"610928",name:"旬阳县"},{code:"610929",name:"白河县"}]},{code:"611000",name:"商洛市",areaList:[{code:"611002",name:"商州区"},{code:"611021",name:"洛南县"},{code:"611022",name:"丹凤县"},{code:"611023",name:"商南县"},{code:"611024",name:"山阳县"},{code:"611025",name:"镇安县"},{code:"611026",name:"柞水县"}]}]},{code:"620000",name:"甘肃省",cityList:[{code:"620100",name:"兰州市",areaList:[{code:"620102",name:"城关区"},{code:"620103",name:"七里河区"},{code:"620104",name:"西固区"},{code:"620105",name:"安宁区"},{code:"620111",name:"红古区"},{code:"620121",name:"永登县"},{code:"620122",name:"皋兰县"},{code:"620123",name:"榆中县"}]},{code:"620200",name:"嘉峪关市",areaList:[]},{code:"620300",name:"金昌市",areaList:[{code:"620302",name:"金川区"},{code:"620321",name:"永昌县"}]},{code:"620400",name:"白银市",areaList:[{code:"620402",name:"白银区"},{code:"620403",name:"平川区"},{code:"620421",name:"靖远县"},{code:"620422",name:"会宁县"},{code:"620423",name:"景泰县"}]},{code:"620500",name:"天水市",areaList:[{code:"620502",name:"秦州区"},{code:"620503",name:"麦积区"},{code:"620521",name:"清水县"},{code:"620522",name:"秦安县"},{code:"620523",name:"甘谷县"},{code:"620524",name:"武山县"},{code:"620525",name:"张家川回族自治县"}]},{code:"620600",name:"武威市",areaList:[{code:"620602",name:"凉州区"},{code:"620621",name:"民勤县"},{code:"620622",name:"古浪县"},{code:"620623",name:"天祝藏族自治县"}]},{code:"620700",name:"张掖市",areaList:[{code:"620702",name:"甘州区"},{code:"620721",name:"肃南裕固族自治县"},{code:"620722",name:"民乐县"},{code:"620723",name:"临泽县"},{code:"620724",name:"高台县"},{code:"620725",name:"山丹县"}]},{code:"620800",name:"平凉市",areaList:[{code:"620802",name:"崆峒区"},{code:"620821",name:"泾川县"},{code:"620822",name:"灵台县"},{code:"620823",name:"崇信县"},{code:"620825",name:"庄浪县"},{code:"620826",name:"静宁县"},{code:"620881",name:"华亭市"}]},{code:"620900",name:"酒泉市",areaList:[{code:"620902",name:"肃州区"},{code:"620921",name:"金塔县"},{code:"620922",name:"瓜州县"},{code:"620923",name:"肃北蒙古族自治县"},{code:"620924",name:"阿克塞哈萨克族自治县"},{code:"620981",name:"玉门市"},{code:"620982",name:"敦煌市"}]},{code:"621000",name:"庆阳市",areaList:[{code:"621002",name:"西峰区"},{code:"621021",name:"庆城县"},{code:"621022",name:"环县"},{code:"621023",name:"华池县"},{code:"621024",name:"合水县"},{code:"621025",name:"正宁县"},{code:"621026",name:"宁县"},{code:"621027",name:"镇原县"}]},{code:"621100",name:"定西市",areaList:[{code:"621102",name:"安定区"},{code:"621121",name:"通渭县"},{code:"621122",name:"陇西县"},{code:"621123",name:"渭源县"},{code:"621124",name:"临洮县"},{code:"621125",name:"漳县"},{code:"621126",name:"岷县"}]},{code:"621200",name:"陇南市",areaList:[{code:"621202",name:"武都区"},{code:"621221",name:"成县"},{code:"621222",name:"文县"},{code:"621223",name:"宕昌县"},{code:"621224",name:"康县"},{code:"621225",name:"西和县"},{code:"621226",name:"礼县"},{code:"621227",name:"徽县"},{code:"621228",name:"两当县"}]},{code:"622900",name:"临夏回族自治州",areaList:[{code:"622901",name:"临夏市"},{code:"622921",name:"临夏县"},{code:"622922",name:"康乐县"},{code:"622923",name:"永靖县"},{code:"622924",name:"广河县"},{code:"622925",name:"和政县"},{code:"622926",name:"东乡族自治县"},{code:"622927",name:"积石山保安族东乡族撒拉族自治县"}]},{code:"623000",name:"甘南藏族自治州",areaList:[{code:"623001",name:"合作市"},{code:"623021",name:"临潭县"},{code:"623022",name:"卓尼县"},{code:"623023",name:"舟曲县"},{code:"623024",name:"迭部县"},{code:"623025",name:"玛曲县"},{code:"623026",name:"碌曲县"},{code:"623027",name:"夏河县"}]}]},{code:"630000",name:"青海省",cityList:[{code:"630100",name:"西宁市",areaList:[{code:"630102",name:"城东区"},{code:"630103",name:"城中区"},{code:"630104",name:"城西区"},{code:"630105",name:"城北区"},{code:"630121",name:"大通回族土族自治县"},{code:"630122",name:"湟中县"},{code:"630123",name:"湟源县"}]},{code:"630200",name:"海东市",areaList:[{code:"630202",name:"乐都区"},{code:"630203",name:"平安区"},{code:"630222",name:"民和回族土族自治县"},{code:"630223",name:"互助土族自治县"},{code:"630224",name:"化隆回族自治县"},{code:"630225",name:"循化撒拉族自治县"}]},{code:"632200",name:"海北藏族自治州",areaList:[{code:"632221",name:"门源回族自治县"},{code:"632222",name:"祁连县"},{code:"632223",name:"海晏县"},{code:"632224",name:"刚察县"}]},{code:"632300",name:"黄南藏族自治州",areaList:[{code:"632321",name:"同仁县"},{code:"632322",name:"尖扎县"},{code:"632323",name:"泽库县"},{code:"632324",name:"河南蒙古族自治县"}]},{code:"632500",name:"海南藏族自治州",areaList:[{code:"632521",name:"共和县"},{code:"632522",name:"同德县"},{code:"632523",name:"贵德县"},{code:"632524",name:"兴海县"},{code:"632525",name:"贵南县"}]},{code:"632600",name:"果洛藏族自治州",areaList:[{code:"632621",name:"玛沁县"},{code:"632622",name:"班玛县"},{code:"632623",name:"甘德县"},{code:"632624",name:"达日县"},{code:"632625",name:"久治县"},{code:"632626",name:"玛多县"}]},{code:"632700",name:"玉树藏族自治州",areaList:[{code:"632701",name:"玉树市"},{code:"632722",name:"杂多县"},{code:"632723",name:"称多县"},{code:"632724",name:"治多县"},{code:"632725",name:"囊谦县"},{code:"632726",name:"曲麻莱县"}]},{code:"632800",name:"海西蒙古族藏族自治州",areaList:[{code:"632801",name:"格尔木市"},{code:"632802",name:"德令哈市"},{code:"632803",name:"茫崖市"},{code:"632821",name:"乌兰县"},{code:"632822",name:"都兰县"},{code:"632823",name:"天峻县"}]}]},{code:"640000",name:"宁夏回族自治区",cityList:[{code:"640100",name:"银川市",areaList:[{code:"640104",name:"兴庆区"},{code:"640105",name:"西夏区"},{code:"640106",name:"金凤区"},{code:"640121",name:"永宁县"},{code:"640122",name:"贺兰县"},{code:"640181",name:"灵武市"}]},{code:"640200",name:"石嘴山市",areaList:[{code:"640202",name:"大武口区"},{code:"640205",name:"惠农区"},{code:"640221",name:"平罗县"}]},{code:"640300",name:"吴忠市",areaList:[{code:"640302",name:"利通区"},{code:"640303",name:"红寺堡区"},{code:"640323",name:"盐池县"},{code:"640324",name:"同心县"},{code:"640381",name:"青铜峡市"}]},{code:"640400",name:"固原市",areaList:[{code:"640402",name:"原州区"},{code:"640422",name:"西吉县"},{code:"640423",name:"隆德县"},{code:"640424",name:"泾源县"},{code:"640425",name:"彭阳县"}]},{code:"640500",name:"中卫市",areaList:[{code:"640502",name:"沙坡头区"},{code:"640521",name:"中宁县"},{code:"640522",name:"海原县"}]}]},{code:"650000",name:"新疆维吾尔自治区",cityList:[{code:"650100",name:"乌鲁木齐市",areaList:[{code:"650102",name:"天山区"},{code:"650103",name:"沙依巴克区"},{code:"650104",name:"新市区"},{code:"650105",name:"水磨沟区"},{code:"650106",name:"头屯河区"},{code:"650107",name:"达坂城区"},{code:"650109",name:"米东区"},{code:"650121",name:"乌鲁木齐县"}]},{code:"650200",name:"克拉玛依市",areaList:[{code:"650202",name:"独山子区"},{code:"650203",name:"克拉玛依区"},{code:"650204",name:"白碱滩区"},{code:"650205",name:"乌尔禾区"}]},{code:"650400",name:"吐鲁番市",areaList:[{code:"650402",name:"高昌区"},{code:"650421",name:"鄯善县"},{code:"650422",name:"托克逊县"}]},{code:"650500",name:"哈密市",areaList:[{code:"650502",name:"伊州区"},{code:"650521",name:"巴里坤哈萨克自治县"},{code:"650522",name:"伊吾县"}]},{code:"652300",name:"昌吉回族自治州",areaList:[{code:"652301",name:"昌吉市"},{code:"652302",name:"阜康市"},{code:"652323",name:"呼图壁县"},{code:"652324",name:"玛纳斯县"},{code:"652325",name:"奇台县"},{code:"652327",name:"吉木萨尔县"},{code:"652328",name:"木垒哈萨克自治县"}]},{code:"652700",name:"博尔塔拉蒙古自治州",areaList:[{code:"652701",name:"博乐市"},{code:"652702",name:"阿拉山口市"},{code:"652722",name:"精河县"},{code:"652723",name:"温泉县"}]},{code:"652800",name:"巴音郭楞蒙古自治州",areaList:[{code:"652801",name:"库尔勒市"},{code:"652822",name:"轮台县"},{code:"652823",name:"尉犁县"},{code:"652824",name:"若羌县"},{code:"652825",name:"且末县"},{code:"652826",name:"焉耆回族自治县"},{code:"652827",name:"和静县"},{code:"652828",name:"和硕县"},{code:"652829",name:"博湖县"}]},{code:"652900",name:"阿克苏地区",areaList:[{code:"652901",name:"阿克苏市"},{code:"652922",name:"温宿县"},{code:"652923",name:"库车县"},{code:"652924",name:"沙雅县"},{code:"652925",name:"新和县"},{code:"652926",name:"拜城县"},{code:"652927",name:"乌什县"},{code:"652928",name:"阿瓦提县"},{code:"652929",name:"柯坪县"}]},{code:"653000",name:"克孜勒苏柯尔克孜自治州",areaList:[{code:"653001",name:"阿图什市"},{code:"653022",name:"阿克陶县"},{code:"653023",name:"阿合奇县"},{code:"653024",name:"乌恰县"}]},{code:"653100",name:"喀什地区",areaList:[{code:"653101",name:"喀什市"},{code:"653121",name:"疏附县"},{code:"653122",name:"疏勒县"},{code:"653123",name:"英吉沙县"},{code:"653124",name:"泽普县"},{code:"653125",name:"莎车县"},{code:"653126",name:"叶城县"},{code:"653127",name:"麦盖提县"},{code:"653128",name:"岳普湖县"},{code:"653129",name:"伽师县"},{code:"653130",name:"巴楚县"},{code:"653131",name:"塔什库尔干塔吉克自治县"}]},{code:"653200",name:"和田地区",areaList:[{code:"653201",name:"和田市"},{code:"653221",name:"和田县"},{code:"653222",name:"墨玉县"},{code:"653223",name:"皮山县"},{code:"653224",name:"洛浦县"},{code:"653225",name:"策勒县"},{code:"653226",name:"于田县"},{code:"653227",name:"民丰县"}]},{code:"654000",name:"伊犁哈萨克自治州",areaList:[{code:"654002",name:"伊宁市"},{code:"654003",name:"奎屯市"},{code:"654004",name:"霍尔果斯市"},{code:"654021",name:"伊宁县"},{code:"654022",name:"察布查尔锡伯自治县"},{code:"654023",name:"霍城县"},{code:"654024",name:"巩留县"},{code:"654025",name:"新源县"},{code:"654026",name:"昭苏县"},{code:"654027",name:"特克斯县"},{code:"654028",name:"尼勒克县"}]},{code:"654200",name:"塔城地区",areaList:[{code:"654201",name:"塔城市"},{code:"654202",name:"乌苏市"},{code:"654221",name:"额敏县"},{code:"654223",name:"沙湾县"},{code:"654224",name:"托里县"},{code:"654225",name:"裕民县"},{code:"654226",name:"和布克赛尔蒙古自治县"}]},{code:"654300",name:"阿勒泰地区",areaList:[{code:"654301",name:"阿勒泰市"},{code:"654321",name:"布尔津县"},{code:"654322",name:"富蕴县"},{code:"654323",name:"福海县"},{code:"654324",name:"哈巴河县"},{code:"654325",name:"青河县"},{code:"654326",name:"吉木乃县"}]}]},{code:"710000",name:"台湾省",cityList:[{code:"710000",name:"台湾省",areaList:[{code:"710000",name:"台湾省"}]}]},{code:"810000",name:"香港特别行政区",cityList:[{code:"810000",name:"香港特别行政区",areaList:[{code:"810000",name:"香港特别行政区"}]}]},{code:"820000",name:"澳门特别行政区",cityList:[{code:"820000",name:"澳门特别行政区",areaList:[{code:"820000",name:"澳门特别行政区"}]}]}]);function l(){var e=[];return s.forEach((function(a){e.push({code:a.code,name:a.name})})),e}function d(e){var a=s.find((function(a){return a.name===e}));return Promise.resolve(a.cityList)}function m(e,a){var t=s.find((function(e){return e.name===a})),n=t.cityList.find((function(a){return a.name===e}));return Promise.resolve(n.areaList)}var u={name:"domain",props:["innerHeightMinusFilter"],components:{Pagination:c["a"]},data:function(){return{tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,domainName:"",isDialog:!1,isEdit:!1,domainForm:{name:"",province:"",city:"",area:"",address:""},domainRules:{name:[{required:!0,trigger:"blur",message:"请输入区域名称"}],address:[{required:!0,trigger:"change",message:"请输入地址"}]},provinceList:l(),cityList:[],areaList:[],showExpand:!0}},mounted:function(){this.$emit("watchFilterHeight"),this.getDomainList()},methods:{getDomainList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};this.domainName&&(a.name=this.domainName),this.tableLoading=!0,Object(i["c"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0)}))},openAddDialog:function(){var e=this;this.isEdit=!1,this.domainForm={name:"",province:"",city:"",area:"",address:""},this.isDialog=!0,this.$nextTick((function(){e.$refs.domainForm.clearValidate()}))},closeDialog:function(){this.$refs.domainForm.clearValidate(),this.isDialog=!1},openEditDialog:function(e){this.isEdit=!0,this.domainForm=JSON.parse(JSON.stringify(e)),this.isDialog=!0},saveEdit:function(){var e=this;this.$refs.domainForm.validate((function(a){a&&Object(i["b"])(e.domainForm).then((function(a){a.state&&(r["Message"].success("工作区域".concat(e.isEdit?"修改":"增加","成功")),e.isDialog=!1,e.getDomainList())}))}))},deleteDomain:function(e){var a=this;r["MessageBox"].confirm("确定删除工作区域: ".concat(e.name," ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])(e.id).then((function(e){e.state&&(r["Message"].success("工作区域删除成功"),a.getDomainList())}))})).catch((function(){}))},changeProvince:function(e){var a=this;d(e).then((function(t){a.cityList=t,a.domainForm.city="",a.domainForm.address=e}))},changeCity:function(e){var a=this;m(e,this.domainForm.province).then((function(e){a.areaList=e,a.domainForm.address=a.domainForm.province+"/"+a.domainForm.city}))},changeArea:function(){this.domainForm.address=this.domainForm.province+"/"+this.domainForm.city+"/"+this.domainForm.area},getDomainInfo:function(e){var a=this;if(e.topologyMapPos&&e.topologyMapPos.length>0){var t=e.topologyMapPos.map((function(e){return e.name}));e.editDomain=t.join(", "),e.mapNum=t.length}else e.editDomain="",e.mapNum=0;if(e.amrPos&&e.amrPos.length>0){var n=e.amrPos.map((function(e){return e.name}));e.vehicleNames=n.join(", "),e.vehicleNum=n.length}else e.vehicleNames="",e.vehicleNum=0;this.showExpand=!1,this.$nextTick((function(){a.showExpand=!0}))}}},p=u,h=t("4ac2"),g=Object(h["a"])(p,n,o,!1,null,null,null);a["default"]=g.exports},7661:function(e,a,t){"use strict";t.d(a,"c",(function(){return o})),t.d(a,"d",(function(){return i})),t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return c}));var n=t("b775");function o(e){return n["a"].get("/map/mapList",e)}function i(e){return n["a"].post("/map/updateMap",e)}function r(e){return n["a"].post("/map/delete/"+e)}function c(e){return n["a"].get("/map/getMapDetailById",e)}},"78b8":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"group-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择工作区域",clearable:"",filterable:""},on:{change:e.getGroupList},model:{value:e.domainId,callback:function(a){e.domainId="string"===typeof a?a.trim():a},expression:"domainId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增分组")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-141,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"分组名",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"工作区域",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.domainList[a.row.domainId])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.createTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditDialog(a.row)}}}),e._v(" "),t("el-button",{attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteGroup(a.row)}}})]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.isEdit?"编辑分组":"新增分组",visible:e.isDialog,width:"440px"},on:{"update:visible":function(a){e.isDialog=a},close:e.closeDialog}},[t("el-form",{ref:"groupForm",attrs:{"label-width":"90px",model:e.groupForm,rules:e.groupRules}},[t("el-form-item",{attrs:{label:"分组名: ",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入分组名",clearable:""},model:{value:e.groupForm.name,callback:function(a){e.$set(e.groupForm,"name","string"===typeof a?a.trim():a)},expression:"groupForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"工作区域: ",prop:"domainId"}},[t("el-select",{attrs:{placeholder:"请选择工作区域",clearable:"",filterable:""},model:{value:e.groupForm.domainId,callback:function(a){e.$set(e.groupForm,"domainId","string"===typeof a?a.trim():a)},expression:"groupForm.domainId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("0aa6")),r=t("2840"),c=t("a68a"),s={name:"group",props:["innerHeightMinusFilter"],data:function(){return{tableList:[],tableLoading:!1,domainList:{},domainId:null,isDialog:!1,isEdit:!1,groupForm:{name:"",domainId:""},groupRules:{name:[{required:!0,trigger:"blur",message:"请输入分组名"}],domainId:[{required:!0,trigger:"change",message:"请选择区域"}]}}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),Object(r["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),this.getGroupList()},methods:{getGroupList:function(){var e=this,a={};this.domainId&&(a.domainId=this.domainId),this.tableLoading=!0,Object(i["c"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data||[])}))},openAddDialog:function(){var e=this;this.isEdit=!1,this.groupForm={name:"",domainId:""},this.isDialog=!0,this.$nextTick((function(){e.$refs.groupForm.clearValidate()}))},closeDialog:function(){this.$refs.groupForm.clearValidate(),this.isDialog=!1},openEditDialog:function(e){this.isEdit=!0,this.groupForm=JSON.parse(JSON.stringify(e)),this.isDialog=!0},saveEdit:function(){var e=this;this.$refs.groupForm.validate((function(a){a&&(e.isEdit?Object(i["d"])(e.groupForm).then((function(a){a.state&&(c["Message"].success("分组修改成功"),e.isDialog=!1,e.getGroupList())})):Object(i["a"])(e.groupForm).then((function(a){a.state&&(c["Message"].success("分组增加成功"),e.isDialog=!1,e.getGroupList())})))}))},deleteGroup:function(e){var a=this;c["MessageBox"].confirm("确定删除分组: ".concat(e.name,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])({groupId:e.id}).then((function(e){e.state&&(c["Message"].success("分组删除成功"),a.getGroupList())}))})).catch((function(){}))}}},l=s,d=t("4ac2"),m=Object(d["a"])(l,n,o,!1,null,null,null);a["default"]=m.exports},"7ad1":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"change-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择分组",clearable:"",filterable:""},on:{change:e.getBatteryList},model:{value:e.groupFilter,callback:function(a){e.groupFilter="string"===typeof a?a.trim():a},expression:"groupFilter"}},e._l(e.groupList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:Number(a)}})})),1),e._v(" "),t("el-date-picker",{ref:"datePicker",staticClass:"filter-select",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.getBatteryList},model:{value:e.dateTimeFilter,callback:function(a){e.dateTimeFilter=a},expression:"dateTimeFilter"}}),e._v(" "),t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入电池编号",clearable:""},on:{change:e.getBatteryList},model:{value:e.inputFilter,callback:function(a){e.inputFilter="string"===typeof a?a.trim():a},expression:"inputFilter"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:e.getBatteryList}},[e._v("搜索")])],1)],2)],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-258,"header-cell-style":{background:"#eee"},"highlight-current-row":"","tooltip-effect":"dark"}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"amrId",label:"ID",sortable:"",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(a){return e.beRead(n)}}},[e._v("标记为已读")])]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getBatteryList}})],1)},o=[],i=(t("a450"),t("1bc7"),t("333d")),r=t("4856"),c=t("2840"),s=t("0aa6"),l=(t("a68a"),{name:"change",props:["innerHeightMinusFilter"],components:{Pagination:i["a"]},data:function(){return{tableList:[],tableLoading:!0,currentPage:1,pageSize:10,total:0,onLineChangeNum:0,groupFilter:"",dateTimeFilter:[],inputFilter:"",domainList:{},groupList:{},pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var a=new Date,t=new Date;t.setTime((new Date).setHours(0,0,0,0)),e.$emit("pick",[t,a])}},{text:"昨天",onClick:function(e){e.$emit("pick",[yesterdayStart(),yesterdayEnd()])}},{text:"最近一周",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]}}},methods:{mountedFun:function(){var e=this;this.$emit("watchFilterHeight"),Object(c["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),Object(s["c"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.groupList,a.id,a.name)}))})),this.getBatteryList()},getBatteryList:function(){var e=this;this.tableLoading=!0;var a={currentPage:this.currentPage,pageSize:this.pageSize};this.dateTimeFilter&&this.dateTimeFilter.length>0&&(a.startTime=formatTime(this.dateTimeFilter[0]),a.endTime=formatTime(this.dateTimeFilter[1])),this.inputFilter&&(a.name=this.inputFilter),Object(r["b"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0)})),Object(r["b"])().then((function(a){e.onLineChangeNum=a.data.length||0}))},beRead:function(e){}}}),d=l,m=(t("6297"),t("4ac2")),u=Object(m["a"])(d,n,o,!1,null,"094b2295",null);a["default"]=u.exports},"7cf8":function(e,a,t){"use strict";t.d(a,"d",(function(){return o})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return r})),t.d(a,"c",(function(){return c}));var n=t("b775");function o(){return n["a"].get("/amr/onlineAmr")}function i(e){return n["a"].get("/map/getMapDetailById/",{mapId:e})}function r(){return n["a"].post("/area/monitor")}function c(e){return n["a"].get("/map/getMapVertexes/"+e)}},"7e1f":function(e,a,t){"use strict";t("bafc")},"7e98":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"user-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择角色",filterable:"",clearable:""},on:{change:e.getUserList},model:{value:e.roleId,callback:function(a){e.roleId="string"===typeof a?a.trim():a},expression:"roleId"}},e._l(e.roleList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.roleCode,value:Number(e.id)}})})),1),e._v(" "),t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入用户名",clearable:""},on:{change:e.getUserList},model:{value:e.userName,callback:function(a){e.userName="string"===typeof a?a.trim():a},expression:"userName"}},[t("template",{slot:"append"},[t("el-button",{staticClass:"append-btn",attrs:{type:"primary"},on:{click:e.getUserList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/add",expression:"'account/user/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddUserDialog}},[e._v("新增账号")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":"","tooltip-effect":"dark"},on:{"expand-change":e.getUserInfo}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return e.showExpand?t("el-card",{},[t("p",[t("span",[e._v("工作区域("+e._s(a.row.areaNum||0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.areaNames))])]),e._v(" "),t("p",[t("span",[e._v("分组("+e._s(a.row.groupNum||0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.groupNames))])]),e._v(" "),t("p",[t("span",[e._v("仓库区域("+e._s(a.row.storageAreaNum||0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.storageAreas))])])]):e._e()}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"username",label:"账号名",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"nickname",label:"昵称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"phoneNo",label:"手机号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"eMail",label:"邮箱",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"roleCode",label:"角色",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"是否启用",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/update",expression:"'account/user/update'"}],on:{change:function(t){return e.toggleEnable(a.row)}},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable","string"===typeof t?t.trim():t)},expression:"scope.row.enable"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!account/user/update",expression:"'!account/user/update'"}]},[e._v(e._s(a.row.enable?"已启用":"未启用"))])]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/update",expression:"'account/user/update'"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditUserDialog(a.row)}}}),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/delete",expression:"'account/user/delete'"}],attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteUser(a.row)}}})]:void 0}}],null,!0)})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getUserList}}),e._v(" "),t("el-dialog",{attrs:{center:"",title:e.isUserEdit?"编辑账号":"新增账号",visible:e.isUserDialog,width:"450px"},on:{"update:visible":function(a){e.isUserDialog=a},close:e.closeUserDialog}},[t("el-form",{ref:"userForm",attrs:{"label-width":"90px",model:e.userForm,rules:e.userRules,"auto-complete":"on"}},[t("el-form-item",{attrs:{label:"账号名: ",prop:"username"}},[t("el-input",{attrs:{"auto-complete":"on",placeholder:"请输入账号名",disabled:e.isUserEdit,clearable:"",maxlength:20},model:{value:e.userForm.username,callback:function(a){e.$set(e.userForm,"username","string"===typeof a?a.trim():a)},expression:"userForm.username"}})],1),e._v(" "),e.isUserEdit?e._e():[t("el-form-item",{attrs:{label:"密码: ",prop:"password"}},[t("el-input",{attrs:{"auto-complete":"on",placeholder:"请输入密码",clearable:"",maxlength:20},model:{value:e.userForm.password,callback:function(a){e.$set(e.userForm,"password","string"===typeof a?a.trim():a)},expression:"userForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"昵称: "}},[t("el-input",{attrs:{placeholder:"请输入昵称",clearable:""},model:{value:e.userForm.nickname,callback:function(a){e.$set(e.userForm,"nickname","string"===typeof a?a.trim():a)},expression:"userForm.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号: ",prop:"phoneNo"}},[t("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:e.userForm.phoneNo,callback:function(a){e.$set(e.userForm,"phoneNo","string"===typeof a?a.trim():a)},expression:"userForm.phoneNo"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱: ",prop:"eMail"}},[t("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.userForm.eMail,callback:function(a){e.$set(e.userForm,"eMail","string"===typeof a?a.trim():a)},expression:"userForm.eMail"}})],1)],e._v(" "),t("el-form-item",{attrs:{label:"工作区域: ",prop:"areaIds"}},[t("el-select",{attrs:{placeholder:"请选择工作区域",multiple:"",clearable:"",filterable:"","collapse-tags":""},on:{change:e.changeAreaIds},model:{value:e.userForm.areaIds,callback:function(a){e.$set(e.userForm,"areaIds","string"===typeof a?a.trim():a)},expression:"userForm.areaIds"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"分组: "}},[t("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择分组",clearable:"",filterable:""},model:{value:e.userForm.groupIds,callback:function(a){e.$set(e.userForm,"groupIds","string"===typeof a?a.trim():a)},expression:"userForm.groupIds"}},e._l(e.groupList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:e.userForm.areaIds.indexOf(a.areaId)>-1,expression:"userForm.areaIds.indexOf(item.areaId) > -1"}],key:n,attrs:{label:a.name,value:Number(a.id)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"角色: ",prop:"roleId"}},[t("el-select",{attrs:{placeholder:"请选择角色",clearable:"",filterable:""},model:{value:e.userForm.roleId,callback:function(a){e.$set(e.userForm,"roleId","string"===typeof a?a.trim():a)},expression:"userForm.roleId"}},e._l(e.roleList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.roleCode,value:Number(e.id)}})})),1)],1),e._v(" "),e.isUserEdit?t("el-form-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/updateUserStorageAreas",expression:"'account/user/updateUserStorageAreas'"}],attrs:{label:"仓库区域: ",prop:"storageArea"}},[t("el-select",{attrs:{placeholder:"请选择仓库区域",multiple:"",clearable:"",filterable:"","collapse-tags":""},model:{value:e.userForm.storageArea,callback:function(a){e.$set(e.userForm,"storageArea","string"===typeof a?a.trim():a)},expression:"userForm.storageArea"}},e._l(e.storageAreaList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1):e._e()],2),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeUserDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveUserEdit}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"重置密码",visible:e.isPasswordDialog,width:"400px"},on:{close:e.closePasswordDialog,"update:visible":function(a){e.isPasswordDialog=a}}},[t("el-form",{ref:"passwordForm",attrs:{"label-width":"100px",model:e.passwordForm,rules:e.passwordRoles}},[t("el-form-item",{attrs:{label:"新密码: ",prop:"newPassWord"}},[t("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.passwordForm.newPassWord,callback:function(a){e.$set(e.passwordForm,"newPassWord","string"===typeof a?a.trim():a)},expression:"passwordForm.newPassWord"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"管理员密码: ",prop:"checkPassword"}},[t("el-input",{attrs:{placeholder:"请输入管理员密码","show-password":""},model:{value:e.passwordForm.checkPassword,callback:function(a){e.$set(e.passwordForm,"checkPassword","string"===typeof a?a.trim():a)},expression:"passwordForm.checkPassword"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closePasswordDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.savePasswordEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("3612")),r=t("0aa6"),c=t("d267"),s=t("36b2"),l=t("2840"),d=t("333d"),m=t("a68a"),u=t("b775");function p(){return u["a"].get("/wms/area/list")}function h(e){return u["a"].get("/wms/areaUser/getByUserId/"+e)}function g(e){return u["a"].post("/wms/areaUser/addOrUpdate",e)}var f={name:"user",props:["innerHeightMinusFilter"],components:{Pagination:d["a"]},data:function(){var e,a={message:"只能包含字母和数字, 不少于6位, 不多于20位",pattern:/^[\dA-Za-z]{6,20}$/,trigger:"blur"};return e={tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,roleId:null,userName:"",roleList:[],groupList:[],userForm:{username:"",phoneNo:"",eMail:"",password:"",areaIds:[],groupIds:[],nickname:"",roleId:""},isUserDialog:!1,isUserEdit:!1,passwordForm:{newPassWord:"",checkPassword:""},isPasswordDialog:!1,areaIds:[]},Object(i["a"])(e,"groupList",[]),Object(i["a"])(e,"domainList",{}),Object(i["a"])(e,"storageAreaList",{}),Object(i["a"])(e,"userRules",{username:[{required:!0,trigger:"blur",message:"请输入账号名"},{message:"以英文字母开头, 只能包含英文字母、数字和下划线",pattern:/^[a-zA-Z][\w]*$/,trigger:"blur"}],phoneNo:[{required:!1,trigger:"blur"},{message:"手机号格式不正确",pattern:/^[1][3-9][\d]{9}$/,trigger:"blur"}],eMail:[{required:!1,trigger:"blur"},{message:"邮箱格式不正确",pattern:/^([a-zA-Z\d]+[_|\_|\.]?)*[a-zA-Z\d]+@([a-zA-Z\d]+[_|\_|\.]?)*[a-zA-Z\d]+\.[a-zA-Z]{2,3}$/,trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},a],roleId:[{required:!0,trigger:"change",message:"请选择角色"}]}),Object(i["a"])(e,"passwordRoles",{newPassWord:[{required:!0,trigger:"blur",message:"请输入新密码"},a],checkPassword:[{required:!0,trigger:"blur",message:"请输入管理员密码"},a]}),Object(i["a"])(e,"showExpand",!0),e},mounted:function(){var e=this;this.$emit("watchFilterHeight"),this.getUserList(),Object(l["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),p().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.storageAreaList,a.id,a.areaCode)}))})),Object(r["c"])().then((function(a){a.state&&(e.groupList=a.data||[])})),Object(c["d"])().then((function(a){a.state&&(e.roleList=a.data.data||[])}))},methods:{getUserList:function(){var e=this,a={pagenum:this.currentPage,pagesize:this.pageSize};this.roleId&&(a.roleId=this.roleId),this.userName&&(a.keyWord=this.userName),this.tableLoading=!0,Object(s["d"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data,e.total=a.data.total)}))},openAddUserDialog:function(){var e=this;this.isUserEdit=!1,this.userForm={username:"",nickname:"",phoneNo:"",eMail:"",password:"",areaIds:[],groupIds:[],roleId:""},this.isUserDialog=!0,this.$nextTick((function(){e.$refs.userForm.clearValidate()}))},closeUserDialog:function(){this.$refs.userForm.clearValidate(),this.isUserDialog=!1},openEditUserDialog:function(e){var a=this;this.isUserEdit=!0,Object(s["c"])({userId:e.id}).then((function(t){t.state&&(e.areaIds=t.data.areas.map((function(e){return e.areaPo.id})),e.groupIds=t.data.groups.map((function(e){return e.id})),a.userForm=JSON.parse(JSON.stringify(e)),a.isUserDialog=!0,h(e.id).then((function(e){e.state&&a.$set(a.userForm,"storageArea",e.data||[])})))}))},saveUserEdit:function(){var e=this;this.$refs.userForm.validate((function(a){if(a){var t=e.userForm,n=t.username,o=t.phoneNo,i=t.eMail,r=t.password,c=t.areaIds,l=t.groupIds,d=t.nickname,u=t.roleId,p=t.id,h=t.storageArea,f={userPo:{username:n,password:r,eMail:i,nickname:d,phoneNo:o,roleId:u},areaIds:c,groupIds:l};e.isUserEdit?(f.userPo.id=p,Object(s["g"])(f).then((function(a){a.state&&(e.isUserDialog=!1,m["Message"].success("用户修改成功"),e.getUserList())})),g({userId:p,wmsAreaIds:h})):Object(s["a"])(f).then((function(a){a.state&&(m["Message"].success("用户添加成功"),e.isUserDialog=!1,e.getUserList())}))}}))},openPasswordDialog:function(e){var a=this;this.passwordForm={newPassWord:"",checkPassword:"",userId:e.id},this.isPasswordDialog=!0,this.$nextTick((function(){a.$refs.passwordForm.clearValidate()}))},closePasswordDialog:function(){this.$refs.passwordForm.clearValidate(),this.isPasswordDialog=!1},savePasswordEdit:function(){var e=this;this.$refs.passwordForm.validate((function(a){a&&Object(s["e"])(e.passwordForm).then((function(a){a.state&&(m["Message"].success("密码重置成功"),e.isPasswordDialog=!1)}))}))},toggleEnable:function(e){var a=this,t=e.enable?"启用":"禁用",n=function(){e.enable=!e.enable};m["MessageBox"].confirm("确定".concat(t,"账号: ").concat(e.username,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["f"])({userId:e.id,state:e.enable}).then((function(e){e.state?(m["Message"].success("账号".concat(t,"成功")),a.getUserList()):n()})).catch((function(){n()}))})).catch((function(){n()}))},deleteUser:function(e){var a=this;m["MessageBox"].confirm("确定删除账号: ".concat(e.username,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])({userId:e.id}).then((function(e){e.state&&(m["Message"].success("账号删除成功"),a.getUserList())}))})).catch((function(){}))},changeAreaIds:function(){this.userForm.groupIds=[]},getUserInfo:function(e){var a=this;Object(s["c"])({userId:e.id}).then((function(t){if(t.state){var n=t.data.areas.map((function(e){return e.areaPo.name})),o=t.data.groups.map((function(e){return e.groupName}));e.areaNames=n.join(", "),e.groupNames=o.join(", "),e.areaNum=n.length,e.groupNum=o.length,h(e.id).then((function(t){t.state&&(t.data?(e.storageAreas=t.data.map((function(e){return a.storageAreaList[e]})).join(", "),e.storageAreaNum=t.data.length):(e.storageAreas="",e.storageAreaNum=0),a.showExpand=!1,a.$nextTick((function(){a.showExpand=!0})))}))}}))}}},v=f,b=t("4ac2"),_=Object(b["a"])(v,n,o,!1,null,null,null);a["default"]=_.exports},"7fe1":function(e,a,t){},"838a":function(e,a,t){"use strict";t("b0b1")},"8b3f":function(e,a,t){},"8d76":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"map-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择区域",clearable:"",filterable:"",multiple:""},on:{change:e.getMapList},model:{value:e.areaIds,callback:function(a){e.areaIds="string"===typeof a?a.trim():a},expression:"areaIds"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入地图名",clearable:""},on:{change:e.getMapList},model:{value:e.mapName,callback:function(a){e.mapName="string"===typeof a?a.trim():a},expression:"mapName"}},[t("template",{slot:"append"},[t("el-button",{staticClass:"append-btn",attrs:{type:"primary"},on:{click:e.getMapList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){e.isTableShow=!e.isTableShow}}},[e._v(e._s(e.isTableShow?"网格显示":"表格显示"))]),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/add",expression:"'map/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("上传地图")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"},{name:"show",rawName:"v-show",value:e.isTableShow,expression:"isTableShow"}],staticClass:"map-table",attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{label:"地图名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.alias||a.row.name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"所属区域",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.domainList[a.row.areaId])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"大小",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(Math.floor(1e3*a.row.fileSize)+"KB")+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"最后更新",align:"center",width:"152px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.updateTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否启用",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/update",expression:"'map/update'"}],attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.toggleEnable(a.row)}},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable","string"===typeof t?t.trim():t)},expression:"scope.row.enable"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!map/update",expression:"'!map/update'"}]},[e._v(e._s(1===a.row.enable?"已启用":"未启用"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"290"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("router-link",{style:{marginRight:"10px"},attrs:{to:{path:"/mapDetails/"+a.row.id,query:{backPage:"/map/index"}}}},[t("el-button",{attrs:{size:"mini",type:"info",plain:""}},[e._v("详情")])],1),e._v(" "),t("a",{style:{marginRight:"10px"},attrs:{href:("development"===e.nodeEnv?"/api/":"/")+a.row.mapFileUrl.replace(/\\/g,"/")}},[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/download",expression:"'map/download'"}],attrs:{size:"mini",type:"primary",plain:""}},[e._v("下载")])],1),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/update",expression:"'map/update'"}],attrs:{size:"mini",type:"warning",plain:""},on:{click:function(t){return e.openEditDialog(a.row)}}},[e._v("修改")]),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/delete",expression:"'map/delete'"}],attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.deleteMap(a.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTableShow,expression:"!isTableShow"}],staticClass:"map-grid",style:{height:e.innerHeightMinusFilter-203+"px"}},[t("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{gutter:10}},e._l(e.tableList,(function(a){return t("el-col",{key:a.id,attrs:{xs:6,sm:6,md:6,lg:4,xl:4}},[t("el-card",{attrs:{shadow:"hover"}},[t("router-link",{staticClass:"inlineBlock",attrs:{to:{path:"/mapDetails/"+a.id,query:{backPage:"/map/index"}}}},[t("el-image",{staticStyle:{width:"100%",height:"250px",border:"1px solid #eee"},attrs:{src:("development"===e.nodeEnv?"/api/":"/")+a.backgroundImgUrl.replace(/\\/g,"/"),fit:"cover"}})],1),e._v(" "),t("div",{staticStyle:{"padding-top":"20px","text-align":"center",height:"40px",position:"relative"}},[t("span",[e._v(e._s(a.alias||a.name))]),e._v(" "),t("el-dropdown",{staticStyle:{padding:"7px 15px",cursor:"pointer"},attrs:{trigger:"click"}},[t("i",{staticClass:"el-icon-s-operation el-dropdown-link"}),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/download",expression:"'map/download'"}]},[t("a",{attrs:{href:("development"===e.nodeEnv?"/api/":"/")+a.mapFileUrl.replace(/\\/g,"/")}},[t("span",[e._v("  下载  ")])])]),e._v(" "),t("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/update",expression:"'map/update'"}]},[t("span",{on:{click:function(t){return e.openEditDialog(a)}}},[e._v("  修改  ")])]),e._v(" "),t("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"map/delete",expression:"'map/delete'"}]},[t("span",{on:{click:function(t){return e.deleteMap(a)}}},[e._v("  删除  ")])])],1)],1)],1)],1)],1)})),1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.tableList.length<1,expression:"tableList.length < 1"}],style:{textAlign:"center",lineHeight:e.innerHeightMinusFilter-203+"px",height:e.innerHeightMinusFilter-203+"px",color:"#909399",fontSize:"14px"}},[t("span",[e._v("暂无数据")])])],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getMapList}}),e._v(" "),t("el-dialog",{attrs:{visible:e.isAddDialog,width:"410px",center:""},on:{"update:visible":function(a){e.isAddDialog=a},close:e.closeDialog}},[t("span",{attrs:{slot:"title"},slot:"title"},[e._v("上传地图\n      "),t("el-popover",{attrs:{title:"提示",placement:"right",trigger:"hover"}},[e._v("\n        若选择的区域下，已经存在相同名称的地图压缩包, 则覆盖旧地图,\n        并且"),t("b",[e._v("禁用")]),e._v("该地图。\n        "),t("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1),e._v(" "),t("el-form",{ref:"mapForm",attrs:{"label-width":"85px",model:e.mapForm,rules:e.mapRules}},[t("el-form-item",{attrs:{label:"工作区域: ",prop:"areaName"}},[t("el-select",{attrs:{placeholder:"请选择区域",clearable:"",filterable:""},model:{value:e.mapForm.areaName,callback:function(a){e.$set(e.mapForm,"areaName","string"===typeof a?a.trim():a)},expression:"mapForm.areaName"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1)],1),e._v(" "),t("el-upload",{ref:"uploadMap",attrs:{"on-remove":e.resetParams,"on-success":e.uploadSuccess,"on-error":e.uploadErr,"on-exceed":e.exceedLimit,"auto-upload":!1,drag:"",limit:1,action:"/api/map/uploadFile",data:{areaName:e.mapForm.areaName}}},[t("i",{staticClass:"el-icon-upload"}),e._v(" "),t("div",{staticClass:"el-upload__text"},[e._v("\n        将文件拖到此处，或\n        "),t("em",[e._v("点击上传")])]),e._v(" "),t("div",{staticClass:"zip-err-msg",attrs:{slot:"tip"},slot:"tip"},[e._v("\n        "+e._s(e.formZipErrMsg)+"\n      ")])]),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary",loading:e.uploadLoading},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"编辑地图",visible:e.isUpdateDialog,width:"410px",center:""},on:{"update:visible":function(a){e.isUpdateDialog=a},close:e.closeDialog}},[t("el-form",{ref:"mapForm",attrs:{"label-width":"85px",model:e.mapForm,rules:e.mapRules}},[t("el-form-item",{attrs:{label:"地图别名: "}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入地图别名"},model:{value:e.mapForm.alias,callback:function(a){e.$set(e.mapForm,"alias","string"===typeof a?a.trim():a)},expression:"mapForm.alias"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"工作区域: ",prop:"areaId"}},[t("el-select",{attrs:{placeholder:"请选择区域",clearable:"",filterable:""},model:{value:e.mapForm.areaId,callback:function(a){e.$set(e.mapForm,"areaId","string"===typeof a?a.trim():a)},expression:"mapForm.areaId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"楼层: ",prop:"floor"}},[t("el-input-number",{attrs:{precision:0,step:1,"controls-position":"right"},model:{value:e.mapForm.floor,callback:function(a){e.$set(e.mapForm,"floor",e._n(a))},expression:"mapForm.floor"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"转弯角度: ",prop:"determineTurningAngle"}},[t("el-input-number",{attrs:{precision:2,step:1,"controls-position":"right"},model:{value:e.mapForm.determineTurningAngle,callback:function(a){e.$set(e.mapForm,"determineTurningAngle",e._n(a))},expression:"mapForm.determineTurningAngle"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("3612")),r=t("7661"),c=t("2840"),s=t("a68a"),l=t("333d"),d={name:"mapList",props:["innerHeightMinusFilter"],components:{Pagination:l["a"]},data:function(){var e;return e={tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,isTableShow:!0,areaIds:[],mapName:"",isAddDialog:!1,isUpdateDialog:!1,mapForm:{areaName:""},mapRules:{areaName:[{required:!0,trigger:"change",message:"请选择工作区域"}],areaId:[{required:!0,trigger:"change",message:"请选择工作区域"}],floor:[{message:"楼层应为数字",pattern:/^[-.\d]+$/,trigger:"blur"}],determineTurningAngle:[{message:"转弯角度应为数字",pattern:/^[-.\d]+$/,trigger:"blur"}]},formZipErrMsg:""},Object(i["a"])(e,"isAddDialog",!1),Object(i["a"])(e,"uploadLoading",!1),Object(i["a"])(e,"domainList",{}),Object(i["a"])(e,"nodeEnv","production"),e},mounted:function(){var e=this;this.$emit("watchFilterHeight"),Object(c["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),this.getMapList()},methods:{getMapList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};this.mapName&&(a.name=this.mapName),this.areaIds.length>0&&(a.areaIds=this.areaIds.join(",")),this.tableLoading=!0,Object(r["c"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0)}))},openAddDialog:function(){var e=this;this.isEdit=!1,this.mapForm={areaName:""},this.resetParams(),this.isAddDialog=!0,this.$nextTick((function(){e.$refs.mapForm.clearValidate(),e.$refs.uploadMap.clearFiles()}))},closeDialog:function(){this.$refs.mapForm.clearValidate(),this.isAddDialog=!1,this.isUpdateDialog=!1},openEditDialog:function(e){this.isEdit=!0,this.mapForm=JSON.parse(JSON.stringify(e)),this.isUpdateDialog=!0},saveEdit:function(){var e=this;this.$refs.mapForm.validate((function(a){if(a)if(e.isEdit)Object(r["d"])(e.mapForm).then((function(a){a.state&&(s["Message"].success("地图修改成功"),e.isUpdateDialog=!1,e.getMapList())}));else{var t=e.$refs.uploadMap.uploadFiles;if(0===t.length)return void(e.formZipErrMsg="请上传一个zip压缩包文件");var n=t[0].name;if(!/.zip$/.test(n))return void(e.formZipErrMsg="请上传一个zip压缩包文件");if(n.indexOf("-")>-1)return void(e.formZipErrMsg="压缩包名称不允许包含-");e.uploadLoading=!0,e.$refs.uploadMap.submit()}}))},deleteMap:function(e){var a=this;if(e.enable)return s["Message"].warning("请先禁用该地图");s["MessageBox"].confirm("确定删除地图: ".concat(e.alias||e.name,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])(e.id).then((function(e){e.state&&(s["Message"].success("地图删除成功"),a.getMapList())}))})).catch((function(){}))},resetParams:function(){this.formZipErrMsg=""},uploadSuccess:function(e){this.uploadLoading=!1,e.storeSuccess?(s["Message"].success("地图上传成功"),this.isAddDialog=!1,this.getMapList()):this.formZipErrMsg=e.message,this.$refs.uploadMap.clearFiles()},uploadErr:function(e){this.uploadLoading=!1,console.error("uploadFileErr",e),this.formZipErrMsg="error! 请查看控制台错误信息"},exceedLimit:function(){this.formZipErrMsg="当前只允许上传一个文件, 超出限制"},toggleEnable:function(e){var a=this,t=1===e.enable?"启用":"禁用",n=function(){e.enable=1===e.enable?0:1};this.$confirm("确定".concat(t).concat(e.alias||e.name,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["d"])(e).then((function(e){e.state?(a.$message.success("地图".concat(t,"成功")),a.getMapList()):n()}))})).catch((function(){n()}))}}},m=d,u=(t("312c"),t("4ac2")),p=Object(u["a"])(m,n,o,!1,null,null,null);a["default"]=p.exports},"8e02":function(e,a,t){"use strict";t.d(a,"d",(function(){return o})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return r})),t.d(a,"c",(function(){return c}));var n=t("b775");function o(e){return n["a"].post("wms/storage/list",e)}function i(e){return n["a"].post("wms/storage/addOrUpdate",e)}function r(e){return n["a"].delete("wms/storage/delete/"+e)}function c(){return n["a"].get("/wms/storage/detail")}},9207:function(e,a,t){"use strict";t("5525")},"93dc":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"task-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-date-picker",{staticClass:"filter-select",attrs:{type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",clearable:"","picker-options":e.pickerOptions},on:{change:e.getTaskList},model:{value:e.dateFilter,callback:function(a){e.dateFilter="string"===typeof a?a.trim():a},expression:"dateFilter"}}),e._v(" "),t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择区域",clearable:"",filterable:""},on:{change:e.changeAreaFilter},model:{value:e.areaFilter,callback:function(a){e.areaFilter="string"===typeof a?a.trim():a},expression:"areaFilter"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择分组",clearable:"",filterable:""},on:{change:e.getTaskList},model:{value:e.groupFilter,callback:function(a){e.groupFilter="string"===typeof a?a.trim():a},expression:"groupFilter"}},e._l(e.groupList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:!e.areaFilter||a.areaId===e.areaFilter,expression:"!areaFilter || item.areaId === areaFilter"}],key:n,attrs:{label:a.name,value:Number(n)}})})),1),e._v(" "),t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择设备",clearable:"",filterable:""},on:{change:e.getTaskList},model:{value:e.vehicleFilter,callback:function(a){e.vehicleFilter="string"===typeof a?a.trim():a},expression:"vehicleFilter"}},e._l(e.vehicleList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:!e.areaFilter||a.areaId===e.areaFilter,expression:"!areaFilter || value.areaId === areaFilter"}],key:n,attrs:{label:a.name,value:Number(n)}})})),1),e._v(" "),t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择任务状态",clearable:"",filterable:""},on:{change:e.getTaskList},model:{value:e.stateFilter,callback:function(a){e.stateFilter="string"===typeof a?a.trim():a},expression:"stateFilter"}},e._l(e.stateList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入任务名称",clearable:""},on:{change:e.getTaskList},model:{value:e.nameFilter,callback:function(a){e.nameFilter="string"===typeof a?a.trim():a},expression:"nameFilter"}},[t("template",{slot:"append"},[t("el-button",{staticClass:"append-btn",attrs:{type:"primary"},on:{click:e.getTaskList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/list/add",expression:"'task/list/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增调度任务")]),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/list/cancel",expression:"'task/list/cancel'"}],attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.openCancelDialog}},[e._v("按条件取消任务")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""},on:{select:e.handleSelectionChange,"select-all":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-table",{attrs:{data:a.row.taskPos,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{label:"任务类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e.actionList[a.row.action]))]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"任务状态","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"flex-center"},[t("svg-icon",{style:{color:e.stateColorList[a.row.status]},attrs:{"icon-class":"circle"}}),e._v("\n                  "+e._s(e.stateList[a.row.status])+"\n                ")],1)]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"地图名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                "+e._s(e.mapList[a.row.mapId]&&e.mapList[a.row.mapId].name)+"\n              ")]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"目标点",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                "+e._s(a.row.endPointCode)+"\n              ")]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"开始时间",align:"center","min-width":"152"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e._f("dateTime")(a.row.startTime)))]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"结束时间",align:"center","min-width":"152"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e._f("dateTime")(a.row.finishTime)))]}}],null,!0)})],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{label:"任务编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.taskChainPo.id)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"任务名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.taskChainPo.name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"设备ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.taskChainPo.amrId)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"设备名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.vehicleList[a.row.taskChainPo.amrId]&&e.vehicleList[a.row.taskChainPo.amrId].name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"工作区",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.domainList[a.row.taskChainPo.areaId])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"设备分组",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.groupList[a.row.taskChainPo.groupId]&&e.groupList[a.row.taskChainPo.groupId].name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"状态","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"flex-center"},[t("svg-icon",{style:{color:e.stateColorList[a.row.taskChainPo.status]},attrs:{"icon-class":"circle"}}),e._v("\n            "+e._s(e.stateList[a.row.taskChainPo.status])+"\n          ")],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"任务详情",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},e._l(a.row.taskPos,(function(a,n){return t("div",{key:n},[e._v("\n                前往 "+e._s(a.endPointCode)+" 执行\n                "+e._s(e.actionList[a.action])+" 任务\n              ")])})),0),e._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[e._v("查看")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间","min-width":"152",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.taskChainPo.createTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"开始时间","min-width":"152",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.taskChainPo.startTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"结束时间","min-width":"152",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.taskChainPo.finishTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"优先级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.taskPriorityEnum[a.row.taskChainPo.priority])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/list/cancel",expression:"'task/list/cancel'"},{name:"show",rawName:"v-show",value:[0,1].indexOf(a.row.taskChainPo.status)>-1,expression:"[0, 1].indexOf(scope.row.taskChainPo.status) > -1"}],attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.cancelTask([a.row])}}},[e._v("取消")])]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize,pageSizes:[10,25,50,100]},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getTaskList}}),e._v(" "),t("add-task",{attrs:{dialogAddTaskVisible:e.isEditDialog,taskPriorityEnum:e.taskPriorityEnum,actionList:e.actionList,domainList:e.domainList,groupList:e.groupList,mapList:e.enableMapList},on:{"update:dialogAddTaskVisible":function(a){e.isEditDialog=a},"update:dialog-add-task-visible":function(a){e.isEditDialog=a},getTaskList:e.getTaskList}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.selectList.length>0,expression:"selectList.length > 0"}],staticClass:"batch-operation"},[t("el-button",{staticClass:"search-btn",attrs:{type:"danger"},on:{click:function(a){return e.cancelBatchTasks("ids")}}},[e._v("批量取消")])],1),e._v(" "),t("el-dialog",{attrs:{title:"批量取消",visible:e.isCancelDialog,width:"400px"},on:{close:e.closeCancelDialog,"update:visible":function(a){e.isCancelDialog=a}}},[t("el-form",{ref:"cancelForm",attrs:{"label-width":"90px",model:e.cancelForm,rules:e.cancelRoles}},[t("el-form-item",{attrs:{label:"筛选条件: ",prop:"typeId"}},[t("el-cascader",{attrs:{options:e.filterList},model:{value:e.cancelForm.typeId,callback:function(a){e.$set(e.cancelForm,"typeId",a)},expression:"cancelForm.typeId"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeCancelDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.cancelBatchTasks("condition")}}},[e._v("确 定")])],1)],1)],1)},o=[],i=t("7978f"),r=(t("a450"),t("1bc7"),t("4f6d")),c=t("fbb2"),s=t("0aa6"),l=t("2840"),d=t("7661"),m=t("a68a"),u=t("333d"),p=t("cadb"),h=t("2da3"),g=t("0f8a"),f={name:"task",props:["innerHeightMinusFilter"],components:{Pagination:u["a"],AddTask:h["default"]},data:function(){return{tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,dateFilter:[],areaFilter:"",groupFilter:"",vehicleFilter:"",stateFilter:"",nameFilter:"",pickerOptions:p["c"],stateList:g["e"],stateColorList:g["c"],actionList:{},domainList:{},mapList:{},enableMapList:{},groupList:{},vehicleList:{},isEditDialog:!1,selectList:[],expandKeys:[],taskPriorityEnum:g["d"],isCancelDialog:!1,cancelForm:{typeId:""},cancelRoles:{typeId:[{required:!0,trigger:"blur",message:"请选择任务筛选条件"}]},filterList:[{value:"amr",label:"按AMR取消",children:[]},{value:"area",label:"按区域取消",children:[]}]}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),Object(c["e"])().then((function(a){if(a.state&&a.data.data){var t=[];a.data.data.forEach((function(a){t.push({value:a.amrId,label:a.name}),e.$set(e.vehicleList,a.amrId,a)})),e.filterList[0].children=t}})),Object(l["c"])().then((function(a){if(a.state&&a.data.data){var t=[];a.data.data.forEach((function(a){t.push({value:a.id,label:a.name}),e.$set(e.domainList,a.id,a.name)})),e.filterList[1].children=t}})),Object(d["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.mapList,a.id,a),a.enable&&e.$set(e.enableMapList,a.id,a)}));var t=e.$route.query,n=t.vehicleId,o=t.mapId;n&&o&&e.openAddDialog()})),Object(s["c"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.groupList,a.id,a)}))})),Object(r["e"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.actionList,a.action,a.name)}))})),this.getTaskList()},methods:{getTaskList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize,taskChain:{}};this.dateFilter&&this.dateFilter.length>0&&(a.startTime=this.dateFilter[0],a.endTime=this.dateFilter[1]),this.areaFilter&&(a.taskChain.areaId=this.areaFilter),this.groupFilter&&(a.taskChain.groupId=this.groupFilter),""!==this.stateFilter&&(a.taskChain.status=this.stateFilter),this.vehicleFilter&&(a.taskChain.amrId=this.vehicleFilter),this.nameFilter&&(a.taskChain.name=this.nameFilter),this.tableLoading=!0,Object(r["f"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0,e.selectList=[])}))},openAddDialog:function(){this.isEditDialog=!0},cancelTask:function(e){var a=this,t=Object(i["a"])(e,1),n=t[0];m["MessageBox"].confirm("确定取消该任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["c"])({id:n.taskChainPo.id}).then((function(e){e.state&&(m["Message"].success("任务取消成功"),a.getTaskList())}))})).catch((function(){}))},changeAreaFilter:function(){this.groupFilter="",this.vehicleFilter="",this.getTaskList()},handleSelectionChange:function(e){var a=[];e.forEach((function(e){a.push(e.taskChainPo.id)})),this.selectList=a},openCancelDialog:function(){this.cancelForm={typeId:""},this.isCancelDialog=!0},closeCancelDialog:function(){this.$refs.cancelForm.clearValidate(),this.isCancelDialog=!1},cancelBatchTasks:function(e){var a=this;if("ids"===e){var t={ids:this.selectList};Object(r["b"])(t).then((function(e){e.state&&(m["Message"].success("批量取消任务成功"),a.getTaskList())}))}else this.$refs.cancelForm.validate((function(e){if(e){var t=Object(i["a"])(a.cancelForm.typeId,2),n=t[0],o=t[1],c="amr"===n?{amrId:o}:{areaId:o};Object(r["b"])(c).then((function(e){e.state&&(a.isCancelDialog=!1,m["Message"].success("批量取消任务成功"),a.getTaskList())}))}}))}}},v=f,b=(t("2d5aa"),t("4ac2")),_=Object(b["a"])(v,n,o,!1,null,null,null);a["default"]=_.exports},98033:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"abnormal-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择分组",clearable:"",filterable:""},on:{change:e.getBatteryList},model:{value:e.groupFilter,callback:function(a){e.groupFilter="string"===typeof a?a.trim():a},expression:"groupFilter"}},e._l(e.groupList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:Number(a)}})})),1),e._v(" "),t("el-date-picker",{ref:"datePicker",staticClass:"filter-select",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.getBatteryList},model:{value:e.dateTimeFilter,callback:function(a){e.dateTimeFilter=a},expression:"dateTimeFilter"}}),e._v(" "),t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入电池编号",clearable:""},on:{change:e.getBatteryList},model:{value:e.inputFilter,callback:function(a){e.inputFilter="string"===typeof a?a.trim():a},expression:"inputFilter"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:e.getBatteryList}},[e._v("搜索")])],1)],2)],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-258,"header-cell-style":{background:"#eee"},"highlight-current-row":"","tooltip-effect":"dark"}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"amrId",label:"ID",sortable:"",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(a){return e.beRead(n)}}},[e._v("标记为已读")])]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getBatteryList}})],1)},o=[],i=(t("a450"),t("1bc7"),t("333d")),r=t("4856"),c=t("2840"),s=t("0aa6"),l=(t("a68a"),{name:"abnormal",props:["innerHeightMinusFilter"],components:{Pagination:i["a"]},data:function(){return{tableList:[],tableLoading:!0,currentPage:1,pageSize:10,total:0,onLineAbnormalNum:0,groupFilter:"",dateTimeFilter:[],inputFilter:"",domainList:{},groupList:{},pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var a=new Date,t=new Date;t.setTime((new Date).setHours(0,0,0,0)),e.$emit("pick",[t,a])}},{text:"昨天",onClick:function(e){e.$emit("pick",[yesterdayStart(),yesterdayEnd()])}},{text:"最近一周",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]}}},methods:{mountedFun:function(){var e=this;this.$emit("watchFilterHeight"),Object(c["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),Object(s["c"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.groupList,a.id,a.name)}))})),this.getBatteryList()},getBatteryList:function(){var e=this;this.tableLoading=!0;var a={currentPage:this.currentPage,pageSize:this.pageSize};this.dateTimeFilter&&this.dateTimeFilter.length>0&&(a.startTime=formatTime(this.dateTimeFilter[0]),a.endTime=formatTime(this.dateTimeFilter[1])),this.inputFilter&&(a.name=this.inputFilter),Object(r["b"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0)})),Object(r["b"])().then((function(a){e.onLineAbnormalNum=a.data.length||0}))},beRead:function(e){}}}),d=l,m=(t("cf2a"),t("4ac2")),u=Object(m["a"])(d,n,o,!1,null,"73e107bb",null);a["default"]=u.exports},"98e5":function(e,a,t){"use strict";t("f2a3")},"9d76":function(e,a,t){},"9ed6":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-container",{staticClass:"login-container"},[t("el-header",{staticClass:"login-header"},[t("div",{staticClass:"login-logo-title"},[e.hiddenLogo?e._e():t("img",{attrs:{src:e.logo}}),e._v(" "),t("span",[e._v(e._s(e.title))])])]),e._v(" "),t("el-main",{staticClass:"login-main"},[t("div",{staticClass:"content-container"},[t("div",{staticClass:"login-scene"},[t("img",{attrs:{src:e.scene}})]),e._v(" "),t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v("登录")])]),e._v(" "),t("el-form-item",{staticStyle:{background:"#fff"},attrs:{prop:"username"}},[t("span",{staticClass:"icon-item"},[t("i",{staticClass:"icon iconfont icon-icon-user"})]),e._v(" "),t("el-input",{ref:"userInput",attrs:{placeholder:"请输入用户名称","auto-complete":"on",clearable:"",maxlength:20},model:{value:e.loginForm.username,callback:function(a){e.$set(e.loginForm,"username","string"===typeof a?a.trim():a)},expression:"loginForm.username"}})],1),e._v(" "),t("el-form-item",{staticStyle:{background:"#fff"},attrs:{prop:"password"}},[t("span",{staticClass:"icon-item"},[t("i",{staticClass:"icon iconfont icon-mima54"})]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入登录密码","auto-complete":"on","show-password":"",clearable:"",maxlength:20},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleLogin(a)}},model:{value:e.loginForm.password,callback:function(a){e.$set(e.loginForm,"password","string"===typeof a?a.trim():a)},expression:"loginForm.password"}})],1),e._v(" "),t("el-button",{staticStyle:{width:"100%","margin-top":"10px","margin-bottom":"30px","font-size":"16px"},attrs:{loading:e.loading,type:"warning"},nativeOn:{click:function(a){return a.preventDefault(),e.handleLogin(a)}}},[e._v("登录")])],1)],1)]),e._v(" "),t("el-footer")],1)],1)},o=[],i={name:"Login",data:function(){return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入账号"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]},loading:!1,redirect:void 0,logo:"./static/img/logo.png",hiddenLogo:window.globalConfig.hiddenLogo,title:window.globalConfig.title,scene:"./static/img/scene.svg"}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},mounted:function(){var e=this;this.$nextTick((function(){e.$refs.userInput.focus()}))},methods:{handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(a){a&&(e.loading=!0,e.$store.dispatch("Login",e.loginForm).then((function(){e.loading=!1,e.$router.push({path:e.redirect||"/"})})).catch((function(){e.loading=!1})))}))}}},r=i,c=(t("2017"),t("b30e"),t("4ac2")),s=Object(c["a"])(r,n,o,!1,null,"274b61f8",null);a["default"]=s.exports},"9fc5":function(e,a,t){"use strict";t("d036")},a1fb:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"notRole"},[t("div",{staticClass:"info"},[t("h1",[e._v("用户角色不存在，请联系管理员")]),e._v(" "),t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.backLogin}},[e._v("返回登录页")])],1)])},o=[],i=(t("6a61"),t("6764")),r={methods:{backLogin:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("LogOut");case 2:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}()}},c=r,s=(t("9fc5"),t("4ac2")),l=Object(s["a"])(c,n,o,!1,null,null,null);a["default"]=l.exports},a36b:function(e,a,t){e.exports=t.p+"static/img/404.a57b6f31.png"},a64c:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-tabs",{staticClass:"battery-container",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},e._l(e.tabList,(function(a,n){return t("el-tab-pane",{key:n,style:{height:e.innerHeight-135+"px"},attrs:{name:a[0]}},[t("el-badge",{attrs:{slot:"label",value:12,hidden:3!==n},slot:"label"},[t("span",[e._v(e._s(a[1]))])]),e._v(" "),0===n&&e.activeName===a[0]?t("battery-management",{ref:"childrenRouter",refInFor:!0,attrs:{innerHeightMinusFilter:e.innerHeightMinusFilter},on:{watchFilterHeight:e.watchFilterHeight}}):1===n&&e.activeName===a[0]?t("electric-change",{ref:"childrenRouter",refInFor:!0,attrs:{innerHeightMinusFilter:e.innerHeightMinusFilter},on:{watchFilterHeight:e.watchFilterHeight}}):2===n&&e.activeName===a[0]?t("charge-count",{ref:"childrenRouter",refInFor:!0,attrs:{innerHeightMinusFilter:e.innerHeightMinusFilter},on:{watchFilterHeight:e.watchFilterHeight}}):3===n&&e.activeName===a[0]?t("battery-abnormal",{ref:"childrenRouter",refInFor:!0,attrs:{innerHeightMinusFilter:e.innerHeightMinusFilter},on:{watchFilterHeight:e.watchFilterHeight}}):e._e()],1)})),1)},o=[],i=t("2e78"),r=t("c937"),c=t("7ad1"),s=t("98033"),l={components:{BatteryManagement:i["default"],ElectricChange:r["default"],ChargeCount:c["default"],BatteryAbnormal:s["default"]},props:["innerHeight","innerHeightMinusFilter"],data:function(){return{activeName:"0",tabList:[["0","电池管理"],["1","电量变化"],["2","充电次数"],["3","电池异常"]]}},mounted:function(){this.handleClick()},methods:{watchFilterHeight:function(){this.$emit("watchFilterHeight")},handleClick:function(){var e=this;this.$nextTick((function(){e.$refs.childrenRouter[0].mountedFun()}))},onResize:function(){var e=this;this.$nextTick((function(){e.$refs.childrenRouter[0].onResize&&e.$refs.childrenRouter[0].onResize()}))}}},d=l,m=(t("5a7e"),t("4ac2")),u=Object(m["a"])(d,n,o,!1,null,"907bbfda",null);a["default"]=u.exports},aa2d:function(e,a,t){},ab02:function(e,a,t){},ab27:function(e,a,t){},af10:function(e,a,t){},affb:function(e,a,t){},b0b1:function(e,a,t){},b2b7:function(e,a,t){},b302:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"planTask-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/plan/add",expression:"'task/plan/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增定时任务")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""},on:{"expand-change":e.getPlanTaskDetail}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.showExpand?t("el-table",{attrs:{data:a.row.detail||[],"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{prop:"taskChainTemplateId",label:"任务链id",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"taskChainTemplateName",label:"任务链名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"开始时间",align:"center",width:"152px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                "+e._s(e._f("dateTime")(a.row.startTime))+"\n              ")]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"结束时间",align:"center",width:"152px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                "+e._s(e._f("dateTime")(a.row.endTime))+"\n              ")]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"loopCount",label:"循环次数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"executeCount",label:"已下发次数",align:"center"}})],1):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{label:"任务编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.id)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"任务名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"任务状态","min-width":"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"flex-center"},[t("svg-icon",{style:{color:e.stateColorList[a.row.status]},attrs:{"icon-class":"circle"}}),e._v("\n            "+e._s(e.stateList[a.row.status])+"\n          ")],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"启动时间","min-width":"152",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.startTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"结束时间","min-width":"152",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.endTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"定时循环类型",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.loopTypeList[a.row.loopType])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"loopCount",label:"循环次数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"激活",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/plan/update",expression:"'task/plan/update'"}],on:{change:function(t){return e.switchBtn(a.row)}},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable","string"===typeof t?t.trim():t)},expression:"scope.row.enable"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!task/plan/update",expression:"'!task/plan/update'"}]},[e._v(e._s(a.row.enable?"已激活":"未激活"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/plan/delete",expression:"'task/plan/delete'"}],attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deletePlanTask(a.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getPlanTaskList}}),e._v(" "),t("el-dialog",{attrs:{title:e.isEdit?"编辑定时任务":"新增定时任务",visible:e.isDialog,width:"570px"},on:{close:e.closeDialog,"update:visible":function(a){e.isDialog=a}}},[t("el-form",{ref:"planTaskForm",attrs:{"label-width":"110px",model:e.planTaskForm,rules:e.taskRoles}},[t("el-form-item",{attrs:{label:"任务名称: ",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入任务名称",clearable:""},model:{value:e.planTaskForm.name,callback:function(a){e.$set(e.planTaskForm,"name","string"===typeof a?a.trim():a)},expression:"planTaskForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"任务链: ",prop:"taskChain"}},[t("el-select",{attrs:{filterable:""},model:{value:e.planTaskForm.taskChain,callback:function(a){e.$set(e.planTaskForm,"taskChain","string"===typeof a?a.trim():a)},expression:"planTaskForm.taskChain"}},e._l(e.taskChains,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"定时区间: ",prop:"timeRange"}},[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:e.planTaskForm.timeRange,callback:function(a){e.$set(e.planTaskForm,"timeRange",a)},expression:"planTaskForm.timeRange"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"循环次数: ",prop:"loopCount"}},[t("el-input-number",{attrs:{min:1,max:e.maxCount,precision:0,step:1,"controls-position":"right"},model:{value:e.planTaskForm.loopCount,callback:function(a){e.$set(e.planTaskForm,"loopCount",e._n(a))},expression:"planTaskForm.loopCount"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"定时循环类型: ",prop:"loopType"}},[t("el-select",{model:{value:e.planTaskForm.loopType,callback:function(a){e.$set(e.planTaskForm,"loopType","string"===typeof a?a.trim():a)},expression:"planTaskForm.loopType"}},e._l(e.loopTypeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"激活:"}},[t("el-switch",{model:{value:e.planTaskForm.enable,callback:function(a){e.$set(e.planTaskForm,"enable",a)},expression:"planTaskForm.enable"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=t("7978f"),r=(t("a450"),t("1bc7"),t("3612")),c=(t("e680"),t("b775"));function s(e){return c["a"].post("/planTask/list",e)}function l(e){return c["a"].post("/planTask/add",e)}function d(e){return c["a"].post("/planTask/update",e)}function m(e){return c["a"].delete("/planTask/delete/"+e)}function u(e){var a=e.enable,t=e.id;return c["a"].get("/planTask/enable/".concat(Number(a),"/").concat(t))}function p(e){return c["a"].get("/planTask/executeDetail/"+e)}var h=t("ca39"),g=t("4f6d"),f=t("2840"),v=t("7661"),b=t("0aa6"),_=t("a68a"),y=t("333d"),k=t("0f8a"),L={name:"planTask",props:["innerHeightMinusFilter"],components:{Pagination:y["a"]},data:function(){return{tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,domainList:{},mapList:{},actionList:{},groupList:{},taskChains:{},groupFilter:"",nameFilter:"",stateList:{0:"未开始",1:"进行中",3:"已结束"},stateColorList:{0:"#e6a23c",1:"#77e640",3:"#67C23A"},isDialog:!1,isEdit:!1,expandKeys:[],taskPriorityEnum:k["d"],planTaskForm:{name:"",enable:!0,timeRange:[new Date,(new Date).getTime()+6e5],endTime:"",loopCount:this.maxCount,loopType:0,taskChain:"",sequence:0},taskRoles:Object(r["a"])({name:[{required:!0,trigger:"blur",message:"请输入任务名称"}],timeRange:[{required:!0,trigger:"change",message:"请选择定时区间"}],endTime:[{required:!0,trigger:"change",message:"请选择结束时间"}],loopType:[{required:!0,trigger:"change",message:"请选择循环类型"}],taskChain:[{required:!0,trigger:"change",message:"请选择任务链"}],loopCount:[{required:!0,trigger:"blur",message:"请输入下发次数"},{message:"下发次数应为数字",pattern:/^[\d]+$/,trigger:"blur"}]},"loopType",[{required:!0,trigger:"change",message:"请选择定时循环类型"}]),loopTypeList:{0:"不重复",1:"每天"},showExpand:!0,maxCount:300}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),this.getPlanTaskList(),Object(f["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),Object(v["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.mapList,a.id,a)}))})),Object(b["c"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.groupList,a.id,a)}))})),Object(g["e"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.actionList,a.action,a.name)}))})),Object(h["c"])().then((function(a){a.state&&a.data.list&&a.data.list.forEach((function(a){e.$set(e.taskChains,a.taskChainTemplatePo.id,a.taskChainTemplatePo.name)}))}))},methods:{getPlanTaskList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};this.groupFilter&&(a.groupId=this.groupFilter),this.nameFilter&&(a.name=this.nameFilter),this.tableLoading=!0,s(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.list||[],e.total=a.data.total||0)}))},openAddDialog:function(){var e=this;this.isEdit=!1,this.planTaskForm={name:"",enable:!0,timeRange:[new Date,(new Date).getTime()+6e5],loopCount:this.maxCount,loopType:0,taskChain:"",sequence:0},this.isDialog=!0,this.$nextTick((function(){e.$refs.planTaskForm.clearValidate()}))},closeDialog:function(){this.$refs.planTaskForm.clearValidate(),this.isDialog=!1},openEditDialog:function(e){var a=this;this.isEdit=!0;var t=e.name,n=e.enable,o=e.startTime,i=e.endTime,r=e.loopCount,c=e.loopType,s=e.id;this.planTaskForm={name:t,enable:n,timeRange:[o,i],loopCount:r,loopType:c,id:s},p(s).then((function(e){e.state&&(a.$set(a.planTaskForm,"taskChain",e.data[0].taskChainTemplateId),a.$set(a.planTaskForm,"sequence",0),a.isDialog=!0)}))},saveEdit:function(){var e=this;this.$refs.planTaskForm.validate((function(a){if(a){var t=e.planTaskForm,n=t.name,o=t.enable,r=t.timeRange,c=t.loopCount,s=t.loopType,m=t.taskChain,u=t.sequence,p=t.id,h=Object(i["a"])(r,2),g=h[0],f=h[1],v={planTaskDetailPos:[{taskChainTemplateId:m,sequence:u}],planTaskPo:{enable:o,name:n,startTime:g,endTime:f,loopCount:c,loopType:s}};e.isEdit?(v.id=p,d(v).then((function(a){a.state&&(_["Message"].success("定时任务修改成功"),e.isDialog=!1,e.getPlanTaskList())}))):l(v).then((function(a){a.state&&(_["Message"].success("定时任务添加成功"),e.isDialog=!1,e.getPlanTaskList())}))}}))},deletePlanTask:function(e){var a=this;_["MessageBox"].confirm("确定删除定时任务: ".concat(e.name," ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m(e.id).then((function(e){e.state&&(_["Message"].success("定时任务删除成功"),a.getPlanTaskList())}))})).catch((function(){}))},switchBtn:function(e){var a=this,t=e.enable?"激活":"禁用",n=function(){e.enable=!e.enable};this.$confirm("确定".concat(t,"定时任务: ").concat(e.name,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(e).then((function(e){e.state?(a.$message.success("定时任务".concat(t,"成功")),a.getPlanTaskList()):n()}))})).catch((function(){n()}))},getPlanTaskDetail:function(e){var a=this;p(e.id).then((function(t){t.state&&(e.detail=t.data||[],a.showExpand=!1,a.$nextTick((function(){a.showExpand=!0})))}))}}},w=L,x=(t("e4e7"),t("4ac2")),C=Object(x["a"])(w,n,o,!1,null,null,null);a["default"]=C.exports},b30e:function(e,a,t){"use strict";t("0b3f")},b3e2:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"map-container",attrs:{id:"map-container"}},[t("div",{attrs:{id:"map-view"}}),e._v(" "),t("div",{staticClass:"ui-layer map-layer"},[t("el-select",{staticStyle:{width:"250px","margin-right":"10px",color:"#ccc"},attrs:{"popper-append-to-body":!1,placeholder:"地图名",size:"small"},on:{change:e.getMapData},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}},e._l(e.areaLists,(function(a){return t("el-option-group",{key:a.id,attrs:{label:a.name}},e._l(a["topologyMapPos"],(function(a){return t("el-option",{key:a.id,attrs:{label:a.name,value:a.id}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("span",[e._v(e._s(a.name))]),e._v(" "),t("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){return t.stopPropagation(),e.$router.push({path:"/mapDetails/"+a.id,query:{backPage:"/"}})}}},[e._v("详情\n            ")])],1)])})),1)})),1),e._v(" "),t("div",[t("el-button",{attrs:{icon:"el-icon-s-tools",size:"small",type:"primary"},on:{click:function(a){e.layersVisible=!e.layersVisible}}}),e._v(" "),e.layersVisible?e._l(["路线","拓扑点","激光图","AMR标签","任务路径"],(function(a,n){return t("el-button",{key:n,staticClass:"layer-btn",class:{"layer-btn-active":e.activeArr.includes(n)},attrs:{size:"small"},on:{click:function(a){return e.setLayer(n)}}},[e._v(e._s(a)+"\n        ")])})):e._e()],2)],1),e._v(" "),t("vue-drag-resize",{directives:[{name:"show",rawName:"v-show",value:e.topVisible,expression:"topVisible"}],attrs:{h:250,isDraggable:!0,isResizable:!1,x:400,y:100,z:1001}},[t("div",{staticClass:"ui-layer top-layer"},[e._l(e.prop,(function(a,n){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.prop.length>0,expression:"prop.length > 0"}],key:n,staticClass:"top-item"},[1===n?t("div",{staticStyle:{margin:"15px 0",height:"2px",background:"-webkit-linear-gradient(left, rgba(45, 96, 206, 0.1), #2d60ce, rgba(45, 96, 206, 0.1))"}}):t("p",[t("span",{staticClass:"top-item-label"},[e._v(e._s(a.label))]),e._v(" "),t("span",[e._v(e._s(a.value))])])])})),e._v(" "),t("div",{staticClass:"border-top"}),e._v(" "),t("div",{staticClass:"border-close"},[t("i",{staticClass:"el-icon-close",on:{click:function(a){e.topVisible=!1}}})]),e._v(" "),t("div",{staticClass:"border-bottom"})],2)]),e._v(" "),e.info?t("vue-drag-resize",{attrs:{h:300,isDraggable:!0,isResizable:!1,w:350,x:50,y:400,z:1001,dragCancel:"button,button>span,.el-icon-close,.info-box-btn"}},[t("div",{staticClass:"ui-layer info-layer"},[t("div",{staticClass:"info-title"},[t("span",{staticStyle:{color:"#0075d9","font-size":"16px"}},[e._v("车名")]),e._v(" "),t("span",{staticStyle:{color:"#0075d9"}},[e._v(e._s(e.info["name"]))]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.$router.push({path:"/task/list",query:{mapId:e.value,vehicleId:e.info["id"]}})}}},[e._v("新增\n        ")])],1),e._v(" "),t("div",{staticClass:"info-btn"},[t("span",{staticClass:"info-box-btn",class:{"active-box":0===e.infoState},on:{click:function(a){e.infoState=0}}},[e._v("基本信息")]),e._v(" "),t("span",{staticClass:"info-box-btn",class:{"active-box":1===e.infoState},on:{click:function(a){e.infoState=1}}},[e._v("任务信息")]),e._v(" "),t("span",{staticClass:"info-box-btn",class:{"active-box":2===e.infoState},on:{click:function(a){e.infoState=2}}},[e._v("任务进度")])]),e._v(" "),0===e.infoState?t("div",[t("div",{staticClass:"info-item"},[t("div",{staticClass:"item-title"},[e._v("电量")]),e._v(" "),t("div",{staticClass:"item-content"},[t("span",{staticClass:"battery",class:{"battery-low":e.info["batteryPercentile"]<30}},[t("span",{staticClass:"battery-size",style:{height:Math.min(84,e.info["batteryPercentile"])+"%",backgroundColor:e.info["batteryPercentile"]<30?"#fc2201":"#38ffae"}})]),e._v(" "),t("span",[e._v(e._s(e.info["batteryPercentile"])+"%")])]),e._v(" "),t("div",{staticClass:"item-title"},[e._v("状态")]),e._v(" "),t("div",{staticClass:"item-content"},[t("el-button",{style:{backgroundColor:[6,8].includes(e.info["stateId"])?"#fc2201":"#4987ff",borderColor:"transparent",cursor:"text"},attrs:{size:"mini",type:"danger"}},[e._v("\n              "+e._s(e.info["state"])+"\n            ")])],1)]),e._v(" "),t("div",{staticClass:"info-item"},[t("div",{staticClass:"item-title"},[e._v("坐标")]),e._v(" "),t("div",{staticClass:"item-content"},[e._v(e._s(e.info["coordinate"]["x"])+" , "+e._s(e.info["coordinate"]["y"]))]),e._v(" "),t("div",{staticClass:"item-title"},[e._v("位置")]),e._v(" "),t("div",{staticClass:"item-content"},[e._v(e._s(e.info["coordinate"]["location"]))])])]):e._e(),e._v(" "),t("div",{staticClass:"border-top"}),e._v(" "),t("div",{staticClass:"border-close"},[t("i",{staticClass:"el-icon-close",on:{click:function(a){e.activeInfoId=0}}})]),e._v(" "),t("div",{staticClass:"border-bottom"})])]):e._e(),e._v(" "),t("div",{staticClass:"ui-layer agv-layer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.tableVisible,expression:"tableVisible"}]},[t("div",{staticStyle:{color:"#999","text-indent":"20px"}},[e._v("任务信息")]),e._v(" "),t("table",[e._m(0),e._v(" "),t("tbody",e._l(e.amrList,(function(a,n){return t("tr",{key:n,on:{click:function(t){e.activeInfoId=a["id"]}}},[t("td",[e._v(e._s(a["name"]))]),e._v(" "),t("td",[e._v(e._s(a["state"]))]),e._v(" "),t("td",[e._v(e._s(a["batteryPercentile"])+"%")]),e._v(" "),t("td",[e._v(e._s(a["amrException"]["exception"].join("-")))]),e._v(" "),t("td",[t("el-link",[e._v("详情")])],1)])})),0)]),e._v(" "),t("div",{staticClass:"border-top"}),e._v(" "),t("div",{staticClass:"border-bottom"})]),e._v(" "),t("div",{staticClass:"agv-list"},[t("div",[e._v("  总数 "),t("h2",{staticStyle:{display:"inline-block"}},[e._v(e._s(e.amrList.length))])]),e._v(" "),t("p",[t("span",{staticClass:"status-icon status_1"},[e._v(e._s(e.amrList.filter((function(e){return 1===e["stateId"]})).length))]),e._v(" "),t("span",{staticStyle:{color:"#888"}},[e._v("空闲")])]),e._v(" "),t("p",[t("span",{staticClass:"status-icon status_2"},[e._v(e._s(e.amrList.filter((function(e){return 2===e["stateId"]})).length))]),e._v(" "),t("span",{staticStyle:{color:"#fff"}},[e._v("作业")])]),e._v(" "),t("p",[t("span",{staticClass:"status-icon status_3"},[e._v(e._s(e.amrList.filter((function(e){return 3===e["stateId"]})).length))]),e._v(" "),t("span",{staticStyle:{color:"#fff"}},[e._v("充电")])]),e._v(" "),t("p",[t("span",{staticClass:"status-icon status_4"},[e._v(e._s(e.amrList.filter((function(e){return 4===e["stateId"]})).length))]),e._v(" "),t("span",{staticStyle:{color:"#fff"}},[e._v("等待")])]),e._v(" "),t("p",[t("span",{staticClass:"status-icon status_5"},[e._v(e._s(e.amrList.filter((function(e){return 8===e["stateId"]})).length))]),e._v(" "),t("span",{staticStyle:{color:"#fff",background:"radial-gradient(#902851,rgba(144,40,81,0.5))"}},[e._v("异常")])]),e._v(" "),t("p",[t("span",{staticClass:"status-icon status_5"},[e._v(e._s(e.amrList.filter((function(e){return 6===e["stateId"]})).length))]),e._v(" "),t("span",{staticStyle:{color:"#fff",background:"radial-gradient(#902851,rgba(144,40,81,0.5))"}},[e._v("暂停")])]),e._v(" "),t("p",[t("span",{staticClass:"status-icon status_6"},[e._v(e._s(e.amrList.filter((function(e){return 5===e["stateId"]})).length))]),t("span",{staticStyle:{color:"#fff"}},[e._v("托管")])])]),e._v(" "),t("i",{staticClass:"table-btn",class:{"el-icon-d-arrow-left":!e.tableVisible,"el-icon-d-arrow-right":e.tableVisible},on:{click:function(a){e.tableVisible=!e.tableVisible}}})]),e._v(" "),t("div",{staticClass:"nowTime"},[e._v(e._s(e.nowTime))])],1)},o=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("thead",[t("tr",{staticStyle:{background:"-webkit-linear-gradient(left,#0047af,rgba(0,71,175,0.1))"}},[t("th",[e._v("机器人")]),e._v(" "),t("th",[e._v("状态")]),e._v(" "),t("th",[e._v("电量")]),e._v(" "),t("th",[e._v("告警")]),e._v(" "),t("th",[e._v("详情")])])])}],i=(t("fc02"),t("aa18"),t("982e"),t("a450"),t("1bc7"),t("e5b4"),t("6a61"),t("6764")),r=(t("e680"),t("7c98")),c=t("7cf8"),s=(t("5f87"),t("8c92")),l=t.n(s),d=t("cadb"),m=20,u={data:function(){return{timer:0,timerTime:1200,layersVisible:!1,activeArr:[0,2,3,4],mapMonitor:null,nodesMapper:{},opt:null,prop:[],topVisible:!1,tableVisible:!1,amrList:[],infoState:0,info:null,activeInfoId:0,searchVal:"",areaLists:[],value:Number(l.a.get("map__value"))||0,nowTimeTimer:0,nowTime:""}},beforeDestroy:function(){clearInterval(this.timer),this.mapMonitor=null,this.nowTimeTimer&&clearInterval(this.nowTimeTimer)},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])().then((function(e){if(a.areaLists=e.data.map((function(e){return e["areaPo"]["topologyMapPos"]=e["topologyMapPos"],e["areaPo"]})),!a.value){var t=e.data.find((function(e){return e["topologyMapPos"].filter((function(e){return e[0]}))}));a.value=t["topologyMapPos"][0]["id"]||0}}));case 2:this.resetMapSize(),this.mapMonitor=new MapMonitor(document.getElementById("map-view")),this.getMapData(),this.nowTimeTimer&&clearInterval(this.nowTimeTimer),this.nowTimeTimer=setInterval((function(){a.nowTime=Object(d["b"])()}),1e3);case 7:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),methods:{onResize:function(){this.resetMapSize(),this.mapMonitor&&this.mapMonitor.onWindowResize()},getMapData:function(e){var a=this;console.log(this.value,e),this.value&&Object(c["b"])(this.value||e).then((function(e){l.a.set("map__value",a.value),a.activeInfoId=0;var t=e.data,n=t.Edge,o=t.Vertex,i=e.data["topologyMap"],r=i.backgroundImgUrl,s=i.height,d=i.weight,u=i.originX,p=i.originY,h=o.map((function(e){var t=e["vertexPo"];return a.nodesMapper[t.code]=t,{node:t.code,alias:t.alias,x:t.x*m,y:-t.y*m,type:Number(t.type)}})),g=n.map((function(e){var t=e["edgePo"],n=a.nodesMapper[t["source"]],o=a.nodesMapper[t["target"]];return{id:t.id,startCode:t["source"],endCode:t["target"],startPos:[n["x"]*m,0,-n["y"]*m],endPos:[o["x"]*m,0,-o["y"]*m]}}));a.opt={floor:r,width:d*m,height:s*m,minX:u*m,minY:p*m,nodes:h,routes:g},a.mapMonitor.createScene(a.opt),a.timer&&clearInterval(a.timer),a.timer=setInterval((function(){Object(c["d"])().then((function(e){var t=e.data.filter((function(e){return e.mapId===a.value}));a.amrList=t,a.info=t.find((function(e){return e["id"]===a.activeInfoId}))||null,t.length<1?a.mapMonitor.clearAniObjs():t.forEach((function(e){var t=[],n=[];try{t=e["unFinishRoute"]["unfinishedVertexes"].map((function(e){var a=e.x,t=e.y;return[a*m,2,-t*m]}))}catch(i){}e.lockedPoint&&e.lockedPoint.forEach((function(t){var o=a.nodesMapper[t]||e["unFinishRoute"]&&e["unFinishRoute"]["unfinishedVertexes"]&&e["unFinishRoute"]["unfinishedVertexes"].filter((function(e){return e.code===t}))[0];if(o){var i=o.x,r=o.y;n.push([i*m,-r*m])}}));var o={code:e["name"],id:Number(e["id"]),x:e["coordinate"]["x"]*m,y:2,z:-e["coordinate"]["y"]*m,angle:e["coordinate"]["theta"],type:e["stateId"]||0,path:a.activeInfoId===e["id"]?t:[],occupiedNodes:a.activeInfoId===e["id"]?n:[],times:a.timerTime};a.mapMonitor.update(o)}))}))}),a.timerTime),a.mapMonitor.clickNodeCallback=function(e){var t=a.nodesMapper[e];a.mapMonitor.locate([t["x"]*m,1,-t["y"]*m]),a.topVisible=!0,a.prop=[],[["id","点位ID"],[],["alias","别名"],["code","编码"],["allowPark","停靠"],["theta","角度"],["type","类型"],["x","坐标 x"],["y","坐标 y"]].forEach((function(e){a.prop.push({label:e[1],value:t[e[0]]})}))},a.mapMonitor.clickRouteCallback=function(e){var t=n.find((function(a){return a["edgePo"].id===e})),o=t.edgePo;a.topVisible=!0,a.prop=[],[["id","路径ID"],[],["source","起始点"],["target","结束点"],["maxSpeed","最大速度"]].forEach((function(e){a.prop.push({label:e[1],value:o[e[0]]})}))},a.mapMonitor.clickObjCallback=function(e){a.activeInfoId=""+e}}))},setLayer:function(e){this.activeArr.includes(e)?this.activeArr=r["without"](this.activeArr,e):this.activeArr.push(e),this.mapMonitor.setLayers({routesVisible:this.activeArr.includes(0),nodesVisible:this.activeArr.includes(1),laserVisible:this.activeArr.includes(2),objLabelVisible:this.activeArr.includes(3),pathVisible:this.activeArr.includes(4)})},resetMapSize:function(){var e=document.getElementById("map-container"),a=e.getBoundingClientRect(),t=a.width,n=a.height,o=window.getComputedStyle(e,"padding"),i=o.paddingTop,r=o.paddingRight,c=o.paddingBottom,s=o.paddingLeft,l=s.split("px")[0],d=r.split("px")[0],m=i.split("px")[0],u=c.split("px")[0],p=document.getElementById("map-view"),h=t-l-d+"px",g=n-m-u+"px";p.style.width=h,p.style.height=g,p.children[0]&&(p.children[0].style.width=h,p.children[0].style.height=g)}}},p=u,h=(t("98e5"),t("4ac2")),g=Object(h["a"])(p,n,o,!1,null,"38a6f1c0",null);a["default"]=g.exports},b534:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"user-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择角色",filterable:"",clearable:""},on:{change:e.getUserList},model:{value:e.roleId,callback:function(a){e.roleId="string"===typeof a?a.trim():a},expression:"roleId"}},e._l(e.roleList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.roleCode,value:Number(e.id)}})})),1),e._v(" "),t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入用户名",clearable:""},on:{change:e.getUserList},model:{value:e.userName,callback:function(a){e.userName="string"===typeof a?a.trim():a},expression:"userName"}},[t("template",{slot:"append"},[t("el-button",{staticClass:"append-btn",attrs:{type:"primary"},on:{click:e.getUserList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/add",expression:"'account/user/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddUserDialog}},[e._v("新增账号")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":"","tooltip-effect":"dark"},on:{"expand-change":e.getUserInfo}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return e.showExpand?t("el-card",{},[t("p",[t("span",[e._v("工作区域("+e._s(a.row.areaNum||0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.areaNames))])]),e._v(" "),t("p",[t("span",[e._v("分组("+e._s(a.row.groupNum||0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.groupNames))])])]):e._e()}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"username",label:"账号名",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"nickname",label:"昵称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"phoneNo",label:"手机号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"eMail",label:"邮箱",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"roleCode",label:"角色",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"是否启用",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/update",expression:"'account/user/update'"}],on:{change:function(t){return e.toggleEnable(a.row)}},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable","string"===typeof t?t.trim():t)},expression:"scope.row.enable"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!account/user/update",expression:"'!account/user/update'"}]},[e._v(e._s(a.row.enable?"已启用":"未启用"))])]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/update",expression:"'account/user/update'"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditUserDialog(a.row)}}}),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/user/delete",expression:"'account/user/delete'"}],attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteUser(a.row)}}})]:void 0}}],null,!0)})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getUserList}}),e._v(" "),t("el-dialog",{attrs:{center:"",title:e.isUserEdit?"编辑账号":"新增账号",visible:e.isUserDialog,width:"450px"},on:{"update:visible":function(a){e.isUserDialog=a},close:e.closeUserDialog}},[t("el-form",{ref:"userForm",attrs:{"label-width":"90px",model:e.userForm,rules:e.userRules,"auto-complete":"on"}},[t("el-form-item",{attrs:{label:"账号名: ",prop:"username"}},[t("el-input",{attrs:{"auto-complete":"on",placeholder:"请输入账号名",disabled:e.isUserEdit,clearable:"",maxlength:20},model:{value:e.userForm.username,callback:function(a){e.$set(e.userForm,"username","string"===typeof a?a.trim():a)},expression:"userForm.username"}})],1),e._v(" "),e.isUserEdit?e._e():[t("el-form-item",{attrs:{label:"密码: ",prop:"password"}},[t("el-input",{attrs:{"auto-complete":"on",placeholder:"请输入密码",clearable:"",maxlength:20},model:{value:e.userForm.password,callback:function(a){e.$set(e.userForm,"password","string"===typeof a?a.trim():a)},expression:"userForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"昵称: "}},[t("el-input",{attrs:{placeholder:"请输入昵称",clearable:""},model:{value:e.userForm.nickname,callback:function(a){e.$set(e.userForm,"nickname","string"===typeof a?a.trim():a)},expression:"userForm.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号: ",prop:"phoneNo"}},[t("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:e.userForm.phoneNo,callback:function(a){e.$set(e.userForm,"phoneNo","string"===typeof a?a.trim():a)},expression:"userForm.phoneNo"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱: ",prop:"eMail"}},[t("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.userForm.eMail,callback:function(a){e.$set(e.userForm,"eMail","string"===typeof a?a.trim():a)},expression:"userForm.eMail"}})],1)],e._v(" "),t("el-form-item",{attrs:{label:"工作区域: ",prop:"areaIds"}},[t("el-select",{attrs:{placeholder:"请选择工作区域",multiple:"",clearable:"",filterable:"","collapse-tags":""},on:{change:e.changeAreaIds},model:{value:e.userForm.areaIds,callback:function(a){e.$set(e.userForm,"areaIds","string"===typeof a?a.trim():a)},expression:"userForm.areaIds"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"分组: "}},[t("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择分组",clearable:"",filterable:""},model:{value:e.userForm.groupIds,callback:function(a){e.$set(e.userForm,"groupIds","string"===typeof a?a.trim():a)},expression:"userForm.groupIds"}},e._l(e.groupList,(function(a,n){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:e.userForm.areaIds.indexOf(a.areaId)>-1,expression:"userForm.areaIds.indexOf(item.areaId) > -1"}],key:n,attrs:{label:a.name,value:Number(a.id)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"角色: ",prop:"roleId"}},[t("el-select",{attrs:{placeholder:"请选择角色",clearable:"",filterable:""},model:{value:e.userForm.roleId,callback:function(a){e.$set(e.userForm,"roleId","string"===typeof a?a.trim():a)},expression:"userForm.roleId"}},e._l(e.roleList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.roleCode,value:Number(e.id)}})})),1)],1)],2),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeUserDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveUserEdit}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"重置密码",visible:e.isPasswordDialog,width:"400px"},on:{close:e.closePasswordDialog,"update:visible":function(a){e.isPasswordDialog=a}}},[t("el-form",{ref:"passwordForm",attrs:{"label-width":"100px",model:e.passwordForm,rules:e.passwordRoles}},[t("el-form-item",{attrs:{label:"新密码: ",prop:"newPassWord"}},[t("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.passwordForm.newPassWord,callback:function(a){e.$set(e.passwordForm,"newPassWord","string"===typeof a?a.trim():a)},expression:"passwordForm.newPassWord"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"管理员密码: ",prop:"checkPassword"}},[t("el-input",{attrs:{placeholder:"请输入管理员密码","show-password":""},model:{value:e.passwordForm.checkPassword,callback:function(a){e.$set(e.passwordForm,"checkPassword","string"===typeof a?a.trim():a)},expression:"passwordForm.checkPassword"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closePasswordDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.savePasswordEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("3612")),r=t("0aa6"),c=t("d267"),s=t("36b2"),l=t("2840"),d=t("333d"),m=t("a68a"),u={name:"user",props:["innerHeightMinusFilter"],components:{Pagination:d["a"]},data:function(){var e,a={message:"只能包含字母和数字, 不少于6位, 不多于20位",pattern:/^[\dA-Za-z]{6,20}$/,trigger:"blur"};return e={tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,roleId:null,userName:"",roleList:[],groupList:[],userForm:{username:"",phoneNo:"",eMail:"",password:"",areaIds:[],groupIds:[],nickname:"",roleId:""},isUserDialog:!1,isUserEdit:!1,passwordForm:{newPassWord:"",checkPassword:""},isPasswordDialog:!1,areaIds:[]},Object(i["a"])(e,"groupList",[]),Object(i["a"])(e,"domainList",{}),Object(i["a"])(e,"userRules",{username:[{required:!0,trigger:"blur",message:"请输入账号名"},{message:"以英文字母开头, 只能包含英文字母、数字和下划线",pattern:/^[a-zA-Z][\w]*$/,trigger:"blur"}],phoneNo:[{required:!1,trigger:"blur"},{message:"手机号格式不正确",pattern:/^[1][3-9][\d]{9}$/,trigger:"blur"}],eMail:[{required:!1,trigger:"blur"},{message:"邮箱格式不正确",pattern:/^([a-zA-Z\d]+[_|\_|\.]?)*[a-zA-Z\d]+@([a-zA-Z\d]+[_|\_|\.]?)*[a-zA-Z\d]+\.[a-zA-Z]{2,3}$/,trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},a],roleId:[{required:!0,trigger:"change",message:"请选择角色"}]}),Object(i["a"])(e,"passwordRoles",{newPassWord:[{required:!0,trigger:"blur",message:"请输入新密码"},a],checkPassword:[{required:!0,trigger:"blur",message:"请输入管理员密码"},a]}),Object(i["a"])(e,"showExpand",!0),e},mounted:function(){var e=this;this.$emit("watchFilterHeight"),this.getUserList(),Object(l["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),Object(r["c"])().then((function(a){a.state&&(e.groupList=a.data||[])})),Object(c["d"])().then((function(a){a.state&&(e.roleList=a.data.data||[])}))},methods:{getUserList:function(){var e=this,a={pagenum:this.currentPage,pagesize:this.pageSize};this.roleId&&(a.roleId=this.roleId),this.userName&&(a.keyWord=this.userName),this.tableLoading=!0,Object(s["d"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data,e.total=a.data.total)}))},openAddUserDialog:function(){var e=this;this.isUserEdit=!1,this.userForm={username:"",nickname:"",phoneNo:"",eMail:"",password:"",areaIds:[],groupIds:[],roleId:""},this.isUserDialog=!0,this.$nextTick((function(){e.$refs.userForm.clearValidate()}))},closeUserDialog:function(){this.$refs.userForm.clearValidate(),this.isUserDialog=!1},openEditUserDialog:function(e){var a=this;this.isUserEdit=!0,Object(s["c"])({userId:e.id}).then((function(t){t.state&&(e.areaIds=t.data.areas.map((function(e){return e.areaPo.id})),e.groupIds=t.data.groups.map((function(e){return e.id})),a.userForm=JSON.parse(JSON.stringify(e)),a.isUserDialog=!0)}))},saveUserEdit:function(){var e=this;this.$refs.userForm.validate((function(a){if(a){var t=e.userForm,n=t.username,o=t.phoneNo,i=t.eMail,r=t.password,c=t.areaIds,l=t.groupIds,d=t.nickname,u=t.roleId,p=t.id,h={userPo:{username:n,password:r,eMail:i,nickname:d,phoneNo:o,roleId:u},areaIds:c,groupIds:l};e.isUserEdit?(h.userPo.id=p,Object(s["g"])(h).then((function(a){a.state&&(e.isUserDialog=!1,m["Message"].success("用户修改成功"),e.getUserList())}))):Object(s["a"])(h).then((function(a){a.state&&(m["Message"].success("用户添加成功"),e.isUserDialog=!1,e.getUserList())}))}}))},openPasswordDialog:function(e){var a=this;this.passwordForm={newPassWord:"",checkPassword:"",userId:e.id},this.isPasswordDialog=!0,this.$nextTick((function(){a.$refs.passwordForm.clearValidate()}))},closePasswordDialog:function(){this.$refs.passwordForm.clearValidate(),this.isPasswordDialog=!1},savePasswordEdit:function(){var e=this;this.$refs.passwordForm.validate((function(a){a&&Object(s["e"])(e.passwordForm).then((function(a){a.state&&(m["Message"].success("密码重置成功"),e.isPasswordDialog=!1)}))}))},toggleEnable:function(e){var a=this,t=e.enable?"启用":"禁用",n=function(){e.enable=!e.enable};m["MessageBox"].confirm("确定".concat(t,"账号: ").concat(e.username,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["f"])({userId:e.id,state:e.enable}).then((function(e){e.state?(m["Message"].success("账号".concat(t,"成功")),a.getUserList()):n()})).catch((function(){n()}))})).catch((function(){n()}))},deleteUser:function(e){var a=this;m["MessageBox"].confirm("确定删除账号: ".concat(e.username,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])({userId:e.id}).then((function(e){e.state&&(m["Message"].success("账号删除成功"),a.getUserList())}))})).catch((function(){}))},changeAreaIds:function(){this.userForm.groupIds=[]},getUserInfo:function(e){var a=this;Object(s["c"])({userId:e.id}).then((function(t){if(t.state){var n=t.data.areas.map((function(e){return e.areaPo.name})),o=t.data.groups.map((function(e){return e.groupName}));e.areaNames=n.join(", "),e.groupNames=o.join(", "),e.areaNum=n.length,e.groupNum=o.length,a.showExpand=!1,a.$nextTick((function(){a.showExpand=!0}))}}))}}},p=u,h=t("4ac2"),g=Object(h["a"])(p,n,o,!1,null,null,null);a["default"]=g.exports},b9d5:function(e,a,t){"use strict";t("be3e")},bafc:function(e,a,t){},bbfa:function(e,a,t){"use strict";t.d(a,"c",(function(){return o})),t.d(a,"g",(function(){return i})),t.d(a,"f",(function(){return r})),t.d(a,"d",(function(){return c})),t.d(a,"e",(function(){return s})),t.d(a,"b",(function(){return l})),t.d(a,"a",(function(){return d}));var n=t("b775");function o(){return n["a"].post("/wms/location/operationList")}function i(e){var a=e.id,t=e.status;return n["a"].patch("/wms/location/resetStatus/".concat(a,"/").concat(t))}function r(e){return n["a"].post("/zkyw/wcs/taskAdd",e)}function c(e){return n["a"].post("/wms/task/taskAdd",e)}function s(e){return n["a"].post("/zkyw/wcs/taskList",e)}function l(e){return n["a"].post("/wms/areaUser/addOrUpdate",e)}function d(e){return n["a"].post("/wms/areaUser/addOrUpdate",e)}},be3e:function(e,a,t){},c937:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"change-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择分组",clearable:"",filterable:""},on:{change:e.getBatteryList},model:{value:e.groupFilter,callback:function(a){e.groupFilter="string"===typeof a?a.trim():a},expression:"groupFilter"}},e._l(e.groupList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:Number(a)}})})),1),e._v(" "),t("el-date-picker",{ref:"datePicker",staticClass:"filter-select",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.getBatteryList},model:{value:e.dateTimeFilter,callback:function(a){e.dateTimeFilter=a},expression:"dateTimeFilter"}}),e._v(" "),t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入电池编号",clearable:""},on:{change:e.getBatteryList},model:{value:e.inputFilter,callback:function(a){e.inputFilter="string"===typeof a?a.trim():a},expression:"inputFilter"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:e.getBatteryList}},[e._v("搜索")])],1)],2)],1),e._v(" "),t("div",{staticClass:"table-container",style:{height:e.innerHeightMinusFilter-141+"px"},attrs:{id:"echarts"}})])},o=[],i=t("333d"),r=t("4856"),c=(t("2840"),t("0aa6"),t("a68a"),t("4d28")),s=t.n(c),l={name:"change",props:["innerHeightMinusFilter"],components:{Pagination:i["a"]},data:function(){return{echarts:null,tableList:[],tableLoading:!0,currentPage:1,pageSize:10,total:0,onLineAbnormalNum:0,groupFilter:"",dateTimeFilter:[],inputFilter:"",domainList:{},groupList:{},pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var a=new Date,t=new Date;t.setTime((new Date).setHours(0,0,0,0)),e.$emit("pick",[t,a])}},{text:"昨天",onClick:function(e){e.$emit("pick",[yesterdayStart(),yesterdayEnd()])}},{text:"最近一周",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]}}},methods:{mountedFun:function(){this.$emit("watchFilterHeight");var e={title:{text:"折线图堆叠"},tooltip:{trigger:"axis"},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"邮件营销",type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",data:[220,182,191,234,290,330,310]},{name:"视频广告",type:"line",stack:"总量",data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",data:[820,932,901,934,1290,1330,1320]}]};this.echarts=s.a.init(document.getElementById("echarts")),this.echarts.setOption(e)},onResize:function(){this.echarts&&this.echarts.resize()},getBatteryList:function(){var e=this;this.tableLoading=!0;var a={currentPage:this.currentPage,pageSize:this.pageSize};this.dateTimeFilter&&this.dateTimeFilter.length>0&&(a.startTime=formatTime(this.dateTimeFilter[0]),a.endTime=formatTime(this.dateTimeFilter[1])),this.inputFilter&&(a.name=this.inputFilter),Object(r["b"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0)})),Object(r["b"])().then((function(a){e.onLineAbnormalNum=a.data.length||0}))},beRead:function(e){}}},d=l,m=(t("b9d5"),t("4ac2")),u=Object(m["a"])(d,n,o,!1,null,"eb937430",null);a["default"]=u.exports},c9a1:function(e,a,t){"use strict";t("3a75")},ca39:function(e,a,t){"use strict";t.d(a,"c",(function(){return o})),t.d(a,"a",(function(){return i})),t.d(a,"e",(function(){return r})),t.d(a,"b",(function(){return c})),t.d(a,"d",(function(){return s}));var n=t("b775");function o(e){return n["a"].post("/taskChainTemplate/list",e)}function i(e){return n["a"].post("/taskChainTemplate/add",e)}function r(e){return n["a"].post("/taskChainTemplate/update",e)}function c(e){return n["a"].get("/taskChainTemplate/delete/"+e)}function s(e){return n["a"].get("/taskChainTemplate/submit/"+e)}},cadb:function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"e",(function(){return c})),t.d(a,"d",(function(){return s})),t.d(a,"b",(function(){return l})),t.d(a,"c",(function(){return d}));var n=t("caaf"),o=function(e){return e?n(new Date(e)).locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"):""},i=function(){return n().add(-7,"days").format("YYYY-MM-DD HH:mm:ss")},r=function(){return n().format("YYYY-MM-DD HH:mm:ss")},c=function(){return n(n().startOf("day")).add(-1,"days").format("YYYY-MM-DD HH:mm:ss")},s=function(){return n(n().endOf("day")).add(-1,"days").format("YYYY-MM-DD HH:mm:ss")},l=function(){return n().format("YYYY-MM-DD HH:mm:ss")},d={shortcuts:[{text:"今天",onClick:function(e){var a=new Date,t=new Date;t.setTime((new Date).setHours(0,0,0,0)),e.$emit("pick",[t,a])}},{text:"昨天",onClick:function(e){e.$emit("pick",[c(),s()])}},{text:"最近一周",onClick:function(e){e.$emit("pick",[i(),r()])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]}},cf2a:function(e,a,t){"use strict";t("fe4b")},d036:function(e,a,t){},d61a:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"vehicle-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container filter-container-flex"},[t("div",{staticClass:"statistics"},[t("div",{staticClass:"vehicle-num"},[t("i",{staticClass:"icon iconfont icon-tongji"}),e._v(" "),t("div",{staticClass:"info"},[t("div",{staticClass:"num"},[e._v(e._s(e.total))]),e._v(" "),t("div",{staticClass:"text"},[e._v("设备总数")])])]),e._v(" "),t("div",{staticClass:"vehicle-num"},[t("i",{staticClass:"icon iconfont icon-tongji1"}),e._v(" "),t("div",{staticClass:"info"},[t("div",{staticClass:"num"},[e._v(e._s(e.onLineDeviceNum))]),e._v(" "),t("div",{staticClass:"text"},[e._v("在线数")])])])]),e._v(" "),t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择工作区域",clearable:"",filterable:""},on:{change:e.getVehicleList},model:{value:e.domainIdFilter,callback:function(a){e.domainIdFilter="string"===typeof a?a.trim():a},expression:"domainIdFilter"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择设备类型",clearable:"",filterable:""},on:{change:e.getVehicleList},model:{value:e.typeFilter,callback:function(a){e.typeFilter="string"===typeof a?a.trim():a},expression:"typeFilter"}},e._l(e.typeOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1),e._v(" "),t("el-input",{staticClass:"filter-input-two",attrs:{placeholder:"请输入设备"+("id"===e.inputType?"id":"名称"),clearable:""},on:{change:e.getVehicleList},model:{value:e.inputFilter,callback:function(a){e.inputFilter="string"===typeof a?a.trim():a},expression:"inputFilter"}},[t("el-select",{attrs:{slot:"prepend"},on:{change:function(a){e.inputFilter=""}},slot:"prepend",model:{value:e.inputType,callback:function(a){e.inputType=a},expression:"inputType"}},[t("el-option",{attrs:{label:"id",value:"id"}}),e._v(" "),t("el-option",{attrs:{label:"名称",value:"name"}})],1),e._v(" "),t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:e.getVehicleList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"device/amr/add",expression:"'device/amr/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddVehicleDialog}},[e._v("新增设备")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":"","tooltip-effect":"dark"},on:{"expand-change":e.getVehicleInfo}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return e.showExpand?t("el-card",{},[t("p",[t("span",[e._v("适配类型("+e._s(a.row.modelNum||0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.modelNames))])]),e._v(" "),t("p",[t("span",[e._v("绑定充电桩("+e._s(a.row.chargeName?1:0)+"): ")]),e._v(" "),t("span",{staticClass:"expand-item"},[e._v(e._s(a.row.chargeName))])])]):e._e()}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"amrId",label:"ID",sortable:"",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"名称",sortable:"",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e.typeOptions[a.row.type]))]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"所属区域",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e.domainList[a.row.areaId]))]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"分组",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e.groupList[a.row.groupId]||"---"))]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e.onLineDeviceList[a.row.amrId]||"离线"))]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"激活",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"device/amr/update",expression:"'device/amr/update'"}],attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.switchBtn(a.row)}},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable","string"===typeof t?t.trim():t)},expression:"scope.row.enable"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!device/amr/update",expression:"'!device/amr/update'"}]},[e._v(e._s(1===a.row.enable?"已激活":"未激活"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"device/amr/update",expression:"'device/amr/update'"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.openEditVehicleDialog(n)}}},[e._v("修改")]),e._v(" "),"deleted"!=n.status?t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"device/amr/delete",expression:"'device/amr/delete'"}],attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteVehicle(n)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getVehicleList}}),e._v(" "),t("el-dialog",{attrs:{title:e.isVehicleEdit?"编辑设备":"新增设备",visible:e.isVehicleDialog,width:"450px"},on:{"update:visible":function(a){e.isVehicleDialog=a},close:e.closeVehicleDialog}},[t("el-form",{ref:"vehicleForm",attrs:{rules:e.vehicleRules,model:e.vehicleForm,"label-width":"90px"}},[t("el-form-item",{attrs:{label:"区域:",prop:"areaId"}},[t("el-select",{attrs:{placeholder:"请选择",filterable:"",disabled:e.isVehicleEdit},model:{value:e.vehicleForm.areaId,callback:function(a){e.$set(e.vehicleForm,"areaId","string"===typeof a?a.trim():a)},expression:"vehicleForm.areaId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"分组:",prop:"groupId"}},[t("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.vehicleForm.groupId,callback:function(a){e.$set(e.vehicleForm,"groupId","string"===typeof a?a.trim():a)},expression:"vehicleForm.groupId"}},e._l(e.groupList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"类型:",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择",filterable:"",disabled:e.isVehicleEdit},model:{value:e.vehicleForm.type,callback:function(a){e.$set(e.vehicleForm,"type","string"===typeof a?a.trim():a)},expression:"vehicleForm.type"}},e._l(e.typeOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"名称:",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入设备名称",clearable:""},model:{value:e.vehicleForm.name,callback:function(a){e.$set(e.vehicleForm,"name","string"===typeof a?a.trim():a)},expression:"vehicleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"mac地址:",prop:"macAddress"}},[t("el-input",{attrs:{placeholder:"格式：00:01:6C:06:A6:28",maxlength:"17",id:"macInput",readonly:!e.isChangeMac,clearable:"",disabled:e.isVehicleEdit},on:{input:e.changeMac},model:{value:e.vehicleForm.macAddress,callback:function(a){e.$set(e.vehicleForm,"macAddress","string"===typeof a?a.trim():a)},expression:"vehicleForm.macAddress"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"适配类型:"}},[t("el-select",{attrs:{placeholder:"请选择",clearable:"",multiple:""},on:{change:e.bindModelChange},model:{value:e.vehicleForm.chargePileModelId,callback:function(a){e.$set(e.vehicleForm,"chargePileModelId",a)},expression:"vehicleForm.chargePileModelId"}},e._l(e.modelList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"绑定充电桩:"}},[t("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.vehicleForm.chargePileId,callback:function(a){e.$set(e.vehicleForm,"chargePileId",a)},expression:"vehicleForm.chargePileId"}},e._l(e.chargePileList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeVehicleDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveVehicleEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("fc02"),t("8dee"),t("e680"),t("a450"),t("1bc7"),t("333d")),r=t("fbb2"),c=t("2840"),s=t("0aa6"),l=t("0115"),d=t("0f8a"),m=t("a68a"),u={name:"vehicle",props:["innerHeightMinusFilter"],components:{Pagination:i["a"]},data:function(){return{tableList:[],tableLoading:!0,currentPage:1,pageSize:10,total:0,onLineDeviceNum:0,onLineDeviceList:{},domainIdFilter:"",typeFilter:"",inputFilter:"",inputType:"name",statusList:{1:"空闲",2:"工作中",3:"充电中",4:"等待中",5:"托管中",6:"外部中断",7:"有异常",8:"异常中断",404:"离线"},typeOptions:{},abilityOptions:d["a"],domainList:{},groupList:{},modelList:{},chargePileList:{},isVehicleDialog:!1,vehicleForm:{type:"",areaId:"",name:"",enable:1,macAddress:"",chargePileModelId:[],chargePileId:"",groupId:""},vehicleRules:{type:[{required:!0,message:"设备类型不能为空",trigger:"change"}],name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],areaId:[{required:!0,message:"区域不能为空",trigger:"change"}],macAddress:[{required:!0,message:"请输入mac地址",trigger:"blur"},{message:"mac地址格式不对",pattern:/([A-Fa-f\d]{2}:){5}[A-Fa-f\d]{2}/,trigger:"blur"}]},isVehicleEdit:!1,customColor:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],oldMacAddr:"",isChangeMac:!0,showExpand:!0,defaultModel:""}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),Object(r["f"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.typeOptions,a.key,a.display_name)}))})),Object(c["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),Object(s["c"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.groupList,a.id,a.name)}))})),Object(l["h"])().then((function(a){a.state&&a.data&&(a.data.forEach((function(a){e.$set(e.modelList,a.id,a.description)})),a.data.length>0&&(e.defaultModel=a.data[0].id))})),this.getVehicleList()},methods:{getVehicleList:function(){var e=this;this.tableLoading=!0;var a={currentPage:this.currentPage,pageSize:this.pageSize};this.inputFilter&&("id"===this.inputType?a.amrId=this.inputFilter:a.name=this.inputFilter),this.typeFilter&&(a.type=this.typeFilter),this.domainIdFilter&&(a.areaId=this.domainIdFilter),Object(r["e"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0)})),Object(r["c"])({domianIds:a.domainIdFilter}).then((function(a){a.state&&a.data&&(a.data.forEach((function(a){e.$set(e.onLineDeviceList,Number(a.id),a.state)})),e.onLineDeviceNum=a.data.length)}))},openAddVehicleDialog:function(){var e=this;this.isVehicleEdit=!1,this.vehicleForm={type:"",areaId:"",name:"",enable:1,macAddress:"",chargePileId:"",groupId:""},this.defaultModel?(this.vehicleForm.chargePileModelId=[this.defaultModel],this.getChargePileList()):this.vehicleForm.chargePileModelId=[],this.isVehicleDialog=!0,this.$nextTick((function(){e.$refs.vehicleForm.clearValidate()}))},closeVehicleDialog:function(){this.chargePileList={},this.$refs.vehicleForm.clearValidate(),this.isVehicleDialog=!1},openEditVehicleDialog:function(e){this.isVehicleEdit=!0;var a=JSON.parse(JSON.stringify(e));a.macAddress&&(a.macAddress=a.macAddress.replace(/-/g,":")),this.vehicleForm=a;var t=a.chargePileModelId;t?(this.vehicleForm.chargePileModelId=t.split(",").map((function(e){return Number(e)})),this.getChargePileList()):this.vehicleForm.chargePileModelId=[],this.isVehicleDialog=!0},handleParams:function(e){var a=e.type,t=e.areaId,n=e.name,o=e.enable,i=e.macAddress,r=e.chargePileModelId,c=e.chargePileId,s=e.amrId,l=e.groupId;i&&(i=i.replace(/-/g,"-"));var d={amrPo:{name:n,type:a,areaId:t,enable:o,macAddress:i},amrBindChargeConfigPo:{},amrGroupConfigPo:{}};return"string"===typeof r?d.amrBindChargeConfigPo.chargePileModelId=r:r&&r.length>0&&(d.amrBindChargeConfigPo.chargePileModelId=r.join(",")),c&&(d.amrBindChargeConfigPo.chargePileId=c),l&&(d.amrGroupConfigPo.groupId=l),s&&(d.amrPo.id=s),d},saveVehicleEdit:function(){var e=this;this.$refs.vehicleForm.validate((function(a){if(a){var t=e.handleParams(e.vehicleForm);e.isVehicleEdit?Object(r["g"])(t).then((function(a){a.state&&(m["Message"].success("设备修改成功"),e.getVehicleList(),e.isVehicleDialog=!1)})):Object(r["a"])(t).then((function(a){a.state&&(m["Message"].success("设备新增成功"),e.getVehicleList(),e.isVehicleDialog=!1)}))}}))},deleteVehicle:function(e){var a=this;m["MessageBox"].confirm("确定删除设备: ".concat(e.name,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["b"])(e.amrId).then((function(e){e.state&&(m["Message"].success("设备删除成功"),a.getVehicleList())}))})).catch((function(){}))},bindModelChange:function(){this.vehicleForm.chargePileId=null,this.getChargePileList()},getChargePileList:function(){var e=this,a=this.vehicleForm.chargePileModelId;if(this.chargePileList={},a&&0!==a.length){var t={chargePileModelId:a};this.vehicleForm.areaId&&(t.areaId=this.vehicleForm.areaId),Object(l["g"])(t).then((function(a){a.state&&a.data.data.forEach((function(a){e.$set(e.chargePileList,a.id,a.name)}))}))}},switchBtn:function(e){var a=this,t=1===e.enable?"启用":"禁用",n=function(){e.enable=1===e.enable?0:1};this.$confirm("确定".concat(t).concat(e.name,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["g"])(a.handleParams(e)).then((function(e){e.state?(a.$message.success("设备".concat(t,"成功")),a.getVehicleList()):n()}))})).catch((function(){n()}))},changeMac:function(){var e=this;if(this.isChangeMac){this.isChangeMac=!1;var a=document.getElementById("macInput"),t=a.selectionStart,n=a.selectionEnd,o=this.vehicleForm.macAddress,i=this.vehicleForm.macAddress,r=o.length;if(!o||o===this.oldMacAddr)return this.oldMacAddr=o,void(this.isChangeMac=!0);o=o.replace(/[:\-\s]/g,"");for(var c="",s=0;s<o.length/2;s++)void 0!=o[2*s+1]?c+=o[2*s]+o[2*s+1]+":":c+=o[2*s];o=c.trim().slice(0,17),this.vehicleForm.macAddress=o;var l=setTimeout((function(){if(clearTimeout(l),o===e.oldMacAddr&&r===e.oldMacAddr.length-1)a.selectionStart=t,a.selectionEnd=t;else if(o.length<e.oldMacAddr.length){for(var c=0;c<o.length;c++)if(o[c]!==e.oldMacAddr[c])break;t!==r&&t!==n?(a.selectionStart=c+1,a.selectionEnd=c+1):(a.selectionStart=c,a.selectionEnd=c)}else if(t!==r){for(var s=0;s<e.oldMacAddr.length;s++)if(i[i.length-s-1]!=e.oldMacAddr[e.oldMacAddr.length-s-1])break;t%3==2&&o.length%3===2||t%3==0&&o.length%3===1?(a.selectionStart=o.length-s+1,a.selectionEnd=o.length-s+1):t%3==1&&o.length%3===0?(a.selectionStart=o.length-s-1,a.selectionEnd=o.length-s-1):(a.selectionStart=o.length-s,a.selectionEnd=o.length-s)}e.oldMacAddr=o,e.isChangeMac=!0}))}},getVehicleInfo:function(e){var a=this;Object(l["e"])(e.amrId).then((function(t){t.state&&t.data&&(e.chargeName=t.data.name),Object(l["f"])(e.amrId).then((function(t){if(t.state&&t.data){var n=t.data.map((function(e){return e.description}));e.modelNames=n.join(", "),e.modelNum=n.length,a.showExpand=!1,a.$nextTick((function(){a.showExpand=!0}))}}))}))}}},p=u,h=(t("29a0"),t("4ac2")),g=Object(h["a"])(p,n,o,!1,null,"d86ad82e",null);a["default"]=g.exports},d6c6:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"role-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入角色名",clearable:""},on:{change:e.getRoleList},model:{value:e.roleName,callback:function(a){e.roleName="string"===typeof a?a.trim():a},expression:"roleName"}},[t("template",{slot:"append"},[t("el-button",{staticClass:"append-btn",attrs:{type:"primary"},on:{click:e.getRoleList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/role/add",expression:"'account/role/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增角色")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"roleCode",label:"角色名",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"角色描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.description)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.creatTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"角色类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(0===a.row.roleType?"系统默认":"自定义")+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return!0!==a.row.superAdmin?[a.row.superAdmin?e._e():t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/role/update",expression:"'account/role/update'"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditDialog(a.row)}}}),e._v(" "),a.row.superAdmin?e._e():t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"account/role/delete",expression:"'account/role/delete'"}],attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteRole(a.row)}}})]:void 0}}],null,!0)})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getRoleList}}),e._v(" "),t("el-dialog",{attrs:{title:e.isEdit?"编辑角色":"新增角色",visible:e.isDialog,width:"470px"},on:{"update:visible":function(a){e.isDialog=a},close:e.closeDialog}},[t("el-form",{ref:"roleForm",attrs:{"label-width":"80px",model:e.roleForm,rules:e.roleRules}},[t("el-form-item",{attrs:{label:"角色名: ",prop:"roleCode"}},[t("el-input",{attrs:{placeholder:"请输入角色名",clearable:"",disabled:e.isEdit},model:{value:e.roleForm.roleCode,callback:function(a){e.$set(e.roleForm,"roleCode","string"===typeof a?a.trim():a)},expression:"roleForm.roleCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色描述: "}},[t("el-input",{attrs:{placeholder:"请输入角色描述",clearable:"",disabled:e.isEdit},model:{value:e.roleForm.description,callback:function(a){e.$set(e.roleForm,"description","string"===typeof a?a.trim():a)},expression:"roleForm.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"权限设置: "}},[t("span",{staticClass:"des-title"},[e._v("建议至少选择一项权限")]),e._v(" "),t("el-tree",{ref:"tree",attrs:{data:e.permissionDatas,"show-checkbox":"","node-key":"id",accordion:"","default-checked-keys":e.checkedTreeList,props:e.defaultProps},on:{check:e.checkedList}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("c5cb"),t("0c84"),t("2843"),t("aa18"),t("982e"),t("1bc7"),t("d267")),r=t("a68a"),c=t("333d"),s={name:"role",props:["innerHeightMinusFilter"],components:{Pagination:c["a"]},data:function(){return{tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,roleName:"",roleForm:{roleCode:"",description:"",permissionList:[]},isDialog:!1,isEdit:!1,roleRules:{roleCode:[{required:!0,trigger:"blur",message:"请输入角色名"}]},defaultProps:{children:"children",label:"label"},permissionDatas:[],checkedTreeList:[]}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),this.getRoleList(),Object(i["c"])({roleId:1}).then((function(a){if(a.state){var t=[];a.data.forEach((function(e){var a={index:1,id:e[0].menuFirstPo.id,label:e[0].menuFirstPo.menuName},n=[];e.length>1&&null===e[0].permissionPo.secondMenuId&&null!==e[1].permissionPo.secondMenuId&&e.splice(0,1),e.forEach((function(e){var a=e.permissionPo;if(a.secondMenuId&&a.permissionType){var t=n.length-1,o=JSON.parse(JSON.stringify(n[t]));o.thirdLabel&&(o.label=o.thirdLabel),0===o.children.length&&n[t].children.push(JSON.parse(JSON.stringify(o))),n[t].children.push({id:a.id,label:a.permissionName,index:3,type:a.permissionType,isView:!0})}else{var i={id:a.id,label:a.permissionName,thirdLabel:a.menuSecondPo&&a.menuSecondPo.menuName,index:2,children:[],type:a.permissionType};n.push(i)}})),a.children=n,t.push(a)})),e.permissionDatas=t}}))},methods:{getRoleList:function(){var e=this,a={pagenum:this.currentPage,pagesize:this.pageSize};this.roleName&&(a.keyWord=this.roleName),this.tableLoading=!0,Object(i["d"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.data||[],e.total=a.data.total||0)}))},checkedList:function(e,a){var t=a.checkedKeys;if(2===e.index&&e.children&&0===e.children.length||3===e.index){var n=a.halfCheckedNodes.filter((function(a){return a.children.includes(e)}));if(n.length>0){n=n[0].children;var o=n.some((function(e){return 1===e.type&&t.includes(e.id)}));if(o){var i=n.filter((function(e){return 0===e.type}));t=t.concat(i[0].id)}}}this.checkedTreeList=Array.from(new Set(t));var r=[];this.checkedTreeList.forEach((function(e){e&&"string"!==typeof e&&r.push(e)})),this.roleForm.permissionList=r},openAddDialog:function(){var e=this;this.isEdit=!1,this.roleForm={roleCode:"",description:"",permissionList:[]},this.isDialog=!0,this.$nextTick((function(){e.$refs.roleForm.clearValidate()}))},closeDialog:function(){this.checkedTreeList=[],this.$refs.tree.setCheckedKeys([]),this.$refs.roleForm.clearValidate(),this.isDialog=!1},openEditDialog:function(e){var a=this;this.isEdit=!0,this.roleForm={roleCode:e.roleCode,id:e.id,description:e.description},Object(i["c"])({roleId:e.id}).then((function(e){if(e.state){var t=[];e.data.forEach((function(e){e.forEach((function(e){var a=e.permissionPo;t.push(a.id)}))})),a.checkedTreeList=Array.from(new Set(t)),a.roleForm.permissionList=Array.from(new Set(t)),a.isDialog=!0}}))},saveEdit:function(){var e=this;this.$refs.roleForm.validate((function(a){if(a)if(e.isEdit){var t={rolePo:{id:e.roleForm.id},permissionIds:e.roleForm.permissionList};Object(i["e"])(t).then((function(a){a.state&&(r["Message"].success("角色修改成功"),e.isDialog=!1,e.getRoleList())}))}else{var n={rolePo:{roleCode:e.roleForm.roleCode,description:e.roleForm.description},permissionIds:e.roleForm.permissionList};Object(i["a"])(n).then((function(a){a.state&&(r["Message"].success("角色增加成功"),e.isDialog=!1,e.getRoleList())}))}}))},deleteRole:function(e){var a=this;r["MessageBox"].confirm("确定删除角色: ".concat(e.roleCode,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])({roleId:e.id}).then((function(e){e.state&&(r["Message"].success("角色删除成功"),a.getRoleList())}))})).catch((function(){}))}}},l=s,d=(t("e884"),t("4ac2")),m=Object(d["a"])(l,n,o,!1,null,null,null);a["default"]=m.exports},d6c8:function(e,a,t){},e05e:function(e,a,t){"use strict";t("e43f")},e43f:function(e,a,t){},e4e7:function(e,a,t){"use strict";t("d6c8")},e884:function(e,a,t){"use strict";t("ab27")},eef3:function(e,a,t){},ef37:function(e,a,t){},efd7:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"wscn-http404-container"},[t("div",{staticClass:"wscn-http404"},[e._m(0),e._v(" "),t("div",{staticClass:"bullshit"},[t("div",{staticClass:"bullshit__oops"},[e._v("OOPS!")]),e._v(" "),e._m(1),e._v(" "),t("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),e._v(" "),t("div",{staticClass:"bullshit__info"},[e._v("Please check that the URL you entered is correct, or click the button below to return to the homepage.")]),e._v(" "),t("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[e._v("Back to home")])])])])},o=[function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"pic-404"},[n("img",{staticClass:"pic-404__parent",attrs:{src:t("a36b"),alt:"404"}}),e._v(" "),n("img",{staticClass:"pic-404__child left",attrs:{src:t("26fc"),alt:"404"}}),e._v(" "),n("img",{staticClass:"pic-404__child mid",attrs:{src:t("26fc"),alt:"404"}}),e._v(" "),n("img",{staticClass:"pic-404__child right",attrs:{src:t("26fc"),alt:"404"}})])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"bullshit__info"},[e._v("All rights reserved\n        "),t("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"https://wallstreetcn.com",target:"_blank"}},[e._v("wallstreetcn")])])}],i={name:"Page404",computed:{message:function(){return"The webmaster said that you can not enter this page..."}}},r=i,c=(t("2955"),t("4ac2")),s=Object(c["a"])(r,n,o,!1,null,"2024e0df",null);a["default"]=s.exports},f2a3:function(e,a,t){},f3f9:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"order-container"},[t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{"header-cell-style":{background:"#eee"},"highlight-current-row":"",data:e.tableData,height:e.tableHeight}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"amrId",label:"小车ID",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"startWmsLocationCode",label:"起点点位",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"endWmsLocationCode",label:"终点点位",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"taskChainId",label:"任务链id",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"任务状态","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"flex-center"},[t("svg-icon",{style:{color:e.stateColorList[a.row.status]},attrs:{"icon-class":"circle"}}),e._v("\n            "+e._s(e.stateList[a.row.status])+"\n          ")],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center","min-width":"152px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.createTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"结束时间",align:"center","min-width":"152px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.finishTime))+"\n        ")]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.totalPages,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getTaskList}})],1)},o=[],i=t("a68a"),r=t("cadb"),c=t("bbfa"),s=t("1ed8"),l=t.n(s),d=t("333d"),m=t("0f8a"),u={name:"order",props:["isOrderDialog"],components:{Pagination:d["a"]},data:function(){return{tableData:[],tableLoading:!1,taskType:"",dateTime:[],currentPage:1,pageSize:10,totalPages:0,formatTime:r["a"],taskTypeList:[],stateList:m["e"],stateColorList:m["c"],pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var a=new Date,t=new Date;t.setTime((new Date).setHours(0,0,0,0)),e.$emit("pick",[t,a])}},{text:"昨天",onClick:function(e){e.$emit("pick",[Object(r["e"])(),Object(r["d"])()])}},{text:"最近一周",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]},tableHeight:window.innerHeight-179}},watch:{isOrderDialog:function(){this.mountedFun()}},mounted:function(){this.mountedFun()},methods:{mountedFun:function(){var e=this;this.isOrderDialog&&(this.getTaskList(),this.$nextTick((function(){e.$refs.filterContainer&&(e.tableHeight=window.innerHeight-e.$refs.filterContainer.offsetHeight-179)})))},getTaskList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};this.tableLoading=!0,Object(c["e"])(a).then((function(a){var t=a.state,n=a.data;e.tableLoading=!1,t&&(e.totalPages=n.total||0,e.tableData=n.list||[])}))},exportTaskInfo:function(){var e={};if(!(this.dateTime&&this.dateTime.length>0))return i["Message"].warning("请先选择时间区间");e.startTime=Object(r["a"])(this.dateTime[0]),e.endTime=Object(r["a"])(this.dateTime[1]),this.taskType&&(e.taskType=this.taskType),Object(c["b"])(e).then((function(e){e&&(l()(e,(new Date).getTime()+".xlsx"),i["Message"].success("导出成功"))}))},clearOrder:function(){Object(c["a"])()}}},p=u,h=(t("0007"),t("4ac2")),g=Object(h["a"])(p,n,o,!1,null,"5cb693b2",null);a["default"]=g.exports},f5e8:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"taskChain-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-select",{staticClass:"filter-select",attrs:{placeholder:"请选择分组",clearable:"",filterable:""},on:{change:e.getTaskChainList},model:{value:e.groupFilter,callback:function(a){e.groupFilter="string"===typeof a?a.trim():a},expression:"groupFilter"}},e._l(e.groupList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:Number(a)}})})),1),e._v(" "),t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入任务链名",clearable:""},on:{change:e.getTaskChainList},model:{value:e.nameFilter,callback:function(a){e.nameFilter="string"===typeof a?a.trim():a},expression:"nameFilter"}},[t("template",{slot:"append"},[t("el-button",{staticClass:"append-btn",attrs:{type:"primary"},on:{click:e.getTaskChainList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/model/add",expression:"'task/model/add'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增任务链")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-table",{attrs:{data:a.row.taskTemplatePos,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{label:"任务类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e.actionList[a.row.action]))]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"地图名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                "+e._s(e.mapList[a.row.mapId]&&e.mapList[a.row.mapId].name)+"\n              ")]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"目标点",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                "+e._s(a.row.endPointCode)+"\n              ")]}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"extend",label:"业务拓展",align:"center"}})],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{label:"任务编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.taskChainTemplatePo.id)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"任务名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.taskChainTemplatePo.name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"设备ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.taskChainTemplatePo.amrId)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"设备名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.vehicleList[a.row.taskChainTemplatePo.amrId])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"工作区",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.domainList[a.row.taskChainTemplatePo.areaId])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"设备分组",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.groupList[a.row.taskChainTemplatePo.groupId]&&e.groupList[a.row.taskChainTemplatePo.groupId].name)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"任务详情",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},e._l(a.row.taskTemplatePos,(function(a,n){return t("div",{key:n},[e._v("\n                前往 "+e._s(a.endPointCode)+" 执行\n                "+e._s(e.actionList[a.action])+" 任务\n              ")])})),0),e._v(" "),t("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[e._v("查看")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"最后修改时间","min-width":"152",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("dateTime")(a.row.taskChainTemplatePo.createTime))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"优先级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.taskPriorityEnum[a.row.taskChainTemplatePo.priority])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"允许重复下发",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/model/update",expression:"'task/model/update'"}],on:{change:function(t){return e.toggleRepeatFlag(a.row)}},model:{value:a.row.taskChainTemplatePo.repeatFlag,callback:function(t){e.$set(a.row.taskChainTemplatePo,"repeatFlag","string"===typeof t?t.trim():t)},expression:"scope.row.taskChainTemplatePo.repeatFlag"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!task/model/update",expression:"'!task/model/update'"}]},[e._v(e._s(a.row.enable?"允许":"不允许"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"290"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/model/submit",expression:"'task/model/submit'"}],attrs:{type:"success",size:"mini"},on:{click:function(t){return e.submitTaskChain(a.row)}}},[e._v("提交")]),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/model/update",expression:"'task/model/update'"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openEditDialog(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/model/add",expression:"'task/model/add'"}],attrs:{type:"info",size:"mini"},on:{click:function(t){return e.openCopyDialog(a.row)}}},[e._v("复制")]),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"task/model/delete",expression:"'task/model/delete'"}],attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deletelTaskChain(a.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getTaskChainList}}),e._v(" "),t("add-taskChain",{attrs:{dialogAddTaskVisible:e.isEditDialog,taskPriorityEnum:e.taskPriorityEnum,actionList:e.actionList,isEdit:e.isEdit,oldTaskChain:e.oldTaskChain,tableList:e.tableList,domainList:e.domainList,groupList:e.groupList,mapList:e.enableMapList},on:{"update:dialogAddTaskVisible":function(a){e.isEditDialog=a},"update:dialog-add-task-visible":function(a){e.isEditDialog=a},getTaskChainList:e.getTaskChainList}})],1)},o=[],i=(t("a450"),t("1bc7"),t("ca39")),r=t("4f6d"),c=t("2840"),s=t("fbb2"),l=t("7661"),d=t("0aa6"),m=t("a68a"),u=t("333d"),p=t("6e6f"),h=t("0f8a"),g={name:"taskChain",props:["innerHeightMinusFilter"],components:{Pagination:u["a"],AddTaskChain:p["default"]},data:function(){return{tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,domainList:{},mapList:{},enableMapList:{},actionList:{},groupList:{},vehicleList:{},groupFilter:"",nameFilter:"",isEditDialog:!1,expandKeys:[],taskPriorityEnum:h["d"],isEdit:!1,oldTaskChain:null}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),this.getTaskChainList(),Object(c["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))})),Object(l["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.mapList,a.id,a),a.enable&&e.$set(e.enableMapList,a.id,a)}))})),Object(d["c"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.groupList,a.id,a)}))})),Object(r["e"])().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.actionList,a.action,a.name)}))})),Object(s["e"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.vehicleList,a.amrId,a.name)}))}))},methods:{getTaskChainList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};this.groupFilter&&(a.groupId=this.groupFilter),this.nameFilter&&(a.name=this.nameFilter),this.tableLoading=!0,Object(i["c"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.list||[],e.total=a.data.total||0)}))},openAddDialog:function(){this.isEdit=!1,this.oldTaskChain=null,this.isEditDialog=!0},openEditDialog:function(e){this.isEdit=!0,this.oldTaskChain=e.taskChainTemplatePo.id,this.isEditDialog=!0},openCopyDialog:function(e){this.isEdit=!1,this.oldTaskChain=e.taskChainTemplatePo.id,this.isEditDialog=!0},deletelTaskChain:function(e){var a=this;m["MessageBox"].confirm("确定删除任务链: ".concat(e.taskChainTemplatePo.name," ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])(e.taskChainTemplatePo.id).then((function(e){e.state&&(m["Message"].success("任务链删除成功"),a.getTaskChainList())}))})).catch((function(){}))},toggleRepeatFlag:function(e){var a=this,t=function(){e.taskChainTemplatePo.repeatFlag=!e.taskChainTemplatePo.repeatFlag};m["MessageBox"].confirm("确定切换?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["e"])(e).then((function(e){e.state?(m["Message"].success("切换成功"),a.getTaskChainList()):t()})).catch((function(){t()}))})).catch((function(){t()}))},submitTaskChain:function(e){m["MessageBox"].confirm("确定提交任务链: ".concat(e.taskChainTemplatePo.name," ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["d"])(e.taskChainTemplatePo.id).then((function(e){e.state&&m["Message"].success("任务链提交成功")}))})).catch((function(){}))}}},f=g,v=(t("5c74"),t("4ac2")),b=Object(v["a"])(f,n,o,!1,null,null,null);a["default"]=b.exports},f87b:function(e,a,t){},f89c:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"storage-container"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入仓库编码",clearable:""},on:{change:e.getStorageList},model:{value:e.codeFilter,callback:function(a){e.codeFilter="string"===typeof a?a.trim():a},expression:"codeFilter"}},[t("template",{slot:"append"},[t("el-button",{staticClass:"append-btn",attrs:{type:"primary"},on:{click:e.getStorageList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"wms/storage/addStorage",expression:"'wms/storage/addStorage'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.openAddDialog}},[e._v("新增仓库")])],1),e._v(" "),t("div",{staticClass:"table-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableList,height:e.innerHeightMinusFilter-203,"header-cell-style":{background:"#eee"},"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"100",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"storageCode",label:"编码",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"description",label:"描述",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"rcsAreaId",label:"工作区域",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.domainList[a.row.rcsAreaId])+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"wms/storage/updateStorage",expression:"'wms/storage/updateStorage'"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.openEditDialog(a.row)}}}),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"wms/storage/deleteStorage",expression:"'wms/storage/deleteStorage'"}],attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteStorage(a.row)}}})]}}])})],1)],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getStorageList}}),e._v(" "),t("el-dialog",{attrs:{title:e.isEdit?"编辑仓库配置":"新增仓库配置",visible:e.isDialog,width:"370px"},on:{"update:visible":function(a){e.isDialog=a},close:e.closeDialog}},[t("el-form",{ref:"storageForm",attrs:{"label-width":"80px",model:e.storageForm,rules:e.storageRules}},[t("el-form-item",{attrs:{label:"编码: ",prop:"storageCode"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入仓库编码"},model:{value:e.storageForm.storageCode,callback:function(a){e.$set(e.storageForm,"storageCode","string"===typeof a?a.trim():a)},expression:"storageForm.storageCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"描述: "}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入仓库描述"},model:{value:e.storageForm.description,callback:function(a){e.$set(e.storageForm,"description","string"===typeof a?a.trim():a)},expression:"storageForm.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"工作区域: ",prop:"rcsAreaId"}},[t("el-select",{attrs:{placeholder:"请选择工作区域",clearable:"",filterable:""},model:{value:e.storageForm.rcsAreaId,callback:function(a){e.$set(e.storageForm,"rcsAreaId","string"===typeof a?a.trim():a)},expression:"storageForm.rcsAreaId"}},e._l(e.domainList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("8e02")),r=t("2840"),c=t("a68a"),s=t("333d"),l={name:"storage",props:["innerHeightMinusFilter"],components:{Pagination:s["a"]},data:function(){return{tableList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,vehicleList:{},codeFilter:null,isDialog:!1,isEdit:!1,storageForm:{storageName:"",storageCode:"",description:"",rcsAreaId:""},storageRules:{storageCode:[{required:!0,trigger:"blur",message:"请输入仓库编码"}]},domainList:{}}},mounted:function(){var e=this;this.$emit("watchFilterHeight"),this.getStorageList(),Object(r["c"])().then((function(a){a.state&&a.data.data&&a.data.data.forEach((function(a){e.$set(e.domainList,a.id,a.name)}))}))},methods:{getStorageList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};this.codeFilter&&(a.name=this.codeFilter),this.tableLoading=!0,Object(i["d"])(a).then((function(a){e.tableLoading=!1,a.state&&(e.tableList=a.data.list||[],e.total=a.data.total||0)}))},openAddDialog:function(){var e=this;this.isEdit=!1,this.storageForm={storageName:"",storageCode:"",description:""},this.isDialog=!0,this.$nextTick((function(){e.$refs.storageForm.clearValidate()}))},closeDialog:function(){this.$refs.storageForm.clearValidate(),this.isDialog=!1},openEditDialog:function(e){this.isEdit=!0,this.storageForm=JSON.parse(JSON.stringify(e)),this.isDialog=!0},saveEdit:function(){var e=this;this.$refs.storageForm.validate((function(a){a&&(e.storageForm.storageName=e.storageForm.storageCode,e.isEdit?Object(i["b"])(e.storageForm).then((function(a){a.state&&(c["Message"].success("仓库配置修改成功"),e.isDialog=!1,e.getStorageList())})):Object(i["b"])(e.storageForm).then((function(a){a.state&&(c["Message"].success("仓库配置增加成功"),e.isDialog=!1,e.getStorageList())})))}))},toggleEnable:function(e){var a=this,t=e.enable?"启用":"禁用",n=function(){e.enable=0===e.enable?1:0};c["MessageBox"].confirm("确定".concat(t,"仓库?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])(e).then((function(e){e.state?(c["Message"].success("仓库".concat(t,"成功")),a.getStorageList()):n()})).catch((function(){n()}))})).catch((function(){n()}))},deleteStorage:function(e){var a=this;c["MessageBox"].confirm("确定删除仓库: ".concat(e.storageCode,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])(e.id).then((function(e){e.state&&(c["Message"].success("仓库删除成功"),a.getStorageList())}))})).catch((function(){}))}}},d=l,m=t("4ac2"),u=Object(m["a"])(d,n,o,!1,null,null,null);a["default"]=u.exports},f997:function(e,a,t){},fbb2:function(e,a,t){"use strict";t.d(a,"e",(function(){return o})),t.d(a,"c",(function(){return i})),t.d(a,"f",(function(){return r})),t.d(a,"a",(function(){return c})),t.d(a,"g",(function(){return s})),t.d(a,"b",(function(){return l})),t.d(a,"d",(function(){return d}));var n=t("b775");function o(e){return n["a"].get("/amr/getAmrPageList",e)}function i(){return n["a"].post("/amr/onlineAmr")}function r(){return n["a"].get("/amr/listAmrType")}function c(e){return n["a"].post("/amr/register",e)}function s(e){return n["a"].post("/amr/editorAmr",e)}function l(e){return n["a"].post("/amr/deleteAmr/"+e)}function d(e){return n["a"].post("/amr/realtimeInfo",e)}},fe4b:function(e,a,t){},fea1:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"location-container"},[t("div",{staticClass:"table-container",style:{height:e.innerHeight-80+"px"},attrs:{id:"table-container"}},[t("split-pane",{attrs:{split:"vertical","min-width":300,"default-percent":40,"max-percent":80,id:"split-pane"},on:{resize:e.resize}},[t("template",{slot:"paneL"},[t("div",{staticClass:"pane-left"},[t("el-input",{staticClass:"tree-filter",attrs:{placeholder:"输入关键字过滤",clearable:""},model:{value:e.treeFilter,callback:function(a){e.treeFilter="string"===typeof a?a.trim():a},expression:"treeFilter"}}),e._v(" "),t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.isLeftLoading,expression:"isLeftLoading"}],ref:"AGVTree",attrs:{data:e.columnList,"node-key":"id",indent:10,draggable:!1,"filter-node-method":e.filterNode,props:e.defaultProps,"default-expanded-keys":e.defaultShowNodes,"expand-on-click-node":!1,"default-expand-all":!1},on:{"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse,"node-click":e.toggleLocationList},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.node,o=a.data;return t("span",{staticClass:"custom-tree-node"},[t("div",[t("span",{staticClass:"level"},[e._v("["+e._s(e.defaultTitles[n.level])+"]")]),e._v(" "),t("span",{staticClass:"title",class:o.id===e.chooseFilter&&n.level===e.chooseType?"choose-column-item":""},[e._v(e._s(o.label))])]),e._v(" "),t("div",[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"wms/location/addLocation",expression:"'wms/location/addLocation'"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:function(a){return a.stopPropagation(),e.addEquipment(o,n)}}},[e._v("\n                  "+e._s(e.defaultTitles[n.level+1])+"\n                ")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:1!==n.level,expression:"node.level !== 1"},{name:"hasPermi",rawName:"v-hasPermi",value:"wms/location/updateLocation",expression:"'wms/location/updateLocation'"}],attrs:{type:"warning",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return a.stopPropagation(),e.updateEquipment(o,n)}}},[e._v(e._s(e.defaultTitles[n.level]))]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:1!==n.level,expression:"node.level !== 1"},{name:"hasPermi",rawName:"v-hasPermi",value:"wms/location/deleteLocation",expression:"'wms/location/deleteLocation'"}],attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return a.stopPropagation(),e.removeEquipment(o,n)}}},[e._v(e._s(e.defaultTitles[n.level]))])],1)])}}])})],1)]),e._v(" "),t("template",{slot:"paneR"},[t("div",{ref:"filterContainer",staticClass:"filter-container"},[t("el-input",{staticClass:"filter-input-one",attrs:{placeholder:"请输入库位编码",clearable:""},on:{change:e.getLocationList},model:{value:e.inputFilter,callback:function(a){e.inputFilter="string"===typeof a?a.trim():a},expression:"inputFilter"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary"},on:{click:e.getLocationList}},[e._v("搜索")])],1)],2),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"wms/location/addLocation",expression:"'wms/location/addLocation'"}],attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(a){return e.addEquipment("",{level:3})}}},[e._v("新增库位")]),e._v(" "),t("el-tooltip",{attrs:{content:"点击取消",placement:"top"}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.chooseType,expression:"chooseType"}],attrs:{type:"info"},on:{click:function(a){return e.toggleLocationList({},{})}}},[e._v(e._s(e.defaultTitles[e.chooseType]+": "+e.chooseCode))])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"pane-right",attrs:{"header-cell-style":{background:"#eee"},data:e.locationList,height:e.innerHeightMinusFilter-172,"highlight-current-row":""}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"90",fixed:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"code",label:"编码",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n              "+e._s(e.locationTypeList[a.row.typeId])+"\n            ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n              "+e._s(e.locationStatusList[a.row.status].name)+"\n            ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"vertexCode",label:"绑定点位",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"storageCode",label:"所属仓库",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"areaCode",label:"所属区域",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"columnCode",label:"所属栏位",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"columnIndex",label:"存放位置",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"更新时间",align:"center",width:"152px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n              "+e._s(e._f("dateTime")(a.row.updateTime))+"\n            ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否启用",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"wms/location/updateLocation",expression:"'wms/location/updateLocation'"}],on:{change:function(t){return e.toggleEnable(a.row)}},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable","string"===typeof t?t.trim():t)},expression:"scope.row.enable"}}),e._v(" "),t("span",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"!wms/location/updateLocation",expression:"'!wms/location/updateLocation'"}]},[e._v(e._s(a.row.enable?"已启用":"未启用"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"wms/location/updateLocation",expression:"'wms/location/updateLocation'"}],attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return e.updateEquipment(a.row,{level:4})}}}),e._v(" "),t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"wms/location/deleteLocation",expression:"'wms/location/deleteLocation'"}],attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.removeEquipment(a.row,{level:4})}}})]}}])})],1),e._v(" "),t("pagination",{attrs:{total:e.total,page:e.currentPage,limit:e.pageSize},on:{"update:page":function(a){e.currentPage=a},"update:limit":function(a){e.pageSize=a},pagination:e.getLocationList}})],1)],2)],1),e._v(" "),t("el-dialog",{attrs:{title:(e.isEdit?"编辑":"新增")+e.defaultTitles[e.chooseLevel+1],visible:e.isDialog,width:"400px"},on:{"update:visible":function(a){e.isDialog=a},close:e.closeDialog}},[t("el-form",{ref:"locationForm",attrs:{"label-width":"90px",model:e.locationForm,rules:e.locationRules}},[t("el-form-item",{attrs:{label:"编码: ",prop:"code"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入"+e.defaultTitles[e.chooseLevel+1]+"编码",maxlength:"20"},model:{value:e.locationForm.code,callback:function(a){e.$set(e.locationForm,"code","string"===typeof a?a.trim():a)},expression:"locationForm.code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"所属"+e.defaultTitles[e.chooseLevel]+": ",prop:"parentId"}},[1===e.chooseLevel?t("el-select",{attrs:{placeholder:"请选择"+e.defaultTitles[e.chooseLevel],filterable:""},model:{value:e.locationForm.parentId,callback:function(a){e.$set(e.locationForm,"parentId","string"===typeof a?a.trim():a)},expression:"locationForm.parentId"}},e._l(e.storageList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.storageCode,value:Number(a)}})})),1):2===e.chooseLevel?t("el-cascader",{attrs:{options:e.areaList,props:{value:"id"},filterable:"",placeholder:"请选择"+e.defaultTitles[e.chooseLevel]},model:{value:e.locationForm.parentId,callback:function(a){e.$set(e.locationForm,"parentId","string"===typeof a?a.trim():a)},expression:"locationForm.parentId"}}):3===e.chooseLevel?t("el-cascader",{attrs:{options:e.columnList,props:{value:"id"},filterable:"",placeholder:"请选择"+e.defaultTitles[e.chooseLevel]},on:{change:e.changeColumn},model:{value:e.locationForm.parentId,callback:function(a){e.$set(e.locationForm,"parentId","string"===typeof a?a.trim():a)},expression:"locationForm.parentId"}}):e._e()],1),e._v(" "),3===e.chooseLevel?t("span",[t("el-form-item",{attrs:{label:"存放位置",prop:"columnIndex"}},[t("el-select",{attrs:{placeholder:"请选择存放位置",filterable:""},model:{value:e.locationForm.columnIndex,callback:function(a){e.$set(e.locationForm,"columnIndex","string"===typeof a?a.trim():a)},expression:"locationForm.columnIndex"}},e._l(e.columnAllowList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"库位类型",prop:"typeId"}},[t("el-select",{attrs:{placeholder:"请选择库位类型",filterable:"",disabled:""},model:{value:e.locationForm.typeId,callback:function(a){e.$set(e.locationForm,"typeId","string"===typeof a?a.trim():a)},expression:"locationForm.typeId"}},e._l(e.locationTypeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:Number(a)}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"绑定点位",prop:"vertexCode"}},[t("el-select",{attrs:{placeholder:"请选择绑定点位",filterable:"",clearable:""},model:{value:e.locationForm.vertexCode,callback:function(a){e.$set(e.locationForm,"vertexCode","string"===typeof a?a.trim():a)},expression:"locationForm.vertexCode"}},e._l(e.vertexCodeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.code,value:e.code}})})),1)],1)],1):e._e(),e._v(" "),2===e.chooseLevel?t("el-form-item",{attrs:{label:"容量: ",prop:"maxCapacity"}},[t("el-input-number",{attrs:{min:1,max:1/0,precision:0,step:1,"controls-location":"right"},model:{value:e.locationForm.maxCapacity,callback:function(a){e.$set(e.locationForm,"maxCapacity",e._n(a))},expression:"locationForm.maxCapacity"}})],1):e._e()],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},o=[],i=(t("a450"),t("1bc7"),t("b775"));function r(e){return i["a"].post("/wms/area/addOrUpdate",e)}function c(e){return i["a"].post("/wms/area/delete/"+e)}function s(e){return i["a"].post("/wms/column/addOrUpdate",e)}function l(e){return i["a"].delete("/wms/column/delete/"+e)}function d(e){return i["a"].get("/wms/column/useDetails/"+e)}function m(e){return i["a"].post("/wms/location/pageList",e)}function u(e){return i["a"].post("/wms/location/add",e)}function p(e){return i["a"].post("/wms/location/update",e)}function h(e){return i["a"].delete("wms/location/delete/"+e)}function g(){return i["a"].get("/wms/location/type/getAll")}function f(e){return i["a"].get("map/getAreaAllVertexes/"+e)}var v=t("8e02"),b=t("a68a"),_=t("333d"),y=t("1e71"),k=t.n(y),L=t("0f8a"),w={name:"location",props:["innerHeightMinusFilter","innerHeight"],components:{Pagination:_["a"],splitPane:k.a},data:function(){var e={message:"只能是数字格式",pattern:/^[-\d.]+$/,trigger:["blur","change"]};return{storageList:{},areaList:[],columnList:[],columnAllowList:[],defaultProps:{children:"children",label:"label"},defaultTitles:{1:"仓库",2:"区域",3:"栏位",4:"库位"},defaultShowNodes:[],isLeftLoading:!1,treeFilter:"",locationList:[],tableLoading:!1,currentPage:1,pageSize:10,total:0,chooseFilter:"",chooseType:0,chooseCode:"",inputFilter:"",isDialog:!1,isEdit:!1,chooseLevel:0,locationForm:{},locationRules:{parentId:[{required:!0,trigger:"change",message:"所属不能为空"}],typeId:[{required:!0,trigger:"change",message:"库位类型不能为空"}],code:[{required:!0,trigger:"blur",message:"编码不能为空"}],maxCapacity:[{required:!0,trigger:"blur",message:"容量不能为空"},e],columnIndex:[{required:!0,trigger:"change",message:"存放位置不能为空"},e]},locationTypeList:{},locationStatusList:L["b"],vertexCodeList:[],rcsAreaId:0}},mounted:function(){var e=this;this.resize(),this.getStorageDetail(),this.getLocationList(),g().then((function(a){a.state&&a.data&&a.data.forEach((function(a){e.$set(e.locationTypeList,a.id,a.name)}))}))},watch:{treeFilter:function(){this.$refs.AGVTree.filter()}},methods:{resize:function(){this.$emit("watchFilterHeight")},getLocationList:function(){var e=this,a={currentPage:this.currentPage,pageSize:this.pageSize};switch(this.inputFilter&&(a.code=this.inputFilter),this.chooseType){case 1:a.storageId=this.chooseFilter;break;case 2:a.areaId=this.chooseFilter;break;case 3:a.columnId=this.chooseFilter;break}this.tableLoading=!0,m(a).then((function(a){e.tableLoading=!1,a.state&&(e.locationList=a.data.list||[],e.total=a.data.total||0)}))},getStorageDetail:function(){var e=this;this.isLeftLoading=!0,Object(v["c"])().then((function(a){if(a.state){var t={},n=[],o=[];a.data.forEach((function(a){var i=a.wmsAreaBos,r=a.wmsStoragePo;e.$set(t,r.id,r),n.push({id:r.id,label:r.storageCode,children:i?i.map((function(e){var a=e.wmsAreaPo;return{id:a.id,label:a.areaCode}})):[]}),o.push({id:r.id,label:r.storageCode,children:i?i.map((function(e){var a=e.wmsAreaPo,t=e.wmsColumnPos;return{id:a.id,label:a.areaCode,children:t?t.map((function(e){return{id:e.id,label:e.columnCode,maxCapacity:e.maxCapacity}})):[]}})):[]})})),e.storageList=t,e.areaList=n,e.columnList=o,e.$nextTick((function(){e.$refs.AGVTree&&e.$refs.AGVTree.filter()})),e.isLeftLoading=!1}}))},closeDialog:function(){this.$refs.locationForm.clearValidate(),this.isDialog=!1,this.rcsAreaId=0,this.vertexCodeList=[]},addEquipment:function(e,a){var t=this;switch(this.isEdit=!1,this.locationForm={code:""},a.level){case 1:this.$set(this.locationForm,"parentId",e.id);break;case 2:this.$set(this.locationForm,"parentId",[a.parent.data.id,e.id]),this.$set(this.locationForm,"maxCapacity",1);break;case 3:this.$set(this.locationForm,"parentId",e?[a.parent.parent.data.id,a.parent.data.id,e.id]:""),this.$set(this.locationForm,"typeId",1),this.$set(this.locationForm,"vertexCode",""),this.$set(this.locationForm,"enable",!0),this.changeColumn();break}this.chooseLevel=a.level,this.isDialog=!0,this.$nextTick((function(){t.$refs.locationForm.clearValidate()}))},updateEquipment:function(e,a){var t=this;switch(this.isEdit=!0,this.locationForm={code:e.label||e.code,id:e.id},a.level){case 2:this.$set(this.locationForm,"parentId",a.parent.data.id);break;case 3:this.$set(this.locationForm,"parentId",[a.parent.parent.data.id,a.parent.data.id]),this.$set(this.locationForm,"maxCapacity",e.maxCapacity);break;case 4:this.$set(this.locationForm,"parentId",[e.storageId,e.areaId,e.columnId]),this.$set(this.locationForm,"columnIndex",e.columnIndex),this.$set(this.locationForm,"typeId",e.typeId),this.$set(this.locationForm,"vertexCode",e.vertexCode),this.$set(this.locationForm,"enable",e.enable),this.changeColumn(!0);break}this.chooseLevel=4===a.level?3:a.parent.level,this.isDialog=!0,this.$nextTick((function(){t.$refs.locationForm.clearValidate()}))},changeColumn:function(e){var a=this;if(this.locationForm.parentId){d(this.locationForm.parentId[2]).then((function(t){if(t.state){for(var n=[],o=1;o<t.data.maxCapacity+1;o++)-1===t.data.columnIndexs.indexOf(o)&&n.push(o);a.columnAllowList=n,!0===e?a.columnAllowList.unshift(a.locationForm.columnIndex):n.length>0?a.$set(a.locationForm,"columnIndex",n[n.length-1]):(a.$set(a.locationForm,"columnIndex",""),a.$nextTick((function(){a.$refs.locationForm.clearValidate()})))}}));var t=this.storageList[this.locationForm.parentId[0]].rcsAreaId;this.rcsAreaId!==t&&(this.vertexCodeList=[],t&&f(t).then((function(e){e.state&&(a.vertexCodeList=e.data)})),this.rcsAreaId&&this.$set(this.locationForm,"vertexCode",""),this.rcsAreaId=t)}else this.columnAllowList=[],this.$set(this.locationForm,"columnIndex",""),this.$nextTick((function(){a.$refs.locationForm.clearValidate()}))},handleRes:function(e){e.state&&(b["Message"].success("操作成功"),this.isDialog=!1,3!==this.chooseLevel&&this.getStorageDetail(),this.getLocationList())},saveEdit:function(){var e=this;this.$refs.locationForm.validate((function(a){if(a){var t,n=e.locationForm,o=n.code,i=n.id,c=n.maxCapacity,l=n.parentId,d=n.typeId,m=n.columnIndex,h=n.vertexCode;n.enable;switch(e.chooseLevel){case 1:t={areaCode:o,areaName:o,storageId:l},i&&(t.id=i),r(t).then((function(a){e.handleRes(a)}));break;case 2:t={columnCode:o,areaId:l[1],maxCapacity:c},i&&(t.id=i),s(t).then((function(a){e.handleRes(a)}));break;case 3:t={code:o,areaId:l[1],columnId:l[2],typeId:d,columnIndex:m,vertexCode:h},i?(t.id=i,p(t).then((function(a){e.handleRes(a)}))):u(t).then((function(a){e.handleRes(a)}));break}}}))},toggleEnable:function(e){var a=this,t=e.enable?"启用":"禁用",n=function(){e.enable=!e.enable};b["MessageBox"].confirm("确定".concat(t,"库位: ").concat(e.code,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p(e).then((function(e){e.state?a.handleRes(e):n()})).catch((function(){n()}))})).catch((function(){n()}))},filterNode:function(e,a){return!this.treeFilter||-1!==a.label.indexOf(this.treeFilter)},toggleLocationList:function(e,a){this.chooseType!==a.level||this.chooseFilter!==e.id?(this.chooseType=a.level,this.chooseFilter=e.id,this.chooseCode=e.label):this.chooseType=0,this.getLocationList()},removeEquipment:function(e,a){var t=this;this.$confirm("确定删除".concat(this.defaultTitles[a.level],": ").concat(e.label||e.code," ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){switch(t.chooseLevel=a.level-1,a.level){case 2:c(e.id).then((function(e){t.handleRes(e)}));break;case 3:l(e.id).then((function(e){t.handleRes(e)}));break;case 4:h(e.id).then((function(e){t.handleRes(e)}));break}})).catch((function(){}))},handleNodeExpand:function(e){-1===this.defaultShowNodes.indexOf(e.id)&&this.defaultShowNodes.push(e.id)},handleNodeCollapse:function(e){var a=this,t=this.defaultShowNodes.indexOf(e.id);t>-1&&this.defaultShowNodes.splice(t,1);var n=function e(t){t.forEach((function(t){var n=a.defaultShowNodes.indexOf(t.id);n>-1&&a.defaultShowNodes.splice(n,1),t.children&&t.children.length>0&&e(t.children)}))};e.children&&n(e.children)}}},x=w,C=(t("3aad"),t("1b51"),t("4ac2")),F=Object(C["a"])(x,n,o,!1,null,null,null);a["default"]=F.exports},fed2:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"amrDetails-container"},[t("div",[e.backPage?t("el-page-header",{on:{back:e.goBack}}):e._e()],1)])},o=[],i=t("fbb2"),r={data:function(){return{backPage:"",amrId:0,amrInfo:{}}},mounted:function(){this.amrId=this.$route.params.id,this.backPage=this.$route.query.backPage,this.getVehicleInfo()},methods:{getVehicleInfo:function(){var e=this;Object(i["d"])({id:this.amrId}).then((function(a){a.state&&(e.amrInfo=a.data)}))},goBack:function(){this.$router.push(this.backPage)}}},c=r,s=t("4ac2"),l=Object(s["a"])(c,n,o,!1,null,"ff41e740",null);a["default"]=l.exports}}]);