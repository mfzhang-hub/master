{"version":3,"sources":["webpack:///./src/views/editor/components/spots/index.js","webpack:///./node_modules/_file-saver@2.0.5@file-saver/dist/FileSaver.min.js","webpack:///./src/views/editor/components/topo/index.vue?89b0","webpack:///src/views/editor/components/topo/index.vue","webpack:///./src/views/editor/components/topo/index.vue?b968","webpack:///./src/views/editor/components/topo/index.vue","webpack:///./node_modules/_core-js@3.21.1@core-js/modules/es.array.unscopables.flat.js","webpack:///./src/views/editor/index.vue?222f","webpack:///src/views/editor/index.vue","webpack:///./src/views/editor/index.vue?b1bd","webpack:///./src/views/editor/index.vue","webpack:///./node_modules/_core-js@3.21.1@core-js/modules/es.array.find-index.js","webpack:///./src/views/editor/components/base/index.js","webpack:///./src/views/editor/utils/find2D.js","webpack:///./src/views/editor/utils/copy.js","webpack:///./src/views/editor/const/color.js","webpack:///./node_modules/_core-js@3.21.1@core-js/internals/flatten-into-array.js","webpack:///./src/views/editor/components/topo/index.vue?a4ae","webpack:///./node_modules/_core-js@3.21.1@core-js/modules/es.set.js","webpack:///./src/views/editor/utils/inPath.js","webpack:///./src/views/editor/const/shape.js","webpack:///./node_modules/_core-js@3.21.1@core-js/modules/es.array.flat.js"],"names":["SVGSpot","spot","mapIns","MapInstance","instance","this","id","x","SCALE","ORIGINX","y","ORIGINY","code","type","b","a","autoBom","console","warn","test","Blob","c","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","_vm","_h","$createElement","_c","_self","staticStyle","attrs","staticClass","forbiddenRemove","on","$event","_v","_s","$router","back","openServerDialog","options","expandTrigger","changeMap","model","value","callback","$$v","expression","_e","junctions","length","_l","jun","index","key","style","color","highlightBox","spots","find","s","deleteId","affectsIds","item","deleteAffect","colors","setAffectId","idKeys","deleteBlock","addList","targetResult","scopedSlots","_u","fn","scope","row","domain","label","slot","JSON","stringify","deleteItem","$index","editItem","crossChange","domainVal","props","blkOption","blkVal","addCrossList","targetCrossResult","deleteCrossItem","uploadTraffic","serverDialog","openLocalLoading","openLocalJson","exportLocalLoading","exportLocalJson","readLocalJson","staticRenderFns","data","typeVal","types","draw","group","codeGroup","resultIdx","targetResultKey","SVGSpots","fileName","junOption","junVal","multiple","lazy","lazyLoad","node","resolve","level","getMapDetails","mapId","leaf","gx","gy","rectEnable","rectGroup","areaId","loadingMessage","spotIdMapper","spotNameMapper","mapIdMapper","mapNameMapper","trafficData","isShowCascader","computed","created","mode","simpleMode","getAreaMonitor","filter","map","children","methods","val","editCrossItem","splice","push","junMaps","blkMaps","blocks","ids","$message","message","idx","$confirm","confirmButtonText","cancelButtonText","then","catch","split","handleChange","forEach","v","flag","affects","format2Front","Set","r","one","more","res","getTraffic","content","Promise","animate","scale","fill","COLORS","stroke","width","pubIds","readConfFile","file","reader","ele","getElementById","arg","Array","importJson","eleIndex","event","idIndex","formatCrossData","strictJsonData","mapArr","dataCopy","click","suffix","handleLocalJson","isSuccess","trafficList","mapIds","duration","fun","FileSaver","exportJson","warning","area","updateTraffic","state","loadData","init","handlerMouseWheel","clearSelect","addJunctions","rerender","drawRoutes","drawSpotCodes","render","handleDeleteBlock","list","msg","isCodeShow","plain","font","size","svgSpotsCodes","lines","path","opacity","polygon","inPath","newBlock","keys","jIds","freeIds","bIds","blen","jlen","flen","nb","num","cos","polyline","line","start","cursor","_y","y1","step","showClose","dangerouslyUseHTMLString","SHAPE","move","circle","mapData","Edge","Vertex","topologyMap","tmpMapper","weight","startX","startY","endX","endY","xScale","yScale","mx","my","enable","linecap","linejoin","dasharray","maxCodeLimit","text","SHAPENAME","icon","Math","rect","mounted","beforeDestroy","close","component","addToUnscopables","components","Topo","$","$findIndex","findIndex","FIND_INDEX","SKIPS_HOLES","proto","forced","callbackfn","arguments","undefined","ox","oy","w","WIDTH","HEIGHT","find2D","arr","a0","a1","flat","count","deepCopy","obj","parse","isArray","lengthOfArrayLike","bind","TypeError","flattenIntoArray","original","source","sourceLen","depth","mapper","thisArg","element","elementLen","targetIndex","sourceIndex","mapFn","collection","collectionStrong","point","vs","inside","xi","yi","xj","yj","intersect","toObject","toIntegerOrInfinity","arraySpeciesCreate","depthArg","O","A"],"mappings":"qNAGMA,E,gBAMF,WAAYC,GAAM,sLADX,GAEH,IAAIC,EAASC,iBAAYC,SACzBC,KAAKC,GAAKL,EAAKK,GACfD,KAAKE,EAAIN,EAAKM,EAAIL,EAAOM,MAAQN,EAAOO,QACxCJ,KAAKK,EAAIR,EAAOS,QAAUV,EAAKS,EAAIR,EAAOM,MAC1CH,KAAKO,KAAOX,EAAKW,KACjBP,KAAKQ,KAAOZ,EAAKY,S,wBCfzB,qCAAwD,EAAO,GAAE,IAAE,kEAAnE,CAA0JR,GAAK,WAAW,aAAa,SAASS,EAAEC,EAAED,GAAG,MAAM,oBAAoBA,EAAEA,EAAE,CAACE,SAAQ,GAAI,iBAAiBF,IAAIG,QAAQC,KAAK,sDAAsDJ,EAAE,CAACE,SAASF,IAAIA,EAAEE,SAAS,6EAA6EG,KAAKJ,EAAEF,MAAM,IAAIO,KAAK,CAAC,SAASL,GAAG,CAACF,KAAKE,EAAEF,OAAOE,EAAE,SAASM,EAAEN,EAAED,EAAEO,GAAG,IAAIC,EAAE,IAAIC,eAAeD,EAAEE,KAAK,MAAMT,GAAGO,EAAEG,aAAa,OAAOH,EAAEI,OAAO,WAAWC,EAAEL,EAAEM,SAASd,EAAEO,IAAIC,EAAEO,QAAQ,WAAWZ,QAAQa,MAAM,4BAA4BR,EAAES,OAAO,SAAST,EAAEP,GAAG,IAAID,EAAE,IAAIS,eAAeT,EAAEU,KAAK,OAAOT,GAAE,GAAI,IAAID,EAAEiB,OAAO,MAAMhB,IAAI,OAAO,KAAKD,EAAEkB,QAAQ,KAAKlB,EAAEkB,OAAO,SAASC,EAAElB,GAAG,IAAIA,EAAEmB,cAAc,IAAIC,WAAW,UAAU,MAAMd,GAAG,IAAIP,EAAEsB,SAASC,YAAY,eAAevB,EAAEwB,eAAe,SAAQ,GAAG,EAAGC,OAAO,EAAE,EAAE,EAAE,GAAG,IAAG,GAAG,GAAG,GAAG,EAAG,EAAE,MAAMxB,EAAEmB,cAAcpB,IAAI,IAAI0B,EAAE,iBAAiBD,QAAQA,OAAOA,SAASA,OAAOA,OAAO,iBAAiBE,MAAMA,KAAKA,OAAOA,KAAKA,KAAK,iBAAiBC,GAAQA,EAAOA,SAASA,EAAOA,OAAO,EAAO3B,EAAEyB,EAAEG,WAAW,YAAYxB,KAAKwB,UAAUC,YAAY,cAAczB,KAAKwB,UAAUC,aAAa,SAASzB,KAAKwB,UAAUC,WAAWjB,EAAEa,EAAEK,SAAS,iBAAiBN,QAAQA,SAASC,EAAE,aAAa,aAAaM,kBAAkBC,YAAYhC,EAAE,SAASD,EAAEa,EAAEqB,GAAG,IAAIC,EAAET,EAAEU,KAAKV,EAAEW,UAAUC,EAAEhB,SAASiB,cAAc,KAAK1B,EAAEA,GAAGb,EAAEwC,MAAM,WAAWF,EAAEG,SAAS5B,EAAEyB,EAAEI,IAAI,WAAW,iBAAiB1C,GAAGsC,EAAEK,KAAK3C,EAAEsC,EAAEM,SAASC,SAASD,OAAOzB,EAAEmB,GAAG9B,EAAE8B,EAAEK,MAAMpC,EAAEP,EAAEa,EAAEqB,GAAGf,EAAEmB,EAAEA,EAAEQ,OAAO,YAAYR,EAAEK,KAAKR,EAAEY,gBAAgB/C,GAAGgD,YAAW,WAAWb,EAAEc,gBAAgBX,EAAEK,QAAO,KAAKK,YAAW,WAAW7B,EAAEmB,KAAI,KAAK,qBAAqBT,UAAU,SAASH,EAAEb,EAAEqB,GAAG,GAAGrB,EAAEA,GAAGa,EAAEc,MAAM,WAAW,iBAAiBd,EAAEG,UAAUqB,iBAAiBlD,EAAE0B,EAAEQ,GAAGrB,QAAQ,GAAGL,EAAEkB,GAAGnB,EAAEmB,EAAEb,EAAEqB,OAAO,CAAC,IAAIC,EAAEb,SAASiB,cAAc,KAAKJ,EAAEQ,KAAKjB,EAAES,EAAEW,OAAO,SAASE,YAAW,WAAW7B,EAAEgB,QAAO,SAASnC,EAAEQ,EAAEW,EAAEN,GAAG,GAAGA,EAAEA,GAAGH,KAAK,GAAG,UAAUG,IAAIA,EAAES,SAAS6B,MAAMtC,EAAES,SAAS8B,KAAKC,UAAU,kBAAkB,iBAAiBrD,EAAE,OAAOO,EAAEP,EAAEQ,EAAEW,GAAG,IAAIe,EAAE,6BAA6BlC,EAAED,KAAKoC,EAAE,eAAe9B,KAAKqB,EAAE4B,cAAc5B,EAAE6B,OAAOjB,EAAE,eAAejC,KAAKwB,UAAUC,WAAW,IAAIQ,GAAGJ,GAAGC,GAAGlC,IAAI,oBAAoBuD,WAAW,CAAC,IAAIC,EAAE,IAAID,WAAWC,EAAEC,UAAU,WAAW,IAAIzD,EAAEwD,EAAEE,OAAO1D,EAAEqC,EAAErC,EAAEA,EAAE2D,QAAQ,eAAe,yBAAyB/C,EAAEA,EAAEgC,SAASF,KAAK1C,EAAE4C,SAAS5C,EAAEY,EAAE,MAAM4C,EAAEI,cAAc7D,OAAO,CAAC,IAAI8D,EAAEpC,EAAEU,KAAKV,EAAEW,UAAU0B,EAAED,EAAEf,gBAAgB/C,GAAGa,EAAEA,EAAEgC,SAASkB,EAAElB,SAASF,KAAKoB,EAAElD,EAAE,KAAKmC,YAAW,WAAWc,EAAEb,gBAAgBc,KAAI,QAAQrC,EAAEK,OAAOlB,EAAEkB,OAAOlB,EAA+BmD,EAAOC,QAAQpD,O,iECA7oF,IAAI,EAAS,WAAa,IAAIqD,EAAI3E,KAAS4E,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,CAAC,mBAAmB,6hBAA6hBC,MAAM,CAAC,GAAK,YAAY,cAAgB,iBAAiB,CAACH,EAAG,MAAM,CAACI,YAAY,eAAe,CAACJ,EAAG,YAAY,CAACG,MAAM,CAAC,KAAON,EAAIQ,gBAAkB,UAAY,UAAU,KAAO,SAASC,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIQ,iBAAmBR,EAAIQ,mBAAmB,CAACR,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIQ,gBAAkB,KAAO,MAAM,WAAW,GAAGL,EAAG,MAAM,CAACI,YAAY,cAAc,CAACJ,EAAG,aAAa,CAACG,MAAM,CAAC,QAAU,kCAAkC,UAAY,WAAW,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,KAAsB,IAAfN,EAAIhD,OAAe,OAAS,GAAG,OAAS,GAAG,MAAQ,IAAIyD,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIhD,OAAS,KAAK,CAACgD,EAAIW,GAAG,SAAS,GAAGR,EAAG,MAAMA,EAAG,aAAa,CAACG,MAAM,CAAC,QAAU,uBAAuB,UAAY,WAAW,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,KAAsB,IAAfN,EAAIhD,OAAe,OAAS,GAAG,OAAS,GAAG,MAAQ,IAAIyD,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIhD,OAAS,KAAK,CAACgD,EAAIW,GAAG,SAAS,IAAI,GAAGR,EAAG,MAAM,CAACI,YAAY,YAAY,CAACJ,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIa,QAAQC,MAAM,MAAM,CAACd,EAAIW,GAAG,QAAQR,EAAG,KAAK,CAACE,YAAY,CAAC,MAAQ,aAAaI,GAAG,CAAC,SAAWT,EAAIe,mBAAmB,CAACf,EAAIW,GAAG,8BAA8BR,EAAG,MAAM,CAACA,EAAG,IAAI,CAACH,EAAIW,GAAG,WAAYX,EAAkB,eAAEG,EAAG,cAAc,CAACE,YAAY,CAAC,QAAU,eAAe,MAAQ,SAASC,MAAM,CAAC,KAAO,QAAQ,QAAUN,EAAIgB,QAAQ,MAAQ,CAAEC,cAAe,UAAWR,GAAG,CAAC,OAAST,EAAIkB,WAAWC,MAAM,CAACC,MAAOpB,EAAS,MAAEqB,SAAS,SAAUC,GAAMtB,EAAIoB,MAAME,GAAKC,WAAW,WAAWvB,EAAIwB,MAAM,GAAGrB,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,SAAS,QAAU,YAAY,cAAc,WAAW,CAAEL,EAAIyB,UAAUC,OAAS,EAAGvB,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,YAAY,CAAC,WAAa,UAAU,OAAS,IAAI,QAAU,WAAW,CAACL,EAAIW,GAAG,oBAAoBR,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,mBAAmB,YAAY,OAAO,OAAS,YAAY,CAACF,EAAG,UAAU,CAACG,MAAM,CAAC,OAAS,UAAUN,EAAI2B,GAAI3B,EAAa,WAAE,SAAS4B,EAAIC,GAAO,OAAO1B,EAAG,MAAM,CAAC2B,IAAIF,EAAIrB,YAAY,YAAYwB,MAAM,CAAGC,MAAO,WAAavB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIiC,aAAaL,MAAQ,CAAC5B,EAAIW,GAAG,IAAIX,EAAIY,GAAGiB,EAAQ,GAAG,KAAK7B,EAAIY,GAAGZ,EAAIkC,MAAMC,MAAK,SAAUC,GAAK,OAAOA,EAAE9G,IAAMsG,KAAQhG,MAAM,KAAKuE,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,QAAQ,QAAU,kBAAkBC,MAAM,CAAC,KAAO,SAAS,MAAQ,GAAG,KAAO,OAAO,KAAO,iBAAiB,OAAS,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIqC,SAAS,WAAYT,EAAKC,QAAY,MAAK,IAAI,KAAK7B,EAAIwB,KAAMxB,EAAIsC,WAAWZ,OAAS,EAAGvB,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,YAAY,CAAC,WAAa,UAAU,OAAS,IAAI,QAAU,WAAW,CAACL,EAAIW,GAAG,kBAAkBX,EAAI2B,GAAI3B,EAAc,YAAE,SAASuC,EAAKV,GAAO,OAAO1B,EAAG,MAAM,CAAC2B,IAAID,EAAMxB,YAAY,CAAC,OAAS,cAAcI,GAAG,CAAC,WAAa,SAASC,GAAQ,OAAOV,EAAIiC,aAAaM,EAAKD,eAAe,CAACnC,EAAG,UAAU,CAACG,MAAM,CAAC,OAAS,UAAU,CAACH,EAAG,KAAK,CAACA,EAAG,IAAI,CAACI,YAAY,wBAAwBP,EAAIW,GAAG,IAAIX,EAAIY,GAAG,UAAYiB,EAAQ,IAAI,KAAK1B,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,QAAQ,IAAM,QAAQ,SAAW,YAAYC,MAAM,CAAC,KAAO,OAAO,KAAO,iBAAiB,KAAO,UAAUG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIwC,aAAaX,QAAY,GAAKU,EAAKjH,GAAw6B6E,EAAG,MAAM,CAACI,YAAY,aAAaF,YAAY,CAAC,OAAS,QAAQ0B,MAAM,CAAGC,MAAOhC,EAAIyC,OAAOZ,KAAW,CAAC1B,EAAG,MAAM,CAACI,YAAY,sBAAsBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIiC,aAAaM,EAAKjH,OAAO,CAAC0E,EAAIW,GAAG,IAAIX,EAAIY,GAAGZ,EAAIkC,MAAMC,MAAK,SAAUC,GAAK,OAAOA,EAAE9G,IAAMiH,EAAKjH,MAAOM,MAAM,OAAOuE,EAAG,MAAM,CAACI,YAAY,gBAAgBP,EAAI2B,GAAIY,EAAe,YAAE,SAAStE,EAAE2B,GAAG,OAAOO,EAAG,MAAM,CAAC2B,IAAIlC,EAAEW,YAAY,eAAe,CAACJ,EAAG,MAAM,CAACI,YAAY,wBAAwBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIiC,aAAahE,MAAM,CAAC+B,EAAIW,GAAG,IAAIX,EAAIY,GAAGZ,EAAIkC,MAAMC,MAAK,SAAUC,GAAK,OAAOA,EAAE9G,IAAM2C,KAAMrC,MAAM,OAAOuE,EAAG,MAAM,CAACI,YAAY,sBAAsB,CAACJ,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,QAAQ,QAAU,kBAAkBC,MAAM,CAAC,KAAO,SAAS,MAAQ,GAAG,KAAO,OAAO,KAAO,iBAAiB,OAAS,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIqC,SAAS,SAAUpE,EAAG4D,EAAOjC,QAAQ,QAAO,KAA7yDO,EAAG,MAAM,CAACH,EAAI2B,GAAIY,EAAe,YAAE,SAAStE,EAAE2B,GAAG,MAAO,CAACO,EAAG,aAAa,CAAC2B,IAAIlC,EAAEU,MAAM,CAAC,KAAO,SAAS,CAACH,EAAG,MAAM,CAACI,YAAY,YAAYwB,MAAM,CAAGC,MAAOhC,EAAIyC,OAAOZ,IAAUpB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIiC,aAAahE,MAAM,CAAC+B,EAAIW,GAAG,IAAIX,EAAIY,GAAGhB,EAAI,GAAG,KAAKI,EAAIY,GAAGZ,EAAIkC,MAAMC,MAAK,SAAUC,GAAK,OAAOA,EAAE9G,IAAM2C,KAAMrC,MAAM,KAAKuE,EAAG,aAAa,CAACI,YAAY,OAAOD,MAAM,CAAC,OAAS,OAAO,QAAU,QAAQ,UAAY,SAAS,CAACH,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,QAAQ,QAAU,iBAAiB,cAAc,QAAQC,MAAM,CAAC,KAAO,UAAU,MAAQ,GAAG,KAAO,OAAO,KAAO,gBAAgB,OAAS,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAI0C,YAAYzE,EAAG4D,EAAOjC,QAAQ,GAAGO,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,QAAQ,QAAU,kBAAkBC,MAAM,CAAC,KAAO,SAAS,MAAQ,GAAG,KAAO,OAAO,KAAO,iBAAiB,OAAS,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIqC,SAAS,SAAUpE,EAAG4D,EAAOjC,QAAQ,UAAS,MAAo5B,OAAM,GAAGI,EAAIwB,KAAMxB,EAAI2C,OAAOjB,OAAS,EAAGvB,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,YAAY,CAAC,WAAa,UAAU,OAAS,IAAI,QAAU,WAAW,CAACL,EAAIW,GAAG,iBAAiBX,EAAI2B,GAAI3B,EAAU,QAAE,SAASuC,EAAKV,GAAO,OAAO1B,EAAG,MAAM,CAAC2B,IAAID,EAAMxB,YAAY,CAAC,OAAS,cAAcI,GAAG,CAAC,WAAa,SAASC,GAAQ,OAAOV,EAAIiC,aAAaM,MAAS,CAACpC,EAAG,UAAU,CAACG,MAAM,CAAC,OAAS,UAAU,CAACH,EAAG,KAAK,CAACA,EAAG,IAAI,CAACI,YAAY,wBAAwBP,EAAIW,GAAG,IAAIX,EAAIY,GAAG,SAAWiB,EAAQ,IAAI,KAAK1B,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,QAAQ,IAAM,QAAQ,SAAW,YAAYC,MAAM,CAAC,KAAO,OAAO,KAAO,iBAAiB,KAAO,UAAUG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAI4C,YAAYf,QAAY,GAAG7B,EAAI2B,GAAG,GAAO,SAAS1D,EAAE2B,GAAG,MAAO,CAACO,EAAG,aAAa,CAAC2B,IAAIlC,EAAEU,MAAM,CAAC,KAAO,SAAS,CAACH,EAAG,MAAM,CAACI,YAAY,YAAYwB,MAAM,CAAGC,MAAOhC,EAAIyC,OAAOZ,IAAUpB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIiC,aAAahE,MAAM,CAAC+B,EAAIW,GAAG,IAAIX,EAAIY,GAAGhB,EAAI,GAAG,KAAKI,EAAIY,GAAGZ,EAAIkC,MAAMC,MAAK,SAAUC,GAAK,OAAOA,EAAE9G,IAAM2C,KAAMrC,MAAM,KAAKuE,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,QAAQ,QAAU,kBAAkBC,MAAM,CAAC,KAAO,SAAS,MAAQ,GAAG,KAAO,OAAO,KAAO,iBAAiB,OAAS,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIqC,SAAS,QAASpE,EAAG4D,EAAOjC,QAAQ,UAAS,IAAI,OAAM,GAAGI,EAAIwB,OAAOrB,EAAG,MAAM,CAACE,YAAY,CAAC,aAAa,SAAS,CAAEL,EAAIoB,MAAMM,OAAS,EAAGvB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,UAAU,KAAO,eAAe,MAAQ,IAAIG,GAAG,CAAC,MAAQT,EAAI6C,UAAU,CAAC7C,EAAIW,GAAG,YAAYX,EAAIwB,MAAM,GAAGrB,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,mBAAmB,CAACF,EAAG,KAAK,CAACE,YAAY,CAAC,aAAa,SAAS,CAACL,EAAIW,GAAG,YAAYR,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,QAAQC,MAAM,CAAC,KAAO,OAAO,OAAS,GAAG,KAAON,EAAI8C,eAAe,CAAC3C,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,UAAUyC,YAAY/C,EAAIgD,GAAG,CAAC,CAAClB,IAAI,UAAUmB,GAAG,SAASC,GAAO,MAAO,CAAClD,EAAIW,GAAG,IAAIX,EAAIY,GAAGZ,EAAIgB,QAAQmB,MAAK,SAAUpG,GAAK,OAAOA,EAAEqF,QAAU8B,EAAMC,IAAIC,UAAWC,OAAO,YAAYlD,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,MAAQ,OAAOyC,YAAY/C,EAAIgD,GAAG,CAAC,CAAClB,IAAI,UAAUmB,GAAG,SAASC,GAAO,MAAO,CAAC/C,EAAG,aAAa,CAACG,MAAM,CAAC,UAAY,SAAS,CAACH,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,WAAWgD,KAAK,WAAWtD,EAAI2B,GAAIuB,EAAMC,IAAU,QAAE,SAASrH,EAAEmC,GAAG,OAAOkC,EAAG,IAAI,CAAC2B,IAAI7D,GAAG,CAAC+B,EAAIW,GAAG,IAAIX,EAAIY,GAAG2C,KAAKC,UAAU1H,IAAI,UAAS,GAAGqE,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,OAAO,QAAU,kBAAkBC,MAAM,CAAC,MAAQ,GAAG,KAAO,OAAO,KAAO,eAAe,OAAS,OAAO,UAAUH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,MAAMyC,YAAY/C,EAAIgD,GAAG,CAAC,CAAClB,IAAI,UAAUmB,GAAG,SAASC,GAAO,MAAO,CAAC/C,EAAG,YAAY,CAACE,YAAY,CAAC,QAAU,kBAAkBC,MAAM,CAAC,KAAO,SAAS,MAAQ,GAAG,KAAO,OAAO,KAAO,iBAAiB,OAAS,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIyD,WAAWP,EAAMQ,YAAYvD,EAAG,YAAY,CAACE,YAAY,CAAC,cAAc,MAAM,QAAU,kBAAkBC,MAAM,CAAC,MAAQ,GAAG,KAAO,OAAO,KAAO,eAAe,OAAS,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAI2D,SAAST,EAAMQ,oBAAoB,IAAI,GAAGvD,EAAG,MAAM,CAACE,YAAY,CAAC,aAAa,OAAO,aAAa,SAAS,CAACF,EAAG,KAAK,CAACH,EAAIW,GAAG,aAAaR,EAAG,MAAM,GAAG,CAACA,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,QAAQ,CAACF,EAAG,IAAI,CAACE,YAAY,CAAC,QAAU,eAAe,MAAQ,SAAS,CAACL,EAAIW,GAAG,cAAcR,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,YAAc,MAAM,SAAW,IAAIG,GAAG,CAAC,OAAST,EAAI4D,aAAazC,MAAM,CAACC,MAAOpB,EAAa,UAAEqB,SAAS,SAAUC,GAAMtB,EAAI6D,UAAUvC,GAAKC,WAAW,cAAcvB,EAAI2B,GAAI3B,EAAW,SAAE,SAASuC,GAAM,OAAOpC,EAAG,YAAY,CAAC2B,IAAIS,EAAKnB,MAAMd,MAAM,CAAC,MAAQiC,EAAKc,MAAM,MAAQd,EAAKnB,YAAW,IAAI,GAAGjB,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,QAAQ,CAACF,EAAG,IAAI,CAACE,YAAY,CAAC,QAAU,eAAe,MAAQ,SAAS,CAACL,EAAIW,GAAG,WAAWR,EAAG,cAAc,CAACG,MAAM,CAAC,mBAAkB,EAAM,MAAQN,EAAI8D,MAAM,QAAU9D,EAAI+D,UAAU,KAAO,OAAO,gBAAgB,IAAI5C,MAAM,CAACC,MAAOpB,EAAU,OAAEqB,SAAS,SAAUC,GAAMtB,EAAIgE,OAAO1C,GAAKC,WAAW,aAAa,KAAKpB,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,OAAO,aAAa,WAAW,CAAEL,EAAa,UAAEG,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,UAAU,KAAO,eAAe,MAAQ,IAAIG,GAAG,CAAC,MAAQT,EAAIiE,eAAe,CAACjE,EAAIW,GAAG,YAAYX,EAAIwB,MAAM,GAAGrB,EAAG,KAAKA,EAAG,WAAW,CAACE,YAAY,CAAC,MAAQ,QAAQC,MAAM,CAAC,KAAO,OAAO,OAAS,GAAG,KAAON,EAAIkE,oBAAoB,CAAC/D,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,UAAUyC,YAAY/C,EAAIgD,GAAG,CAAC,CAAClB,IAAI,UAAUmB,GAAG,SAASC,GAAO,MAAO,CAAClD,EAAIW,GAAG,IAAIX,EAAIY,GAAGZ,EAAIgB,QAAQmB,MAAK,SAAUpG,GAAK,OAAOA,EAAEqF,QAAU8B,EAAMC,IAAIC,UAAWC,OAAO,YAAYlD,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,OAAOyC,YAAY/C,EAAIgD,GAAG,CAAC,CAAClB,IAAI,UAAUmB,GAAG,SAASC,GAAO,MAAO,CAAC/C,EAAG,aAAa,CAACG,MAAM,CAAC,UAAY,SAAS,CAACH,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,WAAWgD,KAAK,WAAWtD,EAAI2B,GAAIuB,EAAMC,IAAU,QAAE,SAASrH,EAAEmC,GAAG,OAAOkC,EAAG,IAAI,CAAC2B,IAAI7D,GAAG,CAAC+B,EAAIW,GAAG,IAAIX,EAAIY,GAAG2C,KAAKC,UAAU1H,IAAI,UAAS,GAAGqE,EAAG,YAAY,CAACE,YAAY,CAAC,MAAQ,OAAO,QAAU,kBAAkBC,MAAM,CAAC,MAAQ,GAAG,KAAO,OAAO,KAAO,eAAe,OAAS,OAAO,UAAUH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,MAAMyC,YAAY/C,EAAIgD,GAAG,CAAC,CAAClB,IAAI,UAAUmB,GAAG,SAASC,GAAO,MAAO,CAAC/C,EAAG,YAAY,CAACE,YAAY,CAAC,QAAU,kBAAkBC,MAAM,CAAC,KAAO,SAAS,MAAQ,GAAG,KAAO,OAAO,KAAO,iBAAiB,OAAS,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAImE,gBAAgBjB,EAAMQ,oBAAoB,IAAI,GAAGvD,EAAG,MAAM,CAACE,YAAY,CAAC,aAAa,SAAS,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAUG,GAAG,CAAC,MAAQT,EAAIe,mBAAmB,CAACf,EAAIW,GAAG,cAAcR,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,WAAWG,GAAG,CAAC,MAAQT,EAAIoE,gBAAgB,CAACpE,EAAIW,GAAG,WAAW,GAAGR,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,WAAW,QAAUN,EAAIqE,aAAa,MAAQ,SAAS5D,GAAG,CAAC,iBAAiB,SAASC,GAAQV,EAAIqE,aAAa3D,KAAU,CAACP,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAU,QAAUN,EAAIsE,kBAAkB7D,GAAG,CAAC,MAAQT,EAAIuE,gBAAgB,CAACvE,EAAIW,GAAG,YAAYR,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAU,QAAUN,EAAIwE,oBAAoB/D,GAAG,CAAC,MAAQT,EAAIyE,kBAAkB,CAACzE,EAAIW,GAAG,aAAaR,EAAG,QAAQ,CAACE,YAAY,CAAC,QAAU,QAAQC,MAAM,CAAC,KAAO,OAAO,GAAK,cAAcG,GAAG,CAAC,OAAST,EAAI0E,iBAAiBvE,EAAG,MAAM,CAACI,YAAY,gBAAgBF,YAAY,CAAC,QAAU,UAAUC,MAAM,CAAC,KAAO,UAAUgD,KAAK,UAAU,CAACnD,EAAG,YAAY,CAACM,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIqE,cAAe,KAAS,CAACrE,EAAIW,GAAG,UAAU,IAAI,IAAI,QAC7nXgE,EAAkB,G,8cC4jBP,GACbC,KADF,WAEI,MAAO,CACLxD,MAAOA,GACPJ,QAASA,GACT6D,QAASA,EACTC,MAAOA,CACb,CAAQ1D,MAARA,EAAQiC,MAARA,sBACA,CAAQjC,MAARA,EAAQiC,MAARA,YAEMf,WAAYA,GACZyC,KAAMA,KACNC,MAAOA,KACPC,UAAWA,KACXC,eAAWA,EACXpC,aAAcA,GACdqC,gBAAiBA,GACjBjB,kBAAmBA,GAEnBzC,UAAWA,GACXkB,OAAQA,GACRT,WAAOA,EACPkD,cAAUA,EACVC,SAAUA,GACVC,UAAWA,GACXvB,UAAWA,GACXF,UAAWA,GACX0B,OAAQA,GACRvB,OAAQA,GACRF,MAAOA,CACL0B,UAAUA,EACVC,MAAMA,EACNC,SAHR,SAGAC,EAAAC,GACU,IAAV,oBACwB,IAAVC,GACFC,eAAcA,CAA1BC,UAAA,kBACc,IAAd,mBACA,6CACA,4BACA3E,WACAiC,aACA2C,cAEcJ,EAAQA,QAKhB5I,OAAQA,EACRiJ,GAAIA,EACJC,GAAIA,EACJC,YAAYA,EACZC,UAAWA,KACXC,OAAQA,GACRC,eAAgBA,KAChBjC,cAAcA,EACdkC,aAAcA,GACdC,eAAgBA,GAChBC,YAAaA,GACbC,cAAeA,GACfC,YAAaA,KACbC,gBAAgBA,EAChBpC,oBAAoBA,EACpBF,kBAAkBA,EAClB9D,iBAAiBA,IAGrBqG,SAAUA,CACRpE,OADJ,WAEM,OAAO,eAGXqE,QAxEF,WAwEA,WAEA,yBACiB,WAATC,IACF1L,KAAK2L,YAAa,GAEpBC,iBAAiBA,MAAKA,SAARA,GACZ,EAAN,eACAC,QAAA,YASQ,OARA3E,EAARA,uCACU,EAAV,gCACU,EAAV,KACA,gBACAA,0BACA4E,SAGA,gCAEAA,KAAA,YAAQ,MAAR,CACU/F,MAAOA,EAAKA,UAAUA,GACtBiC,MAAOA,EAAKA,UAAUA,KACtB+D,SACV7E,8BACAA,qCAAY,MAAZ,CACcnB,MAAOA,EAAIA,MACXiC,MAAOA,EAAIA,oBAKvBgE,QAASA,CACPzD,YADJ,SACA0D,GAAA,WACMjM,KAAKkK,OAAS,GACdlK,KAAK2I,OAAS,GACd3I,KAAKiK,UAAYjK,KAAK2F,QAAQmB,MAAK,SAAzC,qCACM,IAAN,mEAEM9G,KAAK0I,UAAYA,EAAUmD,QAAO,SAAxC,mCAiBIK,cAxBJ,aAkCIpD,gBAlCJ,SAkCAmD,GACMjM,KAAK6I,kBAAkBsD,OAAOF,EAAK,IAErCrD,aArCJ,WAsCU5I,KAAKwI,WACPxI,KAAK6I,kBAAkBuD,KAAK,CAC1BrE,OAAQA,KAAKA,UACbsE,QAASA,KAAKA,OAAOA,KAAIA,SAAnCA,GAAA,eACUjG,UAAWA,KAAKA,OAAOA,KAAIA,SAArCA,GAAA,eACUkG,QAASA,KAAKA,OAAOA,KAAIA,SAAnCA,GAAA,eACUC,OAAQA,CAClB,CACYtJ,KAAZA,4CACYuJ,IAAZA,6BAAc,OAAd,UAGU7D,OAAQA,KAAKA,SAGf3I,KAAKkK,OAAS,GACdlK,KAAK2I,OAAS,GACd3I,KAAKiK,UAAY,IAGjBjK,KAAKyM,SAAS,CACZjM,KAAMA,OACNkM,QAASA,eAIftE,WAhEJ,SAgEAuE,GAAA,WACM3M,KAAK4M,SAAS,cAAe,KAAM,CACjCC,kBAAmBA,KACnBC,iBAAkBA,KAClBtM,KAAMA,YAEduM,MAAA,WACQ,EAAR,4BACQ,EAAR,yBACQ,EAAR,UACUvM,KAAVA,UACUkM,QAAVA,aAGAM,OAAA,WACQ,EAAR,UACUxM,KAAVA,OACUkM,QAAVA,YAIIpE,SArFJ,SAqFAqE,GACM3M,KAAK6J,UAAY8C,EACjB3M,KAAK+F,MAAQ/F,KAAK8J,gBAAgB6C,GAAKM,MAAM,KAAKnB,KAAI,SAA5D,uBACM9L,KAAKkN,aAAalN,KAAK+F,QAEzByB,QA1FJ,WA0FA,WACA,uBAEA,KAMM,GALAxH,KAAKiH,WAAWkG,SAAQ,SAA9B,GACaC,EAAEnN,KACLoN,GAAOA,MAGPA,EACFrN,KAAKyM,SAAShL,MAAM,uBADtB,CAIA,IAAN,wBACQsG,OAAQA,KAAKA,MAAMA,GACnB+D,IAAKA,KAAKA,MAAMA,GAChB1F,UAAWA,KAAKA,UAChBkH,QAASA,KAAKA,WACdf,OAAQA,KAAKA,OAAOA,KAAIA,SAAhCA,KACU,MAAO,CACLtJ,KAAMA,SAAWA,EAAQA,GACzBuJ,IAAKA,QAIPxM,KAAK8J,gBAAgBhD,MAAK,SAApC,mBACQ9G,KAAK4M,SAAS,YAAa,KAAM,CAC/BC,kBAAmBA,KACnBC,iBAAkBA,KAClBtM,KAAMA,YAEhBuM,MAAA,WACU,EAAV,oBACA,yCAAY,OAAZ,SACA,EACA3I,GAEU,EAAV,UACY5D,KAAZA,UACYkM,QAAZA,aAGAM,OAAA,WACU,EAAV,UACYxM,KAAZA,OACYkM,QAAZA,YAIQ1M,KAAK8J,gBAAgBsC,KAAKlI,GAC1BlE,KAAKyH,aAAa2E,KAAKhI,MAG3BmJ,aA/IJ,SA+IAhE,GAAA,WACM3I,QAAQA,IAAIA,KAAKA,MAAOA,GAExB,IAAN,KACA,KAEM2I,EAAKA,SAAQA,SAAnBA,GAEQ,GAAR,IAAY,IAAIiE,IAAIvM,EAAE,OAAO6K,KAAI,SAAjC,yBACU,IAAV,iBACA,0CACc2B,EACFA,EAAEA,UAAUA,KAAKA,CACfxK,KAAMA,EAAEA,QACRuJ,IAAKA,EAAEA,OAAOA,KAAIA,SAAhCA,GAAA,iBAGYkB,EAAIA,KAAKA,CACP3F,OAAQA,EAAtBA,SACc+D,IAAKA,EACL1F,UAAWA,GACXkH,QAASA,GACTf,OAAQA,CACtB,CACgBtJ,KAAhBA,UACgBuJ,IAAhBA,0BAAkB,OAAlB,iBAMUmB,EAAKA,KAAKA,CACR5F,OAAQA,EAApBA,SACYsE,QAASA,GACTjG,UAAWA,GACXkG,QAASA,EAAEA,OAAOA,KAAIA,SAAlCA,GAAA,eACYC,OAAQA,CACpB,CACctJ,KAAdA,UACcuJ,IAAdA,0BAAgB,OAAhB,UAGY7D,OAAQA,EAAEA,YAIhB,IAAN,cACM,OAAOiF,GAGT/H,UAjMJ,SAiMAoG,GAAA,wKAGA,cAHA,gBAIAwB,4CACA,mBALA,sCAOAI,gBAAA7C,cAPA,OAOAyC,EAPA,iBASAK,EAAA,iDACA,qBACA,kBACA,uBAZA,UAeAA,uBACA,UACA,uBACA,kDAEA,+BAGA,8DAEA,eACA,kBAEA,yBA5BA,iBA6BAtH,EAAA,EA7BA,aA6BAA,4BA7BA,oBA8BAT,EAAA,qBACAkH,MAAA,KACAnB,KAAA,gCACA/F,YAjCA,0CAkCA,eAlCA,QA6BAS,IA7BA,wBAuCA,kBAvCA,sDAyCA,iCAzCA,yBA2CA,yCACAzE,iDA5CA,iFA+CImL,aAhPJ,SAgPAjB,GAAA,WACMjM,KAAKgL,OAASiB,EAAI,GAClB,IAAN,OACM8B,QAAQA,QAAQA,EAAIA,IAAMA,KAAKA,SAASA,EAAIA,KAAKA,MAAKA,WACpD,IAAR,+BACA,YAAU,OAAV,yBAEQ,GAAIpJ,EAAIoF,UAAYpF,EAAIkC,OAAS8F,GAAO,EAAG,CACzC,IAAV,oBACUhI,EAAIA,UAAYA,EAAOA,cAAgBA,GACvCA,EAAIA,OAASA,EAAOA,UAAUA,KAAIA,SAA5CA,GAAA,uBACUA,EAAIA,WAAaA,EAAOA,YAAcA,GAExCA,EAAIA,WAAWA,SAAQA,SAA/BA,KACcyI,EAAEnN,IACJ0E,EAAIA,SAASA,EAAEA,IAC3BqJ,QAAA,KACAC,MAAA,GACAC,KAAAC,qCACAH,QAAA,KACAC,MAAA,GAEUb,EAAEA,cAAcA,SAAQA,SAAlCA,GACYzI,EAAIA,SAASA,GACzBqJ,QAAA,KACAC,MAAA,GACAC,KAAAC,qCACAH,QAAA,KACAC,MAAA,SAGQtJ,EAAIA,UAAUA,SAAQA,SAA9BA,GACUA,EAAIA,SAASA,GACvBuJ,KAAA,WACAE,OAAA,CACYC,MAAZA,EACY1H,MAAZA,YAEAqH,QAAA,KACAC,MAAA,GACAD,QAAA,KACAC,MAAA,MAEQtJ,EAAIA,OAAOA,SAAQA,SAA3BA,KACU6H,EAAIA,SAAQA,SAAtBA,GACY,IAAZ,mBACA,wBACc,OAAO5J,IAAM3C,KAEf,GAAIqO,EAAOjI,OAAS,EAClB,EAAd,YACA2H,QAAA,KACAC,MAAA,GACAC,KAAA,WACAF,QAAA,KACAC,MAAA,QAEc,GAAsB,IAAlBK,EAAOjI,OAAc,CACvB,IAAhB,sCACgB,EAAhB,eACA2H,QAAA,KACAC,MAAA,GACAC,KAAAC,wCACAH,QAAA,KACAC,MAAA,QAEgBtJ,EAAIA,SAASA,GAC7BqJ,QAAA,KACAC,MAAA,GACAC,KAAAC,qCACAH,QAAA,KACAC,MAAA,SAMQtJ,EAAIA,UAAYA,EAAIA,GACpBA,EAAIA,YAAYA,EAAIA,QAGxB4J,aAjUJ,SAiUA3M,GAAA,WACA,oBAEM,GADA5B,KAAKgK,SAAWwE,EAAKvL,KACH,qBAAduL,EAAKhO,KAA6B,CACpC,IAAR,gBAAAA,0BACA,iBACQiO,EAAOA,OAASA,WACd,IAAV,uBACU,EAAV,mBACU,EAAV,gBACU,EAAV,qBAEU,IACEX,EAAQA,SAAQA,SAA5BA,GACkBY,EAAI,QACN,EAAhB,qBACgB,EAAhB,gDAEgB,EAAhB,6BAGY,EAAZ,4DACY,EAAZ,UACY,EAAZ,aACY,EAAZ,cACA,SACY,EAAZ,+BAdC,QAgBe3M,SAAS4M,eAAe,iBACxC5M,mDAGQ0M,EAAOA,WAAWA,QAElBzO,KAAKyM,SAAShL,MAAM,WAGxBmF,aAtWJ,SAsWAgI,GAAA,WACUA,aAAeC,MACjBD,EAAIA,SAAQA,SAApBA,GACU,EAAV,2DAGQ5O,KAAK+J,SAAS6E,GAAKZ,QAAQ,KAAKC,MAAM,GAAGD,QAAQ,KAAKC,MAAM,IAGhEa,WA/WJ,WAgXU/M,SAAS4M,eAAe,gBAClC5M,gDAEIwF,YAnXJ,SAmXAf,GAAA,WACA,0BACMjD,EAAOA,GAAGA,SAAQA,SAAxBA,GACQ,IAAR,mBACA,wBACU,OAAOX,IAAM3C,KAEf,GAAIqO,EAAOjI,OAAS,EAClB,EAAV,YACA2H,QAAA,KACAC,MAAA,GACAC,KAAA,WACAF,QAAA,KACAC,MAAA,QAEU,GAAsB,IAAlBK,EAAOjI,OAAc,CACvB,IAAZ,sCACY,EAAZ,eACA2H,QAAA,KACAC,MAAA,GACAC,KAAAC,wCACAH,QAAA,KACAC,MAAA,QAEY,EAAZ,YACAD,QAAA,KACAC,MAAA,GACAC,KAAA,WACAF,QAAA,KACAC,MAAA,OAKI9G,aArZJ,SAqZAX,GAAA,WACA,8BACUjD,EAAO,GAAG,OACZvD,KAAK+J,SAASxG,EAAO,GAAG,OAAO2K,KAAK,WAAWE,OAAO,CACpDC,MAAOA,EACP1H,MAAOA,YAGXpD,EAAOA,SAAQA,SAArBA,GACQ6J,EAAEA,cAAcA,SAAQA,SAAhCA,GACU,EAAV,oCACYiB,MAAOA,EACP1H,MAAOA,mBAKfU,YAtaJ,SAsaApH,EAAAuG,EAAAuI,GACM/O,KAAKiH,WAAWT,GAAO,cAAc2F,OAAO4C,EAAU,GACtD/O,KAAKiH,WAAWT,GAAO,MAAQvG,GAEjC+G,SA1aJ,SA0aAxG,EAAAP,EAAAuG,EAAAuI,GAAA,WAGM,GAFAC,MAAMA,iBACNA,MAAMA,kBACO,UAATxO,EAAkB,CAWpB,IAAR,QACQR,KAAKsH,OAAO2H,EAAQ,IAAI9C,OAAO8C,EAAQ,GAAI,GAC3CjP,KAAK+J,SAAS9J,GACtB+N,QAAA,KACAC,MAAA,GACAC,KAAA,WACAF,QAAA,KACAC,MAAA,GAC+C,IAAnCjO,KAAKsH,OAAO2H,EAAQ,IAAI5I,QAC1BrG,KAAKsH,OAAO6E,OAAO8C,EAAQ,GAAI,GAIjC,IAAR,sBACA,wBACU,OAAOrM,IAAM3C,KAEf,GAAIqO,EAAOjI,OAAS,EAClBiI,EAAOA,SAAQA,SAAzBA,GACY,EAAZ,YACAN,QAAA,KACAC,MAAA,GACAC,KAAA,WACAF,QAAA,KACAC,MAAA,WAGU,GAAsB,IAAlBK,EAAOjI,OAAc,CACvB,IAAZ,yCACYrG,KAAK+J,SAASuE,EAAO,IACjCN,QAAA,KACAC,MAAA,GACAC,KAAAC,wCACAH,QAAA,KACAC,MAAA,QAEYjO,KAAK+J,SAAS9J,GAC1B+N,QAAA,KACAC,MAAA,GACAC,KAAA,WACAF,QAAA,KACAC,MAAA,GAImB,aAATzN,IAEFR,KAAKoG,UAAU+F,OACvB,sCACU,OAAV,QAEA,GAEQnM,KAAK+J,SAAS9J,GAAIiO,KAAK,WAAWE,OAAO,CACvCC,MAAOA,EACP1H,MAAOA,aAGE,WAATnG,IACFR,KAAK+J,SAAS9J,GAAIiO,KAAK,WAAWE,OAAO,CACvCC,MAAOA,EACP1H,MAAOA,YAET3G,KAAKiH,WAAWT,GAAO,cAAc2F,OAAO4C,EAAU,GAClD/O,KAAKiH,WAAWT,GAAO,cAAcH,OAAS,IAChDrG,KAAK+J,SAAS/J,KAAKiH,WAAWT,GAAO,OAAO0H,KAAK,WAAWE,OAAO,CACjEC,MAAOA,EACP1H,MAAOA,YAET3G,KAAKiH,WAAWkF,OAAO3F,EAAO,MAIpC0I,gBAjgBJ,WAkgBM,OAAOlP,KAAK6I,kBAAkBiD,KAAI,SAAxC,UACA/D,gBAEA3B,sBAEAmG,qBAQI4C,eA/gBJ,SA+gBA5F,GACM,IAAN,0BAgBM,OAfAA,EAAKA,SAAQA,SAAnBA,GAEQ,IAAR,oCACQ6F,EAAOA,SAAQA,SAAvBA,GACeC,EAASvI,MAAK,SAA7B,2BACYuI,EAASA,KAAKA,CACZtH,OAAQA,EAAIA,OACZ+D,IAAKA,EACL1F,UAAWA,GACXmG,OAAQA,WAMT8C,GAGTnG,cAniBJ,WAoiBM,IAAN,wCACUsF,GAAMA,EAAKc,SAGjBjG,cAxiBJ,SAwiBAzH,GAAA,WACA,oBACM,GAAI4M,EAAM,CACR,IAAR,SACA,2CACQ,GAAe,UAAXe,EACZ,4CACQ,IAAR,iBACQd,EAAOA,WAAWA,GAClBA,EAAOA,OAASA,SAAxBA,GACU,IAAV,wCAEUD,EAAKA,MAAQA,GACb,IAAV,8BACU,EAAV,sBAKIgB,gBA3jBJ,SA2jBApL,GAAA,oLAMA,IALA,sBACAqL,GAAA,EACAC,EAAA,GACAC,EAAA,GAEA,qBACAvL,KAAAkI,EADA,EACAA,QAAAR,EADA,EACAA,IACA,EACAQ,uBACA,wCACA,UACA,6BAGA5B,EAAA,kCACA,UACA,0BAjBA,GAoBA+E,EApBA,uBAqBA,sBArBA,kBAsBA,YACAjP,aACAkM,wCACAkD,gBAzBA,6CA4BAhN,GA5BA,kGA6BA8H,EAAAiF,KA7BA,SA8BAlF,gBAAAC,UA9BA,OA8BAkD,EA9BA,OA+BA/G,EAAA+G,kCAAA,wBACA/G,uBACA,kCACA,uCAlCA,0CA4BAjE,EAAA,EA5BA,aA4BAA,YA5BA,0CA4BAA,GA5BA,iBA4BAA,IA5BA,wBAqCA,uBACAsE,EAAA9C,KACA8C,oBACA,qBAEA,SACA,KACAA,mCACA,2CACA,+BAGA,OAFAsF,UACAF,UACA,SAEApF,kBACAA,YACAwI,QACAzM,sBACAuJ,eAfA,GAiBA,WACA,4CACAtF,8BAAA,qBACAwI,QACAzM,OACAuJ,uBACA,gCAEA,OADA,UACA,cARA,GAzDA,GAuEA,sBACAiD,EAxEA,0CAyEA,YACAjP,aACAkM,yCACAkD,gBA5EA,QA+EA,eAAArG,MAAAgD,WACA,qBACA,kBAjFA,+CAoFInD,gBA/oBJ,WA+oBA,sKACA,wBACAG,EAAA,iBACA,4CAEAoG,EAAA,GAEApG,uBAAA,wBACA,EACA+C,uBACA,4BAGA,4BAIAuD,EAAA,WACAtG,uBACA,WAEArC,mCACA,OACA,oBACA,kCAGAA,qCAAA,6BAEAA,gCAAA,YACAA,mCACA,yCAGAA,+BAGA,oCACA1G,wCAEAsP,yBACA,kBACA,yBAEA,kBA5CA,sCA6CAlN,GA7CA,kGA8CA8H,EAAAiF,KA9CA,SA+CAlF,gBAAAC,UA/CA,OA+CAkD,EA/CA,OAgDA/G,EAAA+G,kCAAA,wBACA/G,uBACA,kCACA,uCAEA,oBArDA,0CA6CAjE,EAAA,EA7CA,YA6CAA,YA7CA,0CA6CAA,GA7CA,iBA6CAA,IA7CA,8DAyDImN,WAxsBJ,WAysBM,IAAN,WACA,CACA7H,eACA,oBACA,oDAIA,CAAQ1H,KAARA,mCAEMsP,IAAUA,OAAOA,EAAMA,KAAKA,WAG9BpK,iBAttBJ,WAutBM,IAAK1F,KAAKgL,OAAQ,OAAOhL,KAAKyM,SAASuD,QAAQ,UAC/ChQ,KAAKgJ,cAAe,GAEtBD,cA1tBJ,WA0tBA,WACM,IAAK/I,KAAKgL,OAAQ,OAAOhL,KAAKyM,SAASuD,QAAQ,UAC/C,IAAN,sBACA,kDAEA,GACQC,KAAMA,KAAKA,OACX1D,OAAQA,IAEVtL,EAAEA,SAAQA,SAAhBA,GAAA,OACA,4DAEMiP,eAAcA,GAAQA,MAAKA,SAAdA,GACPzC,EAAE0C,OACJ,EAAV,6BAYIC,SApvBJ,SAovBA1F,GAAA,iIA4GA2F,EAyLAC,EAyCAC,EAQAC,EAkBAC,EA2LAC,EA0BAC,EAwCAC,EAuBAC,EA5nBA,wFA4nBAA,EA5nBA,SA4nBA5Q,GACA,SAMA,GALA0E,gCACA,eACAmM,yBAGA,cACA,6CACAnM,EACAiI,SAAAmE,EAAA,MACAlE,uBACAC,sBACAtM,iBAEAuM,MAAA,WACA+D,yBACAnM,4CAGAqI,OAAA,iBA3CA4D,EArmBA,WAumBAF,IACA7J,uBACA,0BACAlC,sCAGA,WACA,IACAqM,KACApH,WAGA/C,uBACA,0BACA,0CACAtG,yBAzDAoQ,EA7jBA,WA8jBA,iBACA9J,uBACA,0BAEA,IACAoK,MAAA1L,+BACA2L,KAAA,CAAAhD,eAAAiD,UACA,eACAnQ,qBACAoQ,cACApQ,QACAA,6BACAA,qBAAA,oBAEAoE,GAAA,uBACApE,qBAAA,oBAEAoE,GAAA,oBACA,kCAKA,YACAT,2CACAA,6BACAnE,YACAoP,aACAlD,2BAGAjJ,uBACAoM,IACAlL,6CACA,KAEAkL,KA/DAa,EAniBA,WAoiBA,SAEAW,uBACApQ,GACA,MACAsD,4BACA,KACA1E,4BACA,OACA0E,0BACA,KACA1E,6BAEA,uBACA,cACA8J,EACA2H,KAAArQ,GACAmN,OAAA,CACAC,QACA1H,gBACA4K,aAEAtR,GAAA,UAlNAwQ,EAxWA,SAwWAe,GACA,kBAIA,SACA,KAEA,wBAEAC,qBACA,sCACAD,mBACA,OACApE,uBACAvN,8BAKA6R,sBACAC,mBAGA,iBAIA,GADA/Q,iBACA,cAEA+D,mBACA1E,KACAgH,eAEAtC,oCACAyI,qCACAzI,cACAqJ,QAAA,KACAC,MAAA,GACAC,KAAAC,qCACAH,QAAA,KACAC,MAAA,aAQA,CAIA,SACA2D,KACAC,KACAF,uBACA,wBACAC,UAGA,6BACAE,UAGAD,aAGA,eACAE,WACAC,WACAC,WA0BA,GAzBA,QAEA,MAEAzB,MAGAkB,uBACAQ,eACAjE,MAAA,GACAC,KAAAC,mDACAH,QAAA,KACAC,MAAA,MAEAtJ,mBAWA,YACA,UAEA,IADA,MADA,WAEA6B,GACA,kBAKA,GAJA2L,IACAR,uBACAQ,0BAEA,wBANA,iFAQA,gBAsCAL,uBACAnN,cACAqJ,QAAA,KACAC,MAAA,GACAC,KAAA,WACAF,QAAA,KACAC,MAAA,MAEA4D,uBACAlN,cACAqJ,QAAA,KACAC,MAAA,GACAC,KAAAC,mDACAH,QAAA,KACAC,MAAA,MAEAtJ,mCAeA,iBAEA6L,QArMAA,EAtVA,SAsVAhE,GAAA,OACA,+CAEA7H,6CACA6H,uBACA7H,cACAuJ,KAAA,WACAE,OAAA,CACAC,QACA1H,kBAEAqH,QAAA,KACAC,MAAA,GACAD,QAAA,KACAC,MAAA,OAtBAsC,EA9UA,WAgVA6B,KACAC,UACAC,kBACAC,uBA9CAjC,EArSA,SAqSA1O,GACAA,oBACAA,mBAEA2O,IACA7G,QAAA8I,mBACAJ,KAEA,gBACAK,YAEA,wBACAC,wBAEA,2CACAC,aACA9S,WACA,YACAA,WAGA,0BACA,sBACA,eACA+Q,IACAhG,OACAC,OACAlB,YACAC,cArNAyG,EA5GA,WAgHA,GAFAK,IAEA,YACAM,KACA,uGACArM,YACAiO,aACAlG,UACAkD,aACAiD,mCAGA7B,KACAL,IAEA9J,uBACA,0BAEAiM,mBACAnO,mBACA6M,QAAAsB,oBACA5E,KAAA,WACAE,OAAA,CACAC,QACA1H,kBAEAoM,KAAAxN,aACAZ,mBACAqO,OAAA,IACA9E,KAAA,WACAE,OAAA,CACAC,QACA1H,kBAEAoM,KAAAxN,aACAZ,wCACA,kCAjJA,2CACA,6BACAnE,YACAoP,aACAlD,yBAEA/H,EAAA,EACAA,gBACAA,oBACAA,kBACAA,eACAA,eACAA,YACAA,gBAdA,UAoBA8F,gBAAAC,UApBA,QAoBAuI,EApBA,SAqBAA,UAAAC,EArBA,EAqBAA,KAAAC,EArBA,EAqBAA,OAAAC,EArBA,EAqBAA,YACAvM,EAAAsM,mBAAA,wBACAxO,UACA0O,EAAA,GACAxM,uBACAwM,kBAEAhC,EAAA6B,mBACA,+BACA,2BACA,OACAjT,qBACAqT,SACAC,cACAC,cACAC,YACAC,gBAIAC,GAAA,gCACAC,EAAA1R,4BACArC,EAAA,qBACA8T,QACAP,UACAA,WAIA1J,EAAA/E,OACAgF,EAAAhF,QACAiF,EAAAjF,YACAiG,EAAA,EACAC,EAAAuI,iBACAzJ,YACAC,YACAiK,EAAA,EACAC,EAAA,EAEAC,GAAA,EACA3B,EAAA,GAEAC,EAAA1I,mCACAhD,aACA0H,QACA2F,gBACAC,iBACAC,kBAGA5B,EAAA3I,0BACA0E,QACA1H,aACAuN,kBAGA3B,EAAA5I,gCAIAhF,cACAyM,EAAA,GAGA+C,EAAA,IACAnD,GAAA,EAGA8B,kCACApJ,EACA8H,QAAAzK,GACAmH,KAAA,WACAE,OAAA,CACAC,QACA1H,kBAEAoM,KAAAvM,KAAA,IACAyH,MAAA,KACA,QACAmG,KAAAC,mBACAnD,KAAA,CAAAhD,eAAAiD,UACAmD,gCAGAjE,IACA,2CA8CA3G,QAEAA,4BACA,iBACAsH,KACAL,QAGAjH,8BAQA,GAPAmK,UACAC,UACA,eAEAC,KACArK,QAAA8I,iBAEA,cAEA,gBAOA,GANA9I,QAAA8I,qBACA,cAEAD,iCAEAH,kBACA,WAEA,GACAmC,0BACAA,yBACA,CAEAnC,mBAEA,2BACAA,mBACA,QACA,yBACA,6BAIA3B,KAEAF,SAEA8B,eAGAA,UAGA,eACA,gBACA,aACA,kBAIA3I,4BAKA,GAJA,eACAA,QAAA8I,mBACAuB,MAEA,cACA,4BACArK,QAAA8I,mBACA,gBACA,kCACAJ,GACA,gBACA,mBACA,sBACA,oBAGA,2BACAA,mBACA,QACA,yBACA,6BAIA3B,KAEAF,QAIA7G,8BACA,KAEAkB,aACAC,aACAgJ,UACAC,UACAnK,YACAC,gBACA,CACA,iBAEA,cACA,UACA,aACA,MACA0I,gCAGA,iBACA,cAGA,MAFA,kCACA,2BAEA,mBACAjS,eAEAmU,EADA,SACAA,oDACA,SACAA,oDACA,SACAA,oDAEAA,oDAGAA,8BACAA,kCACAnG,QACA1H,aACAuN,uBAMAxK,8BACAqK,QAEArK,qBACAA,yBAiCA3H,kDAEA,iDACAqQ,YAEA7B,OA1UA,gDAqpBEkE,QAh/CF,WAk/CIzU,KAAK0J,KAAO,IAAI,aAAayH,KACjCjP,sBACAA,oBAEIlC,KAAK2J,MAAQ3J,KAAK0J,KAAKC,QACvB3J,KAAK4J,UAAY5J,KAAK0J,KAAKC,SAK7B+K,cA5/CF,WA6/CI1U,KAAKiL,gBAAkBjL,KAAKiL,eAAe0J,UC1jEib,I,wBCQ5dC,EAAY,eACd,EACA,EACAtL,GACA,EACA,KACA,WACA,MAIa,aAAAsL,E,gCCjBf,IAAIC,EAAmB,EAAQ,QAG/BA,EAAiB,S,2CCLjB,IAAIjE,EAAS,WAAa,IAAIjM,EAAI3E,KAAS4E,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,SAAS,IAClHwE,EAAkB,G,YCStB,GACErG,KAAFA,gBACE6R,WAAFA,CACIC,KAAJA,cAEExL,KALF,WAMI,MAAJ,CACMmC,UAANA,IAGED,QAVF,WAWI,KAAJ,6BAEEgJ,QAbF,cCVkc,I,YCO9bG,EAAY,eACd,EACAhE,EACAtH,GACA,EACA,KACA,KACA,MAIa,aAAAsL,E,6CCjBf,IAAII,EAAI,EAAQ,QACZC,EAAa,EAAQ,QAAgCC,UACrDL,EAAmB,EAAQ,QAE3BM,EAAa,YACbC,GAAc,EAGdD,IAAc,IAAItG,MAAM,GAAGsG,IAAY,WAAcC,GAAc,KAIvEJ,EAAE,CAAEzR,OAAQ,QAAS8R,OAAO,EAAMC,OAAQF,GAAe,CACvDF,UAAW,SAAmBK,GAC5B,OAAON,EAAWjV,KAAMuV,EAAYC,UAAUnP,OAAS,EAAImP,UAAU,QAAKC,MAK9EZ,EAAiBM,I,mHClBXrV,E,gBACF,WAAYmO,EAAOyH,EAAIC,EAAIC,EAAGjT,GAAG,uBAC7B3C,KAAKG,MAAQ8N,EACbjO,KAAKI,QAAUsV,EAAKzH,EACpBjO,KAAKM,QAAUqV,EAAK1H,EACpBjO,KAAK6V,MAAQD,EAAI3H,EACjBjO,KAAK8V,OAASnT,EAAIsL,EAClBnO,EAAYC,SAAWC,S,iHCHhB,SAAS+V,EAAOxS,EAAQyS,GAEnC,IAKIC,EAAIC,EALJpF,EAAOkF,EAAIG,KAAK,GAChB3P,EAAQsK,EAAKoE,WAAU,SAAA3Q,GACvB,OAAOA,IAAMhB,KAEb6S,EAAQ,EAEZ5P,IACA,IAAK,IAAI5D,EAAI,EAAGA,EAAIoT,EAAI3P,OAAQzD,IAE5B,GADAwT,GAASJ,EAAIpT,GAAGyD,OACZG,GAAS4P,EAAO,CAEhBH,EAAKrT,EACLsT,EAAKF,EAAIpT,GAAGyD,QAAU+P,EAAQ5P,GAAS,EACvC,MAGR,MAAO,CAACyP,EAAIC,K,6FCxBD,SAASG,EAASC,GAC7B,OAAOpO,KAAKqO,MAAMrO,KAAKC,UAAUmO,M,yDCDrC,WAAMnI,EAAS,CACX,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEWA,gB,kCCjBf,IAAI9L,EAAS,EAAQ,QACjBmU,EAAU,EAAQ,QAClBC,EAAoB,EAAQ,QAC5BC,EAAO,EAAQ,QAEfC,EAAYtU,EAAOsU,UAInBC,EAAmB,SAAUrT,EAAQsT,EAAUC,EAAQC,EAAWxE,EAAOyE,EAAOC,EAAQC,GAC1F,IAGIC,EAASC,EAHTC,EAAc9E,EACd+E,EAAc,EACdC,IAAQN,GAASP,EAAKO,EAAQC,GAGlC,MAAOI,EAAcP,EAAW,CAC9B,GAAIO,KAAeR,EAAQ,CAGzB,GAFAK,EAAUI,EAAQA,EAAMT,EAAOQ,GAAcA,EAAaT,GAAYC,EAAOQ,GAEzEN,EAAQ,GAAKR,EAAQW,GACvBC,EAAaX,EAAkBU,GAC/BE,EAAcT,EAAiBrT,EAAQsT,EAAUM,EAASC,EAAYC,EAAaL,EAAQ,GAAK,MAC3F,CACL,GAAIK,GAAe,iBAAkB,MAAMV,EAAU,sCACrDpT,EAAO8T,GAAeF,EAGxBE,IAEFC,IAEF,OAAOD,GAGT5S,EAAOC,QAAUkS,G,kCCnCjB,W,kCCCA,IAAIY,EAAa,EAAQ,QACrBC,EAAmB,EAAQ,QAI/BD,EAAW,OAAO,SAAUnH,GAC1B,OAAO,WAAiB,OAAOA,EAAKrQ,KAAMwV,UAAUnP,OAASmP,UAAU,QAAKC,MAC3EgC,I,kCCRY,SAAShG,EAAOiG,EAAOC,GAOlC,IAHA,IAAIzX,EAAIwX,EAAM,GAAIrX,EAAIqX,EAAM,GAExBE,GAAS,EACJhV,EAAI,EAAGG,EAAI4U,EAAGtR,OAAS,EAAGzD,EAAI+U,EAAGtR,OAAQtD,EAAIH,IAAK,CACvD,IAAIiV,EAAKF,EAAG/U,GAAG,GAAIkV,EAAKH,EAAG/U,GAAG,GAC1BmV,EAAKJ,EAAG5U,GAAG,GAAIiV,EAAKL,EAAG5U,GAAG,GAE1BkV,EAAcH,EAAKzX,GAAO2X,EAAK3X,GAC3BH,GAAK6X,EAAKF,IAAOxX,EAAIyX,IAAOE,EAAKF,GAAMD,EAC3CI,IAAWL,GAAUA,GAG7B,OAAOA,EAhBX,gD,kCCAA,2FAAM9E,EAAQ,CACV,GACA,GACA,6CACA,qCACA,8CACA,oEAEEuB,EAAY,CACd,GACA,GACA,MACA,MACA,MACA,Q,kCCbJ,IAAIW,EAAI,EAAQ,QACZ4B,EAAmB,EAAQ,QAC3BsB,EAAW,EAAQ,QACnBzB,EAAoB,EAAQ,QAC5B0B,EAAsB,EAAQ,QAC9BC,EAAqB,EAAQ,QAIjCpD,EAAE,CAAEzR,OAAQ,QAAS8R,OAAO,GAAQ,CAClCc,KAAM,WACJ,IAAIkC,EAAW7C,UAAUnP,OAASmP,UAAU,QAAKC,EAC7C6C,EAAIJ,EAASlY,MACb+W,EAAYN,EAAkB6B,GAC9BC,EAAIH,EAAmBE,EAAG,GAE9B,OADAC,EAAElS,OAASuQ,EAAiB2B,EAAGD,EAAGA,EAAGvB,EAAW,OAAgBtB,IAAb4C,EAAyB,EAAIF,EAAoBE,IAC7FE","file":"js/chunk-2f0fac06.1649302258356.js","sourcesContent":["import { MapInstance } from \"../base\";\n\n//2D场景，坐标需要转换为窗口坐标系统\nclass SVGSpot {\n    id;\n    x;\n    y;\n    code;\n    type = 0;\n    constructor(spot) {\n        let mapIns = MapInstance.instance;\n        this.id = spot.id;\n        this.x = spot.x * mapIns.SCALE - mapIns.ORIGINX;\n        this.y = mapIns.ORIGINY - spot.y * mapIns.SCALE;\n        this.code = spot.code;\n        this.type = spot.type;\n    }\n}\n\nexport { SVGSpot }\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"background-image\":\"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJ2LTQiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzIGlkPSJ2LTMiPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuXzAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PHJlY3QgaWQ9InYtNSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0iI0FBQUFBQSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3QgaWQ9InYtNyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuXzApIi8+PC9zdmc+')\"},attrs:{\"id\":\"map-scene\",\"oncontextmenu\":\"return false\"}},[_c('div',{staticClass:\"handle-btns\"},[_c('el-button',{attrs:{\"type\":_vm.forbiddenRemove ? 'success' : 'warning',\"size\":\"small\"},on:{\"click\":function($event){_vm.forbiddenRemove = !_vm.forbiddenRemove}}},[_vm._v(_vm._s(_vm.forbiddenRemove ? \"开启\" : \"关闭\")+\"移除功能\")])],1),_c('div',{staticClass:\"select-box\"},[_c('el-tooltip',{attrs:{\"content\":\"多边形框选, 需要绘制多条线段, 并且最后首尾相连形成封闭形状\",\"placement\":\"bottom\"}},[_c('el-button',{attrs:{\"type\":_vm.status === 1 ? 'info' : '',\"circle\":\"\",\"round\":\"\"},on:{\"click\":function($event){_vm.status = 1}}},[_vm._v(\"多边\")])],1),_c('hr'),_c('el-tooltip',{attrs:{\"content\":\"矩形框选, 矩形内部的点位即为选中的点位\",\"placement\":\"bottom\"}},[_c('el-button',{attrs:{\"type\":_vm.status === 2 ? 'info' : '',\"circle\":\"\",\"round\":\"\"},on:{\"click\":function($event){_vm.status = 2}}},[_vm._v(\"矩形\")])],1)],1),_c('div',{staticClass:\"tool-box\"},[_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":function($event){return _vm.$router.back(-1)}}},[_vm._v(\"返回\")]),_c('h4',{staticStyle:{\"color\":\"#ff000077\"},on:{\"dblclick\":_vm.openServerDialog}},[_vm._v(\" 未做适配，建议拖动后刷新页面，再选择编辑区域 \")]),_c('div',[_c('b',[_vm._v(\"选择地图：\")]),(_vm.isShowCascader)?_c('el-cascader',{staticStyle:{\"display\":\"inline-block\",\"width\":\"150px\"},attrs:{\"size\":\"small\",\"options\":_vm.options,\"props\":{ expandTrigger: 'hover' }},on:{\"change\":_vm.changeMap},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):_vm._e()],1),_c('div',{staticStyle:{\"margin\":\"20px 0\",\"padding\":\"30px 10px\",\"font-weight\":\"bolder\"}},[(_vm.junctions.length > 0)?_c('div',[_c('h5',{staticStyle:{\"background\":\"#eeeeee\",\"margin\":\"0\",\"padding\":\"20px 0\"}},[_vm._v(\" JUNCTIONS 配置 \")]),_c('div',{staticStyle:{\"margin\":\"0 auto 20px auto\",\"font-size\":\"14px\",\"cursor\":\"pointer\"}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},_vm._l((_vm.junctions),function(jun,index){return _c('div',{key:jun,staticClass:\"spot-list\",style:({ color: '#6CA6CD' }),on:{\"click\":function($event){return _vm.highlightBox(jun)}}},[_vm._v(\" \"+_vm._s(index + 1)+\". \"+_vm._s(_vm.spots.find(function (s) { return s.id == jun; }).code)+\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px !important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteId('JUNCTION', jun, index)}}})],1)}),0)],1)]):_vm._e(),(_vm.affectsIds.length > 0)?_c('div',[_c('h5',{staticStyle:{\"background\":\"#eeeeee\",\"margin\":\"0\",\"padding\":\"20px 0\"}},[_vm._v(\" AFFECTS 配置 \")]),_vm._l((_vm.affectsIds),function(item,index){return _c('div',{key:index,staticStyle:{\"margin\":\"0 0 10px 0\"},on:{\"mouseenter\":function($event){return _vm.highlightBox(item.affectsIds)}}},[_c('el-card',{attrs:{\"shadow\":\"hover\"}},[_c('h5',[_c('i',{staticClass:\"el-icon el-icon-box\"}),_vm._v(\" \"+_vm._s(\"Affect\" + (index + 1))+\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"top\":\"-20px\",\"position\":\"relative\"},attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteAffect(index)}}})],1),(!item.id)?_c('div',[_vm._l((item.affectsIds),function(i,l){return [_c('transition',{key:l,attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"spot-list\",style:({ color: _vm.colors[index] }),on:{\"click\":function($event){return _vm.highlightBox(i)}}},[_vm._v(\" \"+_vm._s(l + 1)+\". \"+_vm._s(_vm.spots.find(function (s) { return s.id == i; }).code)+\" \"),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"设为目标点\",\"placement\":\"left\"}},[_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px !important\",\"margin-left\":\"20px\"},attrs:{\"type\":\"success\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-check\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.setAffectId(i, index, l)}}})],1),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px !important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteId('AFFECT', i, index, l)}}})],1)])]})],2):_c('div',{staticClass:\"affect-box\",staticStyle:{\"height\":\"auto\"},style:({ color: _vm.colors[index] })},[_c('div',{staticClass:\"spot-list base-spot\",on:{\"click\":function($event){return _vm.highlightBox(item.id)}}},[_vm._v(\" \"+_vm._s(_vm.spots.find(function (s) { return s.id == item.id; }).code)+\" \")]),_c('div',{staticClass:\"affect-spots\"},_vm._l((item.affectsIds),function(i,l){return _c('div',{key:l,staticClass:\"affect-line\"},[_c('div',{staticClass:\"spot-list affect-spot\",on:{\"click\":function($event){return _vm.highlightBox(i)}}},[_vm._v(\" \"+_vm._s(_vm.spots.find(function (s) { return s.id == i; }).code)+\" \")]),_c('div',{staticClass:\"affect-spot-delete\"},[_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px !important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteId('AFFECT', i, index, l)}}})],1)])}),0)])])],1)})],2):_vm._e(),(_vm.idKeys.length > 0)?_c('div',[_c('h5',{staticStyle:{\"background\":\"#eeeeee\",\"margin\":\"0\",\"padding\":\"20px 0\"}},[_vm._v(\" BLOCKS 配置 \")]),_vm._l((_vm.idKeys),function(item,index){return _c('div',{key:index,staticStyle:{\"margin\":\"0 0 10px 0\"},on:{\"mouseenter\":function($event){return _vm.highlightBox(item)}}},[_c('el-card',{attrs:{\"shadow\":\"hover\"}},[_c('h5',[_c('i',{staticClass:\"el-icon el-icon-box\"}),_vm._v(\" \"+_vm._s(\"Block\" + (index + 1))+\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"top\":\"-20px\",\"position\":\"relative\"},attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteBlock(index)}}})],1),_vm._l((item),function(i,l){return [_c('transition',{key:l,attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"spot-list\",style:({ color: _vm.colors[index] }),on:{\"click\":function($event){return _vm.highlightBox(i)}}},[_vm._v(\" \"+_vm._s(l + 1)+\". \"+_vm._s(_vm.spots.find(function (s) { return s.id == i; }).code)+\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px !important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteId('BLOCK', i, index, l)}}})],1)])]})],2)],1)})],2):_vm._e()]),_c('div',{staticStyle:{\"margin-top\":\"50px\"}},[(_vm.value.length > 0)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"plain\":\"\"},on:{\"click\":_vm.addList}},[_vm._v(\"添加到列表 \")]):_vm._e()],1),_c('div',{staticStyle:{\"margin\":\"30px auto 50px\"}},[_c('h5',{staticStyle:{\"text-align\":\"left\"}},[_vm._v(\"地图交管配置\")]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"border\":\"\",\"data\":_vm.targetResult}},[_c('el-table-column',{attrs:{\"prop\":\"domain\",\"label\":\"DOMAIN\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.options.find(function (a) { return a.value === scope.row.domain; }).label)+\" \")]}}])}),_c('el-table-column',{attrs:{\"width\":\"60px\",\"prop\":\"blocks\",\"label\":\"BLK\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"placement\":\"left\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((scope.row.blocks),function(b,i){return _c('p',{key:i},[_vm._v(\" \"+_vm._s(JSON.stringify(b))+\" \")])}),0),_c('el-button',{staticStyle:{\"width\":\"20px\",\"padding\":\"3px !important\"},attrs:{\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-more\",\"circle\":\"\"}})],1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"编辑\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"padding\":\"3px !important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(scope.$index)}}}),_c('el-button',{staticStyle:{\"margin-left\":\"5px\",\"padding\":\"3px !important\"},attrs:{\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.editItem(scope.$index)}}})]}}])})],1)],1),_c('div',{staticStyle:{\"margin-top\":\"50px\",\"text-align\":\"left\"}},[_c('h5',[_vm._v(\"跨地图交管配置\")]),_c('div',{},[_c('div',{staticStyle:{\"margin\":\"5px\"}},[_c('b',{staticStyle:{\"display\":\"inline-block\",\"width\":\"80px\"}},[_vm._v(\"domain: \")]),_c('el-select',{attrs:{\"size\":\"mini\",\"placeholder\":\"请选择\",\"disabled\":\"\"},on:{\"change\":_vm.crossChange},model:{value:(_vm.domainVal),callback:function ($$v) {_vm.domainVal=$$v},expression:\"domainVal\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('div',{staticStyle:{\"margin\":\"5px\"}},[_c('b',{staticStyle:{\"display\":\"inline-block\",\"width\":\"80px\"}},[_vm._v(\"blk: \")]),_c('el-cascader',{attrs:{\"show-all-levels\":false,\"props\":_vm.props,\"options\":_vm.blkOption,\"size\":\"mini\",\"collapse-tags\":\"\"},model:{value:(_vm.blkVal),callback:function ($$v) {_vm.blkVal=$$v},expression:\"blkVal\"}})],1)]),_c('div',{staticStyle:{\"margin\":\"10px\",\"text-align\":\"center\"}},[(_vm.domainVal)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"plain\":\"\"},on:{\"click\":_vm.addCrossList}},[_vm._v(\"添加到列表 \")]):_vm._e()],1),_c('p'),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"border\":\"\",\"data\":_vm.targetCrossResult}},[_c('el-table-column',{attrs:{\"prop\":\"domain\",\"label\":\"DOMAIN\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.options.find(function (a) { return a.value === scope.row.domain; }).label)+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"blocks\",\"label\":\"BLK\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"placement\":\"left\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((scope.row.blocks),function(b,i){return _c('p',{key:i},[_vm._v(\" \"+_vm._s(JSON.stringify(b))+\" \")])}),0),_c('el-button',{staticStyle:{\"width\":\"20px\",\"padding\":\"3px !important\"},attrs:{\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-more\",\"circle\":\"\"}})],1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"编辑\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"padding\":\"3px !important\"},attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteCrossItem(scope.$index)}}})]}}])})],1)],1),_c('div',{staticStyle:{\"margin-top\":\"50px\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":_vm.openServerDialog}},[_vm._v(\"跨服务器交管配置\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":_vm.uploadTraffic}},[_vm._v(\"上传同步\")])],1),_c('el-dialog',{attrs:{\"title\":\"跨服务器交管配置\",\"visible\":_vm.serverDialog,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.serverDialog=$event}}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.openLocalLoading},on:{\"click\":_vm.openLocalJson}},[_vm._v(\"打开本地配置\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"loading\":_vm.exportLocalLoading},on:{\"click\":_vm.exportLocalJson}},[_vm._v(\"保存配置至本地\")]),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"filepicker\"},on:{\"change\":_vm.readLocalJson}}),_c('div',{staticClass:\"dialog-footer\",staticStyle:{\"padding\":\"0 20px\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.serverDialog = false}}},[_vm._v(\"取 消\")])],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      id=\"map-scene\"\n      oncontextmenu=\"return false\"\n      style=\"\n        background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJ2LTQiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzIGlkPSJ2LTMiPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuXzAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PHJlY3QgaWQ9InYtNSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0iI0FBQUFBQSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3QgaWQ9InYtNyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuXzApIi8+PC9zdmc+');\n      \"\n    >\n      <div class=\"handle-btns\">\n        <el-button\n          :type=\"forbiddenRemove ? 'success' : 'warning'\"\n          @click=\"forbiddenRemove = !forbiddenRemove\"\n          size=\"small\"\n          >{{ forbiddenRemove ? \"开启\" : \"关闭\" }}移除功能</el-button\n        >\n      </div>\n      <div class=\"select-box\">\n        <el-tooltip\n          content=\"多边形框选, 需要绘制多条线段, 并且最后首尾相连形成封闭形状\"\n          placement=\"bottom\"\n        >\n          <el-button\n            :type=\"status === 1 ? 'info' : ''\"\n            circle\n            @click=\"status = 1\"\n            round\n            >多边</el-button\n          >\n        </el-tooltip>\n        <hr />\n        <el-tooltip\n          content=\"矩形框选, 矩形内部的点位即为选中的点位\"\n          placement=\"bottom\"\n        >\n          <el-button\n            :type=\"status === 2 ? 'info' : ''\"\n            circle\n            @click=\"status = 2\"\n            round\n            >矩形</el-button\n          >\n        </el-tooltip>\n      </div>\n\n      <div class=\"tool-box\">\n        <!--                <div style=\"margin-bottom:30px\">-->\n        <!--                    <el-popover placement=\"right\" width=\"300\" trigger=\"hover\">-->\n        <!--                        <div style=\"font-size:12px;text-align:left\">-->\n        <!--                            <h5>支持</h5>-->\n        <!--                            <ul style=\"line-height: 25px\">-->\n        <!--                                <li>选择一个点表示 <em>junctions</em></li>-->\n        <!--                                <li>选择多个点表示 <em>block</em></li>-->\n        <!--                                <li><em>block</em> 允许重合的公共点位存在 颜色用 <span-->\n        <!--                                    style=\"display: inline-block;width:10px;height:10px;background:#333333;border-radius: 10px;\"></span>-->\n        <!--                                    表示-->\n        <!--                                </li>-->\n        <!--                                &lt;!&ndash;                <li><em>block</em> 新增点位操作需要选择当前 <em>block</em> 中的至少一个点和 <em>待配置点</em></li>&ndash;&gt;-->\n        <!--                                <li>绝对路径导入 <em>blockConfig.json</em></li>-->\n        <!--                                <li>导出 <em>blockConfig.json</em> 文件</li>-->\n        <!--                                <li>导入的数据必须满足校验条件：<em>junctions</em> 和 <em>block</em> 独立 ，横纵向之间也不能存在重复点位</li>-->\n        <!--                                <li><em>junctions</em> 和 <em>待配置点</em> 的合并策略(全部转为 <em>junctions</em>)</li>-->\n        <!--                                <li>禁止 <em>blocks</em> 与 <em>blocks</em> 或者 <em>junctions</em> 的合并</li>-->\n        <!--                                <li style=\"text-decoration: underline\"><em>affects</em> 在选择多个点位后，还需要选定目标点</li>-->\n        <!--                            </ul>-->\n        <!--                        </div>-->\n        <!--                        <el-button slot=\"reference\" icon=\"el-icon-finished\" type=\"primary\" size=\"mini\"-->\n        <!--                                   circle></el-button>-->\n        <!--                    </el-popover>-->\n        <!--                    <h3>地图编辑管理</h3>-->\n        <!--                    <p style=\"font-size:12px;\">-->\n        <!--                        {{ fileName ? fileName : '请选择文件' }}-->\n        <!--                        <input id=\"fileElement\" style=\"display: none\" @change=\"readConfFile\" type=\"file\">-->\n        <!--                        <el-button @click=\"importJson\" size=\"mini\" type=\"primary\">选择上传</el-button>-->\n        <!--                    </p>-->\n        <!--                </div>-->\n        <el-button @click=\"$router.back(-1)\" plain>返回</el-button>\n        <h4 style=\"color: #ff000077\" @dblclick=\"openServerDialog\">\n          未做适配，建议拖动后刷新页面，再选择编辑区域\n        </h4>\n        <div>\n          <b>选择地图：</b>\n          <el-cascader\n            style=\"display: inline-block; width: 150px\"\n            size=\"small\"\n            v-model=\"value\"\n            :options=\"options\"\n            :props=\"{ expandTrigger: 'hover' }\"\n            @change=\"changeMap\"\n            v-if=\"isShowCascader\"\n          ></el-cascader>\n        </div>\n        <!--                <div style=\"margin:20px 0;padding:20px 10px;font-weight:bolder;border:1px solid #ccc;text-align:left\">-->\n        <!--                    当前配置类型：-->\n        <!--                    <el-select v-model=\"typeVal\" size=\"mini\">-->\n        <!--                        <el-option-->\n        <!--                            v-for=\"item in types\"-->\n        <!--                            :key=\"item.value\"-->\n        <!--                            :label=\"item.label\"-->\n        <!--                            :value=\"item.value\">-->\n        <!--                        </el-option>-->\n        <!--                    </el-select>-->\n        <!--                </div>-->\n        <div style=\"margin: 20px 0; padding: 30px 10px; font-weight: bolder\">\n          <div v-if=\"junctions.length > 0\">\n            <h5 style=\"background: #eeeeee; margin: 0; padding: 20px 0\">\n              JUNCTIONS 配置\n            </h5>\n            <div\n              style=\"margin: 0 auto 20px auto; font-size: 14px; cursor: pointer\"\n            >\n              <el-card shadow=\"never\">\n                <div\n                  v-for=\"(jun, index) in junctions\"\n                  :key=\"jun\"\n                  class=\"spot-list\"\n                  @click=\"highlightBox(jun)\"\n                  :style=\"{ color: '#6CA6CD' }\"\n                >\n                  {{ index + 1 }}.\n                  {{\n                    spots.find((s) => {\n                      return s.id == jun;\n                    }).code\n                  }}\n                  <el-button\n                    @click=\"deleteId('JUNCTION', jun, index)\"\n                    type=\"danger\"\n                    style=\"float: right; padding: 3px !important\"\n                    plain\n                    size=\"mini\"\n                    icon=\"el-icon-delete\"\n                    circle\n                  ></el-button>\n                </div>\n              </el-card>\n            </div>\n          </div>\n          <div v-if=\"affectsIds.length > 0\">\n            <h5 style=\"background: #eeeeee; margin: 0; padding: 20px 0\">\n              AFFECTS 配置\n            </h5>\n            <div\n              @mouseenter=\"highlightBox(item.affectsIds)\"\n              v-for=\"(item, index) in affectsIds\"\n              :key=\"index\"\n              style=\"margin: 0 0 10px 0\"\n            >\n              <el-card shadow=\"hover\">\n                <h5>\n                  <i class=\"el-icon el-icon-box\"> </i>\n                  {{ \"Affect\" + (index + 1) }}\n                  <el-button\n                    @click=\"deleteAffect(index)\"\n                    size=\"mini\"\n                    icon=\"el-icon-delete\"\n                    type=\"danger\"\n                    style=\"float: right; top: -20px; position: relative\"\n                  ></el-button>\n                </h5>\n                <div v-if=\"!item.id\">\n                  <template v-for=\"(i, l) in item.affectsIds\">\n                    <transition name=\"fade\" :key=\"l\">\n                      <div\n                        class=\"spot-list\"\n                        @click=\"highlightBox(i)\"\n                        :style=\"{ color: colors[index] }\"\n                      >\n                        {{ l + 1 }}.\n                        {{\n                          spots.find((s) => {\n                            return s.id == i;\n                          }).code\n                        }}\n                        <el-tooltip\n                          class=\"item\"\n                          effect=\"dark\"\n                          content=\"设为目标点\"\n                          placement=\"left\"\n                        >\n                          <el-button\n                            @click=\"setAffectId(i, index, l)\"\n                            type=\"success\"\n                            style=\"\n                              float: right;\n                              padding: 3px !important;\n                              margin-left: 20px;\n                            \"\n                            plain\n                            size=\"mini\"\n                            icon=\"el-icon-check\"\n                            circle\n                          ></el-button>\n                        </el-tooltip>\n\n                        <el-button\n                          @click=\"deleteId('AFFECT', i, index, l)\"\n                          type=\"danger\"\n                          style=\"float: right; padding: 3px !important\"\n                          plain\n                          size=\"mini\"\n                          icon=\"el-icon-delete\"\n                          circle\n                        ></el-button>\n                      </div>\n                    </transition>\n                  </template>\n                </div>\n\n                <div\n                  v-else\n                  class=\"affect-box\"\n                  style=\"height: auto\"\n                  :style=\"{ color: colors[index] }\"\n                >\n                  <div\n                    class=\"spot-list base-spot\"\n                    @click=\"highlightBox(item.id)\"\n                  >\n                    {{\n                      spots.find((s) => {\n                        return s.id == item.id;\n                      }).code\n                    }}\n                  </div>\n                  <div class=\"affect-spots\">\n                    <div\n                      class=\"affect-line\"\n                      v-for=\"(i, l) in item.affectsIds\"\n                      :key=\"l\"\n                    >\n                      <div\n                        class=\"spot-list affect-spot\"\n                        @click=\"highlightBox(i)\"\n                      >\n                        {{\n                          spots.find((s) => {\n                            return s.id == i;\n                          }).code\n                        }}\n                      </div>\n                      <div class=\"affect-spot-delete\">\n                        <el-button\n                          @click=\"deleteId('AFFECT', i, index, l)\"\n                          type=\"danger\"\n                          style=\"float: right; padding: 3px !important\"\n                          plain\n                          size=\"mini\"\n                          icon=\"el-icon-delete\"\n                          circle\n                        ></el-button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </el-card>\n            </div>\n          </div>\n          <div v-if=\"idKeys.length > 0\">\n            <h5 style=\"background: #eeeeee; margin: 0; padding: 20px 0\">\n              BLOCKS 配置\n            </h5>\n            <div\n              @mouseenter=\"highlightBox(item)\"\n              v-for=\"(item, index) in idKeys\"\n              :key=\"index\"\n              style=\"margin: 0 0 10px 0\"\n            >\n              <el-card shadow=\"hover\">\n                <h5>\n                  <i class=\"el-icon el-icon-box\"> </i>\n                  {{ \"Block\" + (index + 1) }}\n                  <el-button\n                    @click=\"deleteBlock(index)\"\n                    size=\"mini\"\n                    icon=\"el-icon-delete\"\n                    type=\"danger\"\n                    style=\"float: right; top: -20px; position: relative\"\n                  ></el-button>\n                </h5>\n                <template v-for=\"(i, l) in item\">\n                  <transition name=\"fade\" :key=\"l\">\n                    <div\n                      class=\"spot-list\"\n                      @click=\"highlightBox(i)\"\n                      :style=\"{ color: colors[index] }\"\n                    >\n                      {{ l + 1 }}.\n                      {{\n                        spots.find((s) => {\n                          return s.id == i;\n                        }).code\n                      }}\n                      <el-button\n                        @click=\"deleteId('BLOCK', i, index, l)\"\n                        type=\"danger\"\n                        style=\"float: right; padding: 3px !important\"\n                        plain\n                        size=\"mini\"\n                        icon=\"el-icon-delete\"\n                        circle\n                      ></el-button>\n                    </div>\n                  </transition>\n                </template>\n              </el-card>\n            </div>\n          </div>\n        </div>\n\n        <div style=\"margin-top: 50px\">\n          <!--          <el-button @click=\"addList\" size=\"mini\" v-if=\"junctions.length>0 || idKeys.length>0\" type=\"primary\"-->\n          <el-button\n            @click=\"addList\"\n            size=\"mini\"\n            v-if=\"value.length > 0\"\n            type=\"primary\"\n            icon=\"el-icon-plus\"\n            plain\n            >添加到列表\n          </el-button>\n        </div>\n        <div style=\"margin: 30px auto 50px\">\n          <h5 style=\"text-align: left\">地图交管配置</h5>\n          <el-table size=\"mini\" border :data=\"targetResult\" style=\"width: 100%\">\n            <el-table-column prop=\"domain\" label=\"DOMAIN\">\n              <template slot-scope=\"scope\">\n                {{ options.find((a) => a.value === scope.row.domain).label }}\n              </template>\n            </el-table-column>\n            <!--                        <el-table-column-->\n            <!--                            width=\"60px\"-->\n            <!--                            prop=\"junctions\"-->\n            <!--                            label=\"JUN\">-->\n            <!--                            <template slot-scope=\"scope\">-->\n            <!--                                <el-tooltip placement=\"left\">-->\n            <!--                                    <div slot=\"content\">-->\n            <!--                                        <p>{{ scope.row.junctions }}</p>-->\n            <!--                                    </div>-->\n            <!--                                    <el-button style=\"width:20px;padding:3px!important;\" plain size=\"mini\"-->\n            <!--                                               icon=\"el-icon-more\"-->\n            <!--                                               circle></el-button>-->\n            <!--                                </el-tooltip>-->\n            <!--                            </template>-->\n            <!--                        </el-table-column>-->\n            <!--                        <el-table-column-->\n            <!--                            width=\"60px\"-->\n            <!--                            prop=\"affects\"-->\n            <!--                            label=\"AFT\">-->\n            <!--                            <template slot-scope=\"scope\">-->\n            <!--                                <el-tooltip placement=\"left\">-->\n            <!--                                    <div slot=\"content\">-->\n            <!--                                        <p :key=\"i\" v-for=\"(a,i) in scope.row.affects\">{{ JSON.stringify(a) }}</p>-->\n            <!--                                    </div>-->\n            <!--                                    <el-button style=\"width:20px;padding:3px!important;\" plain size=\"mini\"-->\n            <!--                                               icon=\"el-icon-more\"-->\n            <!--                                               circle></el-button>-->\n            <!--                                </el-tooltip>-->\n            <!--                            </template>-->\n            <!--                        </el-table-column>-->\n            <el-table-column width=\"60px\" prop=\"blocks\" label=\"BLK\">\n              <template slot-scope=\"scope\">\n                <el-tooltip placement=\"left\">\n                  <div slot=\"content\">\n                    <p v-for=\"(b, i) in scope.row.blocks\" :key=\"i\">\n                      {{ JSON.stringify(b) }}\n                    </p>\n                  </div>\n                  <el-button\n                    style=\"width: 20px; padding: 3px !important\"\n                    plain\n                    size=\"mini\"\n                    icon=\"el-icon-more\"\n                    circle\n                  ></el-button>\n                </el-tooltip>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"编辑\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  @click=\"deleteItem(scope.$index)\"\n                  type=\"danger\"\n                  style=\"padding: 3px !important\"\n                  plain\n                  size=\"mini\"\n                  icon=\"el-icon-delete\"\n                  circle\n                ></el-button>\n                <el-button\n                  @click=\"editItem(scope.$index)\"\n                  style=\"margin-left: 5px; padding: 3px !important\"\n                  plain\n                  size=\"mini\"\n                  icon=\"el-icon-edit\"\n                  circle\n                ></el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div style=\"margin-top: 50px; text-align: left\">\n          <h5>跨地图交管配置</h5>\n\n          <div style=\"\">\n            <div style=\"margin: 5px\">\n              <b style=\"display: inline-block; width: 80px\">domain: </b>\n              <el-select\n                v-model=\"domainVal\"\n                @change=\"crossChange\"\n                size=\"mini\"\n                placeholder=\"请选择\"\n                disabled\n              >\n                <el-option\n                  v-for=\"item in options\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </div>\n            <!--            <div style=\"margin:5px;\">-->\n            <!--              <b style=\"display:inline-block;width:80px;\">jun: </b>-->\n            <!--              <el-cascader :show-all-levels=\"false\" v-model=\"junVal\" :props=\"props\"-->\n            <!--                           :options=\"junOption\"-->\n            <!--                           size=\"mini\" collapse-tags></el-cascader>-->\n            <!--            </div>-->\n            <div style=\"margin: 5px\">\n              <b style=\"display: inline-block; width: 80px\">blk: </b>\n              <el-cascader\n                :show-all-levels=\"false\"\n                v-model=\"blkVal\"\n                :props=\"props\"\n                :options=\"blkOption\"\n                size=\"mini\"\n                collapse-tags\n              ></el-cascader>\n            </div>\n          </div>\n\n          <div style=\"margin: 10px; text-align: center\">\n            <el-button\n              @click=\"addCrossList\"\n              v-if=\"domainVal\"\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              plain\n              >添加到列表\n            </el-button>\n          </div>\n          <p></p>\n          <el-table\n            size=\"mini\"\n            border\n            :data=\"targetCrossResult\"\n            style=\"width: 100%\"\n          >\n            <el-table-column prop=\"domain\" label=\"DOMAIN\">\n              <template slot-scope=\"scope\">\n                {{ options.find((a) => a.value === scope.row.domain).label }}\n              </template>\n            </el-table-column>\n            <!--            <el-table-column-->\n            <!--              prop=\"junctions\"-->\n            <!--              label=\"JUN\">-->\n            <!--              <template slot-scope=\"scope\">-->\n            <!--                <el-tooltip placement=\"left\">-->\n            <!--                  <div slot=\"content\">-->\n            <!--                    <p>{{ scope.row.junctions }}</p>-->\n            <!--                  </div>-->\n            <!--                  <el-button style=\"width:20px;padding:3px!important;\" plain size=\"mini\" icon=\"el-icon-more\"-->\n            <!--                             circle></el-button>-->\n            <!--                </el-tooltip>-->\n            <!--              </template>-->\n            <!--            </el-table-column>-->\n            <el-table-column prop=\"blocks\" label=\"BLK\">\n              <template slot-scope=\"scope\">\n                <el-tooltip placement=\"left\">\n                  <div slot=\"content\">\n                    <p :key=\"i\" v-for=\"(b, i) in scope.row.blocks\">\n                      {{ JSON.stringify(b) }}\n                    </p>\n                  </div>\n                  <el-button\n                    style=\"width: 20px; padding: 3px !important\"\n                    plain\n                    size=\"mini\"\n                    icon=\"el-icon-more\"\n                    circle\n                  ></el-button>\n                </el-tooltip>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"编辑\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  @click=\"deleteCrossItem(scope.$index)\"\n                  type=\"danger\"\n                  style=\"padding: 3px !important\"\n                  plain\n                  size=\"mini\"\n                  icon=\"el-icon-delete\"\n                  circle\n                ></el-button>\n\n                <!--                <el-button @click=\"editCrossItem(scope.$index)\" style=\"margin-left:5px;padding:3px!important;\" plain-->\n                <!--                           size=\"mini\" icon=\"el-icon-edit\" circle> </el-button>-->\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div style=\"margin-top: 50px\">\n          <el-button size=\"small\" @click=\"openServerDialog\" type=\"danger\"\n            >跨服务器交管配置</el-button\n          >\n          <el-button size=\"small\" @click=\"uploadTraffic\" type=\"success\"\n            >上传同步</el-button\n          >\n        </div>\n        <!-- 用来服务器数据转移，需要把地图id和点位id改为name和code -->\n        <el-dialog\n          title=\"跨服务器交管配置\"\n          :visible.sync=\"serverDialog\"\n          width=\"400px\"\n        >\n          <el-button\n            size=\"small\"\n            @click=\"openLocalJson\"\n            type=\"primary\"\n            :loading=\"openLocalLoading\"\n            >打开本地配置</el-button\n          >\n          <el-button\n            size=\"small\"\n            @click=\"exportLocalJson\"\n            type=\"success\"\n            :loading=\"exportLocalLoading\"\n            >保存配置至本地</el-button\n          >\n          <input\n            type=\"file\"\n            id=\"filepicker\"\n            @change=\"readLocalJson\"\n            style=\"display: none\"\n          />\n          <div slot=\"footer\" class=\"dialog-footer\" style=\"padding: 0 20px\">\n            <el-button @click=\"serverDialog = false\">取 消</el-button>\n          </div>\n        </el-dialog>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SVG from \"svg.js\";\n// import {request} from \"../../api/request\";\nimport { MapInstance } from \"../base\";\n// import {SVGLine} from '../lines';\nimport { SVGSpot } from \"../spots\";\nimport deepCopy from \"../../utils/copy\";\nimport inPath from \"../../utils/inPath\";\nimport COLORS from \"../../const/color\";\nimport { SHAPE, SHAPENAME } from \"../../const/shape\";\nimport find2D from \"../../utils/find2D\";\nimport FileSaver from \"file-saver\";\nimport { getMapDetails } from \"../../../../api/map\";\nimport { getAreaMonitor } from \"../../../../api/monitor\";\nimport { getTraffic, updateTraffic } from \"../../../../api/traffic\";\n// import {uploadTrafficData} from \"../../../../../api/editor\";\n\nexport default {\n  data() {\n    return {\n      value: [],\n      options: [],\n      typeVal: 0,\n      types: [\n        { value: 0, label: \"JUNCTIONS / BLOCKS\" },\n        { value: 1, label: \"AFFECTS\" },\n      ], //junctions affects blocks\n      affectsIds: [], //二位数组\n      draw: null,\n      group: null,\n      codeGroup: null, //点位名称组\n      resultIdx: undefined, //编辑的索引值\n      targetResult: [],\n      targetResultKey: [], //存放对应的 domainID-mapId 用于判断targetResult中是否已存在对应的数据  更新 or 替换\n      targetCrossResult: [],\n      //blocks 定义具体的junction和block，保证每个元素相互之间不能有相同的子元素\n      junctions: [], //\n      idKeys: [], //blocks  spots ids后续会导出对应的json文件\n      spots: undefined, //DOM中对应的SVGSpot对象，后续添加UI交互\n      SVGSpots: undefined,\n      fileName: \"\", //configJson URL\n      junOption: [],\n      blkOption: [],\n      domainVal: \"\",\n      junVal: [],\n      blkVal: [],\n      props: {\n        multiple: true,\n        lazy: true,\n        lazyLoad(node, resolve) {\n          const { level, value } = node;\n          if (level === 1) {\n            getMapDetails({ mapId: value }).then((res) => {\n              const { Vertex } = res[\"data\"];\n              let spots = Vertex.map((v) => v[\"vertexPo\"]);\n              const nodes = spots.map((s) => ({\n                value: s.id,\n                label: s.code,\n                leaf: level >= 1,\n              }));\n              resolve(nodes);\n            });\n          }\n        },\n      },\n      status: 2,\n      gx: 0,\n      gy: 0,\n      rectEnable: false,\n      rectGroup: null,\n      areaId: \"\", //当前选中地图的所属区域\n      loadingMessage: null, //提示正在绘制，手动关闭\n      serverDialog: false, //是否显示特殊配置弹框\n      spotIdMapper: {},\n      spotNameMapper: {},\n      mapIdMapper: {},\n      mapNameMapper: {},\n      trafficData: null, //从配置中获取的交管块数据\n      isShowCascader: true, //是否显示极联选择器\n      exportLocalLoading: false, // 等待生成跨服务器配置文件\n      openLocalLoading: false, // 等待打开跨服务器配置文件\n      forbiddenRemove: true, // 是否禁用移除交管块功能\n    };\n  },\n  computed: {\n    colors() {\n      return COLORS;\n    },\n  },\n  created() {\n    // if(this.$)\n    const { mode } = this.$route.query;\n    if (mode === \"simple\") {\n      this.simpleMode = true;\n    }\n    getAreaMonitor().then((res) => {\n      this.options = res.data\n        .filter((item) => {\n          item[\"topologyMapPos\"].forEach((map) => {\n            this.$set(this.mapIdMapper, map.id, map.name);\n            this.$set(\n              this.mapNameMapper,\n              item[\"areaPo\"].id + \"-\" + map.name,\n              map.id\n            );\n          });\n          return item[\"topologyMapPos\"].length > 0;\n        })\n        .map((item) => ({\n          value: item[\"areaPo\"].id,\n          label: item[\"areaPo\"].name,\n          children:\n            item[\"topologyMapPos\"].length > 0 &&\n            item[\"topologyMapPos\"].map((map) => ({\n              value: map[\"id\"],\n              label: map[\"name\"],\n            })),\n        }));\n    });\n  },\n  methods: {\n    crossChange(val) {\n      this.junVal = [];\n      this.blkVal = [];\n      this.junOption = this.options.find((d) => d.value === val)[\"children\"];\n      let blkOption = this.options.find((d) => d.value === val)[\"children\"];\n      // 隐藏打开的地图，只展示区域下其他地图\n      this.blkOption = blkOption.filter((item) => item.value !== this.value[1]);\n    },\n    // lazyLoad(node, resolve) {\n    //     const {level, value} = node;\n    //     if (level === 1) {\n    //         // request.get(\"/mapManagement/getMapDetailByMapId?mapId=\" + value).then(res => {\n    //         //     let nodes = res.mapInfo.spots.map(s => ({\n    //         //         value: s.id,\n    //         //         label: s.code,\n    //         //         leaf: level >= 1,\n    //         //         options: []\n    //         //     }));\n    //         //     resolve(nodes);\n    //         resolve(1)\n    //         // })\n    //     }\n    // },\n    editCrossItem() {\n      // idx\n      // let { domain, junMaps, junctions, blkMaps, blocks } = this.targetCrossResult[idx];\n      // this.domainVal = domain;\n      // this.junOption = this.options.find(d => d.value === domain)['children'];\n      // this.blkOption = this.options.find(d => d.value === domain)['children'];\n      // this.junVal = junMaps.map((j,i) => ([j,junctions[i]]));\n      // this.blkVal = blkMaps.map((b,i) => ([b,blocks[i]]));\n      // this.deleteCrossItem(idx);\n    },\n    deleteCrossItem(val) {\n      this.targetCrossResult.splice(val, 1);\n    },\n    addCrossList() {\n      if (this.domainVal) {\n        this.targetCrossResult.push({\n          domain: this.domainVal,\n          junMaps: this.junVal.map((j) => j[0]),\n          junctions: this.junVal.map((j) => j[1]),\n          blkMaps: this.blkVal.map((b) => b[0]),\n          blocks: [\n            {\n              name: \"crossBlocks\" + this.targetCrossResult.length,\n              ids: this.blkVal.map((b) => b[1]),\n            },\n          ],\n          blkVal: this.blkVal,\n        });\n        // this.domainVal = \"\";\n        this.junVal = [];\n        this.blkVal = [];\n        this.junOption = [];\n        // this.blkOption = [];\n      } else {\n        this.$message({\n          type: \"info\",\n          message: \"domain 为空\",\n        });\n      }\n    },\n    deleteItem(idx) {\n      this.$confirm(\"确认删除这项配置吗 ?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.targetResultKey.splice(idx, 1);\n          this.targetResult.splice(idx, 1);\n          this.$message({\n            type: \"success\",\n            message: \"删除成功!\",\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消\",\n          });\n        });\n    },\n    editItem(idx) {\n      this.resultIdx = idx;\n      this.value = this.targetResultKey[idx].split(\"-\").map((id) => Number(id));\n      this.handleChange(this.value);\n    },\n    addList() {\n      let k = this.value.join(\"-\");\n      //需要做校验 保证 affects 格式正确\n      let flag = false;\n      this.affectsIds.forEach((v) => {\n        if (!v.id) {\n          flag = true;\n        }\n      });\n      if (flag) {\n        this.$message.error(\"affects 需要指定目标点\");\n        return;\n      }\n      let result = deepCopy({\n        domain: this.value[0],\n        map: this.value[1],\n        junctions: this.junctions,\n        affects: this.affectsIds,\n        blocks: this.idKeys.map((ids, index) => {\n          return {\n            name: \"block\" + (index + 1),\n            ids: ids,\n          };\n        }),\n      });\n      if (this.targetResultKey.find((t) => t === k)) {\n        this.$confirm(\"是否更新当前数据?\", \"提示\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\",\n        })\n          .then(() => {\n            this.targetResult.splice(\n              this.targetResultKey.findIndex((t) => t === k),\n              1,\n              result\n            );\n            this.$message({\n              type: \"success\",\n              message: \"更新成功!\",\n            });\n          })\n          .catch(() => {\n            this.$message({\n              type: \"info\",\n              message: \"已取消\",\n            });\n          });\n      } else {\n        this.targetResultKey.push(k);\n        this.targetResult.push(result);\n      }\n    },\n    format2Front(data) {\n      console.log(this.value, data);\n      // 将数据拆分为是否跨地图两类\n      const one = [];\n      const more = []; // 跨地图\n\n      data.forEach((d) => {\n        // MAP ID\n        if (new Set(d[\"ids\"].map((v) => v[0])).size === 1) {\n          const mapId = d[\"ids\"][0][0];\n          const r = one.find((o) => o.map === mapId);\n          if (r) {\n            r[\"blocks\"].push({\n              name: d[\"name\"],\n              ids: d[\"ids\"].map((v) => v[1]),\n            });\n          } else {\n            one.push({\n              domain: this.value[0],\n              map: mapId,\n              junctions: [],\n              affects: [],\n              blocks: [\n                {\n                  name: d[\"name\"],\n                  ids: d[\"ids\"].map((v) => v[1]),\n                },\n              ],\n            });\n          }\n        } else {\n          more.push({\n            domain: this.value[0],\n            junMaps: [],\n            junctions: [],\n            blkMaps: d[\"ids\"].map((v) => v[0]),\n            blocks: [\n              {\n                name: d[\"name\"],\n                ids: d[\"ids\"].map((v) => v[1]),\n              },\n            ],\n            blkVal: d[\"ids\"],\n          });\n        }\n      });\n      const res = one.concat(more);\n      return res;\n    },\n    // 切换地图后，新地图若有交管块，直接打开编辑\n    async changeMap(val) {\n      // 先获取地图中交管块列表，如果是特殊配置打开的，优先拿配置的交管块\n      let r;\n      if (this.trafficData) {\n        r = JSON.parse(JSON.stringify(this.trafficData));\n        this.trafficData = null;\n      } else {\n        r = await getTraffic({ areaId: val[0] });\n      }\n      const content = this.format2Front(r[\"data\"] ? r[\"data\"][\"blocks\"] : []);\n      this.targetResultKey = [];\n      this.targetResult = [];\n      this.targetCrossResult = [];\n      //重新导入要重置点位样式\n      try {\n        content.forEach((ele) => {\n          if (ele[\"map\"]) {\n            this.targetResult.push(ele);\n            this.targetResultKey.push(ele[\"domain\"] + \"-\" + ele[\"map\"]);\n          } else {\n            this.targetCrossResult.push(ele);\n          }\n        });\n        this.targetCrossResult = deepCopy(this.targetCrossResult);\n        // this.idKeys = [];\n        this.junctions = [];\n        this.affectsIds = [];\n        //切换地图后，新地图若有交管块，且不是跨地图的，直接打开编辑\n        if (this.targetResult.length > 0) {\n          for (let index = 0; index < this.targetResultKey.length; index++) {\n            let value = this.targetResultKey[index]\n              .split(\"-\")\n              .map((id) => Number(id));\n            if (value[1] === val[1]) {\n              return this.editItem(index);\n            }\n          }\n        }\n        // 否则，仅绘制地图\n        this.handleChange(val);\n      } catch (err) {\n        this.$message.error(\"配置文件有误，请核对点位\");\n      } finally {\n        if (document.getElementById(\"fileElement\"))\n          document.getElementById(\"fileElement\").value = \"\";\n      }\n    },\n    handleChange(val) {\n      this.areaId = val[0];\n      let _vm = this;\n      Promise.resolve(val[1] && this.loadData(val[1])).then(() => {\n        let idx = _vm.targetResultKey.findIndex(\n          (k) => k === _vm.value.join(\"-\")\n        );\n        if (_vm.SVGSpots && _vm.spots && idx > -1) {\n          let result = _vm.targetResult[idx];\n          _vm.junctions = result[\"junctions\"] || [];\n          _vm.idKeys = result[\"blocks\"].map((ele) => ele[\"ids\"]) || [];\n          _vm.affectsIds = result[\"affects\"] || [];\n        }\n        _vm.affectsIds.forEach((v, index) => {\n          if (v.id) {\n            _vm.SVGSpots[v.id]\n              .animate(500)\n              .scale(2)\n              .fill(COLORS[index % COLORS.length])\n              .animate(500)\n              .scale(1);\n          }\n          v[\"affectsIds\"].forEach((id) => {\n            _vm.SVGSpots[id]\n              .animate(500)\n              .scale(2)\n              .fill(COLORS[index % COLORS.length])\n              .animate(500)\n              .scale(1);\n          });\n        });\n        _vm.junctions.forEach((id) => {\n          _vm.SVGSpots[id]\n            .fill(\"#FFFFFF\")\n            .stroke({\n              width: 2,\n              color: \"#6CA6CD\",\n            })\n            .animate(500)\n            .scale(2)\n            .animate(500)\n            .scale(1);\n        });\n        _vm.idKeys.forEach((ids, index) => {\n          ids.forEach((id) => {\n            let arr = this.idKeys.flat(1);\n            let pubIds = arr.filter((i) => {\n              return i === id;\n            });\n            if (pubIds.length > 1) {\n              this.SVGSpots[id]\n                .animate(500)\n                .scale(2)\n                .fill(\"#333333\")\n                .animate(500)\n                .scale(1);\n            } else {\n              if (pubIds.length === 1) {\n                let i = find2D(pubIds[0], this.idKeys);\n                this.SVGSpots[pubIds[0]]\n                  .animate(500)\n                  .scale(2)\n                  .fill(COLORS[i[0] % COLORS.length])\n                  .animate(500)\n                  .scale(1);\n              } else {\n                _vm.SVGSpots[id]\n                  .animate(500)\n                  .scale(2)\n                  .fill(COLORS[index % COLORS.length])\n                  .animate(500)\n                  .scale(1);\n              }\n            }\n          });\n        });\n        // 跨地图交管配置，必须保证同一个区域\n        _vm.domainVal = val[0];\n        _vm.crossChange(val[0]);\n      });\n    },\n    readConfFile(e) {\n      let file = e.target.files[0];\n      this.fileName = file.name;\n      if (file.type === \"application/json\") {\n        let f = new Blob([file], { type: \"application/json\" });\n        let reader = new FileReader();\n        reader.onload = () => {\n          let content = JSON.parse(reader.result); //内容就在这里\n          this.targetResultKey = [];\n          this.targetResult = [];\n          this.targetCrossResult = [];\n          //重新导入要重置点位样式\n          try {\n            content.forEach((ele) => {\n              if (ele[\"map\"]) {\n                this.targetResult.push(ele);\n                this.targetResultKey.push(ele[\"domain\"] + \"-\" + ele[\"map\"]);\n              } else {\n                this.targetCrossResult.push(ele);\n              }\n            });\n            this.targetCrossResult = deepCopy(this.targetCrossResult);\n            this.idKeys = [];\n            this.junctions = [];\n            this.affectsIds = [];\n          } catch (err) {\n            this.$message.error(\"配置文件有误，请核对点位\");\n          } finally {\n            if (document.getElementById(\"fileElement\"))\n              document.getElementById(\"fileElement\").value = \"\";\n          }\n        };\n        reader.readAsText(f);\n      } else {\n        this.$message.error(\"文件类型有误\");\n      }\n    },\n    highlightBox(arg) {\n      if (arg instanceof Array) {\n        arg.forEach((i) => {\n          this.SVGSpots[i].animate(500).scale(2).animate(500).scale(1);\n        });\n      } else {\n        this.SVGSpots[arg].animate(500).scale(2).animate(500).scale(1);\n      }\n    },\n    importJson() {\n      if (document.getElementById(\"fileElement\"))\n        document.getElementById(\"fileElement\").click();\n    },\n    deleteBlock(index) {\n      let target = this.idKeys.splice(index, 1);\n      target[0].forEach((id) => {\n        let arr = this.idKeys.flat(1);\n        let pubIds = arr.filter((i) => {\n          return i === id;\n        });\n        if (pubIds.length > 1) {\n          this.SVGSpots[id]\n            .animate(500)\n            .scale(2)\n            .fill(\"#333333\")\n            .animate(500)\n            .scale(1);\n        } else {\n          if (pubIds.length === 1) {\n            let i = find2D(pubIds[0], this.idKeys);\n            this.SVGSpots[pubIds[0]]\n              .animate(500)\n              .scale(2)\n              .fill(COLORS[i[0] % COLORS.length])\n              .animate(500)\n              .scale(1);\n          } else {\n            this.SVGSpots[id]\n              .animate(500)\n              .scale(2)\n              .fill(\"#6CA6CD\")\n              .animate(500)\n              .scale(1);\n          }\n        }\n      });\n    },\n    deleteAffect(index) {\n      let target = this.affectsIds.splice(index, 1);\n      if (target[0][\"id\"]) {\n        this.SVGSpots[target[0][\"id\"]].fill(\"#6CA6CD\").stroke({\n          width: 2,\n          color: \"#FFFFFF\",\n        });\n      }\n      target.forEach((v) => {\n        v[\"affectsIds\"].forEach((id) => {\n          this.SVGSpots[id].fill(\"#6CA6CD\").stroke({\n            width: 2,\n            color: \"#FFFFFF\",\n          });\n        });\n      });\n    },\n    setAffectId(id, index, eleIndex) {\n      this.affectsIds[index][\"affectsIds\"].splice(eleIndex, 1);\n      this.affectsIds[index][\"id\"] = id;\n    },\n    deleteId(type, id, index, eleIndex) {\n      event.preventDefault();\n      event.stopPropagation();\n      if (type === \"BLOCK\") {\n        //删除idIndex  重置blocks样式 并更新blocks\n\n        // before 2020-3-23\n        // let idIndex = find2D(id, this.idKeys);\n        // this.idKeys[idIndex[0]].splice(idIndex[1], 1);\n        // this.SVGSpots[id].animate(500).scale(2).fill('#6CA6CD').animate(500).scale(1);\n        // if (this.idKeys[idIndex[0]].length === 0) {\n        //     this.idKeys.splice(idIndex[0], 1);\n        // }\n        // after 2020-3-23\n        let idIndex = [index, eleIndex];\n        this.idKeys[idIndex[0]].splice(idIndex[1], 1);\n        this.SVGSpots[id]\n          .animate(500)\n          .scale(2)\n          .fill(\"#6CA6CD\")\n          .animate(500)\n          .scale(1);\n        if (this.idKeys[idIndex[0]].length === 0) {\n          this.idKeys.splice(idIndex[0], 1);\n        }\n        // 如果删除的是 公共点，则其他 Block or  Blocks 依旧存在，需要显示默认颜色\n        // 需要判断剩余是否依然是公共点 即 多个 Block\n        let arr = this.idKeys.flat(1);\n        let pubIds = arr.filter((i) => {\n          return i === id;\n        });\n        if (pubIds.length > 1) {\n          pubIds.forEach((pid) => {\n            this.SVGSpots[pid]\n              .animate(500)\n              .scale(2)\n              .fill(\"#333333\")\n              .animate(500)\n              .scale(1);\n          });\n        } else {\n          if (pubIds.length === 1) {\n            let i = find2D(pubIds[0], this.idKeys);\n            this.SVGSpots[pubIds[0]]\n              .animate(500)\n              .scale(2)\n              .fill(COLORS[i[0] % COLORS.length])\n              .animate(500)\n              .scale(1);\n          } else {\n            this.SVGSpots[id]\n              .animate(500)\n              .scale(2)\n              .fill(\"#6CA6CD\")\n              .animate(500)\n              .scale(1);\n          }\n        }\n      }\n      if (type === \"JUNCTION\") {\n        //删除连接点\n        this.junctions.splice(\n          this.junctions.findIndex((jun) => {\n            return jun == id;\n          }),\n          1\n        );\n        this.SVGSpots[id].fill(\"#6CA6CD\").stroke({\n          width: 2,\n          color: \"#FFFFFF\",\n        });\n      }\n      if (type === \"AFFECT\") {\n        this.SVGSpots[id].fill(\"#6CA6CD\").stroke({\n          width: 2,\n          color: \"#FFFFFF\",\n        });\n        this.affectsIds[index][\"affectsIds\"].splice(eleIndex, 1);\n        if (this.affectsIds[index][\"affectsIds\"].length < 1) {\n          this.SVGSpots[this.affectsIds[index][\"id\"]].fill(\"#6CA6CD\").stroke({\n            width: 2,\n            color: \"#FFFFFF\",\n          });\n          this.affectsIds.splice(index, 1);\n        }\n      }\n    },\n    formatCrossData() {\n      return this.targetCrossResult.map((r) => ({\n        domain: r.domain,\n        // junMaps: r.junVal.map(j => j[0]),\n        junctions: r.junctions,\n        // blkMaps: r.blkVal.map(id => id[0]),\n        blocks: r.blocks,\n      }));\n    },\n    /**\n     * 严格限定数据格式，避免后台报错\n     * 1、全量配置修改，被使用到的地图必须配置，即便为空也要保证字段匹配，跨地图的配置必须默认\n     * 2、\n     */\n    strictJsonData(data) {\n      let dataCopy = deepCopy(data);\n      data.forEach((ele) => {\n        // if (ele.hasOwnProperty('blkMaps')) {\n        let mapArr = Array.from(new Set(ele[\"blkMaps\"]));\n        mapArr.forEach((id) => {\n          if (!dataCopy.find((v) => v[\"map\"] === id)) {\n            dataCopy.push({\n              domain: ele.domain,\n              map: id,\n              junctions: [],\n              blocks: [],\n            });\n          }\n        });\n        // }\n      });\n      return dataCopy;\n    },\n    // 打开本地特殊配置\n    openLocalJson() {\n      let file = document.getElementById(\"filepicker\");\n      if (file) file.click();\n    },\n    // 解析特殊配置文件 - mapName, code\n    readLocalJson(e) {\n      let file = e.target.files[0];\n      if (file) {\n        let name = file.name;\n        let suffix = name.substring(name.lastIndexOf(\".\"), name.length);\n        if (suffix !== \".json\")\n          return this.$message.warning(\"请选择json格式文件\");\n        let reader = new FileReader();\n        reader.readAsText(file); //以字符串形式解读文件\n        reader.onload = (e) => {\n          let file = document.getElementById(\"filepicker\");\n          //@ts-ignore 每次打开本地文件后，清空选择，以便于下次打开同样的文件，也能触发函数\n          file.value = \"\";\n          let result = JSON.parse(e.target.result);\n          this.handleLocalJson(result);\n        };\n      }\n    },\n    //处理跨地图交管块配置\n    async handleLocalJson(result) {\n      this.openLocalLoading = true;\n      let isSuccess = true;\n      let trafficList = [];\n      let mapIds = [];\n      // 获取所有的地图id，准备获取地图详情\n      for (let i = 0; i < result.length; i++) {\n        let { blkMaps, map } = result[i];\n        if (blkMaps) {\n          blkMaps.forEach((mapName) => {\n            let mapId = this.mapNameMapper[this.value[0] + \"-\" + mapName];\n            if (!mapId) isSuccess = false;\n            if (!mapIds.includes(mapId)) mapIds.push(mapId);\n          });\n        } else {\n          let mapId = this.mapNameMapper[this.value[0] + \"-\" + map];\n          if (!mapId) isSuccess = false;\n          if (!mapIds.includes(mapId)) mapIds.push(mapId);\n        }\n      }\n      if (!isSuccess) {\n        this.openLocalLoading = false;\n        return this.$message({\n          type: \"error\",\n          message: \"在该区域下找不到对应的地图, 请检查配置文件涵盖的所有地图\",\n          duration: 8 * 1000,\n        });\n      }\n      for (let i = 0; i < mapIds.length; i++) {\n        const mapId = mapIds[i];\n        let res = await getMapDetails({ mapId });\n        let spots = res[\"data\"].Vertex.map((v) => v[\"vertexPo\"]);\n        spots.forEach((s) => {\n          this.spotIdMapper[mapId + \"-\" + s.id] = s.code;\n          this.spotNameMapper[mapId + \"-\" + s.code] = s.id;\n        });\n      }\n      for (let i = 0; i < result.length; i++) {\n        let item = result[i];\n        item.domain = this.value[0];\n        if (item.blkMaps) {\n          // 如果是跨地图交管\n          let ids = [];\n          let blkMaps = [];\n          item.blkVal = item.blkVal.map((blk) => {\n            let mapId = this.mapNameMapper[this.value[0] + \"-\" + blk[0]];\n            let spotId = this.spotNameMapper[mapId + \"-\" + blk[1]];\n            ids.push(spotId);\n            blkMaps.push(mapId);\n            return [mapId, spotId];\n          });\n          item.blocks[0].ids = ids;\n          item.blkMaps = blkMaps;\n          trafficList.push({\n            name: item.blocks[0].name,\n            ids: item.blkVal,\n          });\n        } else {\n          let mapId = this.mapNameMapper[this.value[0] + \"-\" + item.map];\n          item.blocks.forEach(({ name, ids }) => {\n            trafficList.push({\n              name,\n              ids: ids.map((name) => {\n                let spotId = this.spotNameMapper[mapId + \"-\" + name];\n                if (!spotId) isSuccess = false;\n                return [mapId, spotId];\n              }),\n            });\n          });\n        }\n      }\n      this.openLocalLoading = false;\n      if (!isSuccess) {\n        return this.$message({\n          type: \"error\",\n          message: \"根据点位名称找不到对应的点位, 请重新放入配置文件对应的地图\",\n          duration: 8 * 1000,\n        });\n      }\n      this.trafficData = { data: { blocks: trafficList } };\n      this.changeMap(this.value); //手动调用，仿点击事件\n      this.serverDialog = false;\n    },\n    // 生成本地配置 - mapName, code\n    async exportLocalJson() {\n      this.exportLocalLoading = true;\n      let data = this.strictJsonData(\n        this.targetResult.concat(this.targetCrossResult)\n      );\n      let mapIds = [];\n      // 获取所有的地图id，准备获取地图详情\n      data.forEach(({ map, blkMaps }) => {\n        if (blkMaps) {\n          blkMaps.forEach((mapId) => {\n            if (!mapIds.includes(mapId)) mapIds.push(mapId);\n          });\n        } else {\n          if (!mapIds.includes(map)) mapIds.push(map);\n        }\n      });\n      // await 失效了，所以这么写\n      let fun = () => {\n        data.forEach((item) => {\n          if (item.blkMaps) {\n            // 如果是跨地图交管\n            item.blkVal = item.blkVal.map((blk) => {\n              return [\n                this.mapIdMapper[blk[0]],\n                this.spotIdMapper[blk[0] + \"-\" + blk[1]],\n              ];\n            });\n            item.blkMaps = item.blkMaps.map((mapId) => this.mapIdMapper[mapId]);\n          } else {\n            item.blocks.forEach(({ ids }, i) => {\n              item.blocks[i].ids = ids.map((id) => {\n                return this.spotIdMapper[item.map + \"-\" + id];\n              });\n            });\n            item.map = this.mapIdMapper[item.map];\n          }\n        });\n        let blob = new Blob([JSON.stringify(data)], {\n          type: \"application/json;charset=utf-8\",\n        });\n        FileSaver.saveAs(blob, this.fileName);\n        this.serverDialog = false;\n        this.exportLocalLoading = false;\n      };\n      if (mapIds.length === 0) fun();\n      for (let i = 0; i < mapIds.length; i++) {\n        const mapId = mapIds[i];\n        let res = await getMapDetails({ mapId });\n        let spots = res[\"data\"].Vertex.map((v) => v[\"vertexPo\"]);\n        spots.forEach((s) => {\n          this.spotIdMapper[mapId + \"-\" + s.id] = s.code;\n          this.spotNameMapper[mapId + \"-\" + s.code] = s.id;\n        });\n        if (i === mapIds.length - 1) fun();\n      }\n    },\n    // 生成配置并保存\n    exportJson() {\n      let blob = new Blob(\n        [\n          JSON.stringify(\n            this.strictJsonData(\n              this.targetResult.concat(this.targetCrossResult)\n            )\n          ),\n        ],\n        { type: \"application/json;charset=utf-8\" }\n      );\n      FileSaver.saveAs(blob, this.fileName);\n    },\n    // 打开跨服务器配置弹框\n    openServerDialog() {\n      if (!this.areaId) return this.$message.warning(\"请先选择地图\");\n      this.serverDialog = true;\n    },\n    uploadTraffic() {\n      if (!this.areaId) return this.$message.warning(\"请先选择地图\");\n      const d = this.strictJsonData(\n        this.targetResult.concat(this.targetCrossResult)\n      );\n      const result = {\n        area: this.areaId,\n        blocks: [],\n      };\n      d.forEach((v) => {\n        result[\"blocks\"].push(...v[\"blocks\"]);\n      });\n      updateTraffic(result).then((r) => {\n        if (r.state) {\n          this.$message.success(\"更新成功\");\n        }\n      });\n      // uploadTrafficData(this.strictJsonData(this.targetResult.concat(this.targetCrossResult))).then(res => {\n      //     if (res) {\n      //         this.$message.success('上传成功');\n      //         this.simpleModeConf = null\n      //     } else {\n      //         this.$message.error('上传失败');\n      //     }\n      // })\n    },\n    async loadData(mapId) {\n      this.loadingMessage && this.loadingMessage.close();\n      this.loadingMessage = this.$message({\n        type: \"info\",\n        duration: 200000,\n        message: \"正在绘制地图中, 请稍后\",\n      });\n      let _vm = this;\n      _vm.group.clear();\n      _vm.codeGroup.clear();\n      _vm.SVGSpots = undefined;\n      _vm.spots = undefined;\n      _vm.junctions = [];\n      _vm.idKeys = [];\n      _vm.affectsIds = [];\n\n      // let queryString = require('query-string');\n      // let mapId = queryString.parse(location.search).mapId;\n      // let mapId = _vm.$route.params.id;\n      // let mapData = await request.get(\"/mapManagement/getMapDetailByMapId?mapId=\" + mapId);\n      let mapData = await getMapDetails({ mapId });\n      const { Edge, Vertex, topologyMap } = mapData[\"data\"];\n      let spots = Vertex.map((v) => v[\"vertexPo\"]);\n      _vm.spots = spots;\n      const tmpMapper = {};\n      spots.forEach((s) => {\n        tmpMapper[s[\"code\"]] = s;\n      });\n      const lines = Edge.map((v) => {\n        const start = tmpMapper[v[\"edgePo\"][\"source\"]];\n        const end = tmpMapper[v[\"edgePo\"][\"target\"]];\n        return {\n          id: v[\"edgePo\"][\"id\"],\n          weight: 1,\n          startX: start[\"x\"],\n          startY: start[\"y\"],\n          endX: end[\"x\"],\n          endY: end[\"y\"],\n        };\n      });\n      // 初始化时，尽量将地图放在可视范围内；实在看不到，鼠标放在屏幕中间并缩小地图\n      let xScale = (window.innerWidth - 400) / topologyMap.weight;\n      let yScale = window.innerHeight / topologyMap.height;\n      let mapIns = new MapInstance(\n        xScale > yScale ? xScale : yScale,\n        topologyMap.originX,\n        topologyMap.originY\n      );\n      //创建组\n      // let group = draw.group();\n      let draw = _vm.draw;\n      let group = _vm.group;\n      let codeGroup = _vm.codeGroup;\n      let gx = 0,\n        gy = topologyMap.height * mapIns.SCALE;\n      group.move(gx, gy);\n      codeGroup.move(gx, gy);\n      let mx = 0,\n        my = 0;\n      //enable 鼠标右键 拖拽 缩放 使能\n      let enable = false;\n      let cos = [];\n      // 正在操作的区域\n      let polyline = group.polyline(cos).fill(\"none\").stroke({\n        color: \"#f06\",\n        width: 2,\n        linecap: \"round\",\n        linejoin: \"round\",\n        dasharray: \"5,5\",\n      });\n      //当前绘制的线段\n      let line = group.line([0, 0, 0, 0]).stroke({\n        width: 1,\n        color: \"#f06\",\n        dasharray: \"5,5\",\n      });\n      //开始绘制的起点\n      let start = group.circle(6).fill(\"transparent\");\n\n      //地图点位  存放绘制的对象元素 key -> id\n      // let svgSpots = {};\n      _vm.SVGSpots = {};\n      let svgSpotsCodes = {};\n      //地图路径  存放绘制的对象元素 key -> id\n      // let svgLines = {};\n      let maxCodeLimit = 500; //超过该数值，点位默认不绘制，且缩放时隐藏\n      let isCodeShow = true; //当前点位名称是否显示\n\n      //图标说明\n      SHAPE.forEach((s, index) => {\n        draw\n          .polygon(s)\n          .fill(\"#6CA6CD\")\n          .stroke({\n            width: 2,\n            color: \"#FFFFFF\",\n          })\n          .move(index * 70, 20)\n          .scale(1.2);\n        let icon = draw\n          .text(SHAPENAME[index])\n          .font({ fill: \"#8F8F8F\", size: 12 });\n        icon.move(index * 70 + icon.length() / 2, 20);\n      });\n\n      init();\n      this.loadingMessage && this.loadingMessage.close();\n\n      function init() {\n        // let time = new Date().getTime();\n        drawRoutes();\n        // 当点位过多时，默认初始不绘制点位名称\n        if (spots.length > maxCodeLimit) {\n          isCodeShow = false;\n          let message = `1. 地图点位数量超过${maxCodeLimit}个时, 首次打开<b>不绘制</b>点位名称, 缩放时<b>清除</b>点位名称;</br>2. <b>双击</b>地图时, 绘制点位名称。`;\n          _vm.$message({\n            showClose: true,\n            message,\n            duration: 10000,\n            dangerouslyUseHTMLString: true,\n          });\n        } else {\n          isCodeShow = true;\n          drawSpotCodes();\n        }\n        spots.forEach((s) => {\n          let _s = new SVGSpot(s);\n          //加载不同类型的点位\n          SHAPE[_s.type]\n            ? (_vm.SVGSpots[_s.id] = group\n                .polygon(SHAPE[_s.type])\n                .fill(\"#6CA6CD\")\n                .stroke({\n                  width: 2,\n                  color: \"#FFFFFF\",\n                })\n                .move(_s.x - 5, _s.y - 5))\n            : (_vm.SVGSpots[_s.id] = group\n                .circle(10)\n                .fill(\"#6CA6CD\")\n                .stroke({\n                  width: 2,\n                  color: \"#FFFFFF\",\n                })\n                .move(_s.x - 5, _s.y - 5));\n          _vm.SVGSpots[_s.id].on(\"click\", () => {\n            if (!_vm.forbiddenRemove) handleDeleteBlock(_s.id);\n          });\n        });\n        // console.log(new Date().getTime() - time);\n      }\n\n      draw.off();\n      // 双击地图时，可绘制点位名称\n      draw.on(\"dblclick\", () => {\n        if (spots.length > maxCodeLimit && !isCodeShow) {\n          isCodeShow = true;\n          drawSpotCodes();\n        }\n      });\n      draw.on(\"mousedown\", (e) => {\n        mx = e.pageX;\n        my = e.pageY;\n        if (e.button === 2) {\n          //鼠标右键  移动拖拽\n          enable = true;\n          draw.attr({ cursor: \"move\" });\n        }\n        if (e.button === 0) {\n          //鼠标左键  选择区域\n          if (this.status === 1) {\n            draw.attr({ cursor: \"crosshair\" });\n            if (cos.length === 0) {\n              //开始点\n              start.move(mx - gx - 3, my - gy - 3).fill(\"#f06\");\n            }\n            cos.push([mx - gx, my - gy]);\n            if (cos.length > 1) {\n              //缩放操作后，判断逻辑需改善\n              if (\n                Math.abs(cos[0][0] + gx - mx) < 10 &&\n                Math.abs(cos[0][1] + gy - my) < 10\n              ) {\n                //首尾重合\n                cos[cos.length - 1] = cos[0];\n                //转化为和点线统一坐标系下的坐标\n                let newSpots = deepCopy(\n                  cos.map((v) => {\n                    return [\n                      (v[0] + mapIns.ORIGINX) / mapIns.SCALE,\n                      (mapIns.ORIGINY - v[1]) / mapIns.SCALE,\n                    ];\n                  })\n                );\n                rerender(newSpots);\n                //清空点和线\n                clearSelect();\n              } else {\n                polyline.plot(cos);\n              }\n            } else {\n              polyline.plot(cos);\n            }\n          }\n          if (this.status === 2) {\n            this.rectEnable = true;\n            this.gx = e.pageX;\n            this.gy = e.pageY;\n          }\n        }\n      });\n      draw.on(\"mouseup\", (e) => {\n        if (e.button === 2) {\n          draw.attr({ cursor: \"default\" });\n          enable = false;\n        }\n        if (e.button === 0) {\n          if (this.status === 2 && this.rectEnable) {\n            draw.attr({ cursor: \"default\" });\n            this.rectEnable = false;\n            this.rectGroup && this.rectGroup.remove();\n            cos = [\n              [this.gx - gx, this.gy - gy],\n              [e.pageX - gx, this.gy - gy],\n              [e.pageX - gx, e.pageY - gy],\n              [this.gx - gx, e.pageY - gy],\n            ];\n            //转化为和点线统一坐标系下的坐标\n            let newSpots = deepCopy(\n              cos.map((v) => {\n                return [\n                  (v[0] + mapIns.ORIGINX) / mapIns.SCALE,\n                  (mapIns.ORIGINY - v[1]) / mapIns.SCALE,\n                ];\n              })\n            );\n            rerender(newSpots);\n            //清空点和线\n            clearSelect();\n          }\n        }\n      });\n      draw.on(\"mousemove\", (e) => {\n        if (enable) {\n          // 拖拽  缩放\n          gx += e.pageX - mx;\n          gy += e.pageY - my;\n          mx = e.pageX;\n          my = e.pageY;\n          group.move(gx, gy);\n          codeGroup.move(gx, gy);\n        } else {\n          if (this.status === 1) {\n            //绘制\n            let x = e.pageX;\n            let y = e.pageY;\n            let len = cos.length - 1;\n            if (len >= 0) {\n              line.plot(cos[len][0], cos[len][1], x - gx, y - gy);\n            }\n          }\n          if (this.status === 2) {\n            if (this.rectEnable) {\n              this.rectGroup && this.rectGroup.remove();\n              this.rectGroup = this.draw.group();\n              let rect;\n              const x = e.pageX - this.gx,\n                y = e.pageY - this.gy;\n              if (x < 0 && y < 0) {\n                rect = this.rectGroup.rect(Math.abs(x), Math.abs(y)).move(x, y);\n              } else if (x < 0 && y > 0) {\n                rect = this.rectGroup.rect(Math.abs(x), Math.abs(y)).move(x, 0);\n              } else if (x > 0 && y < 0) {\n                rect = this.rectGroup.rect(Math.abs(x), Math.abs(y)).move(0, y);\n              } else {\n                rect = this.rectGroup.rect(Math.abs(x), Math.abs(y)).move(0, 0);\n              }\n\n              rect = this.rectGroup.move(this.gx, this.gy);\n              rect.fill(\"rgba(0,0,0,.05)\").stroke({\n                width: 1,\n                color: \"#f06\",\n                dasharray: \"5,5\",\n              });\n            }\n          }\n        }\n      });\n      draw.on(\"mouseleave\", () => {\n        enable = false;\n      });\n      draw.on(\"mousewheel\", handlerMouseWheel);\n      draw.on(\"DOMMouseScroll\", handlerMouseWheel);\n      function handlerMouseWheel(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        //清空点和线\n        clearSelect();\n        draw.attr({ cursor: \"default\" });\n        cos = [];\n\n        const _x = e.pageX - gx,\n          _y = e.pageY - gy;\n\n        const x1 = (_x + mapIns.ORIGINX) / mapIns.SCALE,\n          y1 = (mapIns.ORIGINY - _y) / mapIns.SCALE;\n\n        let step = e.wheelDelta ? e.wheelDelta / 30 : -e.detail * 2;\n        step > 0 ? (step = 10) : (step = -10);\n        mapIns.SCALE += step;\n        if (mapIns.SCALE < 5) {\n          mapIns.SCALE = 5;\n        }\n        // scale 改变后 相对坐标转 _x _y 绝对坐标\n        const x2 = x1 * mapIns.SCALE - mapIns.ORIGINX;\n        const y2 = mapIns.ORIGINY - y1 * mapIns.SCALE;\n        if (x2 !== _x || y2 !== _y) {\n          render();\n          gx -= x2 - _x;\n          gy -= y2 - _y;\n          group.move(gx, gy);\n          codeGroup.move(gx, gy);\n        }\n      }\n\n      document.addEventListener(\"keydown\", (e) => {\n        if (\n          (e.keyCode === 27 || e.key.toUpperCase() === \"ESCAPE\") &&\n          cos.length > 0\n        ) {\n          clearSelect();\n        }\n      });\n\n      function clearSelect() {\n        //清空当前选择\n        cos = [];\n        polyline.plot(cos);\n        line.plot([0, 0, 0, 0]);\n        start.fill(\"transparent\");\n      }\n\n      function addJunctions(ids) {\n        _vm.junctions.push(...ids);\n        //去重\n        _vm.junctions = Array.from(new Set(_vm.junctions));\n        ids.forEach((id) => {\n          _vm.SVGSpots[id]\n            .fill(\"#FFFFFF\")\n            .stroke({\n              width: 2,\n              color: \"#6CA6CD\",\n            })\n            .animate(500)\n            .scale(2)\n            .animate(500)\n            .scale(1);\n        });\n      }\n\n      function rerender(polygon) {\n        if (polygon.length < 4) {\n          return;\n        }\n        //只需要重新渲染有效点\n        let newBlock = [];\n        let keys = [];\n        // _vm.SVGSpots 使用 全局变量 svgSpots 代替会出现？？\n        for (let i in _vm.SVGSpots) {\n          if (\n            inPath(\n              [_vm.SVGSpots[i].x(), _vm.SVGSpots[i].y()],\n              polygon.map((v) => {\n                return [\n                  v[0] * mapIns.SCALE - mapIns.ORIGINX,\n                  mapIns.ORIGINY - v[1] * mapIns.SCALE,\n                ];\n              })\n            )\n          ) {\n            newBlock.push(_vm.SVGSpots[i]);\n            keys.push(Number(i));\n          }\n        }\n        if (keys.length < 1) {\n          return;\n        }\n        console.log(newBlock, keys);\n        if (_vm.typeVal === 1) {\n          //添加 affects 逻辑\n          _vm.affectsIds.push({\n            id: 0,\n            affectsIds: keys,\n          });\n          _vm.affectsIds.forEach((v, index) => {\n            v[\"affectsIds\"].forEach((id) => {\n              _vm.SVGSpots[id]\n                .animate(500)\n                .scale(2)\n                .fill(COLORS[index % COLORS.length])\n                .animate(500)\n                .scale(1);\n            });\n          });\n          // _vm.SVGSpots[bIds[0]].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n          // freeIds.forEach(id => {\n          //     _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[_vm.idKeys.length % COLORS.length]).animate(500).scale(1);\n          // });\n          // _vm.affectsIds.push();\n        } else {\n          //早期 junctions 和 blocks 逻辑\n\n          //首先将点位分类 待配置点 block 和 junctions 主逻辑使用 id\n          let bIds = [],\n            jIds = [],\n            freeIds = [];\n          keys.forEach((k) => {\n            if (_vm.junctions.includes(k)) {\n              jIds.push(k);\n              return;\n            }\n            if (_vm.idKeys.flat(1).includes(k)) {\n              bIds.push(k);\n              return;\n            }\n            freeIds.push(k);\n          });\n          //排列组合的情况共有 3(1种点) + 3(2种点) + 1(包含3种点) 种 抛弃其中的几种\n          let klen = keys.length,\n            blen = bIds.length,\n            jlen = jIds.length,\n            flen = freeIds.length;\n          if (klen === flen) {\n            //全是 待分配点\n            if (flen === 1) {\n              //一个 默认为 junctions连接点\n              addJunctions(freeIds);\n            } else {\n              //多个则默认成 block，新的交管块\n              newBlock.forEach((nb) => {\n                nb.animate(500)\n                  .scale(2)\n                  .fill(COLORS[_vm.idKeys.length % COLORS.length])\n                  .animate(500)\n                  .scale(1);\n              });\n              _vm.idKeys.push(keys);\n            }\n          }\n          if (klen === jlen) {\n            //全是 junctions 点 不执行操作\n          }\n          if (klen === blen) {\n            //全是 block 点 不执行操作 ? 或者合并 block\n            // TODO\n          }\n          // 增加绘制情况：当选中点位为2个及以上交管块共有，则绘制；若是全部包含于丹哥交管块，不绘制\n          if (blen > 0 && jlen === 0) {\n            if (flen === 0) {\n              let num;\n              for (let index = 0; index < _vm.idKeys.length; index++) {\n                const block = _vm.idKeys[index];\n                num = 0;\n                keys.forEach((key) => {\n                  num += block.indexOf(key) > -1 ? 1 : 0;\n                });\n                if (num === blen) return;\n              }\n              if (num === blen) return;\n            }\n            //待配置点 和 block 的组合 =》待配置点全部合并到 ? 几个 block ？\n            // 思考： 如何找出二位数组中的所有包含元素的位置\n            // TODO\n            // if (blen === 1) {\n            //只有一个 bIds 则自动将 freeIds 添加到 block 中\n            // 2020-3-23之前的旧逻辑\n\n            // let pos = find2D(...bIds, _vm.idKeys);\n            // freeIds.forEach(id => {\n            //   _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[pos[0] % COLORS.length]).animate(500).scale(1);\n            // });\n            // _vm.idKeys[pos[0]].push(...freeIds);\n\n            // 2020-3-23后的新逻辑 允许 公共点 存在 颜色默认 黑色\n            //     _vm.SVGSpots[bIds[0]].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n            //     freeIds.forEach(id => {\n            //         _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[_vm.idKeys.length % COLORS.length]).animate(500).scale(1);\n            //     });\n            //     _vm.idKeys.push(freeIds.concat(bIds[0]));\n\n            // } else {\n            // let blockPos = [];\n            // bIds.forEach(id => {\n            //     blockPos.push(find2D(id, _vm.idKeys)[0])\n            // });\n            // 去重\n            // let blockSet = Array.from(new Set(blockPos));\n            // if (blockSet.length === 1) {\n            //bIds 均属于一个 block\n            // 2020-3-23之前的旧逻辑\n            // freeIds.forEach(id => {\n            //     _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[blockSet[0] % COLORS.length]).animate(500).scale(1);\n            // });\n            // _vm.idKeys[blockSet[0]].push(...freeIds);\n\n            // 2020-3-23后的新逻辑 允许 公共点 存在 颜色默认 黑色\n            bIds.forEach((bid) => {\n              _vm.SVGSpots[bid]\n                .animate(500)\n                .scale(2)\n                .fill(\"#333333\")\n                .animate(500)\n                .scale(1);\n            });\n            freeIds.forEach((id) => {\n              _vm.SVGSpots[id]\n                .animate(500)\n                .scale(2)\n                .fill(COLORS[_vm.idKeys.length % COLORS.length])\n                .animate(500)\n                .scale(1);\n            });\n            _vm.idKeys.push(freeIds.concat(...bIds));\n            // _vm.SVGSpots[bIds[0]].animate(500).scale(2).fill('#333333').animate(500).scale(1);\n            // freeIds.forEach(id => {\n            //     _vm.SVGSpots[id].animate(500).scale(2).fill(COLORS[_vm.idKeys.length % COLORS.length]).animate(500).scale(1);\n            // });\n            // _vm.idKeys.push(freeIds.concat(bIds[0]));\n            // } else {\n            //     //bIds 属于多个 block\n            //     _vm.$message({\n            //         type: 'warning',\n            //         message: `${blockSet.map((b) => 'Block' + (b + 1)).join(', ')} 之间禁止合并`\n            //     });\n            // }\n            // }\n          }\n          if (flen > 0 && jlen > 0 && blen === 0) {\n            // 待配置点 和 junctions 的组合 =》待配置点全部转为 junctions\n            addJunctions(freeIds);\n          }\n          if (jlen > 0 && blen > 0 && flen >= 0) {\n            //不存在待配置点 保持现有不变\n          }\n        }\n      }\n      // 绘制路径\n      function drawRoutes() {\n        let d = \"\";\n        // 使用path的方法，只绘制一条折线\n        lines.forEach((l) => {\n          d +=\n            \"M \" +\n            (l.startX * mapIns.SCALE - mapIns.ORIGINX) +\n            \" \" +\n            (mapIns.ORIGINY - l.startY * mapIns.SCALE) +\n            \" L \" +\n            (l.endX * mapIns.SCALE - mapIns.ORIGINX) +\n            \" \" +\n            (mapIns.ORIGINY - l.endY * mapIns.SCALE);\n        });\n        let ele = SVG.get(\"route\");\n        if (ele) ele.remove();\n        group\n          .path(d)\n          .stroke({\n            width: 3,\n            color: \"#5B5B5B\",\n            opacity: 0.5,\n          })\n          .id(\"route\");\n      }\n      // 绘制点位名称\n      function drawSpotCodes() {\n        let fun = () => {\n          spots.forEach((s) => {\n            let _s = new SVGSpot(s);\n            // plain 只允许单行，比text快\n            let c = codeGroup\n              .plain(_s.code + ` (${_s.id}) `)\n              .font({ fill: \"#8F8F8F\", size: 12 });\n            let length = c.length() / 2;\n            c.move(_s.x - length, _s.y - 20);\n            svgSpotsCodes[_s.id] = [c, length];\n            c.off();\n            c.on(\"mouseover\", () => {\n              c.animate(300).attr({ \"font-size\": 15 });\n            })\n              .on(\"mouseout\", () => {\n                c.animate(300).attr({ \"font-size\": 12 });\n              })\n              .on(\"click\", () => {\n                if (!_vm.forbiddenRemove) handleDeleteBlock(_s.id);\n              });\n          });\n        };\n        // 特殊情况下，增加提示语\n        if (spots.length > maxCodeLimit) {\n          _vm.loadingMessage && _vm.loadingMessage.close();\n          _vm.loadingMessage = _vm.$message({\n            type: \"info\",\n            duration: 200000,\n            message: \"正在绘制点位名称中, 请稍后\",\n          });\n          // 为了保证提示语能够展示，不加的话会被卡住显示不了\n          setTimeout(() => {\n            fun();\n            _vm.loadingMessage && _vm.loadingMessage.close();\n          }, 50);\n        } else {\n          fun();\n        }\n      }\n      function render() {\n        // let time = new Date().getTime();\n        drawRoutes();\n        spots.forEach((s) => {\n          let _s = new SVGSpot(s);\n          _vm.SVGSpots[_s.id].move(_s.x - 5, _s.y - 5);\n        });\n        // 特殊情况下，缩放时移除所有点位名称\n        if (spots.length > maxCodeLimit) {\n          if (isCodeShow) {\n            isCodeShow = false;\n            codeGroup.clear();\n          }\n        } else {\n          spots.forEach((s) => {\n            let _s = new SVGSpot(s);\n            let [code, length] = svgSpotsCodes[_s.id];\n            code.move(_s.x - length, _s.y - 20);\n          });\n        }\n        // console.log(new Date().getTime() - time);\n      }\n      // 移除交管块\n      function handleDeleteBlock(id) {\n        let list = [];\n        _vm.idKeys.forEach((item, i) => {\n          if (item.includes(id)) {\n            list.push(\"Block\" + (i + 1));\n          }\n        });\n        if (list.length === 0) return;\n        let msg = `确定移除以下交管块: ${list.join(\", \")}?`;\n        _vm\n          .$confirm(msg, \"提示\", {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\",\n            type: \"warning\",\n          })\n          .then(() => {\n            list.forEach((item, i) => {\n              _vm.deleteBlock(Number(item.slice(5)) - i - 1);\n            });\n          })\n          .catch(() => {});\n      }\n    },\n  },\n\n  mounted() {\n    // if (!this.simpleMode) {\n    this.draw = SVG(\"map-scene\").size(\n      window.innerWidth - 400,\n      window.innerHeight\n    );\n    this.group = this.draw.group();\n    this.codeGroup = this.draw.group();\n    // this.value[1] && this.loadData(this.value[1]);\n    // this.loadData(3);\n    // }\n  },\n  beforeDestroy() {\n    this.loadingMessage && this.loadingMessage.close();\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n#map-scene {\n  position: relative;\n  width: calc(100vw - 400px);\n  height: 100vh;\n  user-select: none;\n  .handle-btns {\n    position: absolute;\n    top: 10px;\n    left: 10px;\n  }\n  .select-box {\n    width: 70px;\n    height: 120px;\n    text-align: center;\n    padding: 10px;\n    border: 1px solid #666666;\n    position: absolute;\n    top: 0;\n    right: 20px;\n    bottom: 0;\n  }\n\n  .active {\n    background: #333333;\n  }\n\n  .tool-box {\n    box-sizing: border-box;\n    position: absolute;\n    top: 0;\n    right: -400px;\n    bottom: 0;\n    color: #737373;\n    text-align: center;\n    width: 400px;\n    min-height: 100vh;\n    padding: 20px 15px 50px 15px;\n    border-radius: 3px;\n    box-shadow: 0 -2px 5px #737373;\n    background-color: #fff;\n    overflow-y: auto;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n\n    .spot-list {\n      margin: 5px 20px;\n      padding: 2px 5px;\n      font-size: 13px;\n      text-align: left;\n      transition: color 0.3s;\n      height: 20px;\n      line-height: 20px;\n\n      &:hover {\n        color: #333333 !important;\n        transition: color 0.3s;\n      }\n    }\n  }\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 1s;\n}\n\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n\n.affect-box {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  .base-spot {\n    min-width: 100px;\n    margin: 0 !important;\n  }\n\n  .affect-spots {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n\n    .affect-line {\n      display: flex;\n      justify-content: space-between;\n      margin: 2px 0;\n\n      .affect-spot {\n        min-width: 100px;\n        margin: 0 !important;\n      }\n\n      .affect-spot-delete {\n        min-width: 50px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7e272bfa&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7e272bfa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7e272bfa\",\n  null\n  \n)\n\nexport default component.exports","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flat');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Topo')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Topo />\n  </div>\n</template>\n\n<script>\n    import Topo from './components/topo'\n\n\n    export default {\n        name: 'trafficEditor',\n        components: {\n            Topo,\n        },\n        data() {\n            return {\n                mode: undefined\n            }\n        },\n        created() {\n            this.mode = this.$route.query.mode;\n        },\n        mounted() {\n\n        }\n    }\n</script>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=22a6fae4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","//地图的大小  缩放比例  相关坐标系的建立\n\nclass MapInstance {\n    constructor(scale, ox, oy, w, h) {\n        this.SCALE = scale;\n        this.ORIGINX = ox * scale;\n        this.ORIGINY = oy * scale;\n        this.WIDTH = w * scale;\n        this.HEIGHT = h * scale;\n        MapInstance.instance = this;\n    }\n\n}\nexport { MapInstance }\n\n","/**\n *\n * @param target 目标id的位置 a0 是 arr 中的索引  a1是元素中的内部索引\n * @param arr  原数组\n * @returns {[number, number]}\n */\nexport default function find2D(target, arr) {\n    //二维数组  元素的子元素互斥的  保证flat后长度不变\n    let list = arr.flat(1);\n    let index = list.findIndex(l => {\n        return l === target\n    });\n    let count = 0;\n    let a0, a1;\n    index++;\n    for (let i = 0; i < arr.length; i++) {\n        count += arr[i].length;\n        if (index <= count) {\n            //首次超过，跳出循环\n            a0 = i;\n            a1 = arr[i].length - (count - index) - 1;\n            break\n        }\n    }\n    return [a0, a1]\n}\n","export default function deepCopy(obj){\n    return JSON.parse(JSON.stringify(obj))\n}\n","const COLORS = [\n    \"#FF8C00\",\n    \"#FF6EB4\",\n    \"#C71585\",\n    \"#FF3030\",\n    \"#CD661D\",\n    \"#9F79EE\",\n    \"#B22222\",\n    \"#9A32CD\",\n    \"#8B4513\",\n    \"#8B0000\",\n    \"#836FFF\",\n    \"#7D26CD\",\n    \"#76EEC6\",\n    \"#8B5F65\",\n    \"#3CB371\",\n    \"#00B2EE\"\n];\nexport default COLORS","'use strict';\nvar global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar bind = require('../internals/function-bind-context');\n\nvar TypeError = global.TypeError;\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg) : false;\n  var element, elementLen;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        elementLen = lengthOfArrayLike(element);\n        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","export * from \"-!../../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7e272bfa&lang=scss&scoped=true&\"","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\ncollection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","export default function inPath(point, vs) {\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n\n    let x = point[0], y = point[1];\n\n    let inside = false;\n    for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n        let xi = vs[i][0], yi = vs[i][1];\n        let xj = vs[j][0], yj = vs[j][1];\n\n        let intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n\n    return inside;\n}\n","const SHAPE = [\n    '',\n    '',\n    '-5,5 3,5 3,3 5,3 5,-3 3,-3 3,-5 -5,-5 -5,5',//充电\n    '-5,-5 5,-5 5,0 3,5 -3,5 -5,0 -5,-5',//休息\n    '-3,-5 3,-5 3,1 5,1 5,5 -5,5 -5,1 -3,1 -3,-5',//码头\n    '-3,5 3,5 3,2 5,2 5,-2 3,-2 3,-5 -3,-5 -3,-2 -5,-2 -5,2 -3,2 -3,5',//辊筒\n]\nconst SHAPENAME = [\n    '',\n    '',\n    '充电桩',\n    '休息点',\n    '码头点',\n    '辊筒点',\n]\nexport { SHAPE,SHAPENAME }\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toIntegerOrInfinity(depthArg));\n    return A;\n  }\n});\n"],"sourceRoot":""}