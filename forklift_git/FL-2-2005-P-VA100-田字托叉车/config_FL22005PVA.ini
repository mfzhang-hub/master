;托盘式无人叉车（田字/川字/九角等兼容）研发项目：导航：视觉slam，兼容激光slam，使用网口版视觉导航相机，主控：MC600系列，对接：M4，避障：蓝海50C-E*2激光避障，S2-max避障相机，碰撞：安全触边+叉尖机械碰撞检测+叉尖单光电，屏幕：7寸安卓，叉臂外宽630，载荷中心600，堆高行程107~210，蓝芯白
[Robot]
;旋转中心前x轴最大距离、旋转中心后x最小距离，左y最大距离，由y最大距离——常规运行状态下尺寸
shape=1.283 0.43 0.473 0.473 0.09
enhance_front_back=0.1
enhance_left_right=0.1
empty_enhance_front_back=0.1
empty_enhance_left_right=0.1
map_hot_update=true

#叉车异型尺寸
[RobotType1]
robot_points=

[Comm2]
host=any
mode=2
pattern=2
port=65002
protocol=2
type=1

[Ability]
open_slip_reset=true

[Driver1]
baundRate=1000000
initParams="@0=12,@1A=2,@16=1026,@17=0,@3F=256,@40=0"
portCode=control
portName=/dev/ttyS6
protocol=main

[Laser1]
effectiveAngle=270
max_angle=135
min_angle=-135
angle_step=0.18
for_localization=false
isMirror=true
location=4
max_range=10
name=192.168.100.104
port=6668
protocol="LDS-50C-E"

[Laser2]
effectiveAngle=270
max_angle=135
min_angle=-135
angle_step=0.18
for_localization=false
isMirror=true
location=7
max_range=10
name=192.168.100.107
port=6668
protocol="LDS-50C-E"

[Localization]
min_dist_filter_thres=0.02
reflector_laser_location=-1
reflector_loc_flag=false
reflector_mode=1
get_center_mode=1
max_range=2.5
min_range=0.3
min_intensity=500
intensity_thres_percent=0.7
abnormal_intensity_thres=1300
plate_length=0.1
circular_radius=0.025
min_dist=0.3
diff_range_thres=0.025
reflector_max_width_thres=0.0625
reflector_min_width_thres=-1
filter_point_num_min_percent=0.6
filter_point_num_max_percent=1.3
reflector_icp_residual=0.000225
max_num=2
min_num=2
enough_point_num_thres=3
filter_by_max_intensity=false
use_reflector_region_origin=false
invalid_qr_type=
process_thres_dist=0.1
process_thres_angle=3
#是否是视觉导航，视觉改为vision，激光改为laser
loc_type=vision
lose_qr_dist_thres=3
abnormal_cnt_thres=15
abnormal_diff_angle_thres=2
abnormal_diff_dist_thres=0.025
backnormal_cnt_thres=15
change_rate=0.4
cloud_select_cnt=1
cloud_select_step=2
coarse_match_diff=0.05
consist_thres=0.1
dist_thres=0.05
double_laser_delta_angle=1.05
double_laser_delta_dist=0.03
filter_dist=10
filter_width=1.2
frame_buffer_size=50
free_map_range=15
icp_diff=0.05
initial_laser_odom_weight_thres=1.5
initial_local_map_frame_cnt=2
laser_odom_angle=3
laser_odom_dist=0.15
laser_odom_noise_angle=0.4
laser_odom_noise_dist=0.2
local_map_size=70
max_angle_icp_diff=10
max_dist_icp_diff=0.12
max_keep_len=3
max_map_range=25
max_motion_angle_odom=20
max_motion_dist_odom=0.5
max_neighbor_dist=2
max_residual=0.05
max_use_range=30
merge_dist=3
min_inlier_cnt=20
min_inlier_ratio=0.2
min_keep_len=0.08
min_map_range=0.3
min_multiposes_weight=0.25
min_noise_icp_dist=0.03
min_noise_icp_fail_dist=0.05
min_noise_icp_fail_theta=1.5
min_noise_icp_theta=0.75
min_particle_num=30
min_seg_num=2
min_seg_variety=20
min_split_point=5
min_use_range=0.3
mode=0
motion_noise_angle=0.8
motion_noise_dist=0.4
motion_update_angle=0.001
motion_update_dist=0.001
out_video=0
out_video_laser_odom=0
out_video_segs=0
points_per_scan=1000
seg_weight_thres=0.9
skip_coarse_weight=0.6
skip_pose_optimize=1.5
static_grid_thres=0.0001
trust_weight_global=0.4
update_local_map_dist=10
use_perspective=0
vision_enable=1
#视觉导航true，激光导航false
vision_only=true
y_noise_scale=1.5

[Navigation]
control_fps=20
max_acc_acc_vx=0.5
max_acc_vx=1.5
route_change_acc=0.5
dist_limit_acc=0.2
arrive_dist_limit_acc=0.1
use_load_base_theta=false
theta_speed_mode=0
dist_speed_mode=0
add_safe_dist_shape=0.1
add_safe_dist_robot=0.1
add_safe_dist_shape_turn=0.05
add_safe_dist_robot_turn=0.05
route_shape_mode=1
save_safe_video=false
max_vx=1.0
load_vx_k=1.0
max_w=20
load_w_k=1.0
arrive_theta=1.0
ctrl_lqr_qy=35
ctrl_lqr_qtheta=35
ctrl_lqr_u=30
follow_path_limit_dist=0.5

[DockCtrl]
ctrl_lqr_qy=50
ctrl_lqr_qtheta=10
ctrl_lqr_u=10
max_w=20
load_w_k=1.0
arrive_dist=0.009
arrive_theta=1.0

[Slam]
static_grid_thres=0.7
LoopNearCnt=60
LoopNearDist=11
MaxPoseAngleDiff=160
MaxPoseDist=3.6
MaxPoseXY=1.1
MaxPoseXYDistWithAngleDiff=0.5
MaxSearchRange=2
MinWeight=0.15
PoseDistCnt=150
SearchRangeFactor=0.016
StepLoop=20
laser_angle_step=0.54
laser_data_num=1200
laser_min_angle=0

[ForkLift]
skip_prepare=false
holdon_height=100
empty_holdon_height=0
;500激光对接; 506视觉对接
low_load_dock_type=506

[depthcamera1]
camera_type=LxTof
depth_fps=15
depth_height=270
depth_width=480
h_fov=87
id=192.168.100.81:9600
ignore_cols=0
ignore_rows=0
img_step=1
location=-1
port_name=
range_max=2.5
range_min=0.1
read_depth=0
read_rgb=1
record_interval=-1
rgb_fps=15
rgb_height=480
rgb_width=640
v_fov=58
width_boundary=3
x_max=3
x_min=0
z_max=1.9
z_min=-1
data_x_reverse=0
data_y_reverse=0
#空载、负载时，避障相机高度变化，仅中智运地牛true
is_height_change=false
is_motion_artifact=true
param_path=../params/eagle_param/
filter1=median 1
filter2=mode 50 8
filter3=floodfill 0.02 50 50
filter4=rmFlyPix 1 0.04 0.02
filter5=ampfilter 100 1650
filter6=overexposurefilter 10 1800

;对接相机M4+RGB
[depthcamera2]
camera_type=M4Pro
port_name=192.168.100.82
location=-2
work_mode=1

;导航相机-LXPS-V1640-68E-850A
[camera0]
location=9
camera_type=3
distortion_correction=false
exp_set=5
for_localization=true
frame=8
id=10
ip=192.168.100.89
ori_height=1024
ori_width=1280
port=
rect_height=1024
rect_width=1280
resize_height=1024
resize_width=1280
show=false

[LaserDockCharge]
extends=laser_dock0 laser_detector0
type=0

[LaserDockLowLoad]
extends=laser_dock1 laser_detector1
type=1

[laser_dock0]
is_stop_obstacle=true
is_save_stop_video=true
stop_dist=0.3
stop_theta=10
max_time=120
begin_qr_detect_dist=-1
init_rotate_theta_thres=1
over_theta=0.2
last_straight_dist=0.4
charge_head_pose=-0.225 0 0
final_check_dist=0.1
final_check_theta=10
last_blind_dist=0.3
arrive_sensor=charge
arrive_sensor_check=false
straight_line_dist=0.2
bezier_diff=0.01
safe_adjust_location=
over_dist=0.005
vx_k=1.4
acc_vx=0.2
max_vx=0.2
adj_vx=0.02
w_k=0.8
acc_w=20
max_w=20
preview_dist=0.15
blind_init_pose_use_smooth_pose=false
change_stop_shape=

[laser_detector0]
filter_y_thres=-1
min_intensity_thres=-1
detector_laser_location=7
filter_add_dist=0.15
#车体加长，有效距离加长
range_filter_thres=4.5
use_clustering_filter=0
cluster_tolerance=0.02
min_cluster_size=1
max_cluster_size=18
#车体加长，model_pose加长
model_pose=2.25 0 0
w=3
sigma=0.03
grid_size=0.01
map_x_max=2
map_x_min=-2
map_y_max=0.6
map_y_min=-0.6
negative_value=-0.02
reverse_weight_thres=0.8
weight_thres=0.5
icp_residual_thres=0.01
xy_step_1=0.01
xy_range_1=0.2
theta_step_1=1
theta_range_1=15
xy_step_2=0.01
xy_range_2=0.08
theta_step_2=1
theta_range_2=6
skip_icp=1
model_name=
models="[{\"model_type\": 5, \"model_size\": [0.3, 0.14, 0, 135]}]"

[laser_dock1]
is_stop_obstacle=true
is_save_stop_video=true
stop_dist=0.3
stop_theta=10
max_time=60
begin_qr_detect_dist=-1
init_rotate_theta_thres=1
over_theta=1.5
last_straight_dist=-1
charge_head_pose=0 0 0
final_check_dist=0.02
final_check_theta=2
last_blind_dist=0.3
arrive_sensor=pallet
arrive_sensor_check=false
straight_line_dist=0.3
bezier_diff=0.01
safe_adjust_location=
over_dist=0.005
vx_k=2.5
acc_vx=0.2
max_vx=0.3
adj_vx=0.02
w_k=2.5
acc_w=50
max_w=50
preview_dist=0.15
blind_init_pose_use_smooth_pose=false
change_stop_shape=

[laser_detector1]
min_intensity_thres=-1
detector_laser_location=8
filter_add_dist=0.15
range_filter_thres=3
use_clustering_filter=0
cluster_tolerance=0.02
min_cluster_size=1
max_cluster_size=18
model_pose=0.05 0 180
w=3
sigma=0.03
grid_size=0.01
map_x_max=2
map_x_min=-2
map_y_max=2
map_y_min=-2
negative_value=-0.02
reverse_weight_thres=0.4
weight_thres=0.5
icp_residual_thres=0.01
xy_step_1=0.01
xy_range_1=0.2
theta_step_1=1
theta_range_1=15
xy_step_2=0.01
xy_range_2=0.08
theta_step_2=1
theta_range_2=6
skip_icp=1
model_name=../params/model/pallet_transverse.model
models=

[CloudProcessor1]
location=-1
seg_aboveground=0.075
stop_height_for_unload=1.5
stop_height_for_load=1.5

[DefaultTask]
materialMonitor=true

